{"file_contents":{"src/app/dashboard/profile/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  User, \n  Mail, \n  Phone, \n  MapPin, \n  Building2, \n  Edit, \n  Save, \n  X, \n  Shield, \n  Star, \n  TrendingUp, \n  Award, \n  CheckCircle, \n  AlertCircle,\n  Clock,\n  Target,\n  BarChart3\n} from 'lucide-react'\n\ninterface UserProfile {\n  id: string\n  contactPerson: string\n  email: string\n  phone: string\n  companyName: string\n  postalCode: string\n  address: string\n  userType: string\n  createdAt: string\n  creditScore?: number\n  rating?: number\n  totalShipments?: number\n  completedShipments?: number\n  reliabilityScore?: number\n  responseTime?: number\n  specialties?: string[]\n  achievements?: string[]\n  riskFactors?: string[]\n}\n\ninterface CreditScoreBreakdown {\n  paymentHistory: number\n  transactionVolume: number\n  responseTime: number\n  completionRate: number\n  userFeedback: number\n  accountAge: number\n}\n\nexport default function ProfilePage() {\n  const [user, setUser] = useState<UserProfile | null>(null)\n  const [editing, setEditing] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [formData, setFormData] = useState({\n    contactPerson: '',\n    email: '',\n    phone: '',\n    companyName: '',\n    postalCode: '',\n    address: ''\n  })\n\n  useEffect(() => {\n    loadUserProfile()\n  }, [])\n\n  const loadUserProfile = () => {\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      const userProfile = JSON.parse(userData)\n      // ä¿¡ç”¨ã‚¹ã‚³ã‚¢é–¢é€£ã®ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ï¼ˆå®Ÿéš›ã®ã‚¢ãƒ—ãƒªã§ã¯APIã‹ã‚‰å–å¾—ï¼‰\n      const enhancedProfile = {\n        ...userProfile,\n        creditScore: userProfile.creditScore || 85,\n        rating: userProfile.rating || 4.2,\n        totalShipments: userProfile.totalShipments || 45,\n        completedShipments: userProfile.completedShipments || 42,\n        reliabilityScore: userProfile.reliabilityScore || 88,\n        responseTime: userProfile.responseTime || 25,\n        specialties: userProfile.specialties || ['ä¸€èˆ¬è²¨ç‰©', 'é–¢æ±åœ', 'æ€¥ä¾¿å¯¾å¿œ'],\n        achievements: userProfile.achievements || ['æ–°è¦ç™»éŒ²', 'åˆå›å–å¼•å®Œäº†', '5ä»¶å–å¼•é”æˆ'],\n        riskFactors: userProfile.riskFactors || []\n      }\n      setUser(enhancedProfile)\n      setFormData({\n        contactPerson: userProfile.contactPerson || '',\n        email: userProfile.email || '',\n        phone: userProfile.phone || '',\n        companyName: userProfile.companyName || '',\n        postalCode: userProfile.postalCode || '',\n        address: userProfile.address || ''\n      })\n    }\n    setLoading(false)\n  }\n\n  const handleEdit = () => {\n    setEditing(true)\n  }\n\n  const handleCancel = () => {\n    setEditing(false)\n    loadUserProfile()\n  }\n\n  const handleSave = async () => {\n    try {\n      // ã“ã“ã§APIã‚’å‘¼ã³å‡ºã—ã¦ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’æ›´æ–°\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/user/profile', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(formData)\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to update profile')\n      }\n\n      const updatedUser = { ...user, ...formData }\n      setUser(updatedUser as UserProfile)\n      localStorage.setItem('user', JSON.stringify(updatedUser))\n      setEditing(false)\n    } catch (error) {\n      console.error('Error updating profile:', error)\n      alert('ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }))\n  }\n\n  const getCreditScoreColor = (score: number) => {\n    if (score >= 90) return 'text-green-600 bg-green-100'\n    if (score >= 80) return 'text-blue-600 bg-blue-100'\n    if (score >= 70) return 'text-yellow-600 bg-yellow-100'\n    return 'text-red-600 bg-red-100'\n  }\n\n  const getCreditScoreLevel = (score: number) => {\n    if (score >= 90) return 'å„ªç§€'\n    if (score >= 80) return 'è‰¯å¥½'\n    if (score >= 70) return 'æ™®é€š'\n    return 'è¦æ”¹å–„'\n  }\n\n  const getCreditScoreBreakdown = (): CreditScoreBreakdown => {\n    return {\n      paymentHistory: 95,\n      transactionVolume: 80,\n      responseTime: 75,\n      completionRate: 93,\n      userFeedback: 88,\n      accountAge: 70\n    }\n  }\n\n  const renderStars = (rating: number) => {\n    return Array.from({ length: 5 }, (_, i) => (\n      <Star\n        key={i}\n        className={`h-4 w-4 ${\n          i < Math.floor(rating) ? 'text-yellow-400 fill-current' : 'text-gray-300'\n        }`}\n      />\n    ))\n  }\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-gray-600 text-lg\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h1>\n            <p className=\"text-gray-600\">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã‚’ç®¡ç†ã§ãã¾ã™</p>\n          </div>\n          <div className=\"flex space-x-2\">\n            {editing ? (\n              <>\n                <button\n                  onClick={handleSave}\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n                >\n                  <Save className=\"h-4 w-4\" />\n                  <span>ä¿å­˜</span>\n                </button>\n                <button\n                  onClick={handleCancel}\n                  className=\"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 flex items-center space-x-2\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  <span>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</span>\n                </button>\n              </>\n            ) : (\n              <button\n                onClick={handleEdit}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n              >\n                <Edit className=\"h-4 w-4\" />\n                <span>ç·¨é›†</span>\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚«ãƒ¼ãƒ‰ */}\n        <div className=\"lg:col-span-1\">\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <div className=\"text-center\">\n              <div className=\"w-24 h-24 bg-gray-300 rounded-full flex items-center justify-center mx-auto mb-4\">\n                <User className=\"h-12 w-12 text-gray-600\" />\n              </div>\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\n                {user?.contactPerson}\n              </h2>\n              <p className=\"text-gray-600 mb-4\">{user?.companyName}</p>\n              <div className=\"text-sm text-gray-500\">\n                <p>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç¨®åˆ¥: {user?.userType === 'SHIPPER' ? 'è·ä¸»' : 'é‹é€ä¼šç¤¾'}</p>\n                <p>ç™»éŒ²æ—¥: {user?.createdAt ? new Date(user.createdAt).toLocaleDateString('ja-JP') : '-'}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* ä¿¡ç”¨ã‚¹ã‚³ã‚¢ã‚«ãƒ¼ãƒ‰ */}\n          <div className=\"bg-white rounded-lg shadow-sm border p-6 mt-6\">\n            <div className=\"text-center\">\n              <div className=\"flex items-center justify-center mb-4\">\n                <Shield className=\"h-6 w-6 text-blue-600 mr-2\" />\n                <h3 className=\"text-lg font-semibold text-gray-900\">ä¿¡ç”¨ã‚¹ã‚³ã‚¢</h3>\n              </div>\n              \n              <div className=\"mb-4\">\n                <div className={`inline-flex items-center px-4 py-2 rounded-full text-lg font-bold ${getCreditScoreColor(user?.creditScore || 0)}`}>\n                  {user?.creditScore}ç‚¹\n                </div>\n                <p className=\"text-sm text-gray-600 mt-2\">\n                  ãƒ¬ãƒ™ãƒ«: {getCreditScoreLevel(user?.creditScore || 0)}\n                </p>\n              </div>\n\n              {/* è©•ä¾¡ */}\n              <div className=\"mb-4\">\n                <div className=\"flex items-center justify-center mb-2\">\n                  {renderStars(user?.rating || 0)}\n                  <span className=\"ml-2 text-sm text-gray-600\">({user?.rating})</span>\n                </div>\n                <p className=\"text-sm text-gray-600\">ãƒ¦ãƒ¼ã‚¶ãƒ¼è©•ä¾¡</p>\n              </div>\n\n              {/* å®Ÿç¸¾ */}\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                <div>\n                  <p className=\"text-gray-600\">å–å¼•å®Ÿç¸¾</p>\n                  <p className=\"font-semibold text-gray-900\">\n                    {user?.completedShipments}/{user?.totalShipments}ä»¶\n                  </p>\n                </div>\n                <div>\n                  <p className=\"text-gray-600\">ä¿¡é ¼æ€§</p>\n                  <p className=\"font-semibold text-gray-900\">{user?.reliabilityScore}%</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* å°‚é–€åˆ†é‡ãƒ»å®Ÿç¸¾ */}\n          <div className=\"bg-white rounded-lg shadow-sm border p-6 mt-6\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n              <Award className=\"h-5 w-5 mr-2\" />\n              å°‚é–€åˆ†é‡ãƒ»å®Ÿç¸¾\n            </h3>\n            \n            <div className=\"space-y-4\">\n              <div>\n                <p className=\"text-sm font-medium text-gray-700 mb-2\">å°‚é–€åˆ†é‡</p>\n                <div className=\"flex flex-wrap gap-1\">\n                  {user?.specialties?.map((specialty, idx) => (\n                    <span key={idx} className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                      {specialty}\n                    </span>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <p className=\"text-sm font-medium text-gray-700 mb-2\">å®Ÿç¸¾ãƒãƒƒã‚¸</p>\n                <div className=\"flex flex-wrap gap-1\">\n                  {user?.achievements?.map((achievement, idx) => (\n                    <span key={idx} className=\"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full flex items-center\">\n                      <CheckCircle className=\"h-3 w-3 mr-1\" />\n                      {achievement}\n                    </span>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* è©³ç´°æƒ…å ± */}\n        <div className=\"lg:col-span-2\">\n          {/* ä¿¡ç”¨ã‚¹ã‚³ã‚¢è©³ç´°åˆ†æ */}\n          <div className=\"bg-white rounded-lg shadow-sm border mb-6\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n                <BarChart3 className=\"h-5 w-5 mr-2\" />\n                ä¿¡ç”¨ã‚¹ã‚³ã‚¢è©³ç´°åˆ†æ\n              </h3>\n            </div>\n            \n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {(() => {\n                  const breakdown = getCreditScoreBreakdown()\n                  return Object.entries(breakdown).map(([key, value]) => {\n                    const labels = {\n                      paymentHistory: 'æ”¯æ‰•ã„å±¥æ­´',\n                      transactionVolume: 'å–å¼•é‡',\n                      responseTime: 'ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“',\n                      completionRate: 'å®Œäº†ç‡',\n                      userFeedback: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯',\n                      accountAge: 'ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå¹´æ•°'\n                    }\n                    return (\n                      <div key={key} className=\"space-y-2\">\n                        <div className=\"flex justify-between items-center\">\n                          <span className=\"text-sm font-medium text-gray-700\">{labels[key as keyof typeof labels]}</span>\n                          <span className=\"text-sm font-semibold text-gray-900\">{value}ç‚¹</span>\n                        </div>\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                          <div \n                            className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                            style={{ width: `${value}%` }}\n                          ></div>\n                        </div>\n                      </div>\n                    )\n                  })\n                })()}\n              </div>\n              \n              <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\n                <h4 className=\"font-semibold text-gray-800 mb-2 flex items-center\">\n                  <TrendingUp className=\"h-4 w-4 mr-2\" />\n                  ã‚¹ã‚³ã‚¢å‘ä¸Šã®ãƒ’ãƒ³ãƒˆ\n                </h4>\n                <ul className=\"text-sm text-gray-700 space-y-1\">\n                  <li>â€¢ è¿…é€Ÿãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§å–å¼•ç›¸æ‰‹ã®ä¿¡é ¼ã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†</li>\n                  <li>â€¢ å®šæœŸçš„ãªå–å¼•ã§å–å¼•é‡ã‚’å¢—ã‚„ã—ã¾ã—ã‚‡ã†</li>\n                  <li>â€¢ é«˜å“è³ªãªã‚µãƒ¼ãƒ“ã‚¹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼è©•ä¾¡ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†</li>\n                  <li>â€¢ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’å……å®Ÿã•ã›ã¦ä¿¡é ¼æ€§ã‚’é«˜ã‚ã¾ã—ã‚‡ã†</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h3 className=\"text-lg font-semibold text-gray-900\">åŸºæœ¬æƒ…å ±</h3>\n            </div>\n            \n            <div className=\"p-6 space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <User className=\"h-4 w-4 inline mr-2\" />\n                    æ‹…å½“è€…å\n                  </label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.contactPerson}\n                      onChange={(e) => handleInputChange('contactPerson', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.contactPerson}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Mail className=\"h-4 w-4 inline mr-2\" />\n                    ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹\n                  </label>\n                  {editing ? (\n                    <input\n                      type=\"email\"\n                      value={formData.email}\n                      onChange={(e) => handleInputChange('email', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.email}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Phone className=\"h-4 w-4 inline mr-2\" />\n                    é›»è©±ç•ªå·\n                  </label>\n                  {editing ? (\n                    <input\n                      type=\"tel\"\n                      value={formData.phone}\n                      onChange={(e) => handleInputChange('phone', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.phone}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Building2 className=\"h-4 w-4 inline mr-2\" />\n                    ä¼šç¤¾å\n                  </label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.companyName}\n                      onChange={(e) => handleInputChange('companyName', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.companyName}</p>\n                  )}\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <MapPin className=\"h-4 w-4 inline mr-2\" />\n                  éƒµä¾¿ç•ªå·\n                </label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.postalCode}\n                    onChange={(e) => handleInputChange('postalCode', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ä¾‹: 123-4567\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{user?.postalCode || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <MapPin className=\"h-4 w-4 inline mr-2\" />\n                  ä½æ‰€\n                </label>\n                {editing ? (\n                  <textarea\n                    value={formData.address}\n                    onChange={(e) => handleInputChange('address', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    rows={3}\n                    placeholder=\"ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{user?.address || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":18618},"src/lib/prisma.ts":{"content":"import { PrismaClient } from '@prisma/client'\n\nconst globalForPrisma = global as unknown as { prisma: PrismaClient }\n\nexport const prisma =\n  globalForPrisma.prisma ||\n  new PrismaClient({\n    log: ['query', 'error', 'warn'],\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n\nexport default prisma\n\n","size_bytes":331},"src/app/api/shipments/search/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url)\n    \n    // æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—\n    const query = searchParams.get('q') || ''\n    const pickupPrefecture = searchParams.get('pickupPrefecture') || ''\n    const deliveryPrefecture = searchParams.get('deliveryPrefecture') || ''\n    const vehicleType = searchParams.get('vehicleType') || ''\n    const status = searchParams.get('status') || ''\n    const page = parseInt(searchParams.get('page') || '1')\n    const limit = parseInt(searchParams.get('limit') || '20')\n    const offset = (page - 1) * limit\n\n    // æ¤œç´¢æ¡ä»¶ã‚’æ§‹ç¯‰\n    const where: any = {}\n\n    // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ï¼ˆè·ç‰©åã€èª¬æ˜ã€ä½æ‰€ãªã©ï¼‰\n    if (query) {\n      where.OR = [\n        { cargoName: { contains: query, mode: 'insensitive' } },\n        { cargoDescription: { contains: query, mode: 'insensitive' } },\n        { pickupAddress: { contains: query, mode: 'insensitive' } },\n        { deliveryAddress: { contains: query, mode: 'insensitive' } },\n        { pickupCity: { contains: query, mode: 'insensitive' } },\n        { deliveryCity: { contains: query, mode: 'insensitive' } }\n      ]\n    }\n\n    // å‡ºç™ºåœ°éƒ½é“åºœçœŒ\n    if (pickupPrefecture) {\n      where.pickupPrefecture = pickupPrefecture\n    }\n\n    // åˆ°ç€åœ°éƒ½é“åºœçœŒ\n    if (deliveryPrefecture) {\n      where.deliveryPrefecture = deliveryPrefecture\n    }\n\n    // è»Šä¸¡ã‚¿ã‚¤ãƒ—\n    if (vehicleType) {\n      where.requiredVehicleType = vehicleType\n    }\n\n    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n    if (status) {\n      where.status = status\n    }\n\n    // è·ç‰©ã‚’æ¤œç´¢\n    const [shipments, totalCount] = await Promise.all([\n      prisma.shipment.findMany({\n        where,\n        include: {\n          shipper: {\n            select: {\n              id: true,\n              companyName: true,\n              contactPerson: true,\n              phone: true,\n              email: true\n            }\n          }\n        },\n        orderBy: { createdAt: 'desc' },\n        skip: offset,\n        take: limit\n      }),\n      prisma.shipment.count({ where })\n    ])\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        shipments,\n        pagination: {\n          page,\n          limit,\n          totalCount,\n          totalPages: Math.ceil(totalCount / limit)\n        }\n      }\n    })\n  } catch (error) {\n    console.error('Error searching shipments:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to search shipments' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":2695},"src/hooks/useStats.ts":{"content":"import { useState, useEffect } from 'react'\n\nexport const useStats = () => {\n  const [stats, setStats] = useState({ shipmentCount: 0, vehicleCount: 0 })\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    loadStats()\n  }, [])\n\n  const loadStats = async () => {\n    try {\n      const response = await fetch('/api/stats')\n      if (!response.ok) throw new Error('Failed to load stats')\n      \n      const data = await response.json()\n      setStats(data.data)\n    } catch (error) {\n      console.error('Error loading stats:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return { stats, loading, refetch: loadStats }\n}\n","size_bytes":652},"tailwind.config.js":{"content":"/** @type {import('tailwindcss').Config} */\nmodule.exports = {\n  content: [\n    './src/pages/**/*.{js,ts,jsx,tsx,mdx}',\n    './src/components/**/*.{js,ts,jsx,tsx,mdx}',\n    './src/app/**/*.{js,ts,jsx,tsx,mdx}',\n  ],\n  theme: {\n    extend: {\n      colors: {\n        primary: {\n          50: '#f0f9ff',\n          100: '#e0f2fe',\n          200: '#bae6fd',\n          300: '#7dd3fc',\n          400: '#38bdf8',\n          500: '#0ea5e9',\n          600: '#0284c7',\n          700: '#0369a1',\n          800: '#075985',\n          900: '#0c4a6e',\n        },\n      },\n      backgroundImage: {\n        'gradient-blue': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\n        'gradient-ocean': 'linear-gradient(to right, #2E3192, #1BFFFF)',\n        'gradient-sky': 'linear-gradient(to bottom right, #E0F7FF, #FFFFFF)',\n      },\n    },\n  },\n  plugins: [],\n}\n\n","size_bytes":848},"src/app/api/offers/route.ts":{"content":"import { NextRequest } from 'next/server'\nexport const dynamic = 'force-dynamic'\nimport { getUserFromRequest } from '@/lib/auth'\nimport { createOfferSchema } from '@/lib/validators'\nimport {\n  successResponse,\n  errorResponse,\n  unauthorizedResponse,\n  forbiddenResponse,\n  notFoundResponse,\n} from '@/lib/api-response'\nimport prisma from '@/lib/prisma'\n\n// ã‚ªãƒ•ã‚¡ãƒ¼ä¸€è¦§å–å¾—\nexport async function GET(request: NextRequest) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    const { searchParams } = new URL(request.url)\n    const shipmentId = searchParams.get('shipmentId')\n    \n    const where: any = {}\n    \n    // é‹é€ä¼šç¤¾ã®å ´åˆã¯è‡ªåˆ†ã®ã‚ªãƒ•ã‚¡ãƒ¼ã®ã¿è¡¨ç¤º\n    if (user.userType === 'CARRIER') {\n      where.carrierId = user.userId\n    }\n    \n    // ç‰¹å®šã®é…é€æ¡ˆä»¶ã®ã‚ªãƒ•ã‚¡ãƒ¼ã‚’å–å¾—\n    if (shipmentId) {\n      where.shipmentId = shipmentId\n    }\n    \n    const offers = await prisma.offer.findMany({\n      where,\n      include: {\n        shipment: {\n          include: {\n            shipper: {\n              select: {\n                id: true,\n                companyName: true,\n                contactPerson: true,\n              },\n            },\n          },\n        },\n        carrier: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n            phone: true,\n          },\n        },\n      },\n      orderBy: {\n        createdAt: 'desc',\n      },\n    })\n    \n    return successResponse(offers)\n  } catch (error) {\n    console.error('Get offers error:', error)\n    return errorResponse('ã‚ªãƒ•ã‚¡ãƒ¼ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n// ã‚ªãƒ•ã‚¡ãƒ¼ä½œæˆ\nexport async function POST(request: NextRequest) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    // é‹é€ä¼šç¤¾ã®ã¿ä½œæˆå¯èƒ½\n    if (user.userType !== 'CARRIER') {\n      return forbiddenResponse('é‹é€ä¼šç¤¾ã®ã¿ãŒã‚ªãƒ•ã‚¡ãƒ¼ã‚’ä½œæˆã§ãã¾ã™')\n    }\n    \n    const body = await request.json()\n    \n    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n    const validatedData = createOfferSchema.parse(body)\n    \n    // é…é€æ¡ˆä»¶ã®å­˜åœ¨ç¢ºèª\n    const shipment = await prisma.shipment.findUnique({\n      where: { id: validatedData.shipmentId },\n    })\n    \n    if (!shipment) {\n      return notFoundResponse('é…é€æ¡ˆä»¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')\n    }\n    \n    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒã‚§ãƒƒã‚¯\n    if (shipment.status !== 'OPEN') {\n      return errorResponse('ã“ã®é…é€æ¡ˆä»¶ã¯æ—¢ã«å‹Ÿé›†ãŒçµ‚äº†ã—ã¦ã„ã¾ã™')\n    }\n    \n    // é‡è¤‡ã‚ªãƒ•ã‚¡ãƒ¼ãƒã‚§ãƒƒã‚¯\n    const existingOffer = await prisma.offer.findFirst({\n      where: {\n        shipmentId: validatedData.shipmentId,\n        carrierId: user.userId,\n      },\n    })\n    \n    if (existingOffer) {\n      return errorResponse('æ—¢ã«ã“ã®é…é€æ¡ˆä»¶ã«ã‚ªãƒ•ã‚¡ãƒ¼ã‚’é€ä¿¡ã—ã¦ã„ã¾ã™')\n    }\n    \n    // ã‚ªãƒ•ã‚¡ãƒ¼ä½œæˆ\n    const offer = await prisma.offer.create({\n      data: {\n        shipmentId: validatedData.shipmentId,\n        carrierId: user.userId,\n        proposedPrice: validatedData.proposedPrice,\n        message: validatedData.message,\n        vehicleInfo: validatedData.vehicleInfo,\n        estimatedPickupTime: validatedData.estimatedPickupTime,\n        estimatedDeliveryTime: validatedData.estimatedDeliveryTime,\n      },\n      include: {\n        carrier: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n            phone: true,\n          },\n        },\n        shipment: {\n          select: {\n            id: true,\n            cargoName: true,\n            pickupPrefecture: true,\n            deliveryPrefecture: true,\n          },\n        },\n      },\n    })\n    \n    return successResponse(offer, 201)\n  } catch (error: any) {\n    if (error.name === 'ZodError') {\n      return errorResponse(error.errors[0].message)\n    }\n    console.error('Create offer error:', error)\n    return errorResponse('ã‚ªãƒ•ã‚¡ãƒ¼ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n","size_bytes":4125},"src/app/dashboard/saved-shipments/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { Bookmark, Package, MapPin, Calendar, Weight, Truck, DollarSign, Building2, User, Phone } from 'lucide-react'\n\nexport default function SavedShipmentsPage() {\n  const [savedShipments, setSavedShipments] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    loadSavedShipments()\n  }, [])\n\n  const loadSavedShipments = async () => {\n    setLoading(true)\n    try {\n      const savedIds = JSON.parse(localStorage.getItem('savedShipments') || '[]')\n      if (savedIds.length === 0) {\n        setSavedShipments([])\n        return\n      }\n\n      // ä¿å­˜ã•ã‚ŒãŸè·ç‰©ã®è©³ç´°ã‚’å–å¾—\n      const response = await fetch('/api/shipments/details', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({ ids: savedIds })\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch saved shipment details')\n      }\n\n      const result = await response.json()\n      setSavedShipments(result.data)\n    } catch (error) {\n      console.error('Error loading saved shipments:', error)\n      // ç„¡åŠ¹ãªä¿å­˜IDã‚’ã‚¯ãƒªã‚¢\n      localStorage.removeItem('savedShipments')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleRemoveSaved = (shipmentId: string) => {\n    setSavedShipments(prev => prev.filter(s => s.id !== shipmentId))\n    const updatedSavedIds = JSON.parse(localStorage.getItem('savedShipments') || '[]')\n      .filter((id: string) => id !== shipmentId)\n    localStorage.setItem('savedShipments', JSON.stringify(updatedSavedIds))\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'OPEN': return 'bg-blue-100 text-blue-800'\n      case 'MATCHED': return 'bg-green-100 text-green-800'\n      case 'IN_TRANSIT': return 'bg-yellow-100 text-yellow-800'\n      case 'DELIVERED': return 'bg-gray-100 text-gray-800'\n      case 'CANCELLED': return 'bg-red-100 text-red-800'\n      default: return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">ä¿å­˜ã—ãŸè·ç‰©</h1>\n        <p className=\"text-gray-600\">ãŠæ°—ã«å…¥ã‚Šã«ä¿å­˜ã—ãŸè·ç‰©ã®ä¸€è¦§ã§ã™</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">ä¿å­˜ã—ãŸè·ç‰©ä¸€è¦§</h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : savedShipments.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <Bookmark className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>ä¿å­˜ã—ãŸè·ç‰©ã¯ã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {savedShipments.map(shipment => (\n              <div key={shipment.id} className=\"p-6 hover:bg-gray-50\">\n                <div className=\"flex justify-between items-start mb-2\">\n                  <h3 className=\"text-lg font-bold text-blue-700\">{shipment.cargoName}</h3>\n                  <div className=\"flex items-center space-x-2\">\n                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(shipment.status)}`}>\n                      {shipment.status === 'OPEN' && 'å‹Ÿé›†ä¸­'}\n                      {shipment.status === 'MATCHED' && 'ãƒãƒƒãƒãƒ³ã‚°æ¸ˆã¿'}\n                      {shipment.status === 'IN_TRANSIT' && 'è¼¸é€ä¸­'}\n                      {shipment.status === 'DELIVERED' && 'é…é€å®Œäº†'}\n                      {shipment.status === 'CANCELLED' && 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«'}\n                    </span>\n                    <button\n                      onClick={() => handleRemoveSaved(shipment.id)}\n                      className=\"text-red-500 hover:text-red-700\"\n                    >\n                      <Bookmark className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n                <p className=\"text-gray-600 text-sm mb-3\">{shipment.cargoDescription}</p>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700 mb-4\">\n                  <div className=\"flex items-center\"><MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />ç™ºåœ°: {shipment.pickupPrefecture} {shipment.pickupCity}</div>\n                  <div className=\"flex items-center\"><MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />ç€åœ°: {shipment.deliveryPrefecture} {shipment.deliveryCity}</div>\n                  <div className=\"flex items-center\"><Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />ç™ºæ—¥æ™‚: {new Date(shipment.pickupDate).toLocaleDateString()} {shipment.pickupTimeFrom}</div>\n                  <div className=\"flex items-center\"><Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />ç€æ—¥æ™‚: {new Date(shipment.deliveryDate).toLocaleDateString()} {shipment.deliveryTimeFrom}</div>\n                  <div className=\"flex items-center\"><Weight className=\"h-4 w-4 mr-2 text-gray-500\" />é‡é‡: {shipment.cargoWeight} kg</div>\n                  <div className=\"flex items-center\"><Truck className=\"h-4 w-4 mr-2 text-gray-500\" />è»Šç¨®: {shipment.requiredVehicleType}</div>\n                  <div className=\"flex items-center\"><DollarSign className=\"h-4 w-4 mr-2 text-gray-500\" />äºˆç®—: {shipment.budget.toLocaleString()} å††</div>\n                </div>\n\n                <div className=\"border-t border-gray-100 pt-3\">\n                  <h4 className=\"font-semibold text-gray-800 mb-2\">è·ä¸»æƒ…å ±</h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700\">\n                    <div className=\"flex items-center\"><Building2 className=\"h-4 w-4 mr-2 text-gray-500\" />ä¼šç¤¾å: {shipment.shipper.companyName}</div>\n                    <div className=\"flex items-center\"><User className=\"h-4 w-4 mr-2 text-gray-500\" />æ‹…å½“è€…: {shipment.shipper.contactPerson}</div>\n                    <div className=\"flex items-center\"><Phone className=\"h-4 w-4 mr-2 text-gray-500\" />é›»è©±ç•ªå·: {shipment.shipper.phone}</div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":6559},"README.md":{"content":"# SIN JAPAN LOGI - ç‰©æµãƒãƒƒãƒãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ \n\nè·ä¸»ã¨é‹é€ä¼šç¤¾ã‚’ã¤ãªãã€æ¬¡ä¸–ä»£ã®ç‰©æµãƒãƒƒãƒãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚\n\n![SIN JAPAN LOGI](public/logo.png)\n\n## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æ¸ˆã¿\n\n**æœ¬ç•ªç’°å¢ƒ**: [https://sin-japan-logi.vercel.app](https://sin-japan-logi.vercel.app)\n\n**é–‹ç™ºç’°å¢ƒ**: http://localhost:3050\n\n## ğŸš€ ç‰¹å¾´\n\n- **ç°¡å˜ãªæ¡ˆä»¶æŠ•ç¨¿**: è·ä¸»ã¯æ•°åˆ†ã§é…é€æ¡ˆä»¶ã‚’æŠ•ç¨¿å¯èƒ½\n- **åŠ¹ç‡çš„ãªãƒãƒƒãƒãƒ³ã‚°**: é‹é€ä¼šç¤¾ã¯æ¡ä»¶ã«åˆã†æ¡ˆä»¶ã‚’æ¤œç´¢ã—ã€è‡ªç”±ã«ã‚ªãƒ•ã‚¡ãƒ¼ã‚’ææ¡ˆ\n- **ã‚³ã‚¹ãƒˆå‰Šæ¸›**: è¤‡æ•°ã®é‹é€ä¼šç¤¾ã‹ã‚‰ç›¸è¦‹ç©ã‚‚ã‚ŠãŒå¯èƒ½\n- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: æ¡ˆä»¶ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚„ã‚ªãƒ•ã‚¡ãƒ¼çŠ¶æ³ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèª\n- **2ã¤ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—**: è·ä¸»ã¨é‹é€ä¼šç¤¾ãã‚Œãã‚Œã«æœ€é©åŒ–ã•ã‚ŒãŸUI\n\n## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯\n\n### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰\n- **Next.js 14**: React ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯\n- **TypeScript**: å‹å®‰å…¨ãªé–‹ç™º\n- **Tailwind CSS**: ãƒ¢ãƒ€ãƒ³ãªUIãƒ‡ã‚¶ã‚¤ãƒ³\n- **Lucide React**: ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n- **date-fns**: æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n\n### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰\n- **Next.js API Routes**: ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ\n- **Prisma**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ORM\n- **SQLite**: ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒŠãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹\n- **JWT**: èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³\n- **bcryptjs**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–\n\n## ğŸ“‹ å‰ææ¡ä»¶\n\n- Node.js 18.x ä»¥ä¸Š\n- npm ã¾ãŸã¯ yarn\n\n## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—\n\n### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³\n\n```bash\ngit clone <repository-url>\ncd \"SIN JAPAN LOGI\"\n```\n\n### 2. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n```bash\nnpm install\n```\n\n### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š\n\n`.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ï¼š\n\n```env\n# Database (SQLite)\nDATABASE_URL=\"file:./dev.db\"\n\n# JWT Secret (ãƒ©ãƒ³ãƒ€ãƒ ãªæ–‡å­—åˆ—ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„)\nJWT_SECRET=\"your-secret-key-change-this-in-production\"\n```\n\n### 4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—\n\n```bash\n# Prisma ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ç”Ÿæˆ\nnpm run prisma:generate\n\n# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³\nnpm run prisma:migrate\n```\n\n### 5. ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä½œæˆ\n\n```bash\nnode scripts/add-test-users.js\n```\n\nä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã™ï¼š\n\n**è·ä¸»ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ**\n- ID: `info@sinjapan.jp`\n- PASS: `Kazuya8008`\n\n**é‹é€ä¼šç¤¾ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ**\n- ID: `carrier@sinjapan.jp`\n- PASS: `Kazuya8008`\n\n**ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ**\n- ID: `info@sinjapan.jp`\n- PASS: `Kazuya8008`\n- URL: http://localhost:3050/admin\n\n### 6. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•\n\n```bash\nnpm run dev\n```\n\nãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3050 ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚\n\n## ğŸ“š ä¸»ãªæ©Ÿèƒ½\n\n### è·ä¸»å‘ã‘æ©Ÿèƒ½\n\n- âœ… ä¼šå“¡ç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³\n- âœ… é…é€æ¡ˆä»¶ã®æŠ•ç¨¿\n- âœ… æŠ•ç¨¿ã—ãŸæ¡ˆä»¶ã®ç®¡ç†\n- âœ… é‹é€ä¼šç¤¾ã‹ã‚‰ã®ã‚ªãƒ•ã‚¡ãƒ¼å—ä¿¡\n- âœ… ã‚ªãƒ•ã‚¡ãƒ¼ã®æ‰¿èªãƒ»æ‹’å¦\n- âœ… ãƒãƒƒãƒãƒ³ã‚°å¾Œã®é‹é€ä¼šç¤¾æƒ…å ±ç¢ºèª\n\n### é‹é€ä¼šç¤¾å‘ã‘æ©Ÿèƒ½\n\n- âœ… ä¼šå“¡ç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³\n- âœ… é…é€æ¡ˆä»¶ã®æ¤œç´¢ãƒ»é–²è¦§\n- âœ… æ¡ä»¶ã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆé›†è·åœ°ã€é…é€å…ˆãªã©ï¼‰\n- âœ… æ¡ˆä»¶ã¸ã®ã‚ªãƒ•ã‚¡ãƒ¼é€ä¿¡\n- âœ… é€ä¿¡ã—ãŸã‚ªãƒ•ã‚¡ãƒ¼ã®ç®¡ç†\n- âœ… ãƒãƒƒãƒãƒ³ã‚°å¾Œã®è·ä¸»æƒ…å ±ç¢ºèª\n\n## ğŸ—‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ \n\n```\nSIN JAPAN LOGI/\nâ”œâ”€â”€ prisma/\nâ”‚   â””â”€â”€ schema.prisma          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ app/                   # Next.js App Router\nâ”‚   â”‚   â”œâ”€â”€ api/              # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ\nâ”‚   â”‚   â”‚   â”œâ”€â”€ auth/        # èªè¨¼API\nâ”‚   â”‚   â”‚   â”œâ”€â”€ shipments/   # é…é€æ¡ˆä»¶API\nâ”‚   â”‚   â”‚   â””â”€â”€ offers/      # ã‚ªãƒ•ã‚¡ãƒ¼API\nâ”‚   â”‚   â”œâ”€â”€ dashboard/        # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸\nâ”‚   â”‚   â”œâ”€â”€ login/           # ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸\nâ”‚   â”‚   â”œâ”€â”€ register/        # ç™»éŒ²ãƒšãƒ¼ã‚¸\nâ”‚   â”‚   â”œâ”€â”€ shipments/       # é…é€æ¡ˆä»¶ãƒšãƒ¼ã‚¸\nâ”‚   â”‚   â””â”€â”€ offers/          # ã‚ªãƒ•ã‚¡ãƒ¼ãƒšãƒ¼ã‚¸\nâ”‚   â”œâ”€â”€ components/           # å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ\nâ”‚   â””â”€â”€ lib/                 # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°\nâ”‚       â”œâ”€â”€ prisma.ts        # Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\nâ”‚       â”œâ”€â”€ auth.ts          # èªè¨¼ãƒ˜ãƒ«ãƒ‘ãƒ¼\nâ”‚       â”œâ”€â”€ validators.ts    # ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚­ãƒ¼ãƒ\nâ”‚       â””â”€â”€ api-response.ts  # APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ãƒ˜ãƒ«ãƒ‘ãƒ¼\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ tsconfig.json\nâ”œâ”€â”€ tailwind.config.js\nâ””â”€â”€ README.md\n```\n\n## ğŸ” èªè¨¼ãƒ•ãƒ­ãƒ¼\n\n1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒç™»éŒ²/ãƒ­ã‚°ã‚¤ãƒ³\n2. JWTãƒˆãƒ¼ã‚¯ãƒ³ãŒç™ºè¡Œã•ã‚Œã‚‹\n3. ãƒˆãƒ¼ã‚¯ãƒ³ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜\n4. ä»¥é™ã®APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨\n5. ã‚µãƒ¼ãƒãƒ¼å´ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ¤œè¨¼ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—\n\n## ğŸ¨ UIãƒ‡ã‚¶ã‚¤ãƒ³\n\n- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ\n- ãƒ¢ãƒ€ãƒ³ã§ã‚¯ãƒªãƒ¼ãƒ³ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n- ç›´æ„Ÿçš„ãªãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³\n- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«é…æ…®\n\n## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«\n\n### Userï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰\n- è·ä¸»ï¼ˆSHIPPERï¼‰ã¾ãŸã¯é‹é€ä¼šç¤¾ï¼ˆCARRIERï¼‰\n- ä¼šç¤¾æƒ…å ±ã€é€£çµ¡å…ˆæƒ…å ±\n\n### Shipmentï¼ˆé…é€æ¡ˆä»¶ï¼‰\n- è·ç‰©æƒ…å ±ï¼ˆåå‰ã€é‡é‡ã€å®¹ç©ãªã©ï¼‰\n- é›†è·æƒ…å ±ï¼ˆä½æ‰€ã€æ—¥æ™‚ãªã©ï¼‰\n- é…é€æƒ…å ±ï¼ˆä½æ‰€ã€æ—¥æ™‚ãªã©ï¼‰\n- è¦æ±‚äº‹é …ï¼ˆè»Šä¸¡ã‚¿ã‚¤ãƒ—ã€ç‰¹åˆ¥ãªè¦ä»¶ãªã©ï¼‰\n- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†\n\n### Offerï¼ˆã‚ªãƒ•ã‚¡ãƒ¼ï¼‰\n- é‹é€ä¼šç¤¾ã‹ã‚‰è·ä¸»ã¸ã®ã‚ªãƒ•ã‚¡ãƒ¼\n- ææ¡ˆé‡‘é¡\n- ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç®¡ç†\n\n## ğŸš¢ ãƒ‡ãƒ—ãƒ­ã‚¤\n\n### Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤\n\n```bash\n# Vercel CLIã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\nnpm install -g vercel\n\n# ãƒ‡ãƒ—ãƒ­ã‚¤\nvercel\n```\n\n### ç’°å¢ƒå¤‰æ•°ã®è¨­å®š\n\nVercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š\n\n- `DATABASE_URL`\n- `JWT_SECRET`\n- `NEXTAUTH_URL`\n- `NEXTAUTH_SECRET`\n\n## ğŸ›  é–‹ç™ºã‚³ãƒãƒ³ãƒ‰\n\n```bash\n# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•\nnpm run dev\n\n# æœ¬ç•ªãƒ“ãƒ«ãƒ‰\nnpm run build\n\n# æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼èµ·å‹•\nnpm start\n\n# Prisma Studioï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹GUIï¼‰\nnpm run prisma:studio\n\n# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³\nnpm run prisma:migrate\n\n# Linterå®Ÿè¡Œ\nnpm run lint\n```\n\n## ğŸ“ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ\n\n### èªè¨¼\n- `POST /api/auth/register` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²\n- `POST /api/auth/login` - ãƒ­ã‚°ã‚¤ãƒ³\n- `GET /api/auth/me` - ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—\n\n### é…é€æ¡ˆä»¶\n- `GET /api/shipments` - æ¡ˆä»¶ä¸€è¦§å–å¾—\n- `POST /api/shipments` - æ¡ˆä»¶ä½œæˆï¼ˆè·ä¸»ã®ã¿ï¼‰\n- `GET /api/shipments/[id]` - æ¡ˆä»¶è©³ç´°å–å¾—\n- `PATCH /api/shipments/[id]` - æ¡ˆä»¶æ›´æ–°\n- `DELETE /api/shipments/[id]` - æ¡ˆä»¶å‰Šé™¤\n\n### ã‚ªãƒ•ã‚¡ãƒ¼\n- `GET /api/offers` - ã‚ªãƒ•ã‚¡ãƒ¼ä¸€è¦§å–å¾—\n- `POST /api/offers` - ã‚ªãƒ•ã‚¡ãƒ¼ä½œæˆï¼ˆé‹é€ä¼šç¤¾ã®ã¿ï¼‰\n- `POST /api/offers/[id]/accept` - ã‚ªãƒ•ã‚¡ãƒ¼æ‰¿èªï¼ˆè·ä¸»ã®ã¿ï¼‰\n- `POST /api/offers/[id]/reject` - ã‚ªãƒ•ã‚¡ãƒ¼æ‹’å¦ï¼ˆè·ä¸»ã®ã¿ï¼‰\n\n## ğŸ¤ è²¢çŒ®\n\nãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ã€‚å¤§ããªå¤‰æ›´ã®å ´åˆã¯ã€ã¾ãšissueã‚’é–‹ã„ã¦å¤‰æ›´å†…å®¹ã‚’è­°è«–ã—ã¦ãã ã•ã„ã€‚\n\n## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹\n\nMIT License\n\n## ğŸ‘¥ ä½œæˆè€…\n\nSIN JAPAN LOGI Development Team\n\n## ğŸ“ ã‚µãƒãƒ¼ãƒˆ\n\nå•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€GitHubã®Issuesãƒšãƒ¼ã‚¸ã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚\n\n---\n\nÂ© 2025 SIN JAPAN LOGI. All rights reserved.\n\n","size_bytes":7284},"src/app/dashboard/my-posts/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { Package, Plus, Edit, Trash2, Eye, Calendar, MapPin, Weight, DollarSign, Truck } from 'lucide-react'\n\ninterface MyPost {\n  id: string\n  type: 'shipment' | 'vehicle'\n  title: string\n  description: string\n  status: string\n  createdAt: string\n  updatedAt: string\n  data: any\n}\n\nexport default function MyPostsPage() {\n  const [posts, setPosts] = useState<MyPost[]>([])\n  const [loading, setLoading] = useState(true)\n  const [activeTab, setActiveTab] = useState<'shipments' | 'vehicles'>('shipments')\n\n  useEffect(() => {\n    loadMyPosts()\n  }, [])\n\n  const loadMyPosts = async () => {\n    setLoading(true)\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/user/my-posts', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to load posts')\n      }\n\n      const data = await response.json()\n      setPosts(data.data || [])\n    } catch (error) {\n      console.error('Error loading posts:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('ã“ã®æŠ•ç¨¿ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch(`/api/user/my-posts/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to delete post')\n      }\n\n      setPosts(prev => prev.filter(post => post.id !== id))\n    } catch (error) {\n      console.error('Error deleting post:', error)\n      alert('å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'OPEN': return 'bg-blue-100 text-blue-800'\n      case 'MATCHED': return 'bg-green-100 text-green-800'\n      case 'IN_TRANSIT': return 'bg-yellow-100 text-yellow-800'\n      case 'DELIVERED': return 'bg-gray-100 text-gray-800'\n      case 'CANCELLED': return 'bg-red-100 text-red-800'\n      case 'AVAILABLE': return 'bg-green-100 text-green-800'\n      case 'IN_USE': return 'bg-blue-100 text-blue-800'\n      case 'MAINTENANCE': return 'bg-yellow-100 text-yellow-800'\n      case 'UNAVAILABLE': return 'bg-red-100 text-red-800'\n      default: return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case 'OPEN': return 'å‹Ÿé›†ä¸­'\n      case 'MATCHED': return 'ãƒãƒƒãƒãƒ³ã‚°æ¸ˆã¿'\n      case 'IN_TRANSIT': return 'è¼¸é€ä¸­'\n      case 'DELIVERED': return 'é…é€å®Œäº†'\n      case 'CANCELLED': return 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«'\n      case 'AVAILABLE': return 'åˆ©ç”¨å¯èƒ½'\n      case 'IN_USE': return 'ä½¿ç”¨ä¸­'\n      case 'MAINTENANCE': return 'ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­'\n      case 'UNAVAILABLE': return 'åˆ©ç”¨ä¸å¯'\n      default: return status\n    }\n  }\n\n  const filteredPosts = posts.filter(post => \n    activeTab === 'shipments' ? post.type === 'shipment' : post.type === 'vehicle'\n  )\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">ãƒã‚¤æŠ•ç¨¿</h1>\n            <p className=\"text-gray-600\">æŠ•ç¨¿ã—ãŸè·ç‰©ã‚„ç©ºè»Šæƒ…å ±ã‚’ç®¡ç†ã§ãã¾ã™</p>\n          </div>\n          <div className=\"flex space-x-2\">\n            <button className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\">\n              <Plus className=\"h-4 w-4\" />\n              <span>æ–°è¦æŠ•ç¨¿</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* ã‚¿ãƒ– */}\n      <div className=\"mb-6\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8\">\n            <button\n              onClick={() => setActiveTab('shipments')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'shipments'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              è·ç‰©æŠ•ç¨¿ ({posts.filter(p => p.type === 'shipment').length})\n            </button>\n            <button\n              onClick={() => setActiveTab('vehicles')}\n              className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                activeTab === 'vehicles'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              ç©ºè»ŠæŠ•ç¨¿ ({posts.filter(p => p.type === 'vehicle').length})\n            </button>\n          </nav>\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            {activeTab === 'shipments' ? 'è·ç‰©æŠ•ç¨¿ä¸€è¦§' : 'ç©ºè»ŠæŠ•ç¨¿ä¸€è¦§'}\n          </h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : filteredPosts.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <Package className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>æŠ•ç¨¿ãŒã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {filteredPosts.map(post => (\n              <div key={post.id} className=\"p-6 hover:bg-gray-50\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900\">{post.title}</h3>\n                    <p className=\"text-sm text-gray-600 mt-1\">{post.description}</p>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(post.status)}`}>\n                      {getStatusLabel(post.status)}\n                    </span>\n                    <div className=\"flex space-x-1\">\n                      <button className=\"p-2 text-gray-400 hover:text-blue-600\">\n                        <Eye className=\"h-4 w-4\" />\n                      </button>\n                      <button className=\"p-2 text-gray-400 hover:text-green-600\">\n                        <Edit className=\"h-4 w-4\" />\n                      </button>\n                      <button \n                        onClick={() => handleDelete(post.id)}\n                        className=\"p-2 text-gray-400 hover:text-red-600\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                {post.type === 'shipment' && (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-700\">\n                    <div className=\"flex items-center\">\n                      <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      ç™ºåœ°: {post.data.pickupPrefecture} {post.data.pickupCity}\n                    </div>\n                    <div className=\"flex items-center\">\n                      <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      ç€åœ°: {post.data.deliveryPrefecture} {post.data.deliveryCity}\n                    </div>\n                    <div className=\"flex items-center\">\n                      <Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      ç™ºæ—¥æ™‚: {new Date(post.data.pickupDate).toLocaleDateString()}\n                    </div>\n                    <div className=\"flex items-center\">\n                      <Weight className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      é‡é‡: {post.data.cargoWeight}kg\n                    </div>\n                    <div className=\"flex items-center\">\n                      <Truck className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      è»Šç¨®: {post.data.requiredVehicleType}\n                    </div>\n                    <div className=\"flex items-center\">\n                      <DollarSign className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      äºˆç®—: {post.data.budget.toLocaleString()}å††\n                    </div>\n                  </div>\n                )}\n\n                {post.type === 'vehicle' && (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-700\">\n                    <div className=\"flex items-center\">\n                      <Truck className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      è»Šç¨®: {post.data.vehicleType}\n                    </div>\n                    <div className=\"flex items-center\">\n                      <Weight className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      æœ€å¤§ç©è¼‰é‡é‡: {post.data.maxWeight}kg\n                    </div>\n                    <div className=\"flex items-center\">\n                      <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      é‹è¡Œå¯èƒ½ã‚¨ãƒªã‚¢: {post.data.availablePrefectures ? JSON.parse(post.data.availablePrefectures).join(', ') : '-'}\n                    </div>\n                    <div className=\"flex items-center\">\n                      <Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      åˆ©ç”¨å¯èƒ½æœŸé–“: {new Date(post.data.availableFrom).toLocaleDateString()} - {new Date(post.data.availableTo).toLocaleDateString()}\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"mt-4 pt-4 border-t border-gray-100\">\n                  <div className=\"flex justify-between items-center text-sm text-gray-500\">\n                    <span>æŠ•ç¨¿æ—¥: {new Date(post.createdAt).toLocaleString('ja-JP')}</span>\n                    <span>æ›´æ–°æ—¥: {new Date(post.updatedAt).toLocaleString('ja-JP')}</span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":10385},"src/lib/api-response.ts":{"content":"import { NextResponse } from 'next/server'\n\nexport function successResponse<T>(data: T, status = 200) {\n  return NextResponse.json(\n    {\n      success: true,\n      data,\n    },\n    { status }\n  )\n}\n\nexport function errorResponse(message: string, status = 400) {\n  return NextResponse.json(\n    {\n      success: false,\n      error: message,\n    },\n    { status }\n  )\n}\n\nexport function unauthorizedResponse(message = 'èªè¨¼ãŒå¿…è¦ã§ã™') {\n  return errorResponse(message, 401)\n}\n\nexport function forbiddenResponse(message = 'ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“') {\n  return errorResponse(message, 403)\n}\n\nexport function notFoundResponse(message = 'ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“') {\n  return errorResponse(message, 404)\n}\n\n","size_bytes":735},"next.config.js":{"content":"/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  reactStrictMode: true,\n  swcMinify: true,\n  images: {\n    unoptimized: true,\n  },\n}\n\nmodule.exports = nextConfig\n\n","size_bytes":178},"src/components/StatsDisplay.tsx":{"content":"import { Package, Truck } from 'lucide-react'\nimport { useStats } from '@/hooks/useStats'\n\nexport default function StatsDisplay() {\n  const { stats } = useStats()\n\n  return (\n    <div className=\"flex items-center space-x-8\">\n      <div className=\"flex items-center space-x-3\">\n        <Package className=\"h-6 w-6 text-blue-600\" />\n        <span className=\"text-gray-600 text-sm\">è·ç‰©æ•°</span>\n        <span className=\"font-bold text-2xl text-blue-600\">{stats.shipmentCount.toLocaleString()}</span>\n      </div>\n      <div className=\"flex items-center space-x-3\">\n        <Truck className=\"h-6 w-6 text-green-600\" />\n        <span className=\"text-gray-600 text-sm\">ç©ºè»Šæ•°</span>\n        <span className=\"font-bold text-2xl text-blue-600\">{stats.vehicleCount.toLocaleString()}</span>\n      </div>\n    </div>\n  )\n}\n","size_bytes":818},"src/components/CountUpAnimation.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\n\ninterface CountUpAnimationProps {\n  end: number\n  duration?: number\n  className?: string\n  prefix?: string\n  suffix?: string\n}\n\nexport default function CountUpAnimation({ \n  end, \n  duration = 2000, \n  className = '',\n  prefix = '',\n  suffix = ''\n}: CountUpAnimationProps) {\n  const [count, setCount] = useState(0)\n\n  useEffect(() => {\n    let startTime: number\n    let animationFrame: number\n\n    const animate = (currentTime: number) => {\n      if (!startTime) startTime = currentTime\n      const progress = Math.min((currentTime - startTime) / duration, 1)\n      \n      // ã‚¤ãƒ¼ã‚¸ãƒ³ã‚°é–¢æ•°ï¼ˆeaseOutCubicï¼‰\n      const easeOutCubic = 1 - Math.pow(1 - progress, 3)\n      const currentCount = Math.floor(easeOutCubic * end)\n      \n      setCount(currentCount)\n\n      if (progress < 1) {\n        animationFrame = requestAnimationFrame(animate)\n      }\n    }\n\n    // å°‘ã—é…å»¶ã‚’å…¥ã‚Œã¦ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹å§‹\n    const timeoutId = setTimeout(() => {\n      animationFrame = requestAnimationFrame(animate)\n    }, 200)\n\n    return () => {\n      clearTimeout(timeoutId)\n      if (animationFrame) {\n        cancelAnimationFrame(animationFrame)\n      }\n    }\n  }, [end, duration])\n\n  return (\n    <span className={className}>\n      {prefix}{count.toLocaleString()}{suffix}\n    </span>\n  )\n}\n","size_bytes":1362},"src/app/dashboard/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Package, \n  Search, \n  Truck, \n  Building2, \n  Users, \n  Settings, \n  Bell, \n  User,\n  ChevronDown,\n  ChevronRight,\n  Filter,\n  X,\n  Plus,\n  Eye,\n  Calendar,\n  MapPin,\n  Weight,\n  Car,\n  User as UserIcon,\n  Globe,\n  FileText,\n  HelpCircle,\n  CheckCircle,\n  Bookmark,\n  History\n} from 'lucide-react'\n\nexport default function DashboardPage() {\n  const [shipments, setShipments] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [activeTab, setActiveTab] = useState('å‹Ÿé›†ä¸­')\n\n  useEffect(() => {\n    loadShipments()\n  }, [])\n\n  const loadShipments = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/shipments', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (!response.ok) throw new Error('Failed to load shipments')\n      \n      const data = await response.json()\n      setShipments(data.data || [])\n    } catch (error) {\n      console.error('Error loading shipments:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <DashboardLayout>\n      {/* ã‚¿ãƒ– */}\n      <div className=\"mb-6\">\n        <div className=\"border-b border-gray-200\">\n          <nav className=\"-mb-px flex space-x-8\">\n            {['å‹Ÿé›†ä¸­', 'æˆç´„æ¸ˆã¿', 'è¼¸é€ä¸­', 'å®Œäº†'].map((tab) => (\n              <button\n                key={tab}\n                onClick={() => setActiveTab(tab)}\n                className={`py-2 px-1 border-b-2 font-medium text-sm ${\n                  activeTab === tab\n                    ? 'border-blue-500 text-blue-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                {tab}\n              </button>\n            ))}\n          </nav>\n        </div>\n      </div>\n\n      {/* çµ±è¨ˆã‚«ãƒ¼ãƒ‰ */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n          <div className=\"flex items-center\">\n            <div className=\"p-2 bg-blue-100 rounded-lg\">\n              <Package className=\"h-6 w-6 text-blue-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">ç·è·ç‰©æ•°</p>\n              <p className=\"text-2xl font-bold text-gray-900\">{shipments.length}</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n          <div className=\"flex items-center\">\n            <div className=\"p-2 bg-green-100 rounded-lg\">\n              <CheckCircle className=\"h-6 w-6 text-green-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">æˆç´„æ¸ˆã¿</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {shipments.filter(s => s.status === 'MATCHED').length}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n          <div className=\"flex items-center\">\n            <div className=\"p-2 bg-yellow-100 rounded-lg\">\n              <Truck className=\"h-6 w-6 text-yellow-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">è¼¸é€ä¸­</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {shipments.filter(s => s.status === 'IN_TRANSIT').length}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border\">\n          <div className=\"flex items-center\">\n            <div className=\"p-2 bg-gray-100 rounded-lg\">\n              <FileText className=\"h-6 w-6 text-gray-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <p className=\"text-sm font-medium text-gray-600\">å®Œäº†</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {shipments.filter(s => s.status === 'DELIVERED').length}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* è·ç‰©ä¸€è¦§ */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">è·ç‰©ä¸€è¦§</h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : shipments.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <Package className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>è·ç‰©ãŒã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {shipments.map((shipment) => (\n              <div key={shipment.id} className=\"p-6 hover:bg-gray-50\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex-1\">\n                    <h3 className=\"text-lg font-medium text-gray-900\">\n                      {shipment.cargoName}\n                    </h3>\n                    <p className=\"text-sm text-gray-500 mt-1\">\n                      {shipment.cargoDescription}\n                    </p>\n                    <div className=\"mt-2 flex items-center space-x-4 text-sm text-gray-500\">\n                      <span className=\"flex items-center\">\n                        <MapPin className=\"h-4 w-4 mr-1\" />\n                        {shipment.pickupPrefecture} â†’ {shipment.deliveryPrefecture}\n                      </span>\n                      <span className=\"flex items-center\">\n                        <Calendar className=\"h-4 w-4 mr-1\" />\n                        {new Date(shipment.pickupDate).toLocaleDateString()}\n                      </span>\n                      <span className=\"flex items-center\">\n                        <Weight className=\"h-4 w-4 mr-1\" />\n                        {shipment.cargoWeight}kg\n                      </span>\n                      <span className=\"flex items-center\">\n                        <Truck className=\"h-4 w-4 mr-1\" />\n                        {shipment.requiredVehicleType}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${\n                      shipment.status === 'OPEN' ? 'bg-blue-100 text-blue-800' :\n                      shipment.status === 'MATCHED' ? 'bg-green-100 text-green-800' :\n                      shipment.status === 'IN_TRANSIT' ? 'bg-yellow-100 text-yellow-800' :\n                      'bg-gray-100 text-gray-800'\n                    }`}>\n                      {shipment.status === 'OPEN' ? 'å‹Ÿé›†ä¸­' :\n                       shipment.status === 'MATCHED' ? 'æˆç´„æ¸ˆã¿' :\n                       shipment.status === 'IN_TRANSIT' ? 'è¼¸é€ä¸­' : 'å®Œäº†'}\n                    </span>\n                    <button className=\"p-2 text-gray-400 hover:text-gray-600\">\n                      <Eye className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":7514},"src/app/dashboard/settings/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Settings, \n  ChevronUp, \n  ChevronDown, \n  Building2, \n  User, \n  CreditCard, \n  FileText, \n  Mail, \n  DollarSign,\n  Users,\n  Bell,\n  LogOut,\n  Save,\n  X,\n  Edit\n} from 'lucide-react'\n\nexport default function SettingsPage() {\n  const router = useRouter()\n  const [activeSection, setActiveSection] = useState('åŸºæœ¬æƒ…å ±')\n  const [expandedSections, setExpandedSections] = useState({\n    'ä¼æ¥­æƒ…å ±ç®¡ç†': true,\n    'ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†': false\n  })\n  const [editing, setEditing] = useState(false)\n  const [user, setUser] = useState<any>(null)\n  const [formData, setFormData] = useState({\n    // åŸºæœ¬æƒ…å ±\n    contactPerson: '',\n    email: '',\n    phone: '',\n    companyName: '',\n    postalCode: '',\n    address: '',\n    \n    // è©³ç´°æƒ…å ±\n    industry: '',\n    establishedDate: '',\n    capital: '',\n    employeeCount: '',\n    businessDescription: '',\n    \n    // å¥‘ç´„å†…å®¹\n    subscriptionPlan: '',\n    contractStartDate: '',\n    contractEndDate: '',\n    \n    // å£åº§æƒ…å ±\n    bankName: '',\n    branchName: '',\n    accountType: '',\n    accountNumber: '',\n    accountHolder: '',\n    \n    // ãŠæ”¯æ‰•ã„æ–¹æ³•\n    paymentMethod: '',\n    billingAddress: '',\n    \n    // è«‹æ±‚æ›¸è¨­å®š\n    invoiceReceiptEmail: '',\n    invoiceReceiptMethod: '',\n    invoiceIssueMethod: '',\n    invoiceCompanyName: '',\n    \n    // çµŒç†æ‹…å½“è€…\n    accountingPersonName: '',\n    accountingPersonEmail: '',\n    accountingPersonPhone: '',\n    \n    // ãƒ¡ãƒ¼ãƒ«é€šçŸ¥\n    emailNotificationShipment: true,\n    emailNotificationOffer: true,\n    emailNotificationMatching: true,\n    emailNotificationMessage: true\n  })\n\n  useEffect(() => {\n    const fetchSettings = async () => {\n      const token = localStorage.getItem('token')\n      if (!token) return\n      \n      try {\n        const response = await fetch('/api/settings', {\n          headers: { 'Authorization': `Bearer ${token}` }\n        })\n        \n        if (response.ok) {\n          const result = await response.json()\n          const data = result.data\n          setUser(data)\n          setFormData({\n            contactPerson: data.contactPerson || '',\n            email: data.email || '',\n            phone: data.phone || '',\n            companyName: data.companyName || '',\n            postalCode: data.postalCode || '',\n            address: data.address || '',\n            \n            industry: data.industry || '',\n            establishedDate: data.establishedDate ? data.establishedDate.split('T')[0] : '',\n            capital: data.capital || '',\n            employeeCount: data.employeeCount || '',\n            businessDescription: data.businessDescription || '',\n            \n            subscriptionPlan: data.subscriptionPlan || '',\n            contractStartDate: data.contractStartDate ? data.contractStartDate.split('T')[0] : '',\n            contractEndDate: data.contractEndDate ? data.contractEndDate.split('T')[0] : '',\n            \n            bankName: data.bankName || '',\n            branchName: data.branchName || '',\n            accountType: data.accountType || '',\n            accountNumber: data.accountNumber || '',\n            accountHolder: data.accountHolder || '',\n            \n            paymentMethod: data.paymentMethod || '',\n            billingAddress: data.billingAddress || '',\n            \n            invoiceReceiptEmail: data.invoiceReceiptEmail || '',\n            invoiceReceiptMethod: data.invoiceReceiptMethod || '',\n            invoiceIssueMethod: data.invoiceIssueMethod || '',\n            invoiceCompanyName: data.invoiceCompanyName || '',\n            \n            accountingPersonName: data.accountingPersonName || '',\n            accountingPersonEmail: data.accountingPersonEmail || '',\n            accountingPersonPhone: data.accountingPersonPhone || '',\n            \n            emailNotificationShipment: data.emailNotificationShipment ?? true,\n            emailNotificationOffer: data.emailNotificationOffer ?? true,\n            emailNotificationMatching: data.emailNotificationMatching ?? true,\n            emailNotificationMessage: data.emailNotificationMessage ?? true\n          })\n        }\n      } catch (error) {\n        console.error('Error fetching settings:', error)\n      }\n    }\n    \n    fetchSettings()\n  }, [])\n\n  const toggleSection = (section: string) => {\n    setExpandedSections(prev => ({\n      ...prev,\n      [section]: !prev[section as keyof typeof prev]\n    }))\n  }\n\n  const handleEdit = () => {\n    setEditing(true)\n  }\n\n  const handleCancel = () => {\n    setEditing(false)\n    if (user) {\n      setFormData({\n        contactPerson: user.contactPerson || '',\n        email: user.email || '',\n        phone: user.phone || '',\n        companyName: user.companyName || '',\n        postalCode: user.postalCode || '',\n        address: user.address || '',\n        \n        industry: user.industry || '',\n        establishedDate: user.establishedDate ? user.establishedDate.split('T')[0] : '',\n        capital: user.capital || '',\n        employeeCount: user.employeeCount || '',\n        businessDescription: user.businessDescription || '',\n        \n        subscriptionPlan: user.subscriptionPlan || '',\n        contractStartDate: user.contractStartDate ? user.contractStartDate.split('T')[0] : '',\n        contractEndDate: user.contractEndDate ? user.contractEndDate.split('T')[0] : '',\n        \n        bankName: user.bankName || '',\n        branchName: user.branchName || '',\n        accountType: user.accountType || '',\n        accountNumber: user.accountNumber || '',\n        accountHolder: user.accountHolder || '',\n        \n        paymentMethod: user.paymentMethod || '',\n        billingAddress: user.billingAddress || '',\n        \n        invoiceReceiptEmail: user.invoiceReceiptEmail || '',\n        invoiceReceiptMethod: user.invoiceReceiptMethod || '',\n        invoiceIssueMethod: user.invoiceIssueMethod || '',\n        invoiceCompanyName: user.invoiceCompanyName || '',\n        \n        accountingPersonName: user.accountingPersonName || '',\n        accountingPersonEmail: user.accountingPersonEmail || '',\n        accountingPersonPhone: user.accountingPersonPhone || '',\n        \n        emailNotificationShipment: user.emailNotificationShipment ?? true,\n        emailNotificationOffer: user.emailNotificationOffer ?? true,\n        emailNotificationMatching: user.emailNotificationMatching ?? true,\n        emailNotificationMessage: user.emailNotificationMessage ?? true\n      })\n    }\n  }\n\n  const handleSave = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/settings', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(formData)\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to update settings')\n      }\n\n      // ä¿å­˜å¾Œã€æœ€æ–°ã®è¨­å®šã‚’å†å–å¾—\n      const getResponse = await fetch('/api/settings', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n      \n      if (getResponse.ok) {\n        const result = await getResponse.json()\n        const updatedUser = result.data\n        setUser(updatedUser)\n        localStorage.setItem('user', JSON.stringify(updatedUser))\n        \n        // formDataã‚‚æœ€æ–°ã®çŠ¶æ…‹ã«æ›´æ–°\n        setFormData({\n          contactPerson: updatedUser.contactPerson || '',\n          email: updatedUser.email || '',\n          phone: updatedUser.phone || '',\n          companyName: updatedUser.companyName || '',\n          postalCode: updatedUser.postalCode || '',\n          address: updatedUser.address || '',\n          \n          industry: updatedUser.industry || '',\n          establishedDate: updatedUser.establishedDate ? updatedUser.establishedDate.split('T')[0] : '',\n          capital: updatedUser.capital || '',\n          employeeCount: updatedUser.employeeCount || '',\n          businessDescription: updatedUser.businessDescription || '',\n          \n          subscriptionPlan: updatedUser.subscriptionPlan || '',\n          contractStartDate: updatedUser.contractStartDate ? updatedUser.contractStartDate.split('T')[0] : '',\n          contractEndDate: updatedUser.contractEndDate ? updatedUser.contractEndDate.split('T')[0] : '',\n          \n          bankName: updatedUser.bankName || '',\n          branchName: updatedUser.branchName || '',\n          accountType: updatedUser.accountType || '',\n          accountNumber: updatedUser.accountNumber || '',\n          accountHolder: updatedUser.accountHolder || '',\n          \n          paymentMethod: updatedUser.paymentMethod || '',\n          billingAddress: updatedUser.billingAddress || '',\n          \n          invoiceReceiptEmail: updatedUser.invoiceReceiptEmail || '',\n          invoiceReceiptMethod: updatedUser.invoiceReceiptMethod || '',\n          invoiceIssueMethod: updatedUser.invoiceIssueMethod || '',\n          invoiceCompanyName: updatedUser.invoiceCompanyName || '',\n          \n          accountingPersonName: updatedUser.accountingPersonName || '',\n          accountingPersonEmail: updatedUser.accountingPersonEmail || '',\n          accountingPersonPhone: updatedUser.accountingPersonPhone || '',\n          \n          emailNotificationShipment: updatedUser.emailNotificationShipment ?? true,\n          emailNotificationOffer: updatedUser.emailNotificationOffer ?? true,\n          emailNotificationMatching: updatedUser.emailNotificationMatching ?? true,\n          emailNotificationMessage: updatedUser.emailNotificationMessage ?? true\n        })\n      } else {\n        throw new Error('Failed to refresh settings')\n      }\n      \n      setEditing(false)\n      alert('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ')\n    } catch (error) {\n      console.error('Error updating settings:', error)\n      alert('è¨­å®šã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  const handleLogout = () => {\n    localStorage.removeItem('token')\n    localStorage.removeItem('user')\n    router.push('/login')\n  }\n\n  const handleInputChange = (field: string, value: string | boolean) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }))\n  }\n\n  const menuItems = [\n    {\n      section: 'ä¼æ¥­æƒ…å ±ç®¡ç†',\n      icon: Building2,\n      items: [\n        { id: 'åŸºæœ¬æƒ…å ±', label: 'åŸºæœ¬æƒ…å ±' },\n        { id: 'è©³ç´°æƒ…å ±', label: 'è©³ç´°æƒ…å ±' },\n        { id: 'ä¿¡ç”¨æƒ…å ±', label: 'ä¿¡ç”¨æƒ…å ±' },\n        { id: 'å¥‘ç´„å†…å®¹', label: 'å¥‘ç´„å†…å®¹' },\n        { id: 'å£åº§æƒ…å ±', label: 'å£åº§æƒ…å ±' },\n        { id: 'ãŠæ”¯æ‰•ã„æ–¹æ³•', label: 'ãŠæ”¯æ‰•ã„æ–¹æ³•' },\n        { id: 'è«‹æ±‚æ›¸å—é ˜è¨­å®š', label: 'è«‹æ±‚æ›¸å—é ˜è¨­å®š' },\n        { id: 'è«‹æ±‚æ›¸ç™ºè¡Œè¨­å®š', label: 'è«‹æ±‚æ›¸ç™ºè¡Œè¨­å®š' },\n        { id: 'çµŒç†æ‹…å½“è€…', label: 'çµŒç†æ‹…å½“è€…' }\n      ]\n    },\n    {\n      section: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†',\n      icon: Users,\n      items: [\n        { id: 'ãƒ¡ãƒ¼ãƒ«å—ä¿¡è¨­å®š', label: 'ãƒ¡ãƒ¼ãƒ«å—ä¿¡è¨­å®š' },\n        { id: 'ã”åˆ©ç”¨é‡‘é¡', label: 'ã”åˆ©ç”¨é‡‘é¡' },\n        { id: 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ', label: 'ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ', isLogout: true }\n      ]\n    }\n  ]\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">è¨­å®š</h1>\n        <p className=\"text-gray-600\">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®šã‚’ç®¡ç†ã§ãã¾ã™</p>\n      </div>\n\n      <div className=\"flex gap-6\">\n        {/* ã‚µã‚¤ãƒ‰ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}\n        <div className=\"w-64 bg-white rounded-lg shadow-sm border\">\n          <div className=\"p-4\">\n            {menuItems.map((section) => (\n              <div key={section.section} className=\"mb-4\">\n                <button\n                  onClick={() => toggleSection(section.section)}\n                  className=\"w-full flex items-center justify-between p-2 text-left hover:bg-gray-50 rounded-lg\"\n                >\n                  <div className=\"flex items-center\">\n                    <section.icon className=\"h-4 w-4 mr-2 text-gray-600\" />\n                    <span className=\"font-medium text-gray-900\">{section.section}</span>\n                  </div>\n                  {expandedSections[section.section as keyof typeof expandedSections] ? (\n                    <ChevronUp className=\"h-4 w-4 text-gray-400\" />\n                  ) : (\n                    <ChevronDown className=\"h-4 w-4 text-gray-400\" />\n                  )}\n                </button>\n                \n                {expandedSections[section.section as keyof typeof expandedSections] && (\n                  <div className=\"ml-6 mt-2 space-y-1\">\n                    {section.items.map((item) => (\n                      <button\n                        key={item.id}\n                        onClick={() => {\n                          if (item.isLogout) {\n                            handleLogout()\n                          } else {\n                            setActiveSection(item.id)\n                          }\n                        }}\n                        className={`w-full text-left px-3 py-2 rounded-lg text-sm transition-colors ${\n                          activeSection === item.id\n                            ? 'bg-green-50 text-green-800 border-r-2 border-green-600'\n                            : item.isLogout\n                            ? 'text-red-600 hover:bg-red-50'\n                            : 'text-gray-600 hover:bg-gray-50'\n                        }`}\n                      >\n                        {item.isLogout && <LogOut className=\"h-4 w-4 inline mr-2\" />}\n                        {item.label}\n                      </button>\n                    ))}\n                  </div>\n                )}\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}\n        <div className=\"flex-1 bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">{activeSection}</h2>\n              {activeSection !== 'ä¿¡ç”¨æƒ…å ±' && activeSection !== 'ã”åˆ©ç”¨é‡‘é¡' && (\n                <div className=\"flex space-x-2\">\n                  {editing ? (\n                    <>\n                      <button\n                        onClick={handleSave}\n                        className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n                      >\n                        <Save className=\"h-4 w-4\" />\n                        <span>ä¿å­˜</span>\n                      </button>\n                      <button\n                        onClick={handleCancel}\n                        className=\"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 flex items-center space-x-2\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                        <span>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</span>\n                      </button>\n                    </>\n                  ) : (\n                    <button\n                      onClick={handleEdit}\n                      className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n                    >\n                      <Edit className=\"h-4 w-4\" />\n                      <span>ç·¨é›†</span>\n                    </button>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"p-6\">\n            {activeSection === 'åŸºæœ¬æƒ…å ±' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä¼šç¤¾å</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.companyName}\n                      onChange={(e) => handleInputChange('companyName', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      placeholder=\"ä¼šç¤¾åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.companyName || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ‹…å½“è€…å</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.contactPerson}\n                      onChange={(e) => handleInputChange('contactPerson', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      placeholder=\"æ‹…å½“è€…åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.contactPerson || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>\n                  {editing ? (\n                    <input\n                      type=\"email\"\n                      value={formData.email}\n                      onChange={(e) => handleInputChange('email', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      placeholder=\"ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.email || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">é›»è©±ç•ªå·</label>\n                  {editing ? (\n                    <input\n                      type=\"tel\"\n                      value={formData.phone}\n                      onChange={(e) => handleInputChange('phone', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      placeholder=\"é›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.phone || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">éƒµä¾¿ç•ªå·</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.postalCode}\n                      onChange={(e) => handleInputChange('postalCode', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      placeholder=\"éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.postalCode || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä½æ‰€</label>\n                  {editing ? (\n                    <textarea\n                      value={formData.address}\n                      onChange={(e) => handleInputChange('address', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      rows={3}\n                      placeholder=\"ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{user?.address || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeSection === 'è©³ç´°æƒ…å ±' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ¥­ç¨®</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.industry}\n                      onChange={(e) => handleInputChange('industry', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"ä¾‹: ç‰©æµæ¥­\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.industry || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">è¨­ç«‹æ—¥</label>\n                  {editing ? (\n                    <input\n                      type=\"date\"\n                      value={formData.establishedDate}\n                      onChange={(e) => handleInputChange('establishedDate', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.establishedDate || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">è³‡æœ¬é‡‘ï¼ˆå††ï¼‰</label>\n                  {editing ? (\n                    <input\n                      type=\"number\"\n                      value={formData.capital}\n                      onChange={(e) => handleInputChange('capital', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"10000000\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.capital ? `Â¥${Number(formData.capital).toLocaleString()}` : 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å¾“æ¥­å“¡æ•°ï¼ˆäººï¼‰</label>\n                  {editing ? (\n                    <input\n                      type=\"number\"\n                      value={formData.employeeCount}\n                      onChange={(e) => handleInputChange('employeeCount', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"50\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.employeeCount ? `${formData.employeeCount}äºº` : 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">äº‹æ¥­å†…å®¹</label>\n                  {editing ? (\n                    <textarea\n                      value={formData.businessDescription}\n                      onChange={(e) => handleInputChange('businessDescription', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      rows={4}\n                      placeholder=\"äº‹æ¥­å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.businessDescription || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeSection === 'ä¿¡ç”¨æƒ…å ±' && (\n              <div className=\"space-y-6\">\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4\">\n                  <p className=\"text-blue-800 text-sm\">ä¿¡ç”¨æƒ…å ±ã¯èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚</p>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">èªè¨¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>\n                  <p className=\"text-gray-900\">\n                    {user?.verificationStatus === 'APPROVED' ? (\n                      <span className=\"text-green-600\">æ‰¿èªæ¸ˆã¿ âœ“</span>\n                    ) : user?.verificationStatus === 'REJECTED' ? (\n                      <span className=\"text-red-600\">å´ä¸‹</span>\n                    ) : (\n                      <span className=\"text-yellow-600\">å¯©æŸ»ä¸­</span>\n                    )}\n                  </p>\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä¿¡ç”¨ã‚¹ã‚³ã‚¢</label>\n                  <p className=\"text-gray-900 text-2xl font-bold\">{user?.trustScore?.toFixed(1) || '5.0'} / 5.0</p>\n                </div>\n                <button\n                  onClick={() => router.push('/dashboard/verification')}\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n                >\n                  èªè¨¼ç®¡ç†ãƒšãƒ¼ã‚¸ã¸\n                </button>\n              </div>\n            )}\n\n            {activeSection === 'å¥‘ç´„å†…å®¹' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å¥‘ç´„ãƒ—ãƒ©ãƒ³</label>\n                  {editing ? (\n                    <select\n                      value={formData.subscriptionPlan}\n                      onChange={(e) => handleInputChange('subscriptionPlan', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                      <option value=\"basic\">ãƒ™ãƒ¼ã‚·ãƒƒã‚¯</option>\n                      <option value=\"standard\">ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰</option>\n                      <option value=\"premium\">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ </option>\n                      <option value=\"enterprise\">ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚º</option>\n                    </select>\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.subscriptionPlan || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å¥‘ç´„é–‹å§‹æ—¥</label>\n                  {editing ? (\n                    <input\n                      type=\"date\"\n                      value={formData.contractStartDate}\n                      onChange={(e) => handleInputChange('contractStartDate', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.contractStartDate || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å¥‘ç´„çµ‚äº†æ—¥</label>\n                  {editing ? (\n                    <input\n                      type=\"date\"\n                      value={formData.contractEndDate}\n                      onChange={(e) => handleInputChange('contractEndDate', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.contractEndDate || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeSection === 'å£åº§æƒ…å ±' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">éŠ€è¡Œå</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.bankName}\n                      onChange={(e) => handleInputChange('bankName', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"ä¾‹: ã¿ãšã»éŠ€è¡Œ\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.bankName || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ”¯åº—å</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.branchName}\n                      onChange={(e) => handleInputChange('branchName', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"ä¾‹: æ±äº¬æ”¯åº—\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.branchName || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å£åº§ç¨®åˆ¥</label>\n                  {editing ? (\n                    <select\n                      value={formData.accountType}\n                      onChange={(e) => handleInputChange('accountType', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                      <option value=\"æ™®é€š\">æ™®é€š</option>\n                      <option value=\"å½“åº§\">å½“åº§</option>\n                    </select>\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.accountType || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å£åº§ç•ªå·</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.accountNumber}\n                      onChange={(e) => handleInputChange('accountNumber', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"1234567\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.accountNumber || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å£åº§åç¾©</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.accountHolder}\n                      onChange={(e) => handleInputChange('accountHolder', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"ã‚«ï¼‰ã‚µãƒ³ãƒ—ãƒ«ã‚«ã‚¤ã‚·ãƒ£\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.accountHolder || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeSection === 'ãŠæ”¯æ‰•ã„æ–¹æ³•' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ”¯æ‰•ã„æ–¹æ³•</label>\n                  {editing ? (\n                    <select\n                      value={formData.paymentMethod}\n                      onChange={(e) => handleInputChange('paymentMethod', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                      <option value=\"ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰\">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰</option>\n                      <option value=\"éŠ€è¡ŒæŒ¯è¾¼\">éŠ€è¡ŒæŒ¯è¾¼</option>\n                      <option value=\"å£åº§æŒ¯æ›¿\">å£åº§æŒ¯æ›¿</option>\n                    </select>\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.paymentMethod || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">è«‹æ±‚å…ˆä½æ‰€</label>\n                  {editing ? (\n                    <textarea\n                      value={formData.billingAddress}\n                      onChange={(e) => handleInputChange('billingAddress', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      rows={3}\n                      placeholder=\"è«‹æ±‚å…ˆä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.billingAddress || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeSection === 'è«‹æ±‚æ›¸å—é ˜è¨­å®š' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">è«‹æ±‚æ›¸å—é ˜ãƒ¡ãƒ¼ãƒ«</label>\n                  {editing ? (\n                    <input\n                      type=\"email\"\n                      value={formData.invoiceReceiptEmail}\n                      onChange={(e) => handleInputChange('invoiceReceiptEmail', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"invoice@company.com\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.invoiceReceiptEmail || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å—é ˜æ–¹æ³•</label>\n                  {editing ? (\n                    <select\n                      value={formData.invoiceReceiptMethod}\n                      onChange={(e) => handleInputChange('invoiceReceiptMethod', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                      <option value=\"ãƒ¡ãƒ¼ãƒ«\">ãƒ¡ãƒ¼ãƒ«</option>\n                      <option value=\"éƒµé€\">éƒµé€</option>\n                      <option value=\"ã‚·ã‚¹ãƒ†ãƒ å†…\">ã‚·ã‚¹ãƒ†ãƒ å†…</option>\n                    </select>\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.invoiceReceiptMethod || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeSection === 'è«‹æ±‚æ›¸ç™ºè¡Œè¨­å®š' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ç™ºè¡Œæ–¹æ³•</label>\n                  {editing ? (\n                    <select\n                      value={formData.invoiceIssueMethod}\n                      onChange={(e) => handleInputChange('invoiceIssueMethod', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                    >\n                      <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                      <option value=\"è‡ªå‹•\">è‡ªå‹•ç™ºè¡Œ</option>\n                      <option value=\"æ‰‹å‹•\">æ‰‹å‹•ç™ºè¡Œ</option>\n                    </select>\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.invoiceIssueMethod || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">è«‹æ±‚æ›¸å®›å</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.invoiceCompanyName}\n                      onChange={(e) => handleInputChange('invoiceCompanyName', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.invoiceCompanyName || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeSection === 'çµŒç†æ‹…å½“è€…' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ‹…å½“è€…å</label>\n                  {editing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.accountingPersonName}\n                      onChange={(e) => handleInputChange('accountingPersonName', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"å±±ç”° å¤ªéƒ\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.accountingPersonName || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>\n                  {editing ? (\n                    <input\n                      type=\"email\"\n                      value={formData.accountingPersonEmail}\n                      onChange={(e) => handleInputChange('accountingPersonEmail', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"accounting@company.com\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.accountingPersonEmail || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">é›»è©±ç•ªå·</label>\n                  {editing ? (\n                    <input\n                      type=\"tel\"\n                      value={formData.accountingPersonPhone}\n                      onChange={(e) => handleInputChange('accountingPersonPhone', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                      placeholder=\"03-1234-5678\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900\">{formData.accountingPersonPhone || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {activeSection === 'ãƒ¡ãƒ¼ãƒ«å—ä¿¡è¨­å®š' && (\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between py-3 border-b\">\n                  <div>\n                    <p className=\"font-medium text-gray-900\">è·ç‰©é–¢é€£é€šçŸ¥</p>\n                    <p className=\"text-sm text-gray-500\">æ–°ã—ã„è·ç‰©ã‚„é…é€çŠ¶æ³ã®æ›´æ–°</p>\n                  </div>\n                  <label className=\"relative inline-flex items-center cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={formData.emailNotificationShipment}\n                      onChange={(e) => handleInputChange('emailNotificationShipment', e.target.checked)}\n                      disabled={!editing}\n                      className=\"sr-only peer\"\n                    />\n                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                  </label>\n                </div>\n                <div className=\"flex items-center justify-between py-3 border-b\">\n                  <div>\n                    <p className=\"font-medium text-gray-900\">ã‚ªãƒ•ã‚¡ãƒ¼é–¢é€£é€šçŸ¥</p>\n                    <p className=\"text-sm text-gray-500\">æ–°ã—ã„ã‚ªãƒ•ã‚¡ãƒ¼ã‚„å¿œç­”</p>\n                  </div>\n                  <label className=\"relative inline-flex items-center cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={formData.emailNotificationOffer}\n                      onChange={(e) => handleInputChange('emailNotificationOffer', e.target.checked)}\n                      disabled={!editing}\n                      className=\"sr-only peer\"\n                    />\n                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                  </label>\n                </div>\n                <div className=\"flex items-center justify-between py-3 border-b\">\n                  <div>\n                    <p className=\"font-medium text-gray-900\">ãƒãƒƒãƒãƒ³ã‚°é€šçŸ¥</p>\n                    <p className=\"text-sm text-gray-500\">ãƒãƒƒãƒãƒ³ã‚°æˆç«‹ã®ãŠçŸ¥ã‚‰ã›</p>\n                  </div>\n                  <label className=\"relative inline-flex items-center cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={formData.emailNotificationMatching}\n                      onChange={(e) => handleInputChange('emailNotificationMatching', e.target.checked)}\n                      disabled={!editing}\n                      className=\"sr-only peer\"\n                    />\n                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                  </label>\n                </div>\n                <div className=\"flex items-center justify-between py-3\">\n                  <div>\n                    <p className=\"font-medium text-gray-900\">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€šçŸ¥</p>\n                    <p className=\"text-sm text-gray-500\">æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å—ä¿¡</p>\n                  </div>\n                  <label className=\"relative inline-flex items-center cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={formData.emailNotificationMessage}\n                      onChange={(e) => handleInputChange('emailNotificationMessage', e.target.checked)}\n                      disabled={!editing}\n                      className=\"sr-only peer\"\n                    />\n                    <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                  </label>\n                </div>\n              </div>\n            )}\n\n            {activeSection === 'ã”åˆ©ç”¨é‡‘é¡' && (\n              <div className=\"space-y-6\">\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\n                  <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">ä»Šæœˆã®ã”åˆ©ç”¨é‡‘é¡</h3>\n                  <p className=\"text-4xl font-bold text-blue-600\">Â¥0</p>\n                  <p className=\"text-sm text-gray-600 mt-2\">2025å¹´10æœˆåˆ†</p>\n                </div>\n                <div className=\"border rounded-lg p-4\">\n                  <h4 className=\"font-medium text-gray-900 mb-3\">åˆ©ç”¨å±¥æ­´</h4>\n                  <p className=\"text-gray-500 text-center py-4\">åˆ©ç”¨å±¥æ­´ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":45508},"src/app/api/admin/documents/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyAdminSession } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\n// ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢\nasync function requireAdmin(request: NextRequest) {\n  const token = request.cookies.get('admin_token')?.value\n\n  if (!token) {\n    return NextResponse.json(\n      { error: 'ç®¡ç†è€…èªè¨¼ãŒå¿…è¦ã§ã™' },\n      { status: 401 }\n    )\n  }\n\n  const payload = verifyAdminSession(token)\n\n  if (!payload) {\n    return NextResponse.json(\n      { error: 'ç„¡åŠ¹ãªç®¡ç†è€…èªè¨¼ã§ã™' },\n      { status: 401 }\n    )\n  }\n\n  return payload\n}\n\n// è¨±å¯è¨¼ãƒ»æ›¸é¡ä¸€è¦§å–å¾—\nexport async function GET(request: NextRequest) {\n  try {\n    const admin = await requireAdmin(request)\n    if (admin instanceof NextResponse) return admin\n\n    const { searchParams } = new URL(request.url)\n    const status = searchParams.get('status')\n    const type = searchParams.get('type')\n    const page = parseInt(searchParams.get('page') || '1')\n    const limit = parseInt(searchParams.get('limit') || '50')\n\n    const where: any = {}\n    \n    if (status && status !== 'all') {\n      where.status = status\n    }\n    \n    if (type && type !== 'all') {\n      where.type = type\n    }\n\n    // ãƒ‡ãƒ¢ç”¨ã®æ›¸é¡ãƒ‡ãƒ¼ã‚¿\n    const sampleDocuments = [\n      {\n        id: '1',\n        userId: '1',\n        type: 'business_license',\n        name: 'äº‹æ¥­è¨±å¯è¨¼',\n        status: 'pending',\n        uploadedAt: '2024-01-15',\n        fileUrl: '/documents/business_license_1.pdf',\n        user: {\n          companyName: 'æ ªå¼ä¼šç¤¾ãƒˆãƒ©ãƒ³ã‚¹ãƒ­ã‚¸ãƒƒã‚¯',\n          contactPerson: 'å±±ç”°èŠ±å­',\n          email: 'yamada@translogic.co.jp'\n        }\n      },\n      {\n        id: '2',\n        userId: '2',\n        type: 'transport_license',\n        name: 'ä¸€èˆ¬è²¨ç‰©è‡ªå‹•è»Šé‹é€äº‹æ¥­è¨±å¯è¨¼',\n        status: 'pending',\n        uploadedAt: '2024-01-15',\n        fileUrl: '/documents/transport_license_2.pdf',\n        user: {\n          companyName: 'é–¢è¥¿ç‰©æµæ ªå¼ä¼šç¤¾',\n          contactPerson: 'éˆ´æœ¨ä¸€éƒ',\n          email: 'suzuki@kansai-logistics.co.jp'\n        }\n      },\n      {\n        id: '3',\n        userId: '1',\n        type: 'insurance',\n        name: 'ä¿é™ºè¨¼åˆ¸',\n        status: 'approved',\n        uploadedAt: '2024-01-10',\n        reviewedAt: '2024-01-12',\n        reviewer: 'ç®¡ç†è€…',\n        fileUrl: '/documents/insurance_1.pdf',\n        expiryDate: '2025-01-10',\n        user: {\n          companyName: 'æ ªå¼ä¼šç¤¾ãƒˆãƒ©ãƒ³ã‚¹ãƒ­ã‚¸ãƒƒã‚¯',\n          contactPerson: 'å±±ç”°èŠ±å­',\n          email: 'yamada@translogic.co.jp'\n        }\n      },\n      {\n        id: '4',\n        userId: '3',\n        type: 'tax_certificate',\n        name: 'ç´ç¨è¨¼æ˜æ›¸',\n        status: 'pending',\n        uploadedAt: '2024-01-16',\n        fileUrl: '/documents/tax_certificate_3.pdf',\n        user: {\n          companyName: 'ä¸­éƒ¨é‹é€æ ªå¼ä¼šç¤¾',\n          contactPerson: 'ç”°æ‘å››éƒ',\n          email: 'tamura@chubu-transport.co.jp'\n        }\n      },\n      {\n        id: '5',\n        userId: '4',\n        type: 'business_license',\n        name: 'äº‹æ¥­è¨±å¯è¨¼',\n        status: 'rejected',\n        uploadedAt: '2024-01-14',\n        reviewedAt: '2024-01-15',\n        reviewer: 'ç®¡ç†è€…',\n        comment: 'æ›¸é¡ãŒä¸é®®æ˜ã§ã™ã€‚å†æå‡ºã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚',\n        fileUrl: '/documents/business_license_4.pdf',\n        user: {\n          companyName: 'ã‚µãƒ³ãƒ—ãƒ«å•†äº‹æ ªå¼ä¼šç¤¾',\n          contactPerson: 'ä½è—¤å¤ªéƒ',\n          email: 'sato@sample.co.jp'\n        }\n      }\n    ]\n\n    let filteredDocuments = sampleDocuments\n\n    if (status && status !== 'all') {\n      filteredDocuments = filteredDocuments.filter(doc => doc.status === status)\n    }\n\n    if (type && type !== 'all') {\n      filteredDocuments = filteredDocuments.filter(doc => doc.type === type)\n    }\n\n    const total = filteredDocuments.length\n    const paginatedDocuments = filteredDocuments.slice(\n      (page - 1) * limit,\n      page * limit\n    )\n\n    return NextResponse.json({\n      documents: paginatedDocuments,\n      pagination: {\n        page,\n        limit,\n        total,\n        totalPages: Math.ceil(total / limit)\n      }\n    })\n  } catch (error) {\n    console.error('Get documents error:', error)\n    return NextResponse.json(\n      { error: 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' },\n      { status: 500 }\n    )\n  }\n}\n\n// æ›¸é¡æ‰¿èª/æ‹’å¦\nexport async function PATCH(request: NextRequest) {\n  try {\n    const admin = await requireAdmin(request)\n    if (admin instanceof NextResponse) return admin\n\n    const { documentId, action, comment } = await request.json()\n\n    if (!documentId || !action) {\n      return NextResponse.json(\n        { error: 'æ›¸é¡IDã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã§ã™' },\n        { status: 400 }\n      )\n    }\n\n    // ãƒ‡ãƒ¢ç”¨ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹\n    const result = {\n      id: documentId,\n      status: action === 'approve' ? 'approved' : 'rejected',\n      reviewedAt: new Date().toISOString().split('T')[0],\n      reviewer: 'ç®¡ç†è€…',\n      comment: comment || ''\n    }\n\n    console.log(`Admin ${admin.userId} ${action} document ${documentId}${comment ? ` with comment: ${comment}` : ''}`)\n\n    return NextResponse.json({\n      message: `æ›¸é¡ã‚’${action === 'approve' ? 'æ‰¿èª' : 'æ‹’å¦'}ã—ã¾ã—ãŸ`,\n      document: result\n    })\n  } catch (error) {\n    console.error('Update document error:', error)\n    return NextResponse.json(\n      { error: 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":5620},"src/app/contact/page.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport Link from 'next/link'\nimport Logo from '@/components/Logo'\nimport { ArrowLeft, Mail, Phone, MapPin, Clock } from 'lucide-react'\n\nexport default function ContactPage() {\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error'>('idle')\n  const [errorMessage, setErrorMessage] = useState('')\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault()\n    setIsSubmitting(true)\n    setSubmitStatus('idle')\n    setErrorMessage('')\n\n    const formData = new FormData(e.currentTarget)\n    const data = {\n      lastName: formData.get('lastName'),\n      firstName: formData.get('firstName'),\n      lastNameKana: formData.get('lastNameKana'),\n      firstNameKana: formData.get('firstNameKana'),\n      company: formData.get('company'),\n      department: formData.get('department'),\n      phone: formData.get('phone'),\n      email: formData.get('email'),\n      contactMethod: formData.get('contactMethod'),\n      message: formData.get('message'),\n      newsletter: formData.get('newsletter') === 'on'\n    }\n\n    try {\n      const response = await fetch('/api/contact', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(data),\n      })\n\n      const result = await response.json()\n\n      if (result.success) {\n        setSubmitStatus('success')\n        e.currentTarget.reset()\n      } else {\n        setSubmitStatus('error')\n        setErrorMessage(result.error || 'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ')\n      }\n    } catch (error) {\n      setSubmitStatus('error')\n      setErrorMessage('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚')\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen gradient-bg\">\n      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n      <header className=\"glass sticky top-0 z-50 border-b border-white/20\">\n        <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex justify-between items-center\">\n            <Link href=\"/\" className=\"flex items-center\">\n              <Logo width={200} height={60} className=\"w-[150px] h-[45px] sm:w-[200px] sm:h-[60px]\" linkable={false} />\n            </Link>\n            <div className=\"flex items-center space-x-2 sm:space-x-6\">\n              <Link\n                href=\"/login\"\n                className=\"text-slate-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-all duration-300 hover:scale-105\"\n              >\n                ãƒ­ã‚°ã‚¤ãƒ³\n              </Link>\n              <Link\n                href=\"/register\"\n                className=\"btn-primary text-sm px-6 py-3\"\n              >\n                æ–°è¦ç™»éŒ²\n              </Link>\n            </div>\n          </div>\n        </nav>\n      </header>\n\n      {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}\n      <main className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"mb-8\">\n          <Link \n            href=\"/\" \n            className=\"inline-flex items-center text-blue-600 hover:text-blue-700 transition-colors duration-300 mb-6\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹\n          </Link>\n          \n          <h1 className=\"text-4xl sm:text-5xl font-bold text-slate-800 mb-4\">\n            ãŠå•ã„åˆã‚ã›\n          </h1>\n          <p className=\"text-lg text-slate-600\">\n            ã”è³ªå•ãƒ»ã”ç›¸è«‡ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n          {/* ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ  */}\n          <div className=\"floating-card\">\n            <h2 className=\"text-2xl font-bold text-slate-800 mb-6\">ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ </h2>\n            \n            {submitStatus === 'success' && (\n              <div className=\"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg\">\n                <p className=\"text-green-800 font-medium\">\n                  âœ“ ãŠå•ã„åˆã‚ã›ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚æ‹…å½“è€…ã‚ˆã‚ŠæŠ˜ã‚Šè¿”ã—ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚\n                </p>\n              </div>\n            )}\n\n            {submitStatus === 'error' && (\n              <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n                <p className=\"text-red-800 font-medium\">\n                  âœ— {errorMessage}\n                </p>\n              </div>\n            )}\n            \n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <label htmlFor=\"lastName\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n                    ãŠåå‰ï¼ˆå§“ï¼‰<span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"lastName\"\n                    name=\"lastName\"\n                    required\n                    className=\"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                    placeholder=\"å±±ç”°\"\n                  />\n                </div>\n                <div>\n                  <label htmlFor=\"firstName\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n                    ãŠåå‰ï¼ˆåï¼‰<span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"firstName\"\n                    name=\"firstName\"\n                    required\n                    className=\"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                    placeholder=\"å¤ªéƒ\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n                <div>\n                  <label htmlFor=\"lastNameKana\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n                    ãƒ•ãƒªã‚¬ãƒŠï¼ˆã‚»ã‚¤ï¼‰<span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"lastNameKana\"\n                    name=\"lastNameKana\"\n                    required\n                    className=\"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                    placeholder=\"ãƒ¤ãƒãƒ€\"\n                  />\n                </div>\n                <div>\n                  <label htmlFor=\"firstNameKana\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n                    ãƒ•ãƒªã‚¬ãƒŠï¼ˆãƒ¡ã‚¤ï¼‰<span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    id=\"firstNameKana\"\n                    name=\"firstNameKana\"\n                    required\n                    className=\"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                    placeholder=\"ã‚¿ãƒ­ã‚¦\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label htmlFor=\"company\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  ä¼šç¤¾å\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"company\"\n                  name=\"company\"\n                  className=\"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«\"\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"department\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  éƒ¨ç½²ãƒ»å½¹è·\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"department\"\n                  name=\"department\"\n                  className=\"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"å–¶æ¥­éƒ¨ éƒ¨é•·\"\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"phone\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  ãŠé›»è©±ç•ªå·<span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"tel\"\n                  id=\"phone\"\n                  name=\"phone\"\n                  required\n                  className=\"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"03-1234-5678\"\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"email\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹<span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  name=\"email\"\n                  required\n                  className=\"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"example@company.com\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  ã”å¸Œæœ›ã®é€£çµ¡æ–¹æ³•<span className=\"text-red-500\">*</span>\n                </label>\n                <div className=\"space-y-2\">\n                  <label className=\"flex items-center\">\n                    <input type=\"radio\" name=\"contactMethod\" value=\"email\" className=\"mr-2\" />\n                    <span>ãƒ¡ãƒ¼ãƒ«</span>\n                  </label>\n                  <label className=\"flex items-center\">\n                    <input type=\"radio\" name=\"contactMethod\" value=\"phone\" className=\"mr-2\" />\n                    <span>é›»è©±</span>\n                  </label>\n                </div>\n              </div>\n\n              <div>\n                <label htmlFor=\"message\" className=\"block text-sm font-medium text-slate-700 mb-2\">\n                  ãŠå•ã„åˆã‚ã›å†…å®¹<span className=\"text-red-500\">*</span>\n                </label>\n                <textarea\n                  id=\"message\"\n                  name=\"message\"\n                  rows={6}\n                  required\n                  className=\"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                  placeholder=\"ãŠå•ã„åˆã‚ã›å†…å®¹ã‚’ã”è¨˜å…¥ãã ã•ã„\"\n                ></textarea>\n              </div>\n\n              <div className=\"flex items-start\">\n                <input type=\"checkbox\" id=\"newsletter\" name=\"newsletter\" className=\"mt-1 mr-2\" />\n                <label htmlFor=\"newsletter\" className=\"text-sm text-slate-600\">\n                  é€ä¿¡ã—ãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã§ãŠçŸ¥ã‚‰ã›é…ä¿¡ã«ç™»éŒ²ã™ã‚‹\n                </label>\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={isSubmitting}\n                className=\"w-full btn-primary text-center disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {isSubmitting ? 'é€ä¿¡ä¸­...' : 'é€ä¿¡'}\n              </button>\n\n              <p className=\"text-xs text-slate-500\">\n                åˆ©ç”¨è¦ç´„ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã‚’ãŠèª­ã¿ã®ä¸Šã€åŒæ„ã—ã¦é€ä¿¡ã—ã¦ä¸‹ã•ã„ã€‚\n              </p>\n            </form>\n          </div>\n\n          {/* ä¼šç¤¾æƒ…å ± */}\n          <div className=\"space-y-6\">\n            <div className=\"floating-card\">\n              <h2 className=\"text-2xl font-bold text-slate-800 mb-6\">ä¼šç¤¾æƒ…å ±</h2>\n              \n              <div className=\"space-y-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <MapPin className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">æœ¬ç¤¾æ‰€åœ¨åœ°</h3>\n                    <p className=\"text-slate-600\">ã€’243-0303</p>\n                    <p className=\"text-slate-600\">ç¥å¥ˆå·çœŒæ„›ç”²éƒ¡æ„›å·ç”ºä¸­æ´¥ï¼—ï¼’ï¼˜ï¼—</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start space-x-3\">\n                  <Phone className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">é›»è©±ç•ªå·</h3>\n                    <p className=\"text-slate-600\">046-212-2325</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start space-x-3\">\n                  <Phone className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">FAX</h3>\n                    <p className=\"text-slate-600\">046-212-2326</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start space-x-3\">\n                  <Mail className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</h3>\n                    <p className=\"text-slate-600\">info@sinjapan.jp</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start space-x-3\">\n                  <Clock className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">å—ä»˜æ™‚é–“</h3>\n                    <p className=\"text-slate-600\">9:00-21:00</p>\n                    <p className=\"text-sm text-slate-500\">ï¼ˆåœŸæ—¥ç¥æ—¥ã¯ä¼‘æ¥­ï¼‰</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"floating-card\">\n              <h2 className=\"text-2xl font-bold text-slate-800 mb-4\">ãã®ä»–ã®ãŠå•ã„åˆã‚ã›</h2>\n              <div className=\"space-y-3\">\n                <Link \n                  href=\"/help\" \n                  className=\"block text-blue-600 hover:text-blue-700 transition-colors duration-300\"\n                >\n                  ã‚ˆãã‚ã‚‹ã”è³ªå•\n                </Link>\n                <Link \n                  href=\"/terms\" \n                  className=\"block text-blue-600 hover:text-blue-700 transition-colors duration-300\"\n                >\n                  åˆ©ç”¨è¦ç´„\n                </Link>\n                <Link \n                  href=\"/privacy\" \n                  className=\"block text-blue-600 hover:text-blue-700 transition-colors duration-300\"\n                >\n                  ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼\n                </Link>\n                <Link \n                  href=\"/about\" \n                  className=\"block text-blue-600 hover:text-blue-700 transition-colors duration-300\"\n                >\n                  ä¼šç¤¾æ¦‚è¦\n                </Link>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n","size_bytes":15581},"src/app/dashboard/my-shipments/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Package, \n  MapPin, \n  Calendar, \n  Weight, \n  Truck, \n  DollarSign, \n  Eye, \n  Edit, \n  Trash2,\n  Plus,\n  Filter,\n  Search,\n  MoreVertical,\n  CheckCircle,\n  Clock,\n  AlertCircle\n} from 'lucide-react'\n\ninterface Shipment {\n  id: string\n  cargoName: string\n  cargoDescription: string\n  status: 'OPEN' | 'MATCHED' | 'IN_TRANSIT' | 'DELIVERED' | 'CANCELLED'\n  pickupPrefecture: string\n  pickupCity: string\n  deliveryPrefecture: string\n  deliveryCity: string\n  pickupDate: string\n  deliveryDate: string\n  cargoWeight: number\n  requiredVehicleType: string\n  budget: number\n  createdAt: string\n  updatedAt: string\n}\n\nexport default function MyShipmentsPage() {\n  const router = useRouter()\n  const [shipments, setShipments] = useState<Shipment[]>([])\n  const [loading, setLoading] = useState(true)\n  const [filter, setFilter] = useState<'all' | 'OPEN' | 'MATCHED' | 'IN_TRANSIT' | 'DELIVERED' | 'CANCELLED'>('all')\n  const [searchTerm, setSearchTerm] = useState('')\n\n  useEffect(() => {\n    loadMyShipments()\n  }, [])\n\n  const loadMyShipments = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/user/my-posts', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (!response.ok) throw new Error('Failed to load shipments')\n      \n      const data = await response.json()\n      // è·ç‰©ã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆtype: 'shipment'ï¼‰\n      const shipmentPosts = data.data?.filter((post: any) => post.type === 'shipment') || []\n      setShipments(shipmentPosts)\n    } catch (error) {\n      console.error('Error loading shipments:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleDelete = async (shipmentId: string) => {\n    if (!confirm('ã“ã®è·ç‰©ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch(`/api/user/my-posts/${shipmentId}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (!response.ok) throw new Error('Failed to delete shipment')\n      \n      setShipments(prev => prev.filter(s => s.id !== shipmentId))\n    } catch (error) {\n      console.error('Error deleting shipment:', error)\n      alert('å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  const getStatusInfo = (status: string) => {\n    switch (status) {\n      case 'OPEN':\n        return { label: 'å‹Ÿé›†ä¸­', color: 'bg-blue-100 text-blue-800', icon: Clock }\n      case 'MATCHED':\n        return { label: 'æˆç´„æ¸ˆã¿', color: 'bg-green-100 text-green-800', icon: CheckCircle }\n      case 'IN_TRANSIT':\n        return { label: 'è¼¸é€ä¸­', color: 'bg-yellow-100 text-yellow-800', icon: Truck }\n      case 'DELIVERED':\n        return { label: 'å®Œäº†', color: 'bg-gray-100 text-gray-800', icon: CheckCircle }\n      case 'CANCELLED':\n        return { label: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', color: 'bg-red-100 text-red-800', icon: AlertCircle }\n      default:\n        return { label: 'ä¸æ˜', color: 'bg-gray-100 text-gray-800', icon: Clock }\n    }\n  }\n\n  const filteredShipments = shipments.filter(shipment => {\n    const matchesFilter = filter === 'all' || shipment.status === filter\n    const matchesSearch = searchTerm === '' || \n      shipment.cargoName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      shipment.cargoDescription.toLowerCase().includes(searchTerm.toLowerCase())\n    return matchesFilter && matchesSearch\n  })\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">ç™»éŒ²ã—ãŸè·ç‰©</h1>\n            <p className=\"text-gray-600\">ã‚ãªãŸãŒç™»éŒ²ã—ãŸè·ç‰©ã®ä¸€è¦§ã§ã™</p>\n          </div>\n          <button\n            onClick={() => router.push('/dashboard/shipments/new')}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            <span>æ–°è¦ç™»éŒ²</span>\n          </button>\n        </div>\n      </div>\n\n      {/* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¨æ¤œç´¢ */}\n      <div className=\"bg-white rounded-lg shadow-sm border mb-6\">\n        <div className=\"p-4\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"è·ç‰©åã‚„èª¬æ˜ã§æ¤œç´¢...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Filter className=\"h-4 w-4 text-gray-500\" />\n              <select\n                value={filter}\n                onChange={(e) => setFilter(e.target.value as any)}\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"all\">ã™ã¹ã¦</option>\n                <option value=\"OPEN\">å‹Ÿé›†ä¸­</option>\n                <option value=\"MATCHED\">æˆç´„æ¸ˆã¿</option>\n                <option value=\"IN_TRANSIT\">è¼¸é€ä¸­</option>\n                <option value=\"DELIVERED\">å®Œäº†</option>\n                <option value=\"CANCELLED\">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* è·ç‰©ä¸€è¦§ */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            ç™»éŒ²ã—ãŸè·ç‰©ä¸€è¦§ ({filteredShipments.length}ä»¶)\n          </h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : filteredShipments.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <Package className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>ç™»éŒ²ã—ãŸè·ç‰©ã¯ã‚ã‚Šã¾ã›ã‚“</p>\n            <button\n              onClick={() => router.push('/dashboard/shipments/new')}\n              className=\"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n            >\n              æœ€åˆã®è·ç‰©ã‚’ç™»éŒ²ã™ã‚‹\n            </button>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {filteredShipments.map((shipment) => {\n              const statusInfo = getStatusInfo(shipment.status)\n              const StatusIcon = statusInfo.icon\n              \n              return (\n                <div key={shipment.id} className=\"p-6 hover:bg-gray-50\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h3 className=\"text-lg font-medium text-gray-900\">\n                          {shipment.cargoName}\n                        </h3>\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full flex items-center space-x-1 ${statusInfo.color}`}>\n                          <StatusIcon className=\"h-3 w-3\" />\n                          <span>{statusInfo.label}</span>\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-gray-500 mb-3\">\n                        {shipment.cargoDescription}\n                      </p>\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600\">\n                        <div className=\"flex items-center\">\n                          <MapPin className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>{shipment.pickupPrefecture} â†’ {shipment.deliveryPrefecture}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Calendar className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>{new Date(shipment.pickupDate).toLocaleDateString()}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Weight className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>{shipment.cargoWeight}kg</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <DollarSign className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>Â¥{shipment.budget?.toLocaleString() || 'æœªè¨­å®š'}</span>\n                        </div>\n                      </div>\n                      <div className=\"mt-3 text-xs text-gray-400\">\n                        ç™»éŒ²æ—¥: {new Date(shipment.createdAt).toLocaleString('ja-JP')}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2 ml-4\">\n                      <button\n                        onClick={() => router.push(`/shipments/${shipment.id}`)}\n                        className=\"p-2 text-gray-400 hover:text-blue-600\"\n                        title=\"è©³ç´°ã‚’è¦‹ã‚‹\"\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                      </button>\n                      <button\n                        onClick={() => router.push(`/dashboard/shipments/edit/${shipment.id}`)}\n                        className=\"p-2 text-gray-400 hover:text-green-600\"\n                        title=\"ç·¨é›†\"\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </button>\n                      <button\n                        onClick={() => handleDelete(shipment.id)}\n                        className=\"p-2 text-gray-400 hover:text-red-600\"\n                        title=\"å‰Šé™¤\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":10673},"src/app/api/admin/users/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyAdminToken } from '@/lib/adminAuth'\n\nexport const dynamic = 'force-dynamic'\n\n// å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—\nexport async function GET(request: NextRequest) {\n  try {\n    const { error, status } = await verifyAdminToken(request)\n    \n    if (error) {\n      return NextResponse.json({ error }, { status })\n    }\n\n    const { searchParams } = new URL(request.url)\n    const userType = searchParams.get('userType')\n    const search = searchParams.get('search')\n\n    const where: any = {}\n    \n    if (userType && userType !== 'all') {\n      where.userType = userType\n    }\n\n    if (search) {\n      where.OR = [\n        { companyName: { contains: search } },\n        { contactPerson: { contains: search } },\n        { email: { contains: search } }\n      ]\n    }\n\n    const users = await prisma.user.findMany({\n      where,\n      orderBy: { createdAt: 'desc' },\n      select: {\n        id: true,\n        email: true,\n        companyName: true,\n        contactPerson: true,\n        userType: true,\n        verificationStatus: true,\n        trustScore: true,\n        isAdmin: true,\n        createdAt: true,\n        _count: {\n          select: {\n            shipments: true,\n            vehicles: true,\n            payments: true,\n            offers: true\n          }\n        }\n      }\n    })\n\n    return NextResponse.json({ users })\n\n  } catch (error) {\n    console.error('Admin users error:', error)\n    return NextResponse.json({ error: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n\n// ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™å¤‰æ›´\nexport async function PATCH(request: NextRequest) {\n  try {\n    const { error, status } = await verifyAdminToken(request)\n    \n    if (error) {\n      return NextResponse.json({ error }, { status })\n    }\n\n    const { userId, isAdmin } = await request.json()\n\n    if (!userId) {\n      return NextResponse.json({ error: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒå¿…è¦ã§ã™' }, { status: 400 })\n    }\n\n    const updatedUser = await prisma.user.update({\n      where: { id: userId },\n      data: { isAdmin }\n    })\n\n    return NextResponse.json({\n      message: `ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ã‚’${isAdmin ? 'ç®¡ç†è€…ã«' : 'ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«'}å¤‰æ›´ã—ã¾ã—ãŸ`,\n      user: updatedUser\n    })\n\n  } catch (error) {\n    console.error('Update user error:', error)\n    return NextResponse.json({ error: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã®å¤‰æ›´ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":2488},"src/lib/validators.ts":{"content":"import { z } from 'zod'\n\n// ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²\nexport const registerSchema = z.object({\n  email: z.string().email('æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  password: z.string().min(8, 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'),\n  userType: z.enum(['SHIPPER', 'CARRIER'], {\n    errorMap: () => ({ message: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„' }),\n  }),\n  companyName: z.string().min(1, 'ä¼šç¤¾åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  contactPerson: z.string().min(1, 'æ‹…å½“è€…åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  phone: z.string().min(10, 'æœ‰åŠ¹ãªé›»è©±ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  postalCode: z.string().optional(),\n  address: z.string().optional(),\n})\n\n// ãƒ­ã‚°ã‚¤ãƒ³\nexport const loginSchema = z.object({\n  email: z.string().email('æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  password: z.string().min(1, 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n})\n\n// é…é€æ¡ˆä»¶ä½œæˆ\nexport const createShipmentSchema = z.object({\n  cargoName: z.string().min(1, 'è·ç‰©åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  cargoDescription: z.string().optional(),\n  cargoWeight: z.number().positive('é‡é‡ã¯æ­£ã®æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'),\n  cargoVolume: z.number().positive().optional(),\n  cargoValue: z.number().positive().optional(),\n  \n  pickupAddress: z.string().min(1, 'é›†è·å…ˆä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  pickupCity: z.string().min(1, 'é›†è·å…ˆå¸‚åŒºç”ºæ‘ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  pickupPrefecture: z.string().min(1, 'é›†è·å…ˆéƒ½é“åºœçœŒã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  pickupPostalCode: z.string().min(1, 'é›†è·å…ˆéƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  pickupDate: z.string().min(1, 'é›†è·æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  pickupTimeFrom: z.string().optional(),\n  pickupTimeTo: z.string().optional(),\n  \n  deliveryAddress: z.string().min(1, 'é…é€å…ˆä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  deliveryCity: z.string().min(1, 'é…é€å…ˆå¸‚åŒºç”ºæ‘ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  deliveryPrefecture: z.string().min(1, 'é…é€å…ˆéƒ½é“åºœçœŒã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  deliveryPostalCode: z.string().min(1, 'é…é€å…ˆéƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  deliveryDate: z.string().min(1, 'é…é€æ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'),\n  deliveryTimeFrom: z.string().optional(),\n  deliveryTimeTo: z.string().optional(),\n  \n  requiredVehicleType: z.enum([\n    'LIGHT_TRUCK',\n    'SMALL_TRUCK',\n    'MEDIUM_TRUCK',\n    'LARGE_TRUCK',\n    'TRAILER',\n    'REFRIGERATED',\n    'FLATBED',\n    'WING',\n  ]),\n  needsHelper: z.boolean().default(false),\n  needsLiftGate: z.boolean().default(false),\n  temperature: z.string().optional(),\n  specialInstructions: z.string().optional(),\n  \n  budget: z.number().positive('äºˆç®—ã¯æ­£ã®æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'),\n})\n\n// ã‚ªãƒ•ã‚¡ãƒ¼ä½œæˆ\nexport const createOfferSchema = z.object({\n  shipmentId: z.string().min(1, 'é…é€æ¡ˆä»¶IDãŒå¿…è¦ã§ã™'),\n  proposedPrice: z.number().positive('ææ¡ˆé‡‘é¡ã¯æ­£ã®æ•°ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'),\n  message: z.string().optional(),\n  vehicleInfo: z.string().optional(),\n  estimatedPickupTime: z.string().optional(),\n  estimatedDeliveryTime: z.string().optional(),\n})\n\nexport type RegisterInput = z.infer<typeof registerSchema>\nexport type LoginInput = z.infer<typeof loginSchema>\nexport type CreateShipmentInput = z.infer<typeof createShipmentSchema>\nexport type CreateOfferInput = z.infer<typeof createOfferSchema>\n\n","size_bytes":3424},"src/app/shipments/search/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Search, \n  MapPin, \n  Calendar, \n  Weight, \n  DollarSign, \n  Truck, \n  Filter,\n  Star,\n  Clock,\n  User,\n  Phone,\n  Mail,\n  Eye,\n  Heart,\n  Share2,\n  ArrowRight,\n  Package,\n  X,\n  CheckCircle2\n} from 'lucide-react'\n\ninterface Shipment {\n  id: string\n  title: string\n  description: string\n  shipper: {\n    id: string\n    companyName: string\n    contactPerson: string\n    rating: number\n    creditScore: number\n  }\n  pickupLocation: {\n    prefecture: string\n    address: string\n    dateTime: string\n  }\n  deliveryLocation: {\n    prefecture: string\n    address: string\n    dateTime: string\n  }\n  cargo: {\n    type: string\n    weight: number\n    size: string\n    specialRequirements?: string\n  }\n  vehicleType: string\n  price: number\n  urgency: 'urgent' | 'high' | 'normal' | 'low'\n  status: 'available' | 'matched' | 'in_transit' | 'delivered'\n  createdAt: string\n  aiMatchScore?: number\n  isBookmarked?: boolean\n}\n\nexport default function ShipmentSearchPage() {\n  const router = useRouter()\n  const [shipments, setShipments] = useState<Shipment[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchForm, setSearchForm] = useState({\n    pickupPrefecture: '',\n    deliveryPrefecture: '',\n    cargoType: '',\n    vehicleType: '',\n    urgency: '',\n    minPrice: '',\n    maxPrice: '',\n    dateRange: ''\n  })\n  const [sortBy, setSortBy] = useState('newest')\n  const [showFilters, setShowFilters] = useState(false)\n  const [showOfferModal, setShowOfferModal] = useState(false)\n  const [selectedShipment, setSelectedShipment] = useState<Shipment | null>(null)\n  const [offerForm, setOfferForm] = useState({\n    proposedPrice: '',\n    message: '',\n    estimatedPickupTime: '',\n    estimatedDeliveryTime: ''\n  })\n  const [shareMessage, setShareMessage] = useState('')\n\n  useEffect(() => {\n    loadShipments()\n    loadBookmarks()\n  }, [])\n\n  const loadBookmarks = () => {\n    const bookmarks = localStorage.getItem('shipment_bookmarks')\n    if (bookmarks) {\n      const bookmarkedIds = JSON.parse(bookmarks)\n      setShipments(prev => prev.map(shipment => ({\n        ...shipment,\n        isBookmarked: bookmarkedIds.includes(shipment.id)\n      })))\n    }\n  }\n\n  const loadShipments = async () => {\n    setLoading(true)\n    try {\n      const sampleShipments: Shipment[] = [\n        {\n          id: '1',\n          title: 'æ±äº¬ã‹ã‚‰å¤§é˜ªã¸ã®å¤§å‹è²¨ç‰©é…é€',\n          description: 'å¤§å‹æ©Ÿæ¢°ã®è¼¸é€ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚å–ã‚Šæ‰±ã„ã«ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚',\n          shipper: {\n            id: 'shipper-1',\n            companyName: 'ã‚µãƒ³ãƒ—ãƒ«å•†äº‹æ ªå¼ä¼šç¤¾',\n            contactPerson: 'ä½è—¤å¤ªéƒ',\n            rating: 4.5,\n            creditScore: 90\n          },\n          pickupLocation: {\n            prefecture: 'æ±äº¬éƒ½',\n            address: 'å“å·åŒºå¤§å´1-2-3',\n            dateTime: '2024-01-20 09:00'\n          },\n          deliveryLocation: {\n            prefecture: 'å¤§é˜ªåºœ',\n            address: 'å¤§é˜ªå¸‚åŒ—åŒºæ¢…ç”°1-1-1',\n            dateTime: '2024-01-21 15:00'\n          },\n          cargo: {\n            type: 'å¤§å‹æ©Ÿæ¢°',\n            weight: 5000,\n            size: '300cm Ã— 200cm Ã— 150cm',\n            specialRequirements: 'å–ã‚Šæ‰±ã„æ³¨æ„ã€ã‚¯ãƒ¬ãƒ¼ãƒ³ä½œæ¥­å¿…è¦'\n          },\n          vehicleType: 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯',\n          price: 150000,\n          urgency: 'normal',\n          status: 'available',\n          createdAt: '2024-01-15',\n          aiMatchScore: 95,\n          isBookmarked: false\n        },\n        {\n          id: '2',\n          title: 'åå¤å±‹ã‹ã‚‰ç¦å²¡ã¸ã®å†·è”µè²¨ç‰©é…é€',\n          description: 'ç”Ÿé®®é£Ÿå“ã®å†·è”µè¼¸é€ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚æ¸©åº¦ç®¡ç†ãŒé‡è¦ã§ã™ã€‚',\n          shipper: {\n            id: 'shipper-2',\n            companyName: 'ãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ•ãƒ¼ã‚ºæ ªå¼ä¼šç¤¾',\n            contactPerson: 'ç”°ä¸­èŠ±å­',\n            rating: 4.8,\n            creditScore: 95\n          },\n          pickupLocation: {\n            prefecture: 'æ„›çŸ¥çœŒ',\n            address: 'åå¤å±‹å¸‚ä¸­åŒºæ „2-3-4',\n            dateTime: '2024-01-22 08:00'\n          },\n          deliveryLocation: {\n            prefecture: 'ç¦å²¡çœŒ',\n            address: 'ç¦å²¡å¸‚åšå¤šåŒºåšå¤šé§…å‰1-1-1',\n            dateTime: '2024-01-23 12:00'\n          },\n          cargo: {\n            type: 'ç”Ÿé®®é£Ÿå“',\n            weight: 2000,\n            size: '200cm Ã— 150cm Ã— 100cm',\n            specialRequirements: 'å†·è”µè¼¸é€å¿…é ˆã€æ¸©åº¦-2â„ƒä»¥ä¸‹'\n          },\n          vehicleType: 'å†·è”µè»Š',\n          price: 120000,\n          urgency: 'high',\n          status: 'available',\n          createdAt: '2024-01-16',\n          aiMatchScore: 87,\n          isBookmarked: false\n        },\n        {\n          id: '3',\n          title: 'æœ­å¹Œã‹ã‚‰æ±äº¬ã¸ã®æ€¥ä¾¿é…é€',\n          description: 'ç·Šæ€¥æ›¸é¡ã®é…é€ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚æ™‚é–“å³å®ˆã§ãŠé¡˜ã„ã—ã¾ã™ã€‚',\n          shipper: {\n            id: 'shipper-3',\n            companyName: 'åŒ—æµ·é“ç‰©æµæ ªå¼ä¼šç¤¾',\n            contactPerson: 'éˆ´æœ¨ä¸€éƒ',\n            rating: 4.2,\n            creditScore: 85\n          },\n          pickupLocation: {\n            prefecture: 'åŒ—æµ·é“',\n            address: 'æœ­å¹Œå¸‚ä¸­å¤®åŒºå¤§é€šè¥¿1-1-1',\n            dateTime: '2024-01-18 10:00'\n          },\n          deliveryLocation: {\n            prefecture: 'æ±äº¬éƒ½',\n            address: 'åƒä»£ç”°åŒºä¸¸ã®å†…1-1-1',\n            dateTime: '2024-01-19 16:00'\n          },\n          cargo: {\n            type: 'æ›¸é¡',\n            weight: 5,\n            size: '30cm Ã— 20cm Ã— 5cm',\n            specialRequirements: 'æ™‚é–“å³å®ˆã€å—å–äººç¢ºèªå¿…é ˆ'\n          },\n          vehicleType: 'è»½ãƒˆãƒ©ãƒƒã‚¯',\n          price: 80000,\n          urgency: 'urgent',\n          status: 'available',\n          createdAt: '2024-01-17',\n          aiMatchScore: 92,\n          isBookmarked: false\n        }\n      ]\n\n      setShipments(sampleShipments)\n      loadBookmarks()\n    } catch (error) {\n      console.error('Error loading shipments:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault()\n    loadShipments()\n  }\n\n  const handleInputChange = (field: string, value: string) => {\n    setSearchForm(prev => ({ ...prev, [field]: value }))\n  }\n\n  const handleBookmark = (shipmentId: string) => {\n    const bookmarks = localStorage.getItem('shipment_bookmarks')\n    let bookmarkedIds: string[] = bookmarks ? JSON.parse(bookmarks) : []\n    \n    if (bookmarkedIds.includes(shipmentId)) {\n      bookmarkedIds = bookmarkedIds.filter(id => id !== shipmentId)\n    } else {\n      bookmarkedIds.push(shipmentId)\n    }\n    \n    localStorage.setItem('shipment_bookmarks', JSON.stringify(bookmarkedIds))\n    \n    setShipments(prev => prev.map(shipment => \n      shipment.id === shipmentId \n        ? { ...shipment, isBookmarked: !shipment.isBookmarked }\n        : shipment\n    ))\n  }\n\n  const handleShare = async (shipment: Shipment) => {\n    const url = `${window.location.origin}/shipments/${shipment.id}`\n    try {\n      await navigator.clipboard.writeText(url)\n      setShareMessage('URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼')\n      setTimeout(() => setShareMessage(''), 3000)\n    } catch (error) {\n      console.error('Failed to copy:', error)\n    }\n  }\n\n  const handleViewDetails = (shipmentId: string) => {\n    router.push(`/shipments/${shipmentId}`)\n  }\n\n  const handleOfferClick = (shipment: Shipment) => {\n    setSelectedShipment(shipment)\n    setShowOfferModal(true)\n  }\n\n  const handleSubmitOffer = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    try {\n      const token = localStorage.getItem('token')\n      if (!token) {\n        alert('ãƒ­ã‚°ã‚¤ãƒ³ãŒå¿…è¦ã§ã™')\n        router.push('/login')\n        return\n      }\n\n      // TODO: APIå®Ÿè£…\n      console.log('Submitting offer:', {\n        shipmentId: selectedShipment?.id,\n        ...offerForm\n      })\n\n      alert('å¿œå‹ŸãŒå®Œäº†ã—ã¾ã—ãŸï¼')\n      setShowOfferModal(false)\n      setOfferForm({\n        proposedPrice: '',\n        message: '',\n        estimatedPickupTime: '',\n        estimatedDeliveryTime: ''\n      })\n    } catch (error) {\n      console.error('Error submitting offer:', error)\n      alert('å¿œå‹Ÿã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  const getUrgencyColor = (urgency: string) => {\n    switch (urgency) {\n      case 'urgent': return 'text-red-600 bg-red-100'\n      case 'high': return 'text-orange-600 bg-orange-100'\n      case 'normal': return 'text-blue-600 bg-blue-100'\n      case 'low': return 'text-green-600 bg-green-100'\n      default: return 'text-gray-600 bg-gray-100'\n    }\n  }\n\n  const getUrgencyText = (urgency: string) => {\n    switch (urgency) {\n      case 'urgent': return 'ç·Šæ€¥'\n      case 'high': return 'é«˜'\n      case 'normal': return 'é€šå¸¸'\n      case 'low': return 'ä½'\n      default: return 'ä¸æ˜'\n    }\n  }\n\n  const renderStars = (rating: number) => {\n    return Array.from({ length: 5 }, (_, i) => (\n      <Star\n        key={i}\n        className={`h-4 w-4 ${\n          i < Math.floor(rating) ? 'text-yellow-400 fill-current' : 'text-gray-300'\n        }`}\n      />\n    ))\n  }\n\n  const prefectures = [\n    'åŒ—æµ·é“', 'é’æ£®çœŒ', 'å²©æ‰‹çœŒ', 'å®®åŸçœŒ', 'ç§‹ç”°çœŒ', 'å±±å½¢çœŒ', 'ç¦å³¶çœŒ',\n    'èŒ¨åŸçœŒ', 'æ ƒæœ¨çœŒ', 'ç¾¤é¦¬çœŒ', 'åŸ¼ç‰çœŒ', 'åƒè‘‰çœŒ', 'æ±äº¬éƒ½', 'ç¥å¥ˆå·çœŒ',\n    'æ–°æ½ŸçœŒ', 'å¯Œå±±çœŒ', 'çŸ³å·çœŒ', 'ç¦äº•çœŒ', 'å±±æ¢¨çœŒ', 'é•·é‡çœŒ', 'å²é˜œçœŒ',\n    'é™å²¡çœŒ', 'æ„›çŸ¥çœŒ', 'ä¸‰é‡çœŒ', 'æ»‹è³€çœŒ', 'äº¬éƒ½åºœ', 'å¤§é˜ªåºœ', 'å…µåº«çœŒ',\n    'å¥ˆè‰¯çœŒ', 'å’Œæ­Œå±±çœŒ', 'é³¥å–çœŒ', 'å³¶æ ¹çœŒ', 'å²¡å±±çœŒ', 'åºƒå³¶çœŒ', 'å±±å£çœŒ',\n    'å¾³å³¶çœŒ', 'é¦™å·çœŒ', 'æ„›åª›çœŒ', 'é«˜çŸ¥çœŒ', 'ç¦å²¡çœŒ', 'ä½è³€çœŒ', 'é•·å´çœŒ',\n    'ç†Šæœ¬çœŒ', 'å¤§åˆ†çœŒ', 'å®®å´çœŒ', 'é¹¿å…å³¶çœŒ', 'æ²–ç¸„çœŒ'\n  ]\n\n  const cargoTypes = [\n    'ä¸€èˆ¬è²¨ç‰©', 'å†·è”µãƒ»å†·å‡', 'å±é™ºç‰©', 'ç”Ÿé®®é£Ÿå“', 'ç²¾å¯†æ©Ÿå™¨', 'ç¾è¡“å“', 'åŒ»è–¬å“', 'ãã®ä»–'\n  ]\n\n  const vehicleTypes = [\n    'è»½ãƒˆãƒ©ãƒƒã‚¯', 'å°å‹ãƒˆãƒ©ãƒƒã‚¯', 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯', 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯', 'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼', 'å†·å‡è»Š', 'å†·è”µè»Š', 'ãã®ä»–'\n  ]\n\n  const urgencyLevels = [\n    { value: 'urgent', label: 'ç·Šæ€¥ï¼ˆ24æ™‚é–“ä»¥å†…ï¼‰' },\n    { value: 'high', label: 'é«˜ï¼ˆ3æ—¥ä»¥å†…ï¼‰' },\n    { value: 'normal', label: 'é€šå¸¸ï¼ˆ1é€±é–“ä»¥å†…ï¼‰' },\n    { value: 'low', label: 'ä½ï¼ˆ2é€±é–“ä»¥å†…ï¼‰' }\n  ]\n\n  return (\n    <DashboardLayout>\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">è·ç‰©æ¤œç´¢</h1>\n          <p className=\"text-gray-600\">æ¡ä»¶ã«åˆã†é…é€æ¡ˆä»¶ã‚’æ¤œç´¢ã§ãã¾ã™</p>\n        </div>\n\n        {/* å…±æœ‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}\n        {shareMessage && (\n          <div className=\"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-center animate-fade-in\">\n            <CheckCircle2 className=\"h-5 w-5 text-green-600 mr-3\" />\n            <p className=\"text-sm text-green-700\">{shareMessage}</p>\n          </div>\n        )}\n\n        {/* æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6 mb-8\">\n          <form onSubmit={handleSearch} className=\"space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">é›†è·éƒ½é“åºœçœŒ</label>\n                <select\n                  value={searchForm.pickupPrefecture}\n                  onChange={(e) => handleInputChange('pickupPrefecture', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                  {prefectures.map(pref => (\n                    <option key={pref} value={pref}>{pref}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">é…é€å…ˆéƒ½é“åºœçœŒ</label>\n                <select\n                  value={searchForm.deliveryPrefecture}\n                  onChange={(e) => handleInputChange('deliveryPrefecture', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                  {prefectures.map(pref => (\n                    <option key={pref} value={pref}>{pref}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">è·ç‰©ã®ç¨®é¡</label>\n                <select\n                  value={searchForm.cargoType}\n                  onChange={(e) => handleInputChange('cargoType', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                  {cargoTypes.map(type => (\n                    <option key={type} value={type}>{type}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">è»Šä¸¡ã‚¿ã‚¤ãƒ—</label>\n                <select\n                  value={searchForm.vehicleType}\n                  onChange={(e) => handleInputChange('vehicleType', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                  {vehicleTypes.map(type => (\n                    <option key={type} value={type}>{type}</option>\n                  ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"flex flex-wrap gap-4\">\n              <button\n                type=\"button\"\n                onClick={() => setShowFilters(!showFilters)}\n                className=\"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\n              >\n                <Filter className=\"h-4 w-4\" />\n                <span>è©³ç´°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</span>\n              </button>\n              <button\n                type=\"submit\"\n                className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n              >\n                <Search className=\"h-4 w-4\" />\n                <span>æ¤œç´¢</span>\n              </button>\n            </div>\n\n            {showFilters && (\n              <div className=\"border-t pt-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">ç·Šæ€¥åº¦</label>\n                    <select\n                      value={searchForm.urgency}\n                      onChange={(e) => handleInputChange('urgency', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    >\n                      <option value=\"\">ã™ã¹ã¦</option>\n                      {urgencyLevels.map(level => (\n                        <option key={level.value} value={level.value}>{level.label}</option>\n                      ))}\n                    </select>\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">æœ€ä½ä¾¡æ ¼</label>\n                    <input\n                      type=\"number\"\n                      value={searchForm.minPrice}\n                      onChange={(e) => handleInputChange('minPrice', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      placeholder=\"0\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">æœ€é«˜ä¾¡æ ¼</label>\n                    <input\n                      type=\"number\"\n                      value={searchForm.maxPrice}\n                      onChange={(e) => handleInputChange('maxPrice', e.target.value)}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      placeholder=\"1000000\"\n                    />\n                  </div>\n                </div>\n              </div>\n            )}\n          </form>\n        </div>\n\n        {/* æ¤œç´¢çµæœ */}\n        <div className=\"flex justify-between items-center mb-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            æ¤œç´¢çµæœ ({shipments.length}ä»¶)\n          </h2>\n          <div className=\"flex items-center space-x-4\">\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            >\n              <option value=\"newest\">æ–°ã—ã„é †</option>\n              <option value=\"oldest\">å¤ã„é †</option>\n              <option value=\"price_high\">ä¾¡æ ¼ã®é«˜ã„é †</option>\n              <option value=\"price_low\">ä¾¡æ ¼ã®å®‰ã„é †</option>\n              <option value=\"urgency\">ç·Šæ€¥åº¦é †</option>\n            </select>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"></div>\n            <p className=\"text-gray-600\">æ¤œç´¢ä¸­...</p>\n          </div>\n        ) : shipments.length === 0 ? (\n          <div className=\"text-center py-12\">\n            <Package className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p className=\"text-gray-600\">è©²å½“ã™ã‚‹è·ç‰©ã¯ã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {shipments.map((shipment) => (\n              <div key={shipment.id} className=\"bg-white rounded-lg shadow-sm border hover:shadow-md transition-shadow\">\n                <div className=\"p-6\">\n                  <div className=\"flex justify-between items-start mb-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h3 className=\"text-lg font-semibold text-gray-900\">{shipment.title}</h3>\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${getUrgencyColor(shipment.urgency)}`}>\n                          {getUrgencyText(shipment.urgency)}\n                        </span>\n                        {shipment.aiMatchScore && (\n                          <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800\">\n                            AIãƒãƒƒãƒãƒ³ã‚°: {shipment.aiMatchScore}%\n                          </span>\n                        )}\n                      </div>\n                      <p className=\"text-gray-600 mb-3\">{shipment.description}</p>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <button\n                        onClick={() => handleBookmark(shipment.id)}\n                        className={`p-2 rounded-lg transition-colors ${\n                          shipment.isBookmarked ? 'text-red-600 bg-red-100' : 'text-gray-400 hover:text-red-600 hover:bg-red-50'\n                        }`}\n                        title=\"ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯\"\n                      >\n                        <Heart className={`h-5 w-5 ${shipment.isBookmarked ? 'fill-current' : ''}`} />\n                      </button>\n                      <button \n                        onClick={() => handleShare(shipment)}\n                        className=\"p-2 rounded-lg text-gray-400 hover:text-gray-600 hover:bg-gray-50\"\n                        title=\"å…±æœ‰\"\n                      >\n                        <Share2 className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4\">\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-700 mb-2\">é›†è·æƒ…å ±</h4>\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm text-gray-600\">\n                          <MapPin className=\"h-4 w-4 inline mr-1\" />\n                          {shipment.pickupLocation.prefecture} {shipment.pickupLocation.address}\n                        </p>\n                        <p className=\"text-sm text-gray-600\">\n                          <Calendar className=\"h-4 w-4 inline mr-1\" />\n                          {new Date(shipment.pickupLocation.dateTime).toLocaleString('ja-JP')}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-700 mb-2\">é…é€å…ˆæƒ…å ±</h4>\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm text-gray-600\">\n                          <MapPin className=\"h-4 w-4 inline mr-1\" />\n                          {shipment.deliveryLocation.prefecture} {shipment.deliveryLocation.address}\n                        </p>\n                        <p className=\"text-sm text-gray-600\">\n                          <Calendar className=\"h-4 w-4 inline mr-1\" />\n                          {new Date(shipment.deliveryLocation.dateTime).toLocaleString('ja-JP')}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4\">\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-700 mb-2\">è·ç‰©æƒ…å ±</h4>\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm text-gray-600\">\n                          <Package className=\"h-4 w-4 inline mr-1\" />\n                          {shipment.cargo.type}\n                        </p>\n                        <p className=\"text-sm text-gray-600\">\n                          <Weight className=\"h-4 w-4 inline mr-1\" />\n                          {shipment.cargo.weight}kg\n                        </p>\n                        <p className=\"text-sm text-gray-600\">\n                          ã‚µã‚¤ã‚º: {shipment.cargo.size}\n                        </p>\n                        {shipment.cargo.specialRequirements && (\n                          <p className=\"text-sm text-orange-600\">\n                            ç‰¹è¨˜äº‹é …: {shipment.cargo.specialRequirements}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-700 mb-2\">é‹é€æƒ…å ±</h4>\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm text-gray-600\">\n                          <Truck className=\"h-4 w-4 inline mr-1\" />\n                          {shipment.vehicleType}\n                        </p>\n                        <p className=\"text-sm text-gray-600\">\n                          <Clock className=\"h-4 w-4 inline mr-1\" />\n                          æŠ•ç¨¿æ—¥: {new Date(shipment.createdAt).toLocaleDateString('ja-JP')}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div>\n                      <h4 className=\"text-sm font-medium text-gray-700 mb-2\">è·ä¸»æƒ…å ±</h4>\n                      <div className=\"space-y-1\">\n                        <p className=\"text-sm text-gray-600\">\n                          <User className=\"h-4 w-4 inline mr-1\" />\n                          {shipment.shipper.companyName}\n                        </p>\n                        <p className=\"text-sm text-gray-600\">\n                          æ‹…å½“: {shipment.shipper.contactPerson}\n                        </p>\n                        <div className=\"flex items-center space-x-1\">\n                          {renderStars(shipment.shipper.rating)}\n                          <span className=\"text-sm text-gray-600\">({shipment.shipper.rating})</span>\n                        </div>\n                        <p className=\"text-sm text-gray-600\">\n                          ä¿¡ç”¨ã‚¹ã‚³ã‚¢: {shipment.shipper.creditScore}ç‚¹\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-between items-center pt-4 border-t border-gray-200\">\n                    <div className=\"text-2xl font-bold text-gray-900\">\n                      Â¥{shipment.price?.toLocaleString() || 'æœªè¨­å®š'}\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <button \n                        onClick={() => handleViewDetails(shipment.id)}\n                        className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center space-x-2 transition-colors\"\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                        <span>è©³ç´°ã‚’è¦‹ã‚‹</span>\n                      </button>\n                      <button \n                        onClick={() => handleOfferClick(shipment)}\n                        className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2 transition-colors\"\n                      >\n                        <span>å¿œå‹Ÿã™ã‚‹</span>\n                        <ArrowRight className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* å¿œå‹Ÿãƒ¢ãƒ¼ãƒ€ãƒ« */}\n      {showOfferModal && selectedShipment && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6\">\n              <div className=\"flex justify-between items-center mb-6\">\n                <h2 className=\"text-2xl font-bold text-gray-900\">é…é€æ¡ˆä»¶ã«å¿œå‹Ÿ</h2>\n                <button\n                  onClick={() => setShowOfferModal(false)}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n\n              <div className=\"mb-6 p-4 bg-gray-50 rounded-lg\">\n                <h3 className=\"font-semibold text-gray-900 mb-2\">{selectedShipment.title}</h3>\n                <p className=\"text-sm text-gray-600 mb-2\">{selectedShipment.description}</p>\n                <div className=\"text-lg font-bold text-gray-900\">\n                  äºˆç®—: Â¥{selectedShipment.price?.toLocaleString() || 'æœªè¨­å®š'}\n                </div>\n              </div>\n\n              <form onSubmit={handleSubmitOffer} className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    ææ¡ˆé‡‘é¡ (å††) <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={offerForm.proposedPrice}\n                    onChange={(e) => setOfferForm(prev => ({ ...prev, proposedPrice: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ä¾‹: 100000\"\n                    required\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</label>\n                  <textarea\n                    value={offerForm.message}\n                    onChange={(e) => setOfferForm(prev => ({ ...prev, message: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    rows={4}\n                    placeholder=\"é‹é€ä¼šç¤¾ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã”è¨˜å…¥ãã ã•ã„\"\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">é›†è·äºˆå®šæ™‚é–“</label>\n                    <input\n                      type=\"datetime-local\"\n                      value={offerForm.estimatedPickupTime}\n                      onChange={(e) => setOfferForm(prev => ({ ...prev, estimatedPickupTime: e.target.value }))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">é…é€äºˆå®šæ™‚é–“</label>\n                    <input\n                      type=\"datetime-local\"\n                      value={offerForm.estimatedDeliveryTime}\n                      onChange={(e) => setOfferForm(prev => ({ ...prev, estimatedDeliveryTime: e.target.value }))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    />\n                  </div>\n                </div>\n\n                <div className=\"flex justify-end gap-3 pt-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowOfferModal(false)}\n                    className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                  >\n                    ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700\"\n                  >\n                    å¿œå‹Ÿã™ã‚‹\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      )}\n    </DashboardLayout>\n  )\n}\n","size_bytes":31071},"src/app/dashboard/limited-shipments/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Package, \n  Search, \n  Filter, \n  Star, \n  Clock, \n  MapPin, \n  Calendar, \n  Weight, \n  Truck, \n  DollarSign, \n  Eye, \n  Bookmark,\n  Building2,\n  User,\n  Phone,\n  Mail,\n  AlertCircle,\n  CheckCircle,\n  Crown,\n  Zap\n} from 'lucide-react'\n\ninterface LimitedShipment {\n  id: string\n  cargoName: string\n  cargoDescription: string\n  status: 'OPEN' | 'MATCHED' | 'IN_TRANSIT' | 'DELIVERED' | 'CANCELLED'\n  pickupPrefecture: string\n  pickupCity: string\n  deliveryPrefecture: string\n  deliveryCity: string\n  pickupDate: string\n  deliveryDate: string\n  cargoWeight: number\n  requiredVehicleType: string\n  budget: number\n  specialConditions: string[]\n  priority: 'high' | 'medium' | 'low'\n  isUrgent: boolean\n  isPremium: boolean\n  isBookmarked?: boolean\n  shipper: {\n    companyName: string\n    contactPerson: string\n    phone: string\n    email: string\n  }\n  createdAt: string\n  expiresAt: string\n}\n\nexport default function LimitedShipmentsPage() {\n  const router = useRouter()\n  const [shipments, setShipments] = useState<LimitedShipment[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [priorityFilter, setPriorityFilter] = useState<'all' | 'high' | 'medium' | 'low'>('all')\n  const [typeFilter, setTypeFilter] = useState<'all' | 'urgent' | 'premium' | 'special'>('all')\n\n  useEffect(() => {\n    loadLimitedShipments()\n  }, [])\n\n  const loadLimitedShipments = async () => {\n    try {\n      const bookmarks = localStorage.getItem('limited_shipment_bookmarks')\n      const bookmarkedIds: string[] = bookmarks ? JSON.parse(bookmarks) : []\n      \n      // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿\n      const sampleShipments: LimitedShipment[] = [\n        {\n          id: '1',\n          cargoName: 'åŒ»ç™‚æ©Ÿå™¨ï¼ˆç·Šæ€¥è¼¸é€ï¼‰',\n          cargoDescription: 'æ‰‹è¡“ç”¨åŒ»ç™‚æ©Ÿå™¨ã®ç·Šæ€¥è¼¸é€ã€‚æ¸©åº¦ç®¡ç†å¿…é ˆã€‚',\n          status: 'OPEN',\n          pickupPrefecture: 'æ±äº¬éƒ½',\n          pickupCity: 'æ¸¯åŒº',\n          deliveryPrefecture: 'å¤§é˜ªåºœ',\n          deliveryCity: 'å¤§é˜ªå¸‚',\n          pickupDate: '2024-01-20',\n          deliveryDate: '2024-01-20',\n          cargoWeight: 50,\n          requiredVehicleType: 'å†·è”µè»Š',\n          budget: 150000,\n          specialConditions: ['ç·Šæ€¥è¼¸é€', 'æ¸©åº¦ç®¡ç†', 'åŒ»ç™‚æ©Ÿå™¨', '24æ™‚é–“å¯¾å¿œ'],\n          priority: 'high',\n          isUrgent: true,\n          isPremium: true,\n          shipper: {\n            companyName: 'ãƒ¡ãƒ‡ã‚£ã‚«ãƒ«ã‚µãƒ—ãƒ©ã‚¤æ ªå¼ä¼šç¤¾',\n            contactPerson: 'å±±ç”°å¤ªéƒ',\n            phone: '03-1234-5678',\n            email: 'yamada@medical-supply.co.jp'\n          },\n          createdAt: '2024-01-19T10:00:00',\n          expiresAt: '2024-01-20T18:00:00'\n        },\n        {\n          id: '2',\n          cargoName: 'ç¾è¡“å“ï¼ˆç‰¹åˆ¥è¼¸é€ï¼‰',\n          cargoDescription: 'é«˜ä¾¡ãªç¾è¡“å“ã®ç‰¹åˆ¥è¼¸é€ã€‚å°‚ç”¨è»Šä¸¡ãƒ»è­¦å‚™å“¡ä»˜ãã€‚',\n          status: 'OPEN',\n          pickupPrefecture: 'äº¬éƒ½åºœ',\n          pickupCity: 'äº¬éƒ½å¸‚',\n          deliveryPrefecture: 'æ±äº¬éƒ½',\n          deliveryCity: 'æ¸‹è°·åŒº',\n          pickupDate: '2024-01-25',\n          deliveryDate: '2024-01-25',\n          cargoWeight: 200,\n          requiredVehicleType: 'ç‰¹åˆ¥è»Šä¸¡',\n          budget: 500000,\n          specialConditions: ['ç¾è¡“å“è¼¸é€', 'è­¦å‚™å“¡ä»˜ã', 'å°‚ç”¨è»Šä¸¡', 'ä¿é™ºå¿…é ˆ'],\n          priority: 'high',\n          isUrgent: false,\n          isPremium: true,\n          shipper: {\n            companyName: 'ã‚¢ãƒ¼ãƒˆã‚®ãƒ£ãƒ©ãƒªãƒ¼äº¬éƒ½',\n            contactPerson: 'ä½è—¤èŠ±å­',\n            phone: '075-1234-5678',\n            email: 'sato@art-gallery-kyoto.co.jp'\n          },\n          createdAt: '2024-01-18T14:00:00',\n          expiresAt: '2024-01-24T17:00:00'\n        },\n        {\n          id: '3',\n          cargoName: 'å±é™ºç‰©ï¼ˆåŒ–å­¦è–¬å“ï¼‰',\n          cargoDescription: 'åŒ–å­¦è–¬å“ã®è¼¸é€ã€‚å±é™ºç‰©è¼¸é€è³‡æ ¼å¿…é ˆã€‚',\n          status: 'OPEN',\n          pickupPrefecture: 'æ„›çŸ¥çœŒ',\n          pickupCity: 'åå¤å±‹å¸‚',\n          deliveryPrefecture: 'ç¥å¥ˆå·çœŒ',\n          deliveryCity: 'æ¨ªæµœå¸‚',\n          pickupDate: '2024-01-22',\n          deliveryDate: '2024-01-23',\n          cargoWeight: 1000,\n          requiredVehicleType: 'å±é™ºç‰©è¼¸é€è»Š',\n          budget: 200000,\n          specialConditions: ['å±é™ºç‰©è¼¸é€', 'è³‡æ ¼å¿…é ˆ', 'å°‚ç”¨è»Šä¸¡', 'å®‰å…¨å¯¾ç­–'],\n          priority: 'medium',\n          isUrgent: false,\n          isPremium: false,\n          shipper: {\n            companyName: 'ã‚±ãƒŸã‚«ãƒ«å·¥æ¥­æ ªå¼ä¼šç¤¾',\n            contactPerson: 'ç”°ä¸­æ¬¡éƒ',\n            phone: '052-1234-5678',\n            email: 'tanaka@chemical-industry.co.jp'\n          },\n          createdAt: '2024-01-17T09:00:00',\n          expiresAt: '2024-01-21T17:00:00'\n        },\n        {\n          id: '4',\n          cargoName: 'ç”Ÿé®®é£Ÿå“ï¼ˆæ·±å¤œé…é€ï¼‰',\n          cargoDescription: 'ç”Ÿé®®é£Ÿå“ã®æ·±å¤œé…é€ã€‚æ—©æœåˆ°ç€å¿…é ˆã€‚',\n          status: 'OPEN',\n          pickupPrefecture: 'é’æ£®çœŒ',\n          pickupCity: 'é’æ£®å¸‚',\n          deliveryPrefecture: 'æ±äº¬éƒ½',\n          deliveryCity: 'ä¸­å¤®åŒº',\n          pickupDate: '2024-01-21',\n          deliveryDate: '2024-01-22',\n          cargoWeight: 300,\n          requiredVehicleType: 'å†·è”µè»Š',\n          budget: 80000,\n          specialConditions: ['æ·±å¤œé…é€', 'æ—©æœåˆ°ç€', 'å†·è”µè¼¸é€', 'é®®åº¦ä¿æŒ'],\n          priority: 'medium',\n          isUrgent: true,\n          isPremium: false,\n          shipper: {\n            companyName: 'é’æ£®ãƒ•ãƒ«ãƒ¼ãƒ„è¾²å”',\n            contactPerson: 'éˆ´æœ¨ä¸€éƒ',\n            phone: '017-1234-5678',\n            email: 'suzuki@aomori-fruits.co.jp'\n          },\n          createdAt: '2024-01-16T16:00:00',\n          expiresAt: '2024-01-20T20:00:00'\n        }\n      ]\n      \n      // ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯çŠ¶æ…‹ã‚’é©ç”¨\n      const shipmentsWithBookmarks = sampleShipments.map(shipment => ({\n        ...shipment,\n        isBookmarked: bookmarkedIds.includes(shipment.id)\n      }))\n      \n      setShipments(shipmentsWithBookmarks)\n    } catch (error) {\n      console.error('Error loading limited shipments:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getPriorityInfo = (priority: string) => {\n    switch (priority) {\n      case 'high':\n        return { label: 'é«˜å„ªå…ˆåº¦', color: 'bg-red-100 text-red-800', icon: AlertCircle }\n      case 'medium':\n        return { label: 'ä¸­å„ªå…ˆåº¦', color: 'bg-yellow-100 text-yellow-800', icon: Clock }\n      case 'low':\n        return { label: 'ä½å„ªå…ˆåº¦', color: 'bg-green-100 text-green-800', icon: CheckCircle }\n      default:\n        return { label: 'ä¸æ˜', color: 'bg-gray-100 text-gray-800', icon: Clock }\n    }\n  }\n\n  const filteredShipments = shipments.filter(shipment => {\n    const matchesSearch = searchTerm === '' || \n      shipment.cargoName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      shipment.cargoDescription.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      shipment.specialConditions.some(condition => \n        condition.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    \n    const matchesPriority = priorityFilter === 'all' || shipment.priority === priorityFilter\n    \n    const matchesType = typeFilter === 'all' || \n      (typeFilter === 'urgent' && shipment.isUrgent) ||\n      (typeFilter === 'premium' && shipment.isPremium) ||\n      (typeFilter === 'special' && !shipment.isUrgent && !shipment.isPremium)\n    \n    return matchesSearch && matchesPriority && matchesType\n  })\n\n  const handleBookmark = (shipmentId: string) => {\n    const bookmarks = localStorage.getItem('limited_shipment_bookmarks')\n    let bookmarkedIds: string[] = bookmarks ? JSON.parse(bookmarks) : []\n    \n    if (bookmarkedIds.includes(shipmentId)) {\n      bookmarkedIds = bookmarkedIds.filter(id => id !== shipmentId)\n    } else {\n      bookmarkedIds.push(shipmentId)\n    }\n    \n    localStorage.setItem('limited_shipment_bookmarks', JSON.stringify(bookmarkedIds))\n    \n    // UIæ›´æ–°ã®ãŸã‚ã«shipmentsã‚’å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°\n    loadLimitedShipments()\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">é™å®šè·ç‰©</h1>\n        <p className=\"text-gray-600\">ç‰¹åˆ¥ãªæ¡ä»¶ã‚„ç·Šæ€¥åº¦ã®é«˜ã„è·ç‰©ã‚’ã”ç¢ºèªã„ãŸã ã‘ã¾ã™</p>\n      </div>\n\n      {/* æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}\n      <div className=\"bg-white rounded-lg shadow-sm border mb-6\">\n        <div className=\"p-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"è·ç‰©åã€æ¡ä»¶ã§æ¤œç´¢...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n            <div>\n              <div className=\"flex items-center space-x-2\">\n                <Filter className=\"h-4 w-4 text-gray-500\" />\n                <select\n                  value={priorityFilter}\n                  onChange={(e) => setPriorityFilter(e.target.value as any)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"all\">ã™ã¹ã¦ã®å„ªå…ˆåº¦</option>\n                  <option value=\"high\">é«˜å„ªå…ˆåº¦</option>\n                  <option value=\"medium\">ä¸­å„ªå…ˆåº¦</option>\n                  <option value=\"low\">ä½å„ªå…ˆåº¦</option>\n                </select>\n              </div>\n            </div>\n            <div>\n              <select\n                value={typeFilter}\n                onChange={(e) => setTypeFilter(e.target.value as any)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"all\">ã™ã¹ã¦ã®ã‚¿ã‚¤ãƒ—</option>\n                <option value=\"urgent\">ç·Šæ€¥</option>\n                <option value=\"premium\">ãƒ—ãƒ¬ãƒŸã‚¢ãƒ </option>\n                <option value=\"special\">ç‰¹åˆ¥æ¡ä»¶</option>\n              </select>\n            </div>\n            <div>\n              <button\n                onClick={() => {\n                  setSearchTerm('')\n                  setPriorityFilter('all')\n                  setTypeFilter('all')\n                }}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-700\"\n              >\n                ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ã‚¯ãƒªã‚¢\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* é™å®šè·ç‰©ä¸€è¦§ */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            é™å®šè·ç‰©ä¸€è¦§ ({filteredShipments.length}ä»¶)\n          </h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : filteredShipments.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <Package className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹é™å®šè·ç‰©ã¯ã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {filteredShipments.map((shipment) => {\n              const priorityInfo = getPriorityInfo(shipment.priority)\n              const PriorityIcon = priorityInfo.icon\n              \n              return (\n                <div key={shipment.id} className=\"p-6 hover:bg-gray-50\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h3 className=\"text-lg font-medium text-gray-900\">\n                          {shipment.cargoName}\n                        </h3>\n                        {shipment.isUrgent && (\n                          <span className=\"flex items-center px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800\">\n                            <Zap className=\"h-3 w-3 mr-1\" />\n                            ç·Šæ€¥\n                          </span>\n                        )}\n                        {shipment.isPremium && (\n                          <span className=\"flex items-center px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800\">\n                            <Crown className=\"h-3 w-3 mr-1\" />\n                            ãƒ—ãƒ¬ãƒŸã‚¢ãƒ \n                          </span>\n                        )}\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full flex items-center space-x-1 ${priorityInfo.color}`}>\n                          <PriorityIcon className=\"h-3 w-3\" />\n                          <span>{priorityInfo.label}</span>\n                        </span>\n                      </div>\n                      \n                      <p className=\"text-sm text-gray-600 mb-3\">{shipment.cargoDescription}</p>\n                      \n                      {/* ç‰¹åˆ¥æ¡ä»¶ */}\n                      <div className=\"mb-3\">\n                        <h4 className=\"text-sm font-medium text-gray-800 mb-2\">ç‰¹åˆ¥æ¡ä»¶</h4>\n                        <div className=\"flex flex-wrap gap-2\">\n                          {shipment.specialConditions.map((condition, index) => (\n                            <span\n                              key={index}\n                              className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\"\n                            >\n                              {condition}\n                            </span>\n                          ))}\n                        </div>\n                      </div>\n\n                      {/* åŸºæœ¬æƒ…å ± */}\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-4\">\n                        <div className=\"flex items-center\">\n                          <MapPin className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>{shipment.pickupPrefecture} â†’ {shipment.deliveryPrefecture}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Calendar className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>{new Date(shipment.pickupDate).toLocaleDateString()}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Weight className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>{shipment.cargoWeight}kg</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <DollarSign className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>Â¥{shipment.budget.toLocaleString()}</span>\n                        </div>\n                      </div>\n\n                      {/* è·ä¸»æƒ…å ± */}\n                      <div className=\"border-t border-gray-100 pt-3 mb-3\">\n                        <h4 className=\"font-semibold text-gray-800 mb-2\">è·ä¸»æƒ…å ±</h4>\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700\">\n                          <div className=\"flex items-center\">\n                            <Building2 className=\"h-4 w-4 mr-2 text-gray-500\" />\n                            <span>{shipment.shipper.companyName}</span>\n                          </div>\n                          <div className=\"flex items-center\">\n                            <User className=\"h-4 w-4 mr-2 text-gray-500\" />\n                            <span>{shipment.shipper.contactPerson}</span>\n                          </div>\n                          <div className=\"flex items-center\">\n                            <Phone className=\"h-4 w-4 mr-2 text-gray-500\" />\n                            <span>{shipment.shipper.phone}</span>\n                          </div>\n                          <div className=\"flex items-center\">\n                            <Mail className=\"h-4 w-4 mr-2 text-gray-500\" />\n                            <span>{shipment.shipper.email}</span>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center justify-between text-xs text-gray-400\">\n                        <span>ç™»éŒ²æ—¥: {new Date(shipment.createdAt).toLocaleString('ja-JP')}</span>\n                        <span className=\"text-red-500\">\n                          æœŸé™: {new Date(shipment.expiresAt).toLocaleString('ja-JP')}\n                        </span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2 ml-4\">\n                      <button\n                        onClick={() => router.push(`/shipments/${shipment.id}`)}\n                        className=\"p-2 text-gray-400 hover:text-blue-600 transition-colors\"\n                        title=\"è©³ç´°ã‚’è¦‹ã‚‹\"\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                      </button>\n                      <button\n                        onClick={() => handleBookmark(shipment.id)}\n                        className={`p-2 transition-colors ${\n                          shipment.isBookmarked \n                            ? 'text-yellow-600 bg-yellow-100' \n                            : 'text-gray-400 hover:text-yellow-600 hover:bg-yellow-50'\n                        }`}\n                        title={shipment.isBookmarked ? 'ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯è§£é™¤' : 'ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯'}\n                      >\n                        <Bookmark className={`h-4 w-4 ${shipment.isBookmarked ? 'fill-current' : ''}`} />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":18646},"src/app/about/page.tsx":{"content":"'use client'\n\nimport Link from 'next/link'\nimport Logo from '@/components/Logo'\nimport { ArrowLeft, MapPin, Phone, Mail, Globe, Building, Users, Target, Award } from 'lucide-react'\n\nexport default function AboutPage() {\n  return (\n    <div className=\"min-h-screen gradient-bg\">\n      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n      <header className=\"glass sticky top-0 z-50 border-b border-white/20\">\n        <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex justify-between items-center\">\n            <Link href=\"/\" className=\"flex items-center\">\n              <Logo width={200} height={60} className=\"w-[150px] h-[45px] sm:w-[200px] sm:h-[60px]\" linkable={false} />\n            </Link>\n            <div className=\"flex items-center space-x-2 sm:space-x-6\">\n              <Link\n                href=\"/login\"\n                className=\"text-slate-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-all duration-300 hover:scale-105\"\n              >\n                ãƒ­ã‚°ã‚¤ãƒ³\n              </Link>\n              <Link\n                href=\"/register\"\n                className=\"btn-primary text-sm px-6 py-3\"\n              >\n                æ–°è¦ç™»éŒ²\n              </Link>\n            </div>\n          </div>\n        </nav>\n      </header>\n\n      {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}\n      <main className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"mb-8\">\n          <Link \n            href=\"/\" \n            className=\"inline-flex items-center text-blue-600 hover:text-blue-700 transition-colors duration-300 mb-6\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹\n          </Link>\n          \n          <h1 className=\"text-4xl sm:text-5xl font-bold text-slate-800 mb-4\">\n            ä¼šç¤¾æ¦‚è¦\n          </h1>\n          <p className=\"text-lg text-slate-600\">\n            åˆåŒä¼šç¤¾SIN JAPANã«ã¤ã„ã¦\n          </p>\n        </div>\n\n        <div className=\"space-y-8\">\n          {/* ä¼šç¤¾åŸºæœ¬æƒ…å ± */}\n          <div className=\"floating-card\">\n            <h2 className=\"text-2xl font-bold text-slate-800 mb-6 flex items-center\">\n              <Building className=\"h-6 w-6 mr-3 text-blue-600\" />\n              ä¼šç¤¾åŸºæœ¬æƒ…å ±\n            </h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <Building className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">ä¼šç¤¾å</h3>\n                    <p className=\"text-slate-600\">åˆåŒä¼šç¤¾SIN JAPAN</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start space-x-3\">\n                  <MapPin className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">æœ¬ç¤¾æ‰€åœ¨åœ°</h3>\n                    <p className=\"text-slate-600\">ã€’243-0303</p>\n                    <p className=\"text-slate-600\">ç¥å¥ˆå·çœŒæ„›ç”²éƒ¡æ„›å·ç”ºä¸­æ´¥ï¼—ï¼’ï¼˜ï¼—</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start space-x-3\">\n                  <Phone className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">é›»è©±ç•ªå·</h3>\n                    <p className=\"text-slate-600\">046-212-2325</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start space-x-3\">\n                  <Phone className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">FAX</h3>\n                    <p className=\"text-slate-600\">046-212-2326</p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <Mail className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</h3>\n                    <p className=\"text-slate-600\">info@sinjapan.jp</p>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start space-x-3\">\n                  <Globe className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸</h3>\n                    <a \n                      href=\"https://sinjapan.work/\" \n                      target=\"_blank\" \n                      rel=\"noopener noreferrer\"\n                      className=\"text-blue-600 hover:text-blue-700 transition-colors duration-300\"\n                    >\n                      https://sinjapan.work/\n                    </a>\n                  </div>\n                </div>\n\n                <div className=\"flex items-start space-x-3\">\n                  <Users className=\"h-5 w-5 text-blue-600 mt-1\" />\n                  <div>\n                    <h3 className=\"font-semibold text-slate-800\">äº‹æ¥­å†…å®¹</h3>\n                    <p className=\"text-slate-600\">ä¸€èˆ¬è²¨ç‰©ãƒ»è»½è²¨ç‰©é‹é€</p>\n                    <p className=\"text-slate-600\">ç‰©æµAIãƒãƒƒãƒãƒ³ã‚°</p>\n                    <p className=\"text-slate-600\">ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ”¯æ´</p>\n                    <p className=\"text-slate-600\">WEBåˆ¶ä½œ</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* ä¼æ¥­ç†å¿µ */}\n          <div className=\"floating-card\">\n            <h2 className=\"text-2xl font-bold text-slate-800 mb-6 flex items-center\">\n              <Target className=\"h-6 w-6 mr-3 text-blue-600\" />\n              ä¼æ¥­ç†å¿µ\n            </h2>\n            \n            <div className=\"space-y-6\">\n              <div className=\"bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-lg\">\n                <h3 className=\"text-xl font-bold text-slate-800 mb-3\">ã€Œæ–­ã‚‰ãªã„ç‰©æµã€ã‚’å®Ÿç¾ã™ã‚‹</h3>\n                <p className=\"text-slate-700 leading-relaxed\">\n                  ç§ãŸã¡ã¯ã€Œè·ç‰©ã‚’æ–­ã‚‰ã‚Œã‚‹â€¦ãã‚“ãªå½“ãŸã‚Šå‰ã‚’å¤‰ãˆãŸã„ã€‚ã€ã¨ã„ã†æƒ³ã„ã‹ã‚‰ã€<br />\n                  ã€Œæ–­ã‚‰ãªã„ç‰©æµã€ã‚’å®Ÿç¾ã™ã‚‹ç·åˆç‰©æµä¼æ¥­ã¨ã—ã¦ã€äººã¨ITã®åŠ›ã§å…¨å›½ã«å±Šã‘ã‚‰ã‚Œã‚‹ä»•çµ„ã¿ã‚’æ§‹ç¯‰ã—ã¦ã„ã¾ã™ã€‚\n                </p>\n              </div>\n\n              <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 p-6 rounded-lg\">\n                <h3 className=\"text-xl font-bold text-slate-800 mb-3\">äººã‚’å¤§åˆ‡ã«ã€ç‰©æµã‚’æ­¢ã‚ãªã„</h3>\n                <p className=\"text-slate-700 leading-relaxed\">\n                  äººã‚’å¤§åˆ‡ã«ã—ã€ç‰©æµã‚’æ­¢ã‚ãªã„ã“ã¨ãŒç§ãŸã¡ã®ä½¿å‘½ã§ã™ã€‚<br />\n                  è¤‡é›‘ãªæ¥­å‹™ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã«ã€èª°ã§ã‚‚ä½¿ãˆã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆã—ã€æŒç¶šå¯èƒ½ãªç¤¾ä¼šã‚’ITã‹ã‚‰æ”¯ãˆã¾ã™ã€‚\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* äº‹æ¥­å†…å®¹è©³ç´° */}\n          <div className=\"floating-card\">\n            <h2 className=\"text-2xl font-bold text-slate-800 mb-6 flex items-center\">\n              <Award className=\"h-6 w-6 mr-3 text-blue-600\" />\n              äº‹æ¥­å†…å®¹\n            </h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"space-y-4\">\n                <div className=\"border-l-4 border-blue-500 pl-4\">\n                  <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">ä¸€èˆ¬è²¨ç‰©ãƒ»è»½è²¨ç‰©è¼¸é€</h3>\n                  <p className=\"text-slate-600 text-sm\">\n                    ç¥å¥ˆå·çœŒæ„›ç”²éƒ¡æ„›å·ç”ºã‚’æ‹ ç‚¹ã¨ã—ãŸé‹é€äº‹æ¥­ã€‚é–¢æ±åœã‚’ä¸­å¿ƒã¨ã—ãŸè»½è²¨ç‰©é…é€ã¨ä¸€èˆ¬è²¨ç‰©è¼¸é€ã‚’ã€è‡ªç¤¾è»Šä¸¡ä¿æœ‰ï¼‹å”åŠ›ä¼šç¤¾ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã‚ŠæŸ”è»Ÿã«å¯¾å¿œã—ã¾ã™ã€‚\n                  </p>\n                </div>\n\n                <div className=\"border-l-4 border-green-500 pl-4\">\n                  <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">ç‰©æµAIãƒãƒƒãƒãƒ³ã‚°</h3>\n                  <p className=\"text-slate-600 text-sm\">\n                    AIã‚’æ´»ç”¨ã—ãŸæ±‚è·æ±‚è»Šã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºãƒ»é‹å–¶ã€‚è·ä¸»ã¨é‹é€ä¼šç¤¾ã‚’åŠ¹ç‡çš„ã«ãƒãƒƒãƒãƒ³ã‚°ã—ã€ã€Œæ–­ã‚‰ãªã„ç‰©æµã€ã‚’å®Ÿç¾ã—ã¾ã™ã€‚\n                  </p>\n                </div>\n\n                <div className=\"border-l-4 border-purple-500 pl-4\">\n                  <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ”¯æ´</h3>\n                  <p className=\"text-slate-600 text-sm\">\n                    ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ãƒšãƒ¼ã‚¸ãƒ»ECã‚µã‚¤ãƒˆæ§‹ç¯‰ã€SNSåºƒå‘Šãƒ»SEOãƒ»LPOå¯¾ç­–ãªã©ã€ç·åˆçš„ãªãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æ”¯æ´ã‚’æä¾›ã—ã¾ã™ã€‚\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"border-l-4 border-orange-500 pl-4\">\n                  <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">WEBåˆ¶ä½œ</h3>\n                  <p className=\"text-slate-600 text-sm\">\n                    ä¼æ¥­ã®ãƒ‡ã‚¸ã‚¿ãƒ«åŒ–ã‚’æ”¯æ´ã™ã‚‹WEBã‚µã‚¤ãƒˆåˆ¶ä½œãƒ»ã‚·ã‚¹ãƒ†ãƒ é–‹ç™ºã‚’è¡Œã„ã¾ã™ã€‚èª°ã§ã‚‚ç°¡å˜ã«ä½¿ãˆã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆã—ã¾ã™ã€‚\n                  </p>\n                </div>\n\n                <div className=\"border-l-4 border-red-500 pl-4\">\n                  <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">æµ·å¤–äº‹æ¥­å±•é–‹</h3>\n                  <p className=\"text-slate-600 text-sm\">\n                    ãƒ•ã‚£ãƒªãƒ”ãƒ³ã‚’ä¸­å¿ƒã¨ã—ãŸæµ·å¤–äº‹æ¥­å±•é–‹æ”¯æ´ã€‚ç¾åœ°æ³•äººè¨­ç«‹ãƒ»åº—èˆ—ãƒ“ã‚¸ãƒã‚¹ã‚µãƒãƒ¼ãƒˆã€ç¾å®¹ãƒ»åŒ»ç™‚ã‚¯ãƒªãƒ‹ãƒƒã‚¯é‹å–¶ã‚’è¡Œã„ã¾ã™ã€‚\n                  </p>\n                </div>\n\n                <div className=\"border-l-4 border-teal-500 pl-4\">\n                  <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">ãã®ä»–äº‹æ¥­</h3>\n                  <p className=\"text-slate-600 text-sm\">\n                    ä¸å‹•ç”£ä»²ä»‹ãƒ»è²¸ä¼šè­°å®¤é‹å–¶ã€ä¸­å¤è»Šè²©å£²ï¼ˆå•†ç”¨è»Šä¸­å¿ƒï¼‰ã€ãƒ©ã‚¤ãƒ–ãƒãƒ£ãƒƒãƒˆã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ãƒ»é‹ç”¨ãªã©ã€å¤šå²ã«ã‚ãŸã‚‹äº‹æ¥­ã‚’å±•é–‹ã—ã¦ã„ã¾ã™ã€‚\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* ãŠå•ã„åˆã‚ã› */}\n          <div className=\"floating-card\">\n            <h2 className=\"text-2xl font-bold text-slate-800 mb-6\">ãŠå•ã„åˆã‚ã›</h2>\n            <p className=\"text-slate-600 mb-6\">\n              ã”è³ªå•ãƒ»ã”ç›¸è«‡ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4\">\n              <Link \n                href=\"/contact\" \n                className=\"btn-primary text-center\"\n              >\n                ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ \n              </Link>\n              <Link \n                href=\"/help\" \n                className=\"btn-secondary text-center\"\n              >\n                ã‚ˆãã‚ã‚‹ã”è³ªå•\n              </Link>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n","size_bytes":11329},"src/app/api/shipments/route.ts":{"content":"import { NextRequest } from 'next/server'\nexport const dynamic = 'force-dynamic'\nimport { getUserFromRequest } from '@/lib/auth'\nimport { createShipmentSchema } from '@/lib/validators'\nimport {\n  successResponse,\n  errorResponse,\n  unauthorizedResponse,\n  forbiddenResponse,\n} from '@/lib/api-response'\nimport prisma from '@/lib/prisma'\n\n// é…é€æ¡ˆä»¶ä¸€è¦§å–å¾—\nexport async function GET(request: NextRequest) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    const { searchParams } = new URL(request.url)\n    const status = searchParams.get('status')\n    const pickupPrefecture = searchParams.get('pickupPrefecture')\n    const deliveryPrefecture = searchParams.get('deliveryPrefecture')\n    \n    const where: any = {}\n    \n    // è·ä¸»ã®å ´åˆã¯è‡ªåˆ†ã®æ¡ˆä»¶ã®ã¿è¡¨ç¤º\n    if (user.userType === 'SHIPPER') {\n      where.shipperId = user.userId\n    }\n    \n    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\n    if (status) {\n      where.status = status\n    }\n    \n    // é›†è·åœ°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\n    if (pickupPrefecture) {\n      where.pickupPrefecture = pickupPrefecture\n    }\n    \n    // é…é€åœ°ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\n    if (deliveryPrefecture) {\n      where.deliveryPrefecture = deliveryPrefecture\n    }\n    \n    const shipments = await prisma.shipment.findMany({\n      where,\n      include: {\n        shipper: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n            phone: true,\n          },\n        },\n        carrier: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n            phone: true,\n          },\n        },\n        offers: {\n          include: {\n            carrier: {\n              select: {\n                id: true,\n                companyName: true,\n                contactPerson: true,\n              },\n            },\n          },\n        },\n      },\n      orderBy: {\n        createdAt: 'desc',\n      },\n    })\n    \n    return successResponse(shipments)\n  } catch (error) {\n    console.error('Get shipments error:', error)\n    return errorResponse('é…é€æ¡ˆä»¶ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n// é…é€æ¡ˆä»¶ä½œæˆ\nexport async function POST(request: NextRequest) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    // è·ä¸»ã®ã¿ä½œæˆå¯èƒ½\n    if (user.userType !== 'SHIPPER') {\n      return forbiddenResponse('è·ä¸»ã®ã¿ãŒé…é€æ¡ˆä»¶ã‚’ä½œæˆã§ãã¾ã™')\n    }\n    \n    // è¨±å¯è¨¼æ‰¿èªæ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ä½œæˆå¯èƒ½\n    const userProfile = await prisma.user.findUnique({\n      where: { id: user.userId },\n      select: { verificationStatus: true }\n    })\n    \n    if (userProfile?.verificationStatus !== 'APPROVED') {\n      return forbiddenResponse('è¨±å¯è¨¼ãŒæ‰¿èªã•ã‚Œã‚‹ã¾ã§ã€é…é€æ¡ˆä»¶ã‚’ä½œæˆã§ãã¾ã›ã‚“')\n    }\n    \n    const body = await request.json()\n    \n    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n    const validatedData = createShipmentSchema.parse(body)\n    \n    // é…é€æ¡ˆä»¶ä½œæˆ\n    const shipment = await prisma.shipment.create({\n      data: {\n        shipperId: user.userId,\n        cargoName: validatedData.cargoName,\n        cargoDescription: validatedData.cargoDescription,\n        cargoWeight: validatedData.cargoWeight,\n        cargoVolume: validatedData.cargoVolume,\n        cargoValue: validatedData.cargoValue,\n        \n        pickupAddress: validatedData.pickupAddress,\n        pickupCity: validatedData.pickupCity,\n        pickupPrefecture: validatedData.pickupPrefecture,\n        pickupPostalCode: validatedData.pickupPostalCode,\n        pickupDate: new Date(validatedData.pickupDate),\n        pickupTimeFrom: validatedData.pickupTimeFrom,\n        pickupTimeTo: validatedData.pickupTimeTo,\n        \n        deliveryAddress: validatedData.deliveryAddress,\n        deliveryCity: validatedData.deliveryCity,\n        deliveryPrefecture: validatedData.deliveryPrefecture,\n        deliveryPostalCode: validatedData.deliveryPostalCode,\n        deliveryDate: new Date(validatedData.deliveryDate),\n        deliveryTimeFrom: validatedData.deliveryTimeFrom,\n        deliveryTimeTo: validatedData.deliveryTimeTo,\n        \n        requiredVehicleType: validatedData.requiredVehicleType,\n        needsHelper: validatedData.needsHelper,\n        needsLiftGate: validatedData.needsLiftGate,\n        temperature: validatedData.temperature,\n        specialInstructions: validatedData.specialInstructions,\n        \n        budget: validatedData.budget,\n      },\n      include: {\n        shipper: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n            phone: true,\n          },\n        },\n      },\n    })\n    \n    return successResponse(shipment, 201)\n  } catch (error: any) {\n    if (error.name === 'ZodError') {\n      return errorResponse(error.errors[0].message)\n    }\n    console.error('Create shipment error:', error)\n    return errorResponse('é…é€æ¡ˆä»¶ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n","size_bytes":5107},"src/app/layout.tsx":{"content":"import type { Metadata } from 'next'\nimport { Inter } from 'next/font/google'\nimport './globals.css'\n\nconst inter = Inter({ subsets: ['latin'] })\n\nexport const metadata: Metadata = {\n  title: 'SIN JAPAN LOGI MATCH - ç‰©æµãƒãƒƒãƒãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ',\n  description: 'è·ä¸»ã¨é‹é€ä¼šç¤¾ã‚’ã¤ãªãç‰©æµãƒãƒƒãƒãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ',\n}\n\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode\n}) {\n  return (\n    <html lang=\"ja\">\n      <body className={inter.className}>{children}</body>\n    </html>\n  )\n}\n\n","size_bytes":560},"src/app/dashboard/settings/contract/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  FileText, \n  Calendar, \n  DollarSign, \n  CheckCircle, \n  AlertCircle, \n  Download, \n  Upload,\n  Edit,\n  Save,\n  X,\n  Clock,\n  Shield,\n  User\n} from 'lucide-react'\n\ninterface Contract {\n  id: string\n  contractType: string\n  contractNumber: string\n  startDate: string\n  endDate: string\n  status: 'active' | 'expired' | 'pending' | 'terminated'\n  monthlyFee: number\n  paymentMethod: string\n  autoRenewal: boolean\n  terms: string\n  specialConditions: string\n  contactPerson: string\n  lastUpdated: string\n}\n\nexport default function ContractPage() {\n  const [contracts, setContracts] = useState<Contract[]>([])\n  const [editingContract, setEditingContract] = useState<Contract | null>(null)\n  const [showAddModal, setShowAddModal] = useState(false)\n  const [formData, setFormData] = useState({\n    contractType: '',\n    contractNumber: '',\n    startDate: '',\n    endDate: '',\n    status: 'active' as 'active' | 'expired' | 'pending' | 'terminated',\n    monthlyFee: '',\n    paymentMethod: '',\n    autoRenewal: false,\n    terms: '',\n    specialConditions: '',\n    contactPerson: ''\n  })\n\n  useEffect(() => {\n    loadContracts()\n  }, [])\n\n  const loadContracts = async () => {\n    // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿\n    const sampleContracts: Contract[] = [\n      {\n        id: '1',\n        contractType: 'åŸºæœ¬ãƒ—ãƒ©ãƒ³',\n        contractNumber: 'CNT-2024-001',\n        startDate: '2024-01-01',\n        endDate: '2024-12-31',\n        status: 'active',\n        monthlyFee: 50000,\n        paymentMethod: 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰',\n        autoRenewal: true,\n        terms: 'æœˆé¡åˆ©ç”¨æ–™é‡‘ã«åŸºã¥ãåŸºæœ¬ã‚µãƒ¼ãƒ“ã‚¹å¥‘ç´„',\n        specialConditions: 'å¤§å‹è²¨ç‰©è¼¸é€ã®å‰²å¼•é©ç”¨',\n        contactPerson: 'ç”°ä¸­å¤ªéƒ',\n        lastUpdated: '2024-01-15'\n      },\n      {\n        id: '2',\n        contractType: 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³',\n        contractNumber: 'CNT-2024-002',\n        startDate: '2024-02-01',\n        endDate: '2025-01-31',\n        status: 'active',\n        monthlyFee: 100000,\n        paymentMethod: 'éŠ€è¡ŒæŒ¯è¾¼',\n        autoRenewal: true,\n        terms: 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ã‚’å«ã‚€åŒ…æ‹¬çš„ã‚µãƒ¼ãƒ“ã‚¹å¥‘ç´„',\n        specialConditions: '24æ™‚é–“ã‚µãƒãƒ¼ãƒˆã€å„ªå…ˆãƒãƒƒãƒãƒ³ã‚°',\n        contactPerson: 'ä½è—¤èŠ±å­',\n        lastUpdated: '2024-01-20'\n      }\n    ]\n\n    setContracts(sampleContracts)\n  }\n\n  const handleAddContract = () => {\n    setFormData({\n      contractType: '',\n      contractNumber: '',\n      startDate: '',\n      endDate: '',\n      status: 'active',\n      monthlyFee: '',\n      paymentMethod: '',\n      autoRenewal: false,\n      terms: '',\n      specialConditions: '',\n      contactPerson: ''\n    })\n    setEditingContract(null)\n    setShowAddModal(true)\n  }\n\n  const handleEditContract = (contract: Contract) => {\n    setFormData({\n      contractType: contract.contractType,\n      contractNumber: contract.contractNumber,\n      startDate: contract.startDate,\n      endDate: contract.endDate,\n      status: contract.status,\n      monthlyFee: contract.monthlyFee.toString(),\n      paymentMethod: contract.paymentMethod,\n      autoRenewal: contract.autoRenewal,\n      terms: contract.terms,\n      specialConditions: contract.specialConditions,\n      contactPerson: contract.contactPerson\n    })\n    setEditingContract(contract)\n    setShowAddModal(true)\n  }\n\n  const handleSaveContract = () => {\n    if (editingContract) {\n      // ç·¨é›†\n      setContracts(prev => prev.map(contract => \n        contract.id === editingContract.id \n          ? { ...contract, ...formData, monthlyFee: parseFloat(formData.monthlyFee), lastUpdated: new Date().toISOString().split('T')[0] }\n          : contract\n      ))\n    } else {\n      // æ–°è¦è¿½åŠ \n      const newContract: Contract = {\n        id: Date.now().toString(),\n        ...formData,\n        monthlyFee: parseFloat(formData.monthlyFee),\n        lastUpdated: new Date().toISOString().split('T')[0]\n      }\n      setContracts(prev => [...prev, newContract])\n    }\n    setShowAddModal(false)\n    setEditingContract(null)\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'active': return 'text-green-600 bg-green-100'\n      case 'expired': return 'text-red-600 bg-red-100'\n      case 'pending': return 'text-yellow-600 bg-yellow-100'\n      case 'terminated': return 'text-gray-600 bg-gray-100'\n      default: return 'text-gray-600 bg-gray-100'\n    }\n  }\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case 'active': return 'æœ‰åŠ¹'\n      case 'expired': return 'æœŸé™åˆ‡ã‚Œ'\n      case 'pending': return 'æ‰¿èªå¾…ã¡'\n      case 'terminated': return 'çµ‚äº†'\n      default: return 'ä¸æ˜'\n    }\n  }\n\n  const contractTypes = [\n    'åŸºæœ¬ãƒ—ãƒ©ãƒ³', 'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ãƒ—ãƒ©ãƒ³', 'ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³', 'ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ—ãƒ©ãƒ³', 'ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ©ãƒ³'\n  ]\n\n  const paymentMethods = [\n    'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰', 'éŠ€è¡ŒæŒ¯è¾¼', 'å£åº§æŒ¯æ›¿', 'é›»å­ãƒãƒãƒ¼', 'ã‚³ãƒ³ãƒ“ãƒ‹æ‰•ã„'\n  ]\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">å¥‘ç´„å†…å®¹</h1>\n            <p className=\"text-gray-600\">å¥‘ç´„ã®è©³ç´°æƒ…å ±ã‚’ç®¡ç†ã§ãã¾ã™</p>\n          </div>\n          <button\n            onClick={handleAddContract}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n          >\n            <FileText className=\"h-4 w-4\" />\n            <span>å¥‘ç´„ã‚’è¿½åŠ </span>\n          </button>\n        </div>\n      </div>\n\n      {/* å¥‘ç´„ä¸€è¦§ */}\n      <div className=\"space-y-6\">\n        {contracts.map((contract) => (\n          <div key={contract.id} className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <div className=\"flex justify-between items-center\">\n                <div>\n                  <h2 className=\"text-lg font-semibold text-gray-900\">{contract.contractType}</h2>\n                  <p className=\"text-sm text-gray-600\">å¥‘ç´„ç•ªå·: {contract.contractNumber}</p>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <span className={`px-2 py-1 text-xs font-medium rounded-full ${getStatusColor(contract.status)}`}>\n                    {getStatusText(contract.status)}\n                  </span>\n                  <button\n                    onClick={() => handleEditContract(contract)}\n                    className=\"text-blue-600 hover:text-blue-800\"\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-700 mb-2\">å¥‘ç´„æœŸé–“</h3>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-gray-900\">\n                      <Calendar className=\"h-4 w-4 inline mr-1\" />\n                      é–‹å§‹: {new Date(contract.startDate).toLocaleDateString('ja-JP')}\n                    </p>\n                    <p className=\"text-sm text-gray-900\">\n                      <Calendar className=\"h-4 w-4 inline mr-1\" />\n                      çµ‚äº†: {new Date(contract.endDate).toLocaleDateString('ja-JP')}\n                    </p>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-700 mb-2\">æ–™é‡‘æƒ…å ±</h3>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-gray-900\">\n                      <DollarSign className=\"h-4 w-4 inline mr-1\" />\n                      æœˆé¡æ–™é‡‘: Â¥{contract.monthlyFee.toLocaleString()}\n                    </p>\n                    <p className=\"text-sm text-gray-900\">\n                      æ”¯æ‰•ã„æ–¹æ³•: {contract.paymentMethod}\n                    </p>\n                    <p className=\"text-sm text-gray-900\">\n                      è‡ªå‹•æ›´æ–°: {contract.autoRenewal ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}\n                    </p>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-700 mb-2\">é€£çµ¡å…ˆ</h3>\n                  <div className=\"space-y-1\">\n                    <p className=\"text-sm text-gray-900\">\n                      <User className=\"h-4 w-4 inline mr-1\" />\n                      æ‹…å½“è€…: {contract.contactPerson}\n                    </p>\n                    <p className=\"text-sm text-gray-900\">\n                      <Clock className=\"h-4 w-4 inline mr-1\" />\n                      æœ€çµ‚æ›´æ–°: {new Date(contract.lastUpdated).toLocaleDateString('ja-JP')}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-6 space-y-4\">\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-700 mb-2\">å¥‘ç´„æ¡ä»¶</h3>\n                  <p className=\"text-sm text-gray-900 bg-gray-50 p-3 rounded-lg\">{contract.terms}</p>\n                </div>\n\n                {contract.specialConditions && (\n                  <div>\n                    <h3 className=\"text-sm font-medium text-gray-700 mb-2\">ç‰¹åˆ¥æ¡ä»¶</h3>\n                    <p className=\"text-sm text-gray-900 bg-blue-50 p-3 rounded-lg\">{contract.specialConditions}</p>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"mt-6 flex justify-end space-x-2\">\n                <button className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center space-x-2\">\n                  <Download className=\"h-4 w-4\" />\n                  <span>å¥‘ç´„æ›¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</span>\n                </button>\n                <button className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2\">\n                  <Upload className=\"h-4 w-4\" />\n                  <span>å¥‘ç´„æ›¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* è¿½åŠ ãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <div className=\"flex justify-between items-center\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">\n                  {editingContract ? 'å¥‘ç´„ã‚’ç·¨é›†' : 'å¥‘ç´„ã‚’è¿½åŠ '}\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowAddModal(false)\n                    setEditingContract(null)\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å¥‘ç´„ã‚¿ã‚¤ãƒ— *</label>\n                  <select\n                    value={formData.contractType}\n                    onChange={(e) => setFormData(prev => ({ ...prev, contractType: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                    {contractTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å¥‘ç´„ç•ªå· *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.contractNumber}\n                    onChange={(e) => setFormData(prev => ({ ...prev, contractNumber: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"CNT-2024-001\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">é–‹å§‹æ—¥ *</label>\n                  <input\n                    type=\"date\"\n                    required\n                    value={formData.startDate}\n                    onChange={(e) => setFormData(prev => ({ ...prev, startDate: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">çµ‚äº†æ—¥ *</label>\n                  <input\n                    type=\"date\"\n                    required\n                    value={formData.endDate}\n                    onChange={(e) => setFormData(prev => ({ ...prev, endDate: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ *</label>\n                  <select\n                    value={formData.status}\n                    onChange={(e) => setFormData(prev => ({ ...prev, status: e.target.value as any }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"active\">æœ‰åŠ¹</option>\n                    <option value=\"expired\">æœŸé™åˆ‡ã‚Œ</option>\n                    <option value=\"pending\">æ‰¿èªå¾…ã¡</option>\n                    <option value=\"terminated\">çµ‚äº†</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">æœˆé¡æ–™é‡‘ (å††) *</label>\n                  <input\n                    type=\"number\"\n                    required\n                    min=\"0\"\n                    value={formData.monthlyFee}\n                    onChange={(e) => setFormData(prev => ({ ...prev, monthlyFee: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"50000\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ”¯æ‰•ã„æ–¹æ³• *</label>\n                  <select\n                    value={formData.paymentMethod}\n                    onChange={(e) => setFormData(prev => ({ ...prev, paymentMethod: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                    {paymentMethods.map(method => (\n                      <option key={method} value={method}>{method}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ‹…å½“è€… *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.contactPerson}\n                    onChange={(e) => setFormData(prev => ({ ...prev, contactPerson: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ç”°ä¸­å¤ªéƒ\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">è‡ªå‹•æ›´æ–°</label>\n                <label className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.autoRenewal}\n                    onChange={(e) => setFormData(prev => ({ ...prev, autoRenewal: e.target.checked }))}\n                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700\">è‡ªå‹•æ›´æ–°ã‚’æœ‰åŠ¹ã«ã™ã‚‹</span>\n                </label>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">å¥‘ç´„æ¡ä»¶ *</label>\n                <textarea\n                  required\n                  value={formData.terms}\n                  onChange={(e) => setFormData(prev => ({ ...prev, terms: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  rows={3}\n                  placeholder=\"å¥‘ç´„ã®è©³ç´°æ¡ä»¶ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">ç‰¹åˆ¥æ¡ä»¶</label>\n                <textarea\n                  value={formData.specialConditions}\n                  onChange={(e) => setFormData(prev => ({ ...prev, specialConditions: e.target.value }))}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  rows={3}\n                  placeholder=\"ç‰¹åˆ¥ãªæ¡ä»¶ã‚„ç‰¹è¨˜äº‹é …ãŒã‚ã‚Œã°è¨˜è¼‰ã—ã¦ãã ã•ã„\"\n                />\n              </div>\n            </div>\n\n            <div className=\"px-6 py-4 border-t border-gray-200 flex justify-end space-x-2\">\n              <button\n                onClick={() => {\n                  setShowAddModal(false)\n                  setEditingContract(null)\n                }}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n              >\n                ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n              </button>\n              <button\n                onClick={handleSaveContract}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n              >\n                <Save className=\"h-4 w-4\" />\n                <span>{editingContract ? 'æ›´æ–°' : 'è¿½åŠ '}</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </DashboardLayout>\n  )\n}\n\n","size_bytes":19394},"src/app/shipments/new/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Navbar from '@/components/Navbar'\nimport { \n  Package, \n  MapPin, \n  Calendar, \n  Truck, \n  DollarSign, \n  Brain, \n  Target, \n  Star, \n  Shield, \n  Clock, \n  TrendingUp, \n  Award,\n  CheckCircle,\n  ArrowRight\n} from 'lucide-react'\n\ninterface RecommendedCarrier {\n  id: string\n  companyName: string\n  contactPerson: string\n  phone: string\n  email: string\n  rating: number\n  creditScore: number\n  specialties: string[]\n  responseTime: number\n  reliabilityScore: number\n  aiMatchScore: number\n  aiRecommendationReason: string\n  estimatedDeliveryTime: number\n  costEfficiency: number\n}\n\ninterface AISearchResult {\n  carriers: RecommendedCarrier[]\n  aiInsights: {\n    totalMatches: number\n    averageMatchScore: number\n    topSpecialties: string[]\n    marketTrends: string\n  }\n}\n\nexport default function NewShipmentPage() {\n  const router = useRouter()\n  const [user, setUser] = useState<any>(null)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [aiSearching, setAiSearching] = useState(false)\n  const [aiResults, setAiResults] = useState<AISearchResult | null>(null)\n  const [showAIResults, setShowAIResults] = useState(false)\n  const [formData, setFormData] = useState({\n    title: '',\n    description: '',\n    pickupLocation: '',\n    pickupPrefecture: '',\n    pickupDateTime: '',\n    deliveryLocation: '',\n    deliveryPrefecture: '',\n    deliveryDateTime: '',\n    cargoType: '',\n    cargoWeight: '',\n    cargoSize: '',\n    requiredVehicleType: 'SMALL_TRUCK',\n    price: '',\n    notes: '',\n    urgency: 'normal',\n    specialRequirements: ''\n  })\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    const userData = localStorage.getItem('user')\n    \n    if (!token || !userData) {\n      router.push('/login')\n      return\n    }\n\n    const parsedUser = JSON.parse(userData)\n    if (parsedUser.userType !== 'SHIPPER') {\n      router.push('/dashboard')\n      return\n    }\n\n    setUser(parsedUser)\n  }, [router])\n\n  const performAISearch = async () => {\n    if (!formData.cargoWeight || !formData.cargoType || !formData.pickupPrefecture || !formData.deliveryPrefecture) {\n      alert('AIæ¤œç´¢ã«ã¯è·ç‰©ã®é‡é‡ã€ç¨®é¡ã€é›†è·ãƒ»é…é€å…ˆã®éƒ½é“åºœçœŒãŒå¿…è¦ã§ã™')\n      return\n    }\n\n    setAiSearching(true)\n    try {\n      // AIæ¤œç´¢ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³\n      const mockAISearchResult: AISearchResult = {\n        carriers: [\n          {\n            id: 'carrier-1',\n            companyName: 'æ ªå¼ä¼šç¤¾ãƒˆãƒ©ãƒ³ã‚¹ãƒ­ã‚¸ãƒƒã‚¯',\n            contactPerson: 'å±±ç”°èŠ±å­',\n            phone: '03-1234-5678',\n            email: 'yamada@translogic.co.jp',\n            rating: 4.8,\n            creditScore: 95,\n            specialties: ['å¤§å‹è²¨ç‰©', 'é–¢æ±åœ', 'æ€¥ä¾¿å¯¾å¿œ'],\n            responseTime: 15,\n            reliabilityScore: 98,\n            aiMatchScore: 95,\n            aiRecommendationReason: 'è·ç‰©ã®é‡é‡ã¨ç·Šæ€¥åº¦ã«æœ€é©ãªé‹é€ä¼šç¤¾ã€‚éå»ã®å®Ÿç¸¾ã¨é«˜ã„ä¿¡ç”¨ã‚¹ã‚³ã‚¢ã§ä¿¡é ¼æ€§ãŒé«˜ã„ã€‚',\n            estimatedDeliveryTime: 6,\n            costEfficiency: 92\n          },\n          {\n            id: 'carrier-2',\n            companyName: 'é–¢è¥¿ç‰©æµæ ªå¼ä¼šç¤¾',\n            contactPerson: 'éˆ´æœ¨ä¸€éƒ',\n            phone: '06-9876-5432',\n            email: 'suzuki@kansai-logistics.co.jp',\n            rating: 4.6,\n            creditScore: 88,\n            specialties: ['å†·è”µè¼¸é€', 'é–¢è¥¿åœ', 'ç”Ÿé®®é£Ÿå“'],\n            responseTime: 25,\n            reliabilityScore: 94,\n            aiMatchScore: 87,\n            aiRecommendationReason: 'å†·è”µè¼¸é€ã«ç‰¹åŒ–ã—ãŸé‹é€ä¼šç¤¾ã§ã€ç”Ÿé®®é£Ÿå“ã®è¼¸é€å®Ÿç¸¾ãŒè±Šå¯Œã€‚',\n            estimatedDeliveryTime: 8,\n            costEfficiency: 85\n          },\n          {\n            id: 'carrier-3',\n            companyName: 'ä¸­éƒ¨é‹é€æ ªå¼ä¼šç¤¾',\n            contactPerson: 'ç”°æ‘å››éƒ',\n            phone: '052-5555-1234',\n            email: 'tamura@chubu-transport.co.jp',\n            rating: 4.4,\n            creditScore: 82,\n            specialties: ['ä¸€èˆ¬è²¨ç‰©', 'ä¸­éƒ¨åœ', 'ã‚³ã‚¹ãƒˆé‡è¦–'],\n            responseTime: 30,\n            reliabilityScore: 89,\n            aiMatchScore: 78,\n            aiRecommendationReason: 'ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ãã€ä¸­å°è¦æ¨¡ã®è·ç‰©ã«é©ã—ã¦ã„ã‚‹ã€‚',\n            estimatedDeliveryTime: 12,\n            costEfficiency: 95\n          }\n        ],\n        aiInsights: {\n          totalMatches: 3,\n          averageMatchScore: 87,\n          topSpecialties: ['å¤§å‹è²¨ç‰©', 'å†·è”µè¼¸é€', 'é–¢æ±åœ'],\n          marketTrends: 'ç¾åœ¨ã€å¤§å‹è²¨ç‰©ã®éœ€è¦ãŒé«˜ãã€å†·è”µè¼¸é€ã®éœ€è¦ã‚‚å¢—åŠ å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚'\n        }\n      }\n      \n      // å®Ÿéš›ã®APIå‘¼ã³å‡ºã—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ\n      await new Promise(resolve => setTimeout(resolve, 2000))\n      \n      setAiResults(mockAISearchResult)\n      setShowAIResults(true)\n    } catch (error) {\n      console.error('Error performing AI search:', error)\n      alert('AIæ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    } finally {\n      setAiSearching(false)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError('')\n    setLoading(true)\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/shipments', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          ...formData,\n          cargoWeight: parseFloat(formData.cargoWeight),\n          price: parseFloat(formData.price),\n        }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'æ¡ˆä»¶ã®æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n\n      router.push('/shipments')\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const prefectures = [\n    'åŒ—æµ·é“', 'é’æ£®çœŒ', 'å²©æ‰‹çœŒ', 'å®®åŸçœŒ', 'ç§‹ç”°çœŒ', 'å±±å½¢çœŒ', 'ç¦å³¶çœŒ',\n    'èŒ¨åŸçœŒ', 'æ ƒæœ¨çœŒ', 'ç¾¤é¦¬çœŒ', 'åŸ¼ç‰çœŒ', 'åƒè‘‰çœŒ', 'æ±äº¬éƒ½', 'ç¥å¥ˆå·çœŒ',\n    'æ–°æ½ŸçœŒ', 'å¯Œå±±çœŒ', 'çŸ³å·çœŒ', 'ç¦äº•çœŒ', 'å±±æ¢¨çœŒ', 'é•·é‡çœŒ',\n    'å²é˜œçœŒ', 'é™å²¡çœŒ', 'æ„›çŸ¥çœŒ', 'ä¸‰é‡çœŒ',\n    'æ»‹è³€çœŒ', 'äº¬éƒ½åºœ', 'å¤§é˜ªåºœ', 'å…µåº«çœŒ', 'å¥ˆè‰¯çœŒ', 'å’Œæ­Œå±±çœŒ',\n    'é³¥å–çœŒ', 'å³¶æ ¹çœŒ', 'å²¡å±±çœŒ', 'åºƒå³¶çœŒ', 'å±±å£çœŒ',\n    'å¾³å³¶çœŒ', 'é¦™å·çœŒ', 'æ„›åª›çœŒ', 'é«˜çŸ¥çœŒ',\n    'ç¦å²¡çœŒ', 'ä½è³€çœŒ', 'é•·å´çœŒ', 'ç†Šæœ¬çœŒ', 'å¤§åˆ†çœŒ', 'å®®å´çœŒ', 'é¹¿å…å³¶çœŒ', 'æ²–ç¸„çœŒ'\n  ]\n\n  const vehicleTypes = [\n    { value: 'LIGHT_TRUCK', label: 'è»½ãƒˆãƒ©ãƒƒã‚¯' },\n    { value: 'SMALL_TRUCK', label: 'å°å‹ãƒˆãƒ©ãƒƒã‚¯' },\n    { value: 'MEDIUM_TRUCK', label: 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯' },\n    { value: 'LARGE_TRUCK', label: 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯' },\n    { value: 'TRAILER', label: 'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼' },\n    { value: 'REFRIGERATED', label: 'å†·å‡ãƒ»å†·è”µè»Š' },\n    { value: 'FLATBED', label: 'å¹³ãƒœãƒ‡ã‚£' },\n    { value: 'WING', label: 'ã‚¦ã‚£ãƒ³ã‚°è»Š' },\n  ]\n\n  const urgencyLevels = [\n    { value: 'urgent', label: 'ç·Šæ€¥ï¼ˆ24æ™‚é–“ä»¥å†…ï¼‰', color: 'text-red-600' },\n    { value: 'high', label: 'é«˜ï¼ˆ3æ—¥ä»¥å†…ï¼‰', color: 'text-orange-600' },\n    { value: 'normal', label: 'é€šå¸¸ï¼ˆ1é€±é–“ä»¥å†…ï¼‰', color: 'text-blue-600' },\n    { value: 'low', label: 'ä½ï¼ˆ2é€±é–“ä»¥å†…ï¼‰', color: 'text-green-600' }\n  ]\n\n  const getCreditScoreColor = (score: number) => {\n    if (score >= 90) return 'text-green-600 bg-green-100'\n    if (score >= 80) return 'text-blue-600 bg-blue-100'\n    if (score >= 70) return 'text-yellow-600 bg-yellow-100'\n    return 'text-red-600 bg-red-100'\n  }\n\n  const getMatchScoreColor = (score: number) => {\n    if (score >= 90) return 'text-green-600'\n    if (score >= 80) return 'text-blue-600'\n    if (score >= 70) return 'text-yellow-600'\n    return 'text-red-600'\n  }\n\n  const renderStars = (rating: number) => {\n    return Array.from({ length: 5 }, (_, i) => (\n      <Star\n        key={i}\n        className={`h-4 w-4 ${\n          i < Math.floor(rating) ? 'text-yellow-400 fill-current' : 'text-gray-300'\n        }`}\n      />\n    ))\n  }\n\n  if (!user) {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white\">\n      <Navbar />\n      \n      <main className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12\">\n        <div className=\"mb-8 fade-in-up\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-2\">\n            æ–°è¦æ¡ˆä»¶ã‚’æŠ•ç¨¿\n          </h1>\n          <p className=\"text-gray-600\">\n            é…é€æ¡ˆä»¶ã®è©³ç´°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-8\">\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl\">\n              {error}\n            </div>\n          )}\n\n          {/* åŸºæœ¬æƒ…å ± */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.1s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-blue-600 to-cyan-500 p-3 rounded-xl\">\n                <Package className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">åŸºæœ¬æƒ…å ±</h2>\n            </div>\n\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  æ¡ˆä»¶ã‚¿ã‚¤ãƒˆãƒ« *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"ä¾‹: æ±äº¬ã‹ã‚‰å¤§é˜ªã¸ã®è·ç‰©é…é€\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  è©³ç´°èª¬æ˜ *\n                </label>\n                <textarea\n                  required\n                  rows={4}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"é…é€å†…å®¹ã®è©³ç´°ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„\"\n                  value={formData.description}\n                  onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* é›†è·æƒ…å ± */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.2s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-green-600 to-emerald-500 p-3 rounded-xl\">\n                <MapPin className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">é›†è·æƒ…å ±</h2>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  é›†è·éƒ½é“åºœçœŒ *\n                </label>\n                <select\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  value={formData.pickupPrefecture}\n                  onChange={(e) => setFormData({ ...formData, pickupPrefecture: e.target.value })}\n                >\n                  <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                  {prefectures.map((pref) => (\n                    <option key={pref} value={pref}>{pref}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  é›†è·ä½æ‰€ *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"å¸‚åŒºç”ºæ‘ä»¥é™ã®ä½æ‰€\"\n                  value={formData.pickupLocation}\n                  onChange={(e) => setFormData({ ...formData, pickupLocation: e.target.value })}\n                />\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  é›†è·å¸Œæœ›æ—¥æ™‚ *\n                </label>\n                <input\n                  type=\"datetime-local\"\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  value={formData.pickupDateTime}\n                  onChange={(e) => setFormData({ ...formData, pickupDateTime: e.target.value })}\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* é…é€å…ˆæƒ…å ± */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.3s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-purple-600 to-pink-500 p-3 rounded-xl\">\n                <MapPin className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">é…é€å…ˆæƒ…å ±</h2>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  é…é€å…ˆéƒ½é“åºœçœŒ *\n                </label>\n                <select\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  value={formData.deliveryPrefecture}\n                  onChange={(e) => setFormData({ ...formData, deliveryPrefecture: e.target.value })}\n                >\n                  <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                  {prefectures.map((pref) => (\n                    <option key={pref} value={pref}>{pref}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  é…é€å…ˆä½æ‰€ *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"å¸‚åŒºç”ºæ‘ä»¥é™ã®ä½æ‰€\"\n                  value={formData.deliveryLocation}\n                  onChange={(e) => setFormData({ ...formData, deliveryLocation: e.target.value })}\n                />\n              </div>\n\n              <div className=\"md:col-span-2\">\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  é…é€å¸Œæœ›æ—¥æ™‚ *\n                </label>\n                <input\n                  type=\"datetime-local\"\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  value={formData.deliveryDateTime}\n                  onChange={(e) => setFormData({ ...formData, deliveryDateTime: e.target.value })}\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* è·ç‰©æƒ…å ± */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.4s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-orange-600 to-yellow-500 p-3 rounded-xl\">\n                <Truck className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">è·ç‰©æƒ…å ±</h2>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  è·ç‰©ã®ç¨®é¡ *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"ä¾‹: é›»åŒ–è£½å“ã€é£Ÿå“ã€å»ºæãªã©\"\n                  value={formData.cargoType}\n                  onChange={(e) => setFormData({ ...formData, cargoType: e.target.value })}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  é‡é‡ (kg) *\n                </label>\n                <input\n                  type=\"number\"\n                  required\n                  step=\"0.01\"\n                  min=\"0\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"100\"\n                  value={formData.cargoWeight}\n                  onChange={(e) => setFormData({ ...formData, cargoWeight: e.target.value })}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  ã‚µã‚¤ã‚º *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"ä¾‹: 100cm Ã— 50cm Ã— 30cm\"\n                  value={formData.cargoSize}\n                  onChange={(e) => setFormData({ ...formData, cargoSize: e.target.value })}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  å¿…è¦ãªè»Šä¸¡ã‚¿ã‚¤ãƒ— *\n                </label>\n                <select\n                  required\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  value={formData.requiredVehicleType}\n                  onChange={(e) => setFormData({ ...formData, requiredVehicleType: e.target.value })}\n                >\n                  {vehicleTypes.map((type) => (\n                    <option key={type.value} value={type.value}>{type.label}</option>\n                  ))}\n                </select>\n              </div>\n            </div>\n          </div>\n\n          {/* AIæ¤œç´¢ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.5s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-purple-600 to-blue-500 p-3 rounded-xl\">\n                <Brain className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">AI ãŠã™ã™ã‚æ¤œç´¢</h2>\n              <span className=\"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full\">NEW</span>\n            </div>\n\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    ç·Šæ€¥åº¦\n                  </label>\n                  <select\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                    value={formData.urgency}\n                    onChange={(e) => setFormData({ ...formData, urgency: e.target.value })}\n                  >\n                    {urgencyLevels.map(level => (\n                      <option key={level.value} value={level.value}>{level.label}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    ç‰¹åˆ¥ãªè¦ä»¶\n                  </label>\n                  <input\n                    type=\"text\"\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                    placeholder=\"ä¾‹: æ¸©åº¦ç®¡ç†ã€å±é™ºç‰©è¼¸é€è³‡æ ¼ã€24æ™‚é–“å¯¾å¿œãªã©\"\n                    value={formData.specialRequirements}\n                    onChange={(e) => setFormData({ ...formData, specialRequirements: e.target.value })}\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex justify-end\">\n                <button\n                  type=\"button\"\n                  onClick={performAISearch}\n                  disabled={aiSearching}\n                  className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-xl hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\n                >\n                  {aiSearching ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                      <span>AIæ¤œç´¢ä¸­...</span>\n                    </>\n                  ) : (\n                    <>\n                      <Brain className=\"h-4 w-4\" />\n                      <span>AI ãŠã™ã™ã‚é‹é€ä¼šç¤¾ã‚’æ¤œç´¢</span>\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* AIæ¤œç´¢çµæœ */}\n          {showAIResults && aiResults && (\n            <div className=\"card fade-in-up\" style={{animationDelay: '0.6s'}}>\n              <div className=\"flex items-center space-x-3 mb-6\">\n                <div className=\"bg-gradient-to-r from-green-600 to-emerald-500 p-3 rounded-xl\">\n                  <Target className=\"h-6 w-6 text-white\" />\n                </div>\n                <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">AI ãŠã™ã™ã‚é‹é€ä¼šç¤¾</h2>\n              </div>\n\n              {/* AIã‚¤ãƒ³ã‚µã‚¤ãƒˆ */}\n              <div className=\"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 mb-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-purple-600\">{aiResults.aiInsights.totalMatches}ä»¶</div>\n                    <div className=\"text-sm text-gray-600\">ãƒãƒƒãƒãƒ³ã‚°æ•°</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl font-bold text-blue-600\">{aiResults.aiInsights.averageMatchScore}%</div>\n                    <div className=\"text-sm text-gray-600\">å¹³å‡ãƒãƒƒãƒãƒ³ã‚°ç‡</div>\n                  </div>\n                  <div className=\"text-center\">\n                    <div className=\"text-sm text-gray-600\">å¸‚å ´å‹•å‘</div>\n                    <div className=\"text-xs text-gray-500 mt-1\">{aiResults.aiInsights.marketTrends}</div>\n                  </div>\n                </div>\n              </div>\n\n              {/* ãŠã™ã™ã‚é‹é€ä¼šç¤¾ä¸€è¦§ */}\n              <div className=\"space-y-4\">\n                {aiResults.carriers.map((carrier, index) => (\n                  <div key={carrier.id} className=\"border border-gray-200 rounded-xl p-6 hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-start justify-between mb-4\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-3 mb-2\">\n                          <span className=\"bg-purple-100 text-purple-800 text-xs font-medium px-2 py-1 rounded-full\">\n                            #{index + 1} ãŠã™ã™ã‚\n                          </span>\n                          <h3 className=\"text-lg font-semibold text-gray-900\">{carrier.companyName}</h3>\n                          <span className={`px-2 py-1 text-xs font-medium rounded-full ${getMatchScoreColor(carrier.aiMatchScore)}`}>\n                            <Target className=\"h-3 w-3 inline mr-1\" />\n                            ãƒãƒƒãƒãƒ³ã‚°ç‡: {carrier.aiMatchScore}%\n                          </span>\n                        </div>\n                        <p className=\"text-sm text-gray-600 mb-3\">{carrier.aiRecommendationReason}</p>\n                      </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-700\">æ‹…å½“è€…</p>\n                        <p className=\"text-sm text-gray-600\">{carrier.contactPerson}</p>\n                        <p className=\"text-sm text-gray-600\">TEL: {carrier.phone}</p>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm text-gray-700\">è©•ä¾¡</span>\n                          <div className=\"flex items-center\">\n                            {renderStars(carrier.rating)}\n                            <span className=\"ml-1 text-sm text-gray-600\">({carrier.rating})</span>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm text-gray-700\">ä¿¡ç”¨ã‚¹ã‚³ã‚¢</span>\n                          <span className={`px-2 py-1 text-xs font-medium rounded-full ${getCreditScoreColor(carrier.creditScore)}`}>\n                            {carrier.creditScore}ç‚¹\n                          </span>\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm text-gray-700\">ä¿¡é ¼æ€§</span>\n                          <span className=\"text-sm text-gray-600\">{carrier.reliabilityScore}%</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"flex flex-wrap gap-1 mb-4\">\n                      {carrier.specialties.map((specialty, idx) => (\n                        <span key={idx} className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                          {specialty}\n                        </span>\n                      ))}\n                    </div>\n\n                    <div className=\"bg-blue-50 p-4 rounded-lg mb-4\">\n                      <h4 className=\"font-semibold text-gray-800 mb-2 flex items-center\">\n                        <Brain className=\"h-4 w-4 mr-2\" />\n                        AI äºˆæ¸¬æƒ…å ±\n                      </h4>\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                        <div className=\"flex items-center\">\n                          <Clock className=\"h-4 w-4 mr-2 text-blue-500\" />\n                          <span className=\"text-gray-700\">äºˆæƒ³é…é€æ™‚é–“: {carrier.estimatedDeliveryTime}æ™‚é–“</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <TrendingUp className=\"h-4 w-4 mr-2 text-green-500\" />\n                          <span className=\"text-gray-700\">ã‚³ã‚¹ãƒˆåŠ¹ç‡: {carrier.costEfficiency}%</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Shield className=\"h-4 w-4 mr-2 text-purple-500\" />\n                          <span className=\"text-gray-700\">ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“: {carrier.responseTime}åˆ†</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-end space-x-2\">\n                      <button className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\">\n                        è©³ç´°ã‚’è¦‹ã‚‹\n                      </button>\n                      <button className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-blue-700 text-sm\">\n                        AI ãŠã™ã™ã‚ã§ä¾é ¼\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* æ–™é‡‘ãƒ»å‚™è€ƒ */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.7s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-teal-600 to-cyan-500 p-3 rounded-xl\">\n                <DollarSign className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">æ–™é‡‘ãƒ»å‚™è€ƒ</h2>\n            </div>\n\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  å¸Œæœ›é‹è³ƒ (å††) *\n                </label>\n                <input\n                  type=\"number\"\n                  required\n                  min=\"0\"\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"50000\"\n                  value={formData.price}\n                  onChange={(e) => setFormData({ ...formData, price: e.target.value })}\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  å‚™è€ƒãƒ»ç‰¹è¨˜äº‹é …\n                </label>\n                <textarea\n                  rows={3}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"ãã®ä»–ã€ç‰¹åˆ¥ãªè¦æœ›ã‚„æ³¨æ„äº‹é …ãŒã‚ã‚Œã°è¨˜è¼‰ã—ã¦ãã ã•ã„\"\n                  value={formData.notes}\n                  onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* é€ä¿¡ãƒœã‚¿ãƒ³ */}\n          <div className=\"flex flex-col sm:flex-row gap-4 fade-in-up\" style={{animationDelay: '0.8s'}}>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"flex-1 btn-primary py-4 text-lg disabled:opacity-50\"\n            >\n              {loading ? 'æŠ•ç¨¿ä¸­...' : 'æ¡ˆä»¶ã‚’æŠ•ç¨¿'}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => router.push('/dashboard')}\n              className=\"flex-1 btn-secondary py-4 text-lg\"\n            >\n              ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n            </button>\n          </div>\n        </form>\n      </main>\n    </div>\n  )\n}\n","size_bytes":31695},"src/app/api/offers/[id]/reject/route.ts":{"content":"import { NextRequest } from 'next/server'\nimport { getUserFromRequest } from '@/lib/auth'\nimport {\n  successResponse,\n  errorResponse,\n  unauthorizedResponse,\n  forbiddenResponse,\n  notFoundResponse,\n} from '@/lib/api-response'\nimport prisma from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\n// ã‚ªãƒ•ã‚¡ãƒ¼æ‹’å¦\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    // ã‚ªãƒ•ã‚¡ãƒ¼å–å¾—\n    const offer = await prisma.offer.findUnique({\n      where: { id: params.id },\n      include: {\n        shipment: true,\n      },\n    })\n    \n    if (!offer) {\n      return notFoundResponse('ã‚ªãƒ•ã‚¡ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')\n    }\n    \n    // è·ä¸»ã®ã¿ãŒæ‹’å¦å¯èƒ½\n    if (offer.shipment.shipperId !== user.userId) {\n      return forbiddenResponse('ã“ã®ã‚ªãƒ•ã‚¡ãƒ¼ã‚’æ‹’å¦ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“')\n    }\n    \n    // ã‚ªãƒ•ã‚¡ãƒ¼ã‚’æ‹’å¦\n    const updatedOffer = await prisma.offer.update({\n      where: { id: params.id },\n      data: { status: 'REJECTED' },\n    })\n    \n    return successResponse(updatedOffer)\n  } catch (error) {\n    console.error('Reject offer error:', error)\n    return errorResponse('ã‚ªãƒ•ã‚¡ãƒ¼ã®æ‹’å¦ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n","size_bytes":1357},"src/app/profile/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Navbar from '@/components/Navbar'\nimport { User, Building2, Phone, Mail, MapPin, Edit, Save, X } from 'lucide-react'\n\nexport default function ProfilePage() {\n  const router = useRouter()\n  const [user, setUser] = useState<any>(null)\n  const [isEditing, setIsEditing] = useState(false)\n  const [formData, setFormData] = useState({\n    companyName: '',\n    contactPerson: '',\n    phone: '',\n    postalCode: '',\n    address: '',\n  })\n  const [loading, setLoading] = useState(true)\n  const [saving, setSaving] = useState(false)\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    const userData = localStorage.getItem('user')\n\n    if (!token || !userData) {\n      router.push('/login')\n      return\n    }\n\n    const userObj = JSON.parse(userData)\n    setUser(userObj)\n    setFormData({\n      companyName: userObj.companyName || '',\n      contactPerson: userObj.contactPerson || '',\n      phone: userObj.phone || '',\n      postalCode: userObj.postalCode || '',\n      address: userObj.address || '',\n    })\n    setLoading(false)\n  }, [])\n\n  const handleSave = async () => {\n    setSaving(true)\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/auth/me', {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`,\n        },\n        body: JSON.stringify(formData),\n      })\n\n      if (!response.ok) throw new Error('æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ')\n\n      const updatedUser = { ...user, ...formData }\n      setUser(updatedUser)\n      localStorage.setItem('user', JSON.stringify(updatedUser))\n      setIsEditing(false)\n    } catch (error) {\n      console.error('Error updating profile:', error)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handleCancel = () => {\n    setFormData({\n      companyName: user?.companyName || '',\n      contactPerson: user?.contactPerson || '',\n      phone: user?.phone || '',\n      postalCode: user?.postalCode || '',\n      address: user?.address || '',\n    })\n    setIsEditing(false)\n  }\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen\">\n        <Navbar userType={user?.userType} />\n        <div className=\"flex items-center justify-center h-96\">\n          <div className=\"text-gray-600 text-lg\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen\">\n      <Navbar userType={user?.userType} />\n\n      <main className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\n        <div className=\"mb-6 sm:mb-8\">\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h1>\n          <p className=\"text-gray-600 mt-2 text-sm sm:text-base\">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±ã‚’ç®¡ç†ã§ãã¾ã™</p>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ± */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"card\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">åŸºæœ¬æƒ…å ±</h2>\n                {!isEditing ? (\n                  <button\n                    onClick={() => setIsEditing(true)}\n                    className=\"flex items-center space-x-2 text-blue-600 hover:text-blue-700 transition\"\n                  >\n                    <Edit className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n                    <span className=\"text-sm sm:text-base\">ç·¨é›†</span>\n                  </button>\n                ) : (\n                  <div className=\"flex items-center space-x-2\">\n                    <button\n                      onClick={handleSave}\n                      disabled={saving}\n                      className=\"flex items-center space-x-1 bg-blue-600 text-white px-3 py-1 rounded-lg hover:bg-blue-700 transition text-sm disabled:opacity-50\"\n                    >\n                      <Save className=\"h-4 w-4\" />\n                      <span>{saving ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜'}</span>\n                    </button>\n                    <button\n                      onClick={handleCancel}\n                      className=\"flex items-center space-x-1 bg-gray-500 text-white px-3 py-1 rounded-lg hover:bg-gray-600 transition text-sm\"\n                    >\n                      <X className=\"h-4 w-4\" />\n                      <span>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</span>\n                    </button>\n                  </div>\n                )}\n              </div>\n\n              <div className=\"space-y-4 sm:space-y-6\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    <Building2 className=\"inline h-4 w-4 mr-2\" />\n                    ä¼šç¤¾å\n                  </label>\n                  {isEditing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.companyName}\n                      onChange={(e) => setFormData({ ...formData, companyName: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900 text-sm sm:text-base\">{user?.companyName || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    <User className=\"inline h-4 w-4 mr-2\" />\n                    æ‹…å½“è€…å\n                  </label>\n                  {isEditing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.contactPerson}\n                      onChange={(e) => setFormData({ ...formData, contactPerson: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900 text-sm sm:text-base\">{user?.contactPerson || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    <Phone className=\"inline h-4 w-4 mr-2\" />\n                    é›»è©±ç•ªå·\n                  </label>\n                  {isEditing ? (\n                    <input\n                      type=\"tel\"\n                      value={formData.phone}\n                      onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900 text-sm sm:text-base\">{user?.phone || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    <Mail className=\"inline h-4 w-4 mr-2\" />\n                    ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹\n                  </label>\n                  <p className=\"text-gray-900 text-sm sm:text-base\">{user?.email}</p>\n                  <p className=\"text-xs text-gray-500 mt-1\">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¤‰æ›´ã§ãã¾ã›ã‚“</p>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    <MapPin className=\"inline h-4 w-4 mr-2\" />\n                    éƒµä¾¿ç•ªå·\n                  </label>\n                  {isEditing ? (\n                    <input\n                      type=\"text\"\n                      value={formData.postalCode}\n                      onChange={(e) => setFormData({ ...formData, postalCode: e.target.value })}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"\n                      placeholder=\"ä¾‹: 1000001\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900 text-sm sm:text-base\">{user?.postalCode || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    <MapPin className=\"inline h-4 w-4 mr-2\" />\n                    ä½æ‰€\n                  </label>\n                  {isEditing ? (\n                    <textarea\n                      value={formData.address}\n                      onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n                      rows={3}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"\n                      placeholder=\"ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                    />\n                  ) : (\n                    <p className=\"text-gray-900 text-sm sm:text-base\">{user?.address || 'æœªè¨­å®š'}</p>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"card\">\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4\">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±</h3>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç¨®åˆ¥</span>\n                  <span className=\"text-sm font-semibold text-blue-600\">\n                    {user?.userType === 'SHIPPER' ? 'è·ä¸»' : 'é‹é€ä¼šç¤¾'}\n                  </span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm text-gray-600\">ç™»éŒ²æ—¥</span>\n                  <span className=\"text-sm text-gray-900\">\n                    {user?.createdAt ? new Date(user.createdAt).toLocaleDateString('ja-JP') : 'ä¸æ˜'}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card mt-6\">\n              <h3 className=\"text-lg font-bold text-gray-900 mb-4\">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®š</h3>\n              <div className=\"space-y-3\">\n                <button className=\"w-full text-left text-sm text-blue-600 hover:text-blue-700 transition\">\n                  ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´\n                </button>\n                <button className=\"w-full text-left text-sm text-blue-600 hover:text-blue-700 transition\">\n                  é€šçŸ¥è¨­å®š\n                </button>\n                <button className=\"w-full text-left text-sm text-red-600 hover:text-red-700 transition\">\n                  ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’å‰Šé™¤\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n","size_bytes":11199},"src/app/login/page.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport Logo from '@/components/Logo'\n\nexport default function LoginPage() {\n  const router = useRouter()\n  const [formData, setFormData] = useState({\n    email: '',\n    password: '',\n  })\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError('')\n    setLoading(true)\n\n    try {\n      const response = await fetch('/api/auth/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n\n      // ãƒˆãƒ¼ã‚¯ãƒ³ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜\n      localStorage.setItem('token', data.data.token)\n      localStorage.setItem('user', JSON.stringify(data.data.user))\n\n      // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ\n      router.push('/dashboard')\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen gradient-bg flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full\">\n        {/* ã‚¿ã‚¤ãƒˆãƒ« */}\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-slate-800 mb-2\">\n            ãƒ­ã‚°ã‚¤ãƒ³\n          </h1>\n          <p className=\"text-slate-600\">\n            ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„\n          </p>\n        </div>\n\n        {/* ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ  */}\n        <div className=\"floating-card\">\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm\">\n                {error}\n              </div>\n            )}\n\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹\n              </label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                required\n                className=\"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                placeholder=\"email@example.com\"\n                value={formData.email}\n                onChange={(e) =>\n                  setFormData({ ...formData, email: e.target.value })\n                }\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                required\n                className=\"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300\"\n                placeholder=\"ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰\"\n                value={formData.password}\n                onChange={(e) =>\n                  setFormData({ ...formData, password: e.target.value })\n                }\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full btn-primary py-3 text-lg disabled:opacity-50\"\n            >\n              {loading ? 'ãƒ­ã‚°ã‚¤ãƒ³ä¸­...' : 'ãƒ­ã‚°ã‚¤ãƒ³'}\n            </button>\n\n            <div className=\"text-center\">\n              <span className=\"text-slate-600\">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã§ãªã„æ–¹ã¯ </span>\n              <Link href=\"/register\" className=\"text-blue-600 hover:text-blue-700 font-semibold hover:scale-105 transition-transform\">\n                æ–°è¦ç™»éŒ²\n              </Link>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}","size_bytes":4206},"src/app/globals.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --foreground-rgb: 15, 23, 42;\n  --background-start: #f8fafc;\n  --background-end: #e2e8f0;\n  --primary-blue: #0ea5e9;\n  --primary-blue-dark: #0284c7;\n  --accent-blue: #38bdf8;\n  --light-blue: #e0f2fe;\n  --gradient-primary: linear-gradient(135deg, #0ea5e9 0%, #38bdf8 50%, #7dd3fc 100%);\n  --gradient-secondary: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);\n  --gradient-hero: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);\n}\n\nbody {\n  color: rgb(var(--foreground-rgb));\n  background: var(--gradient-secondary);\n  min-height: 100vh;\n  overflow-x: hidden;\n  font-feature-settings: \"rlig\" 1, \"calt\" 1;\n}\n\n@layer utilities {\n  .text-balance {\n    text-wrap: balance;\n  }\n  \n  .gradient-text {\n    background: var(--gradient-primary);\n    background-clip: text;\n    -webkit-background-clip: text;\n    -webkit-text-fill-color: transparent;\n    animation: shimmer 3s ease-in-out infinite;\n    background-size: 200% 200%;\n  }\n  \n  .floating {\n    animation: floating 6s ease-in-out infinite;\n  }\n  \n  .slide-in-left {\n    animation: slideInLeft 0.8s ease-out;\n  }\n  \n  .slide-in-right {\n    animation: slideInRight 0.8s ease-out;\n  }\n  \n  .fade-in-up {\n    animation: fadeInUp 1s ease-out;\n  }\n  \n  .slide-in-up {\n    animation: slideInUp 0.8s ease-out;\n  }\n  \n  .scale-in {\n    animation: scaleIn 0.6s ease-out;\n  }\n  \n  .rotate-in {\n    animation: rotateIn 1s ease-out;\n  }\n  \n  .pulse-slow {\n    animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n  }\n  \n  .bounce {\n    animation: bounce 1s ease-in-out infinite;\n  }\n  \n  .shake {\n    animation: shake 0.5s ease-in-out;\n  }\n  \n  .flip {\n    animation: flip 1s ease-in-out;\n  }\n  \n  .zoom-in {\n    animation: zoomIn 0.5s ease-out;\n  }\n  \n  .zoom-out {\n    animation: zoomOut 0.5s ease-out;\n  }\n  \n  .glow-pulse {\n    animation: glowPulse 2s ease-in-out infinite;\n  }\n  \n  .wiggle {\n    animation: wiggle 0.5s ease-in-out;\n  }\n  \n  .heartbeat {\n    animation: heartbeat 1.5s ease-in-out infinite;\n  }\n  \n  .slide-in-down {\n    animation: slideInDown 0.8s ease-out;\n  }\n  \n  .fade-in {\n    animation: fadeIn 1s ease-out;\n  }\n  \n  .spin-slow {\n    animation: spinSlow 3s linear infinite;\n  }\n  \n  /* ã‚¹ã‚¿ãƒƒã‚¬ãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ */\n  .stagger-1 {\n    animation-delay: 0.1s;\n  }\n  \n  .stagger-2 {\n    animation-delay: 0.2s;\n  }\n  \n  .stagger-3 {\n    animation-delay: 0.3s;\n  }\n  \n  .stagger-4 {\n    animation-delay: 0.4s;\n  }\n  \n  .stagger-5 {\n    animation-delay: 0.5s;\n  }\n}\n\n@layer components {\n  .card {\n    @apply bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl p-8 hover:shadow-2xl transition-all duration-500 hover:scale-105 border border-white/20;\n    background: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(248,250,252,0.8) 100%);\n  }\n  \n  .btn-primary {\n    background: var(--gradient-primary);\n    @apply text-white px-8 py-4 rounded-2xl font-semibold transition-all duration-500 shadow-lg hover:shadow-xl hover:scale-105 active:scale-95;\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .btn-primary::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: -100%;\n    width: 100%;\n    height: 100%;\n    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);\n    transition: left 0.5s;\n  }\n  \n  .btn-primary:hover::before {\n    left: 100%;\n  }\n  \n  .btn-secondary {\n    @apply bg-white/90 backdrop-blur-sm text-blue-600 border-2 border-blue-500/30 px-8 py-4 rounded-2xl font-semibold transition-all duration-500 hover:bg-blue-50/80 hover:scale-105 active:scale-95 shadow-lg hover:shadow-xl;\n  }\n  \n  .hero-gradient {\n    background: var(--gradient-hero);\n    background-size: 400% 400%;\n    animation: gradientShift 8s ease infinite;\n  }\n  \n  .glass {\n    @apply bg-white/10 backdrop-blur-xl border border-white/20;\n    background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);\n  }\n  \n  .gradient-bg {\n    background: var(--gradient-secondary);\n  }\n  \n  .floating-card {\n    @apply card;\n    animation: floatingCard 6s ease-in-out infinite;\n  }\n  \n  .glow-effect {\n    box-shadow: 0 0 20px rgba(14, 165, 233, 0.3);\n  }\n  \n  .text-glow {\n    text-shadow: 0 0 10px rgba(14, 165, 233, 0.5);\n  }\n}\n\n@keyframes shimmer {\n  0% { background-position: -200% center; }\n  100% { background-position: 200% center; }\n}\n\n@keyframes floating {\n  0%, 100% { transform: translateY(0px); }\n  50% { transform: translateY(-20px); }\n}\n\n@keyframes slideInLeft {\n  0% { transform: translateX(-100%); opacity: 0; }\n  100% { transform: translateX(0); opacity: 1; }\n}\n\n@keyframes slideInRight {\n  0% { transform: translateX(100%); opacity: 0; }\n  100% { transform: translateX(0); opacity: 1; }\n}\n\n@keyframes fadeInUp {\n  0% { transform: translateY(30px); opacity: 0; }\n  100% { transform: translateY(0); opacity: 1; }\n}\n\n@keyframes gradientShift {\n  0% { background-position: 0% 50%; }\n  50% { background-position: 100% 50%; }\n  100% { background-position: 0% 50%; }\n}\n\n@keyframes pulse {\n  0%, 100% { opacity: 1; }\n  50% { opacity: 0.5; }\n}\n\n@keyframes floatingCard {\n  0%, 100% { \n    transform: translateY(0px) rotate(0deg); \n  }\n  25% { \n    transform: translateY(-10px) rotate(0.5deg); \n  }\n  50% { \n    transform: translateY(-20px) rotate(0deg); \n  }\n  75% { \n    transform: translateY(-10px) rotate(-0.5deg); \n  }\n}\n\n@keyframes slideInUp {\n  0% { \n    transform: translateY(50px); \n    opacity: 0; \n  }\n  100% { \n    transform: translateY(0); \n    opacity: 1; \n  }\n}\n\n@keyframes scaleIn {\n  0% { \n    transform: scale(0.8); \n    opacity: 0; \n  }\n  100% { \n    transform: scale(1); \n    opacity: 1; \n  }\n}\n\n@keyframes rotateIn {\n  0% { \n    transform: rotate(-180deg) scale(0.5); \n    opacity: 0; \n  }\n  100% { \n    transform: rotate(0deg) scale(1); \n    opacity: 1; \n  }\n}\n\n@keyframes bounce {\n  0%, 100% { \n    transform: translateY(0); \n  }\n  50% { \n    transform: translateY(-25px); \n  }\n}\n\n@keyframes shake {\n  0%, 100% { \n    transform: translateX(0); \n  }\n  10%, 30%, 50%, 70%, 90% { \n    transform: translateX(-10px); \n  }\n  20%, 40%, 60%, 80% { \n    transform: translateX(10px); \n  }\n}\n\n@keyframes flip {\n  0% {\n    transform: perspective(400px) rotateY(0);\n  }\n  100% {\n    transform: perspective(400px) rotateY(360deg);\n  }\n}\n\n@keyframes zoomIn {\n  0% {\n    transform: scale(0);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n@keyframes zoomOut {\n  0% {\n    transform: scale(1.2);\n    opacity: 0;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n@keyframes glowPulse {\n  0%, 100% {\n    box-shadow: 0 0 20px rgba(14, 165, 233, 0.4), 0 0 40px rgba(14, 165, 233, 0.2);\n  }\n  50% {\n    box-shadow: 0 0 40px rgba(14, 165, 233, 0.8), 0 0 80px rgba(14, 165, 233, 0.4);\n  }\n}\n\n@keyframes wiggle {\n  0%, 100% { \n    transform: rotate(0deg); \n  }\n  25% { \n    transform: rotate(-5deg); \n  }\n  75% { \n    transform: rotate(5deg); \n  }\n}\n\n@keyframes heartbeat {\n  0%, 100% {\n    transform: scale(1);\n  }\n  10%, 30% {\n    transform: scale(0.9);\n  }\n  20%, 40% {\n    transform: scale(1.1);\n  }\n}\n\n@keyframes slideInDown {\n  0% {\n    transform: translateY(-100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateY(0);\n    opacity: 1;\n  }\n}\n\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes ripple {\n  0% {\n    transform: scale(0);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(4);\n    opacity: 0;\n  }\n}\n\n@keyframes spinSlow {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³é…å»¶ã‚¯ãƒ©ã‚¹ */\n.animation-delay-100 {\n  animation-delay: 0.1s;\n}\n\n.animation-delay-200 {\n  animation-delay: 0.2s;\n}\n\n.animation-delay-300 {\n  animation-delay: 0.3s;\n}\n\n.animation-delay-500 {\n  animation-delay: 0.5s;\n}\n\n.animation-delay-1000 {\n  animation-delay: 1s;\n}\n\n.animation-delay-2000 {\n  animation-delay: 2s;\n}\n\n.animation-delay-4000 {\n  animation-delay: 4s;\n}\n\n/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */\n@media (max-width: 768px) {\n  .card {\n    @apply p-4;\n  }\n\n  .btn-primary, .btn-secondary {\n    @apply px-4 py-2 text-sm;\n  }\n\n  /* ãƒ¢ãƒã‚¤ãƒ«ã§ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è»½æ¸› */\n  .floating {\n    animation: none;\n  }\n\n  .pulse-slow {\n    animation: none;\n  }\n}\n\n/* 430Ã—932 ã‚µã‚¤ã‚ºæœ€é©åŒ– */\n@media (max-width: 430px) {\n  /* ãƒ•ã‚©ãƒ³ãƒˆã‚µã‚¤ã‚ºèª¿æ•´ */\n  .text-4xl {\n    font-size: 1.75rem;\n  }\n\n  .text-5xl {\n    font-size: 2rem;\n  }\n\n  .text-6xl {\n    font-size: 2.25rem;\n  }\n\n  .text-7xl {\n    font-size: 2.5rem;\n  }\n\n  .text-3xl {\n    font-size: 1.5rem;\n  }\n\n  .text-2xl {\n    font-size: 1.25rem;\n  }\n\n  .text-xl {\n    font-size: 1.125rem;\n  }\n\n  .text-lg {\n    font-size: 1rem;\n  }\n\n  /* ã‚«ãƒ¼ãƒ‰ã®ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°èª¿æ•´ */\n  .card {\n    @apply p-3;\n  }\n\n  /* ãƒœã‚¿ãƒ³ã‚µã‚¤ã‚ºèª¿æ•´ */\n  .btn-primary, .btn-secondary {\n    @apply px-3 py-2 text-sm;\n  }\n\n  /* ã‚¹ãƒšãƒ¼ã‚·ãƒ³ã‚°èª¿æ•´ */\n  .space-x-6 > :not([hidden]) ~ :not([hidden]) {\n    margin-left: 1rem;\n  }\n\n  .space-x-4 > :not([hidden]) ~ :not([hidden]) {\n    margin-left: 0.75rem;\n  }\n\n  /* ã‚°ãƒªãƒƒãƒ‰èª¿æ•´ */\n  .grid-cols-1 {\n    grid-template-columns: repeat(1, minmax(0, 1fr));\n  }\n\n  /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³èª¿æ•´ */\n  nav .flex {\n    @apply flex-col space-y-2 space-x-0;\n  }\n\n  /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³èª¿æ•´ */\n  .hero-gradient {\n    min-height: 60vh;\n  }\n\n  /* çµ±è¨ˆã‚«ãƒ¼ãƒ‰ã®èª¿æ•´ */\n  .stats-grid {\n    @apply grid-cols-1 gap-4;\n  }\n\n  /* ãƒ•ãƒƒã‚¿ãƒ¼èª¿æ•´ */\n  footer .flex {\n    @apply flex-col space-y-2 space-x-0;\n  }\n}\n\n@media (max-width: 640px) {\n  .text-4xl {\n    font-size: 2rem;\n  }\n\n  .text-5xl {\n    font-size: 2.5rem;\n  }\n\n  .text-6xl {\n    font-size: 3rem;\n  }\n\n  .text-7xl {\n    font-size: 3.5rem;\n  }\n}\n\n","size_bytes":9690},"src/app/api/vehicles/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url)\n    \n    // æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å–å¾—\n    const vehicleType = searchParams.get('vehicleType') || ''\n    const prefecture = searchParams.get('prefecture') || ''\n    const status = searchParams.get('status') || 'AVAILABLE'\n    const page = parseInt(searchParams.get('page') || '1')\n    const limit = parseInt(searchParams.get('limit') || '20')\n    const offset = (page - 1) * limit\n\n    // æ¤œç´¢æ¡ä»¶ã‚’æ§‹ç¯‰\n    const where: any = {}\n\n    // è»Šä¸¡ã‚¿ã‚¤ãƒ—\n    if (vehicleType) {\n      where.vehicleType = vehicleType\n    }\n\n    // éƒ½é“åºœçœŒï¼ˆJSONé…åˆ—å†…ã‚’æ¤œç´¢ï¼‰\n    if (prefecture) {\n      where.availablePrefectures = {\n        contains: prefecture\n      }\n    }\n\n    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹\n    if (status) {\n      where.status = status\n    }\n\n    // ç¾åœ¨æ—¥æ™‚ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆåˆ©ç”¨å¯èƒ½ãªæœŸé–“å†…ï¼‰\n    const now = new Date()\n    where.availableFrom = {\n      lte: now\n    }\n    where.availableTo = {\n      gte: now\n    }\n\n    // è»Šä¸¡ã‚’æ¤œç´¢\n    const [vehicles, totalCount] = await Promise.all([\n      prisma.vehicle.findMany({\n        where,\n        include: {\n          carrier: {\n            select: {\n              id: true,\n              companyName: true,\n              contactPerson: true,\n              phone: true,\n              email: true\n            }\n          }\n        },\n        orderBy: { createdAt: 'desc' },\n        skip: offset,\n        take: limit\n      }),\n      prisma.vehicle.count({ where })\n    ])\n\n    return NextResponse.json({\n      success: true,\n      data: {\n        vehicles,\n        pagination: {\n          page,\n          limit,\n          totalCount,\n          totalPages: Math.ceil(totalCount / limit)\n        }\n      }\n    })\n  } catch (error) {\n    console.error('Error fetching vehicles:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to fetch vehicles' },\n      { status: 500 }\n    )\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    \n    if (!token) {\n      return NextResponse.json(\n        { success: false, error: 'Authorization token required' },\n        { status: 401 }\n      )\n    }\n\n    // ãƒˆãƒ¼ã‚¯ãƒ³ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã‚’å–å¾—\n    const { verifyToken } = await import('@/lib/auth')\n    const decoded = await verifyToken(token)\n    \n    if (!decoded) {\n      return NextResponse.json(\n        { success: false, error: 'Invalid token' },\n        { status: 401 }\n      )\n    }\n\n    const user = await prisma.user.findUnique({\n      where: { id: decoded.userId },\n      select: {\n        id: true,\n        userType: true,\n        verificationStatus: true\n      }\n    })\n\n    if (!user) {\n      return NextResponse.json(\n        { success: false, error: 'User not found' },\n        { status: 404 }\n      )\n    }\n\n    // è¨±å¯è¨¼æ‰¿èªæ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ä½œæˆå¯èƒ½\n    if (user.verificationStatus !== 'APPROVED') {\n      return NextResponse.json(\n        { success: false, error: 'è¨±å¯è¨¼ãŒæ‰¿èªã•ã‚Œã‚‹ã¾ã§ã€è»Šä¸¡ã‚’ç™»éŒ²ã§ãã¾ã›ã‚“' },\n        { status: 403 }\n      )\n    }\n\n    // éƒ½é“åºœçœŒé…åˆ—ã‚’JSONæ–‡å­—åˆ—ã«å¤‰æ›\n    const availablePrefectures = JSON.stringify(body.availablePrefectures || [])\n\n    // è»Šä¸¡ã‚’ä½œæˆ\n    const vehicle = await prisma.vehicle.create({\n      data: {\n        carrierId: user.id,\n        vehicleType: body.vehicleType,\n        vehicleNumber: body.vehicleNumber,\n        driverName: body.driverName,\n        driverPhone: body.driverPhone,\n        maxWeight: parseFloat(body.maxWeight),\n        maxVolume: body.maxVolume ? parseFloat(body.maxVolume) : null,\n        length: body.length ? parseFloat(body.length) : null,\n        width: body.width ? parseFloat(body.width) : null,\n        height: body.height ? parseFloat(body.height) : null,\n        hasLiftGate: body.hasLiftGate || false,\n        hasRefrigeration: body.hasRefrigeration || false,\n        hasTemperatureControl: body.hasTemperatureControl || false,\n        canLoadUnload: body.canLoadUnload !== false,\n        availablePrefectures,\n        availableFrom: new Date(body.availableFrom),\n        availableTo: new Date(body.availableTo),\n        basePrice: body.basePrice ? parseFloat(body.basePrice) : null,\n        minPrice: body.minPrice ? parseFloat(body.minPrice) : null,\n        status: body.status || 'AVAILABLE',\n        notes: body.notes || null\n      },\n      include: {\n        carrier: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n            phone: true,\n            email: true\n          }\n        }\n      }\n    })\n\n    return NextResponse.json({\n      success: true,\n      data: vehicle\n    })\n  } catch (error) {\n    console.error('Error creating vehicle:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to create vehicle' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":5194},"src/app/api/user/my-posts/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport prisma from '@/lib/prisma';\nimport { getUserFromRequest } from '@/lib/auth';\n\nexport const dynamic = 'force-dynamic'\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const user = getUserFromRequest(request);\n\n    if (!user) {\n      return NextResponse.json({ success: false, message: 'Unauthorized' }, { status: 401 });\n    }\n\n    const { id } = params;\n\n    // è·ç‰©ã‹ç©ºè»Šã‹ã‚’åˆ¤å®šã—ã¦å‰Šé™¤\n    const shipment = await prisma.shipment.findFirst({\n      where: { id, shipperId: user.userId }\n    });\n\n    if (shipment) {\n      await prisma.shipment.delete({\n        where: { id }\n      });\n    } else {\n      const vehicle = await prisma.vehicle.findFirst({\n        where: { id, carrierId: user.userId }\n      });\n\n      if (vehicle) {\n        await prisma.vehicle.delete({\n          where: { id }\n        });\n      } else {\n        return NextResponse.json({ success: false, message: 'Post not found' }, { status: 404 });\n      }\n    }\n\n    return NextResponse.json({ success: true, message: 'Post deleted successfully' });\n  } catch (error) {\n    console.error('Error deleting post:', error);\n    return NextResponse.json({ \n      success: false, \n      message: 'Failed to delete post', \n      error: error instanceof Error ? error.message : 'Unknown error'\n    }, { status: 500 });\n  }\n}\n","size_bytes":1428},"src/app/api/offers/[id]/accept/route.ts":{"content":"import { NextRequest } from 'next/server'\nimport { getUserFromRequest } from '@/lib/auth'\nimport {\n  successResponse,\n  errorResponse,\n  unauthorizedResponse,\n  forbiddenResponse,\n  notFoundResponse,\n} from '@/lib/api-response'\nimport prisma from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\n// ã‚ªãƒ•ã‚¡ãƒ¼æ‰¿èª\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    // ã‚ªãƒ•ã‚¡ãƒ¼å–å¾—\n    const offer = await prisma.offer.findUnique({\n      where: { id: params.id },\n      include: {\n        shipment: true,\n      },\n    })\n    \n    if (!offer) {\n      return notFoundResponse('ã‚ªãƒ•ã‚¡ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')\n    }\n    \n    // è·ä¸»ã®ã¿ãŒæ‰¿èªå¯èƒ½\n    if (offer.shipment.shipperId !== user.userId) {\n      return forbiddenResponse('ã“ã®ã‚ªãƒ•ã‚¡ãƒ¼ã‚’æ‰¿èªã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“')\n    }\n    \n    // ã‚ªãƒ•ã‚¡ãƒ¼ã‚’æ‰¿èªã—ã¦ãƒãƒƒãƒãƒ³ã‚°\n    const [updatedOffer, updatedShipment] = await prisma.$transaction([\n      // ã‚ªãƒ•ã‚¡ãƒ¼ã‚’æ‰¿èª\n      prisma.offer.update({\n        where: { id: params.id },\n        data: { status: 'ACCEPTED' },\n      }),\n      // é…é€æ¡ˆä»¶ã‚’ãƒãƒƒãƒãƒ³ã‚°æ¸ˆã¿ã«æ›´æ–°\n      prisma.shipment.update({\n        where: { id: offer.shipmentId },\n        data: {\n          status: 'MATCHED',\n          carrierId: offer.carrierId,\n        },\n      }),\n      // ä»–ã®ã‚ªãƒ•ã‚¡ãƒ¼ã‚’æ‹’å¦\n      prisma.offer.updateMany({\n        where: {\n          shipmentId: offer.shipmentId,\n          id: { not: params.id },\n          status: 'PENDING',\n        },\n        data: { status: 'REJECTED' },\n      }),\n    ])\n    \n    return successResponse({\n      offer: updatedOffer,\n      shipment: updatedShipment,\n    })\n  } catch (error) {\n    console.error('Accept offer error:', error)\n    return errorResponse('ã‚ªãƒ•ã‚¡ãƒ¼ã®æ‰¿èªã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n","size_bytes":2004},"prisma/migrations/migration_lock.toml":{"content":"# Please do not edit this file manually\n# It should be added in your version-control system (i.e. Git)\nprovider = \"sqlite\"","size_bytes":122},"src/app/dashboard/company-search/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Building2, \n  Search, \n  MapPin, \n  Phone, \n  Mail, \n  User, \n  Star,\n  Filter,\n  Plus,\n  Eye,\n  MessageCircle,\n  Truck,\n  Package,\n  Calendar,\n  CheckCircle\n} from 'lucide-react'\n\ninterface Company {\n  id: string\n  companyName: string\n  contactPerson: string\n  email: string\n  phone: string\n  address: string\n  postalCode: string\n  userType: 'SHIPPER' | 'CARRIER'\n  rating: number\n  totalShipments: number\n  completedShipments: number\n  joinedDate: string\n  description?: string\n  specialties?: string[]\n}\n\nexport default function CompanySearchPage() {\n  const [companies, setCompanies] = useState<Company[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [userTypeFilter, setUserTypeFilter] = useState<'all' | 'SHIPPER' | 'CARRIER'>('all')\n  const [ratingFilter, setRatingFilter] = useState<'all' | '4+' | '3+' | '2+'>('all')\n\n  useEffect(() => {\n    loadCompanies()\n  }, [])\n\n  const loadCompanies = async () => {\n    try {\n      // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿\n      const sampleCompanies: Company[] = [\n        {\n          id: '1',\n          companyName: 'æ ªå¼ä¼šç¤¾ãƒˆãƒ©ãƒ³ã‚¹ãƒ­ã‚¸ãƒƒã‚¯',\n          contactPerson: 'ç”°ä¸­å¤ªéƒ',\n          email: 'tanaka@translogic.co.jp',\n          phone: '03-1234-5678',\n          address: 'æ±äº¬éƒ½æ¸¯åŒºå…­æœ¬æœ¨1-1-1',\n          postalCode: '106-0032',\n          userType: 'CARRIER',\n          rating: 4.8,\n          totalShipments: 156,\n          completedShipments: 148,\n          joinedDate: '2023-01-15',\n          description: 'é–¢æ±åœã‚’ä¸­å¿ƒã¨ã—ãŸç‰©æµã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã€‚å†·å‡ãƒ»å†·è”µè¼¸é€ã«å¼·ã¿ãŒã‚ã‚Šã¾ã™ã€‚',\n          specialties: ['å†·å‡è¼¸é€', 'é–¢æ±åœ', 'æ€¥ä¾¿å¯¾å¿œ']\n        },\n        {\n          id: '2',\n          companyName: 'å±±ç”°é‹é€æ ªå¼ä¼šç¤¾',\n          contactPerson: 'å±±ç”°èŠ±å­',\n          email: 'yamada@yamada-transport.co.jp',\n          phone: '06-9876-5432',\n          address: 'å¤§é˜ªåºœå¤§é˜ªå¸‚åŒ—åŒºæ¢…ç”°2-2-2',\n          postalCode: '530-0001',\n          userType: 'CARRIER',\n          rating: 4.5,\n          totalShipments: 89,\n          completedShipments: 85,\n          joinedDate: '2023-03-20',\n          description: 'é–¢è¥¿åœã®ä¸€èˆ¬è²¨ç‰©è¼¸é€ã‚’å°‚é–€ã¨ã—ã¦ã„ã¾ã™ã€‚',\n          specialties: ['ä¸€èˆ¬è²¨ç‰©', 'é–¢è¥¿åœ', 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯']\n        },\n        {\n          id: '3',\n          companyName: 'æ ªå¼ä¼šç¤¾ã‚°ãƒªãƒ¼ãƒ³ãƒ­ã‚¸ã‚¹ãƒ†ã‚£ã‚¯ã‚¹',\n          contactPerson: 'ä½è—¤æ¬¡éƒ',\n          email: 'sato@greenlogistics.co.jp',\n          phone: '052-1111-2222',\n          address: 'æ„›çŸ¥çœŒåå¤å±‹å¸‚ä¸­åŒºæ „3-3-3',\n          postalCode: '460-0008',\n          userType: 'SHIPPER',\n          rating: 4.2,\n          totalShipments: 234,\n          completedShipments: 220,\n          joinedDate: '2022-11-10',\n          description: 'ç’°å¢ƒã«é…æ…®ã—ãŸç‰©æµã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æä¾›ã€‚',\n          specialties: ['ã‚¨ã‚³ç‰©æµ', 'ä¸­éƒ¨åœ', 'BtoB']\n        },\n        {\n          id: '4',\n          companyName: 'ã‚¹ãƒ”ãƒ¼ãƒ‰ç‰©æµæ ªå¼ä¼šç¤¾',\n          contactPerson: 'éˆ´æœ¨ä¸€éƒ',\n          email: 'suzuki@speedlogistics.co.jp',\n          phone: '092-3333-4444',\n          address: 'ç¦å²¡çœŒç¦å²¡å¸‚åšå¤šåŒºåšå¤šé§…å‰4-4-4',\n          postalCode: '812-0011',\n          userType: 'CARRIER',\n          rating: 4.7,\n          totalShipments: 312,\n          completedShipments: 298,\n          joinedDate: '2022-08-05',\n          description: 'ä¹å·å…¨åŸŸã®é«˜é€Ÿè¼¸é€ã‚µãƒ¼ãƒ“ã‚¹ã€‚24æ™‚é–“å¯¾å¿œå¯èƒ½ã€‚',\n          specialties: ['é«˜é€Ÿè¼¸é€', 'ä¹å·åœ', '24æ™‚é–“å¯¾å¿œ']\n        }\n      ]\n      \n      setCompanies(sampleCompanies)\n    } catch (error) {\n      console.error('Error loading companies:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const filteredCompanies = companies.filter(company => {\n    const matchesSearch = searchTerm === '' || \n      company.companyName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      company.contactPerson.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      company.description?.toLowerCase().includes(searchTerm.toLowerCase())\n    \n    const matchesUserType = userTypeFilter === 'all' || company.userType === userTypeFilter\n    \n    const matchesRating = ratingFilter === 'all' || \n      (ratingFilter === '4+' && company.rating >= 4) ||\n      (ratingFilter === '3+' && company.rating >= 3) ||\n      (ratingFilter === '2+' && company.rating >= 2)\n    \n    return matchesSearch && matchesUserType && matchesRating\n  })\n\n  const renderStars = (rating: number) => {\n    return Array.from({ length: 5 }, (_, i) => (\n      <Star\n        key={i}\n        className={`h-4 w-4 ${\n          i < Math.floor(rating) ? 'text-yellow-400 fill-current' : 'text-gray-300'\n        }`}\n      />\n    ))\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">ä¼æ¥­æ¤œç´¢</h1>\n        <p className=\"text-gray-600\">å–å¼•å…ˆä¼æ¥­ã‚’æ¤œç´¢ã—ã¦é€£çµ¡å…ˆã‚’ç¢ºèªã§ãã¾ã™</p>\n      </div>\n\n      {/* æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}\n      <div className=\"bg-white rounded-lg shadow-sm border mb-6\">\n        <div className=\"p-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"ä¼šç¤¾åã€æ‹…å½“è€…åã§æ¤œç´¢...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n            <div>\n              <div className=\"flex items-center space-x-2\">\n                <Filter className=\"h-4 w-4 text-gray-500\" />\n                <select\n                  value={userTypeFilter}\n                  onChange={(e) => setUserTypeFilter(e.target.value as any)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"all\">ã™ã¹ã¦ã®ä¼æ¥­</option>\n                  <option value=\"SHIPPER\">è·ä¸»ä¼æ¥­</option>\n                  <option value=\"CARRIER\">é‹é€æ¥­è€…</option>\n                </select>\n              </div>\n            </div>\n            <div>\n              <select\n                value={ratingFilter}\n                onChange={(e) => setRatingFilter(e.target.value as any)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"all\">ã™ã¹ã¦ã®è©•ä¾¡</option>\n                <option value=\"4+\">4.0ä»¥ä¸Š</option>\n                <option value=\"3+\">3.0ä»¥ä¸Š</option>\n                <option value=\"2+\">2.0ä»¥ä¸Š</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* ä¼æ¥­ä¸€è¦§ */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            ä¼æ¥­ä¸€è¦§ ({filteredCompanies.length}ä»¶)\n          </h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : filteredCompanies.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <Building2 className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>æ¡ä»¶ã«ä¸€è‡´ã™ã‚‹ä¼æ¥­ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {filteredCompanies.map((company) => (\n              <div key={company.id} className=\"p-6 hover:bg-gray-50\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center space-x-3 mb-2\">\n                      <h3 className=\"text-lg font-medium text-gray-900\">\n                        {company.companyName}\n                      </h3>\n                      <span className={`px-2 py-1 text-xs font-medium rounded-full ${\n                        company.userType === 'SHIPPER' \n                          ? 'bg-blue-100 text-blue-800' \n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        {company.userType === 'SHIPPER' ? 'è·ä¸»ä¼æ¥­' : 'é‹é€æ¥­è€…'}\n                      </span>\n                    </div>\n                    \n                    {company.description && (\n                      <p className=\"text-sm text-gray-600 mb-3\">{company.description}</p>\n                    )}\n\n                    {/* è©•ä¾¡ã¨å®Ÿç¸¾ */}\n                    <div className=\"flex items-center space-x-4 mb-3\">\n                      <div className=\"flex items-center space-x-1\">\n                        {renderStars(company.rating)}\n                        <span className=\"text-sm text-gray-600 ml-1\">({company.rating})</span>\n                      </div>\n                      <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n                        <span className=\"flex items-center\">\n                          <Package className=\"h-4 w-4 mr-1\" />\n                          ç·è·ç‰©æ•°: {company.totalShipments}\n                        </span>\n                        <span className=\"flex items-center\">\n                          <CheckCircle className=\"h-4 w-4 mr-1\" />\n                          å®Œäº†: {company.completedShipments}\n                        </span>\n                      </div>\n                    </div>\n\n                    {/* é€£çµ¡å…ˆæƒ…å ± */}\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700 mb-3\">\n                      <div className=\"flex items-center\">\n                        <User className=\"h-4 w-4 mr-2 text-gray-500\" />\n                        <span>{company.contactPerson}</span>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <Phone className=\"h-4 w-4 mr-2 text-gray-500\" />\n                        <span>{company.phone}</span>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <Mail className=\"h-4 w-4 mr-2 text-gray-500\" />\n                        <span>{company.email}</span>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                        <span>{company.postalCode} {company.address}</span>\n                      </div>\n                    </div>\n\n                    {/* å°‚é–€åˆ†é‡ */}\n                    {company.specialties && company.specialties.length > 0 && (\n                      <div className=\"flex flex-wrap gap-2\">\n                        {company.specialties.map((specialty, index) => (\n                          <span\n                            key={index}\n                            className=\"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full\"\n                          >\n                            {specialty}\n                          </span>\n                        ))}\n                      </div>\n                    )}\n\n                    <div className=\"mt-3 text-xs text-gray-400\">\n                      ç™»éŒ²æ—¥: {new Date(company.joinedDate).toLocaleDateString('ja-JP')}\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2 ml-4\">\n                    <button\n                      className=\"p-2 text-gray-400 hover:text-blue-600\"\n                      title=\"è©³ç´°ã‚’è¦‹ã‚‹\"\n                    >\n                      <Eye className=\"h-4 w-4\" />\n                    </button>\n                    <button\n                      className=\"p-2 text-gray-400 hover:text-green-600\"\n                      title=\"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹\"\n                    >\n                      <MessageCircle className=\"h-4 w-4\" />\n                    </button>\n                    <button\n                      className=\"p-2 text-gray-400 hover:text-purple-600\"\n                      title=\"å–å¼•å…ˆã«è¿½åŠ \"\n                    >\n                      <Plus className=\"h-4 w-4\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":12940},"src/app/page.tsx":{"content":"'use client'\n\nimport Link from 'next/link'\nimport Logo from '@/components/Logo'\nimport CountUpAnimation from '@/components/CountUpAnimation'\nimport { Package, Users, TrendingUp, Shield, Clock, BarChart, Truck } from 'lucide-react'\nimport { useScrollAnimation } from '@/hooks/useScrollAnimation'\n\nexport default function HomePage() {\n  const { ref: featuresRef, isVisible: featuresVisible } = useScrollAnimation()\n  const { ref: statsRef, isVisible: statsVisible } = useScrollAnimation()\n  return (\n    <div className=\"min-h-screen\">\n      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n      <header className=\"glass sticky top-0 z-50 border-b border-white/20\">\n        <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex justify-between items-center\">\n            <Logo width={200} height={60} className=\"w-[150px] h-[45px] sm:w-[200px] sm:h-[60px] scale-in\" />\n            <div className=\"flex items-center space-x-2 sm:space-x-6\">\n              <Link\n                href=\"/login\"\n                className=\"text-slate-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-all duration-300 hover:scale-105\"\n              >\n                ãƒ­ã‚°ã‚¤ãƒ³\n              </Link>\n              <Link\n                href=\"/register\"\n                className=\"btn-primary text-sm px-6 py-3 scale-in\"\n                style={{animationDelay: '0.1s'}}\n              >\n                æ–°è¦ç™»éŒ²\n              </Link>\n            </div>\n          </div>\n        </nav>\n      </header>\n\n      {/* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}\n      <section className=\"relative overflow-hidden min-h-screen flex items-center gradient-bg\">\n        {/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ */}\n        <div className=\"absolute inset-0\">\n          <div className=\"absolute top-20 left-10 w-32 h-32 sm:w-96 sm:h-96 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse-slow glow-effect\"></div>\n          <div className=\"absolute top-40 right-10 w-32 h-32 sm:w-96 sm:h-96 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse-slow animation-delay-2000 glow-effect\"></div>\n          <div className=\"absolute -bottom-8 left-20 w-32 h-32 sm:w-96 sm:h-96 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-pulse-slow animation-delay-4000 glow-effect\"></div>\n          <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 sm:w-[500px] sm:h-[500px] bg-gradient-to-r from-white/20 to-blue-100/30 rounded-full filter blur-3xl animate-pulse-slow animation-delay-1000\"></div>\n        </div>\n        \n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-24 w-full\">\n          <div className=\"text-center\">\n            <div className=\"fade-in-up\">\n              <h1 className=\"text-4xl sm:text-5xl lg:text-8xl font-bold mb-6 sm:mb-8 leading-tight\">\n                <span className=\"text-slate-800\">ç‰©æµã‚’</span>\n                <span className=\"gradient-text text-glow\">ã‚‚ã£ã¨ã‚¹ãƒãƒ¼ãƒˆ</span>\n                <span className=\"text-slate-800\">ã«</span>\n              </h1>\n            </div>\n            \n            <div className=\"slide-in-left\">\n              <p className=\"text-lg sm:text-xl lg:text-3xl text-slate-600 mb-8 sm:mb-12 max-w-5xl mx-auto leading-relaxed px-4 font-medium\">\n                ã€Œæ–­ã‚‰ãªã„ç‰©æµã€ã‚’å®Ÿç¾ã™ã‚‹ã€æ¬¡ä¸–ä»£æ±‚è·æ±‚è»Šã‚µãƒ¼ãƒ“ã‚¹<br className=\"hidden sm:block\" />\n                è·ç‰©ã‚„ç©ºããƒˆãƒ©ãƒƒã‚¯ãŒAIã«ã‚ˆã£ã¦ã™ãæ±ºã¾ã‚‹ï¼\n              </p>\n            </div>\n            \n            <div className=\"slide-in-right\">\n              <div className=\"flex justify-center mb-12 sm:mb-16 px-4\">\n                <Link href=\"/register\" className=\"btn-primary text-lg sm:text-xl px-12 py-4 sm:px-20 lg:px-24 floating glow-effect\">\n                  ç„¡æ–™ãŠè©¦ã—ã«ç”³ã—è¾¼ã‚€\n                </Link>\n              </div>\n            </div>\n            \n            {/* ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ± */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6 sm:gap-8 mt-12 sm:mt-16 max-w-4xl mx-auto px-4\">\n              <div className=\"floating-card text-center scale-in glow-effect\" style={{animationDelay: '0.1s'}}>\n                <div className=\"text-3xl sm:text-4xl lg:text-6xl font-bold gradient-text mb-3 text-glow\">\n                  <CountUpAnimation end={10247} duration={2500} />\n                </div>\n                <div className=\"text-slate-600 text-sm sm:text-lg font-medium\">ç¾åœ¨ã®è·ç‰©æ•°</div>\n                <div className=\"text-xs text-slate-500 mt-1\">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°</div>\n              </div>\n              <div className=\"floating-card text-center scale-in glow-effect\" style={{animationDelay: '0.15s'}}>\n                <div className=\"text-3xl sm:text-4xl lg:text-6xl font-bold gradient-text mb-3 text-glow\">\n                  <CountUpAnimation end={856} duration={2500} />\n                </div>\n                <div className=\"text-slate-600 text-sm sm:text-lg font-medium\">ç¾åœ¨ã®ç©ºè»Šæ•°</div>\n                <div className=\"text-xs text-slate-500 mt-1\">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°</div>\n              </div>\n            </div>\n            \n            {/* çµ±è¨ˆæƒ…å ± */}\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8 lg:gap-10 mt-8 sm:mt-12 max-w-6xl mx-auto px-4\">\n              <div className=\"floating-card text-center scale-in glow-effect\" style={{animationDelay: '0.2s'}}>\n                <div className=\"text-3xl sm:text-4xl lg:text-6xl font-bold gradient-text mb-3 text-glow\">\n                  <CountUpAnimation end={1000} duration={3000} suffix=\"+\" />\n                </div>\n                <div className=\"text-slate-600 text-sm sm:text-lg font-medium\">ç™»éŒ²ä¼æ¥­æ•°</div>\n              </div>\n              <div className=\"floating-card text-center scale-in glow-effect\" style={{animationDelay: '0.4s'}}>\n                <div className=\"text-3xl sm:text-4xl lg:text-6xl font-bold gradient-text mb-3 text-glow\">\n                  <CountUpAnimation end={5000} duration={3000} suffix=\"+\" />\n                </div>\n                <div className=\"text-slate-600 text-sm sm:text-lg font-medium\">æœˆé–“ãƒãƒƒãƒãƒ³ã‚°æ•°</div>\n              </div>\n              <div className=\"floating-card text-center scale-in glow-effect sm:col-span-2 lg:col-span-1\" style={{animationDelay: '0.6s'}}>\n                <div className=\"text-3xl sm:text-4xl lg:text-6xl font-bold gradient-text mb-3 text-glow\">\n                  <CountUpAnimation end={98} duration={2000} suffix=\"%\" />\n                </div>\n                <div className=\"text-slate-600 text-sm sm:text-lg font-medium\">é¡§å®¢æº€è¶³åº¦</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* ç‰¹å¾´ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}\n      <section ref={featuresRef} className=\"gradient-bg py-24 lg:py-40\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className={`text-center mb-20 ${featuresVisible ? 'zoom-in' : 'opacity-0'}`}>\n            <h2 className=\"text-4xl sm:text-5xl lg:text-6xl font-bold text-slate-800 mb-8\">\n              SIN JAPAN LOGI MATCHã®ç‰¹å¾´\n            </h2>\n            <p className=\"text-xl sm:text-2xl text-slate-600 max-w-4xl mx-auto leading-relaxed font-medium\">\n              æœ€å…ˆç«¯ã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã§ç‰©æµæ¥­ç•Œã«é©æ–°ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™\n            </p>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 lg:gap-10\">\n            <div className={`floating-card group ${featuresVisible ? 'zoom-in stagger-1' : 'opacity-0'} hover:glow-pulse`}>\n              <div className=\"bg-gradient-to-br from-blue-600 to-cyan-600 w-20 h-20 rounded-3xl flex items-center justify-center mb-8 group-hover:scale-110 group-hover:wiggle transition-all duration-500 glow-pulse\">\n                <Package className=\"h-10 w-10 text-white\" />\n              </div>\n              <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">ç°¡å˜ãªæ¡ˆä»¶æŠ•ç¨¿</h3>\n              <p className=\"text-slate-600 leading-relaxed text-base sm:text-lg\">\n                è·ä¸»ã¯æ•°åˆ†ã§é…é€æ¡ˆä»¶ã‚’æŠ•ç¨¿å¯èƒ½ã€‚è©³ç´°ãªæ¡ä»¶è¨­å®šã§ã€æœ€é©ãªé‹é€ä¼šç¤¾ã¨ãƒãƒƒãƒãƒ³ã‚°ã—ã¾ã™ã€‚\n              </p>\n            </div>\n\n            <div className={`floating-card group ${featuresVisible ? 'zoom-in stagger-2' : 'opacity-0'} hover:glow-pulse`}>\n              <div className=\"bg-gradient-to-br from-purple-600 to-pink-600 w-20 h-20 rounded-3xl flex items-center justify-center mb-8 group-hover:scale-110 group-hover:wiggle transition-all duration-500 glow-pulse\">\n                <Users className=\"h-10 w-10 text-white\" />\n              </div>\n              <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">åŠ¹ç‡çš„ãªãƒãƒƒãƒãƒ³ã‚°</h3>\n              <p className=\"text-slate-600 leading-relaxed text-base sm:text-lg\">\n                é‹é€ä¼šç¤¾ã¯æ¡ä»¶ã«åˆã†æ¡ˆä»¶ã‚’æ¤œç´¢ã—ã€è‡ªç”±ã«ã‚ªãƒ•ã‚¡ãƒ¼ã‚’ææ¡ˆã€‚åŒæ–¹ãŒç´å¾—ã™ã‚‹æ¡ä»¶ã§å–å¼•ã§ãã¾ã™ã€‚\n              </p>\n            </div>\n\n            <div className={`floating-card group ${featuresVisible ? 'zoom-in stagger-3' : 'opacity-0'} hover:glow-pulse`}>\n              <div className=\"bg-gradient-to-br from-green-600 to-emerald-600 w-20 h-20 rounded-3xl flex items-center justify-center mb-8 group-hover:scale-110 group-hover:wiggle transition-all duration-500 glow-pulse\">\n                <TrendingUp className=\"h-10 w-10 text-white\" />\n              </div>\n              <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">ã‚³ã‚¹ãƒˆå‰Šæ¸›</h3>\n              <p className=\"text-slate-600 leading-relaxed text-base sm:text-lg\">\n                è¤‡æ•°ã®é‹é€ä¼šç¤¾ã‹ã‚‰ç›¸è¦‹ç©ã‚‚ã‚ŠãŒå¯èƒ½ã€‚ç«¶äº‰åŸç†ã«ã‚ˆã‚Šã€é©æ­£ä¾¡æ ¼ã§ã®å–å¼•ã‚’å®Ÿç¾ã—ã¾ã™ã€‚\n              </p>\n            </div>\n\n            <div className={`floating-card group ${featuresVisible ? 'zoom-in stagger-4' : 'opacity-0'} hover:glow-pulse`}>\n              <div className=\"bg-gradient-to-br from-orange-600 to-yellow-600 w-20 h-20 rounded-3xl flex items-center justify-center mb-8 group-hover:scale-110 group-hover:wiggle transition-all duration-500 glow-pulse\">\n                <Shield className=\"h-10 w-10 text-white\" />\n              </div>\n              <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">å®‰å…¨ãƒ»å®‰å¿ƒ</h3>\n              <p className=\"text-slate-600 leading-relaxed text-base sm:text-lg\">\n                å³æ ¼ãªå¯©æŸ»ã‚’é€šéã—ãŸé‹é€ä¼šç¤¾ã®ã¿ãŒç™»éŒ²ã€‚å®‰å¿ƒã—ã¦å–å¼•ã§ãã‚‹ç’°å¢ƒã‚’æä¾›ã—ã¾ã™ã€‚\n              </p>\n            </div>\n\n            <div className={`floating-card group ${featuresVisible ? 'zoom-in stagger-5' : 'opacity-0'} hover:glow-pulse`}>\n              <div className=\"bg-gradient-to-br from-indigo-600 to-blue-600 w-20 h-20 rounded-3xl flex items-center justify-center mb-8 group-hover:scale-110 group-hover:wiggle transition-all duration-500 glow-pulse\">\n                <Clock className=\"h-10 w-10 text-white\" />\n              </div>\n              <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">24æ™‚é–“å¯¾å¿œ</h3>\n              <p className=\"text-slate-600 leading-relaxed text-base sm:text-lg\">\n                ã„ã¤ã§ã‚‚ã©ã“ã§ã‚‚æ¡ˆä»¶ã®æŠ•ç¨¿ãƒ»æ¤œç´¢ãŒå¯èƒ½ã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§çŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚\n              </p>\n            </div>\n\n            <div className={`floating-card group ${featuresVisible ? 'zoom-in animation-delay-500' : 'opacity-0'} hover:glow-pulse`}>\n              <div className=\"bg-gradient-to-br from-teal-600 to-cyan-600 w-20 h-20 rounded-3xl flex items-center justify-center mb-8 group-hover:scale-110 group-hover:wiggle transition-all duration-500 glow-pulse\">\n                <BarChart className=\"h-10 w-10 text-white\" />\n              </div>\n              <h3 className=\"text-2xl font-bold mb-6 text-slate-800\">ãƒ‡ãƒ¼ã‚¿åˆ†æ</h3>\n              <p className=\"text-slate-600 leading-relaxed text-base sm:text-lg\">\n                éå»ã®å–å¼•ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€æœ€é©ãªä¾¡æ ¼è¨­å®šã‚„é‹é€ãƒ«ãƒ¼ãƒˆã‚’ææ¡ˆã—ã¾ã™ã€‚\n              </p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n\n      {/* ãƒ•ãƒƒã‚¿ãƒ¼ */}\n      <footer className=\"bg-gradient-to-r from-slate-900 via-slate-800 to-slate-900 text-white py-20\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center\">\n            <div className=\"mb-8\">\n              <h3 className=\"text-2xl sm:text-3xl font-bold mb-4 gradient-text text-glow\">\n                SIN JAPAN LOGI MATCH\n              </h3>\n              <p className=\"text-slate-300 text-lg max-w-2xl mx-auto leading-relaxed\">\n                ã€Œæ–­ã‚‰ãªã„ç‰©æµã€ã‚’å®Ÿç¾ã™ã‚‹ã€æ¬¡ä¸–ä»£æ±‚è·æ±‚è»Šã‚µãƒ¼ãƒ“ã‚¹\n              </p>\n            </div>\n            <p className=\"text-slate-400 mb-8 text-lg\">\n              Â© 2025 SIN JAPAN LLC All rights reserved\n            </p>\n            <div className=\"flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-8 text-base text-slate-400\">\n              <Link href=\"/help\" className=\"hover:text-white transition-all duration-300 hover:scale-105 hover:text-glow\">ãƒ˜ãƒ«ãƒ—</Link>\n              <Link href=\"/terms\" className=\"hover:text-white transition-all duration-300 hover:scale-105 hover:text-glow\">åˆ©ç”¨è¦ç´„</Link>\n              <Link href=\"/privacy\" className=\"hover:text-white transition-all duration-300 hover:scale-105 hover:text-glow\">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</Link>\n              <Link href=\"/contact\" className=\"hover:text-white transition-all duration-300 hover:scale-105 hover:text-glow\">ãŠå•ã„åˆã‚ã›</Link>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </div>\n  )\n}\n\n","size_bytes":13949},"src/app/api/user/my-posts/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport prisma from '@/lib/prisma';\nimport { getUserFromRequest } from '@/lib/auth';\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const user = getUserFromRequest(request);\n\n    if (!user) {\n      return NextResponse.json({ success: false, message: 'Unauthorized' }, { status: 401 });\n    }\n\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è·ç‰©æŠ•ç¨¿ã‚’å–å¾—\n    const shipments = await prisma.shipment.findMany({\n      where: { shipperId: user.userId },\n      select: {\n        id: true,\n        cargoName: true,\n        cargoDescription: true,\n        status: true,\n        createdAt: true,\n        updatedAt: true,\n        pickupPrefecture: true,\n        pickupCity: true,\n        deliveryPrefecture: true,\n        deliveryCity: true,\n        pickupDate: true,\n        cargoWeight: true,\n        requiredVehicleType: true,\n        budget: true,\n      },\n      orderBy: { createdAt: 'desc' }\n    });\n\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç©ºè»ŠæŠ•ç¨¿ã‚’å–å¾—\n    const vehicles = await prisma.vehicle.findMany({\n      where: { carrierId: user.userId },\n      select: {\n        id: true,\n        vehicleType: true,\n        status: true,\n        createdAt: true,\n        updatedAt: true,\n        maxWeight: true,\n        availablePrefectures: true,\n        availableFrom: true,\n        availableTo: true,\n      },\n      orderBy: { createdAt: 'desc' }\n    });\n\n    // çµ±ä¸€ã•ã‚ŒãŸå½¢å¼ã«å¤‰æ›\n    const posts = [\n      ...shipments.map(shipment => ({\n        id: shipment.id,\n        type: 'shipment' as const,\n        title: shipment.cargoName,\n        description: shipment.cargoDescription,\n        status: shipment.status,\n        createdAt: shipment.createdAt,\n        updatedAt: shipment.updatedAt,\n        data: {\n          pickupPrefecture: shipment.pickupPrefecture,\n          pickupCity: shipment.pickupCity,\n          deliveryPrefecture: shipment.deliveryPrefecture,\n          deliveryCity: shipment.deliveryCity,\n          pickupDate: shipment.pickupDate,\n          cargoWeight: shipment.cargoWeight,\n          requiredVehicleType: shipment.requiredVehicleType,\n          budget: shipment.budget,\n        }\n      })),\n      ...vehicles.map(vehicle => ({\n        id: vehicle.id,\n        type: 'vehicle' as const,\n        title: vehicle.vehicleType,\n        description: `${vehicle.vehicleType} - æœ€å¤§ç©è¼‰é‡é‡: ${vehicle.maxWeight}kg`,\n        status: vehicle.status,\n        createdAt: vehicle.createdAt,\n        updatedAt: vehicle.updatedAt,\n        data: {\n          vehicleType: vehicle.vehicleType,\n          maxWeight: vehicle.maxWeight,\n          availablePrefectures: vehicle.availablePrefectures,\n          availableFrom: vehicle.availableFrom,\n          availableTo: vehicle.availableTo,\n        }\n      }))\n    ].sort((a, b) => new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n\n    return NextResponse.json({ success: true, data: posts });\n  } catch (error) {\n    console.error('Error fetching user posts:', error);\n    return NextResponse.json({ \n      success: false, \n      message: 'Failed to fetch posts', \n      error: error instanceof Error ? error.message : 'Unknown error' \n    }, { status: 500 });\n  }\n}\n","size_bytes":3241},"src/app/api/user/profile/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server';\nimport prisma from '@/lib/prisma';\nimport { getUserFromRequest } from '@/lib/auth';\n\nexport const dynamic = 'force-dynamic'\n\nexport async function PUT(request: NextRequest) {\n  try {\n    const user = getUserFromRequest(request);\n\n    if (!user) {\n      return NextResponse.json({ success: false, message: 'Unauthorized' }, { status: 401 });\n    }\n\n    const body = await request.json();\n    const {\n      contactPerson,\n      email,\n      phone,\n      companyName,\n      postalCode,\n      address,\n    } = body;\n\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ›´æ–°\n    const updatedUser = await prisma.user.update({\n      where: { id: user.userId },\n      data: {\n        contactPerson,\n        email,\n        phone,\n        companyName,\n        postalCode,\n        address,\n      },\n      select: {\n        id: true,\n        contactPerson: true,\n        email: true,\n        phone: true,\n        companyName: true,\n        postalCode: true,\n        address: true,\n        userType: true,\n        createdAt: true,\n      },\n    });\n\n    return NextResponse.json({ success: true, data: updatedUser });\n  } catch (error) {\n    console.error('Error updating user profile:', error);\n    return NextResponse.json({ \n      success: false, \n      message: 'Failed to update profile', \n      error: error instanceof Error ? error.message : 'Unknown error' \n    }, { status: 500 });\n  }\n}\n","size_bytes":1419},"src/app/dashboard/contracted-shipments/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  CheckCircle, \n  MapPin, \n  Calendar, \n  Weight, \n  Truck, \n  DollarSign, \n  Eye, \n  Phone,\n  Mail,\n  Building2,\n  User,\n  Clock,\n  AlertCircle,\n  Filter,\n  Search\n} from 'lucide-react'\n\ninterface ContractedShipment {\n  id: string\n  cargoName: string\n  cargoDescription: string\n  status: 'MATCHED' | 'IN_TRANSIT' | 'DELIVERED'\n  pickupPrefecture: string\n  pickupCity: string\n  deliveryPrefecture: string\n  deliveryCity: string\n  pickupDate: string\n  deliveryDate: string\n  cargoWeight: number\n  requiredVehicleType: string\n  budget: number\n  createdAt: string\n  updatedAt: string\n  carrier?: {\n    companyName: string\n    contactPerson: string\n    phone: string\n    email: string\n  }\n  shipper?: {\n    companyName: string\n    contactPerson: string\n    phone: string\n    email: string\n  }\n}\n\nexport default function ContractedShipmentsPage() {\n  const router = useRouter()\n  const [shipments, setShipments] = useState<ContractedShipment[]>([])\n  const [loading, setLoading] = useState(true)\n  const [filter, setFilter] = useState<'all' | 'MATCHED' | 'IN_TRANSIT' | 'DELIVERED'>('all')\n  const [searchTerm, setSearchTerm] = useState('')\n\n  useEffect(() => {\n    loadContractedShipments()\n  }, [])\n\n  const loadContractedShipments = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/user/my-posts', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      })\n\n      if (!response.ok) throw new Error('Failed to load shipments')\n      \n      const data = await response.json()\n      // æˆç´„æ¸ˆã¿ã®è·ç‰©ã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°\n      const contractedShipments = data.data?.filter((post: any) => \n        post.type === 'shipment' && \n        ['MATCHED', 'IN_TRANSIT', 'DELIVERED'].includes(post.status)\n      ) || []\n      setShipments(contractedShipments)\n    } catch (error) {\n      console.error('Error loading contracted shipments:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getStatusInfo = (status: string) => {\n    switch (status) {\n      case 'MATCHED':\n        return { label: 'æˆç´„æ¸ˆã¿', color: 'bg-green-100 text-green-800', icon: CheckCircle }\n      case 'IN_TRANSIT':\n        return { label: 'è¼¸é€ä¸­', color: 'bg-yellow-100 text-yellow-800', icon: Truck }\n      case 'DELIVERED':\n        return { label: 'å®Œäº†', color: 'bg-gray-100 text-gray-800', icon: CheckCircle }\n      default:\n        return { label: 'ä¸æ˜', color: 'bg-gray-100 text-gray-800', icon: Clock }\n    }\n  }\n\n  const filteredShipments = shipments.filter(shipment => {\n    const matchesFilter = filter === 'all' || shipment.status === filter\n    const matchesSearch = searchTerm === '' || \n      shipment.cargoName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      shipment.cargoDescription.toLowerCase().includes(searchTerm.toLowerCase())\n    return matchesFilter && matchesSearch\n  })\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">æˆç´„ã—ãŸè·ç‰©</h1>\n        <p className=\"text-gray-600\">æˆç´„ãŒå®Œäº†ã—ãŸè·ç‰©ã®ä¸€è¦§ã§ã™</p>\n      </div>\n\n      {/* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¨æ¤œç´¢ */}\n      <div className=\"bg-white rounded-lg shadow-sm border mb-6\">\n        <div className=\"p-4\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"è·ç‰©åã‚„èª¬æ˜ã§æ¤œç´¢...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n            <div className=\"flex items-center space-x-2\">\n              <Filter className=\"h-4 w-4 text-gray-500\" />\n              <select\n                value={filter}\n                onChange={(e) => setFilter(e.target.value as any)}\n                className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"all\">ã™ã¹ã¦</option>\n                <option value=\"MATCHED\">æˆç´„æ¸ˆã¿</option>\n                <option value=\"IN_TRANSIT\">è¼¸é€ä¸­</option>\n                <option value=\"DELIVERED\">å®Œäº†</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* è·ç‰©ä¸€è¦§ */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            æˆç´„ã—ãŸè·ç‰©ä¸€è¦§ ({filteredShipments.length}ä»¶)\n          </h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : filteredShipments.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <CheckCircle className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>æˆç´„ã—ãŸè·ç‰©ã¯ã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {filteredShipments.map((shipment) => {\n              const statusInfo = getStatusInfo(shipment.status)\n              const StatusIcon = statusInfo.icon\n              \n              return (\n                <div key={shipment.id} className=\"p-6 hover:bg-gray-50\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h3 className=\"text-lg font-medium text-gray-900\">\n                          {shipment.cargoName}\n                        </h3>\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full flex items-center space-x-1 ${statusInfo.color}`}>\n                          <StatusIcon className=\"h-3 w-3\" />\n                          <span>{statusInfo.label}</span>\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-gray-500 mb-4\">\n                        {shipment.cargoDescription}\n                      </p>\n                      \n                      {/* è·ç‰©è©³ç´°æƒ…å ± */}\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-4\">\n                        <div className=\"flex items-center\">\n                          <MapPin className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>{shipment.pickupPrefecture} â†’ {shipment.deliveryPrefecture}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Calendar className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>{new Date(shipment.pickupDate).toLocaleDateString()}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Weight className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>{shipment.cargoWeight}kg</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <DollarSign className=\"h-4 w-4 mr-2 text-gray-400\" />\n                          <span>Â¥{shipment.budget.toLocaleString()}</span>\n                        </div>\n                      </div>\n\n                      {/* å–å¼•å…ˆæƒ…å ± */}\n                      {shipment.carrier && (\n                        <div className=\"border-t border-gray-100 pt-4\">\n                          <h4 className=\"font-semibold text-gray-800 mb-2 flex items-center\">\n                            <Truck className=\"h-4 w-4 mr-2\" />\n                            é‹é€æ¥­è€…æƒ…å ±\n                          </h4>\n                          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700\">\n                            <div className=\"flex items-center\">\n                              <Building2 className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{shipment.carrier.companyName}</span>\n                            </div>\n                            <div className=\"flex items-center\">\n                              <User className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{shipment.carrier.contactPerson}</span>\n                            </div>\n                            <div className=\"flex items-center\">\n                              <Phone className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{shipment.carrier.phone}</span>\n                            </div>\n                            <div className=\"flex items-center\">\n                              <Mail className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{shipment.carrier.email}</span>\n                            </div>\n                          </div>\n                        </div>\n                      )}\n\n                      <div className=\"mt-3 text-xs text-gray-400\">\n                        æˆç´„æ—¥: {new Date(shipment.updatedAt).toLocaleString('ja-JP')}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2 ml-4\">\n                      <button\n                        onClick={() => router.push(`/shipments/${shipment.id}`)}\n                        className=\"p-2 text-gray-400 hover:text-blue-600\"\n                        title=\"è©³ç´°ã‚’è¦‹ã‚‹\"\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":10278},"src/app/dashboard/payment/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { CreditCard, Building2, Repeat, CheckCircle, ArrowRight, Shield } from 'lucide-react'\n\nexport default function PaymentPage() {\n  const router = useRouter()\n  const [selectedMethod, setSelectedMethod] = useState<'bank_transfer' | 'card' | 'direct_debit' | null>(null)\n  const [amount, setAmount] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [message, setMessage] = useState('')\n  const [user, setUser] = useState<any>(null)\n\n  useEffect(() => {\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      setUser(JSON.parse(userData))\n    }\n  }, [])\n\n  const paymentMethods = [\n    {\n      id: 'bank_transfer',\n      name: 'éŠ€è¡ŒæŒ¯è¾¼',\n      icon: Building2,\n      description: 'éŠ€è¡Œå£åº§ã¸ã®æŒ¯è¾¼ã§ãŠæ”¯æ‰•ã„',\n      color: 'blue',\n      processingTime: '1-3å–¶æ¥­æ—¥',\n      fee: 'ç„¡æ–™ï¼ˆæŒ¯è¾¼æ‰‹æ•°æ–™ã¯ãŠå®¢æ§˜è² æ‹…ï¼‰'\n    },\n    {\n      id: 'card',\n      name: 'ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ',\n      icon: CreditCard,\n      description: 'Squareæ±ºæ¸ˆã§ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ‰•ã„',\n      color: 'green',\n      processingTime: 'å³æ™‚',\n      fee: '3.25%'\n    },\n    {\n      id: 'direct_debit',\n      name: 'å£åº§æŒ¯æ›¿',\n      icon: Repeat,\n      description: 'ä¼šè²»ãƒšã‚¤ã§è‡ªå‹•å¼•ãè½ã¨ã—',\n      color: 'purple',\n      processingTime: 'å³æ™‚',\n      fee: 'ç„¡æ–™'\n    }\n  ]\n\n  const handlePayment = async () => {\n    if (!selectedMethod || !amount) {\n      setMessage('æ”¯æ‰•ã„æ–¹æ³•ã¨é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')\n      return\n    }\n\n    const parsedAmount = parseFloat(amount)\n    if (isNaN(parsedAmount) || parsedAmount <= 0) {\n      setMessage('æœ‰åŠ¹ãªé‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')\n      return\n    }\n\n    setLoading(true)\n    setMessage('')\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/payments', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          amount: parsedAmount,\n          paymentMethod: selectedMethod\n        })\n      })\n\n      if (!response.ok) {\n        throw new Error('æ±ºæ¸ˆã®é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n\n      const data = await response.json()\n      \n      if (selectedMethod === 'bank_transfer') {\n        setMessage('æŒ¯è¾¼æƒ…å ±ã‚’ä¸‹è¨˜ã«ã¦ã”ç¢ºèªãã ã•ã„ã€‚æŒ¯è¾¼å®Œäº†å¾Œã€å‡¦ç†ã«1-3å–¶æ¥­æ—¥ã‹ã‹ã‚Šã¾ã™ã€‚')\n      } else if (selectedMethod === 'card') {\n        if (data.data.paymentUrl) {\n          window.location.href = data.data.paymentUrl\n        } else {\n          setMessage('Squareæ±ºæ¸ˆãƒšãƒ¼ã‚¸ã¸ã®ç§»å‹•æº–å‚™ä¸­...')\n        }\n      } else if (selectedMethod === 'direct_debit') {\n        if (data.data.paymentUrl) {\n          window.location.href = data.data.paymentUrl\n        } else {\n          setMessage('ä¼šè²»ãƒšã‚¤ãƒšãƒ¼ã‚¸ã¸ã®ç§»å‹•æº–å‚™ä¸­...')\n        }\n      }\n    } catch (error) {\n      console.error('Payment error:', error)\n      setMessage('æ±ºæ¸ˆã®é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸã€‚å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"max-w-5xl mx-auto p-6\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">ãŠæ”¯æ‰•ã„</h1>\n          <p className=\"text-gray-600\">ã”åˆ©ç”¨ã„ãŸã ã‘ã‚‹æ±ºæ¸ˆæ–¹æ³•ã‚’ãŠé¸ã³ãã ã•ã„</p>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* é‡‘é¡å…¥åŠ› */}\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">ãŠæ”¯æ‰•ã„é‡‘é¡</h2>\n              <div className=\"relative max-w-md\">\n                <input\n                  type=\"number\"\n                  value={amount}\n                  onChange={(e) => setAmount(e.target.value)}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-lg\"\n                  placeholder=\"10000\"\n                  min=\"1\"\n                  step=\"1\"\n                />\n                <span className=\"absolute right-4 top-3.5 text-gray-500 text-lg\">å††</span>\n              </div>\n            </div>\n\n            {/* æ”¯æ‰•ã„æ–¹æ³•é¸æŠ */}\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\n              <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">ãŠæ”¯æ‰•ã„æ–¹æ³•ã‚’é¸æŠ</h2>\n              <div className=\"space-y-4\">\n                {paymentMethods.map((method) => {\n                  const Icon = method.icon\n                  return (\n                    <div\n                      key={method.id}\n                      onClick={() => setSelectedMethod(method.id as any)}\n                      className={`relative border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ${\n                        selectedMethod === method.id\n                          ? `border-${method.color}-500 bg-${method.color}-50`\n                          : 'border-gray-200 hover:border-gray-300'\n                      }`}\n                    >\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex items-start space-x-4\">\n                          <div className={`p-3 rounded-lg bg-${method.color}-100`}>\n                            <Icon className={`w-6 h-6 text-${method.color}-600`} />\n                          </div>\n                          <div className=\"flex-1\">\n                            <h3 className=\"text-lg font-semibold text-gray-900\">{method.name}</h3>\n                            <p className=\"text-sm text-gray-600 mt-1\">{method.description}</p>\n                            <div className=\"flex items-center gap-4 mt-2\">\n                              <span className=\"text-xs text-gray-500\">å‡¦ç†æ™‚é–“: {method.processingTime}</span>\n                              <span className=\"text-xs text-gray-500\">æ‰‹æ•°æ–™: {method.fee}</span>\n                            </div>\n                          </div>\n                        </div>\n                        {selectedMethod === method.id && (\n                          <CheckCircle className={`w-6 h-6 text-${method.color}-600`} />\n                        )}\n                      </div>\n                    </div>\n                  )\n                })}\n              </div>\n            </div>\n\n            {/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º */}\n            {message && (\n              <div className={`p-4 rounded-lg ${\n                message.includes('å¤±æ•—') ? 'bg-red-50 border border-red-200 text-red-800' : 'bg-blue-50 border border-blue-200 text-blue-800'\n              }`}>\n                <p>{message}</p>\n              </div>\n            )}\n\n            {/* æ±ºæ¸ˆè©³ç´°æƒ…å ± */}\n            {selectedMethod === 'bank_transfer' && (\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6\">\n                <h3 className=\"text-lg font-semibold text-blue-900 mb-4 flex items-center\">\n                  <Building2 className=\"w-5 h-5 mr-2\" />\n                  æŒ¯è¾¼å…ˆæƒ…å ±\n                </h3>\n                <div className=\"bg-white rounded-lg p-4 space-y-3\">\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <span className=\"font-medium text-gray-700\">é‡‘èæ©Ÿé–¢åï¼š</span>\n                    <span className=\"col-span-2 text-gray-900\">ç›¸æ„›ä¿¡ç”¨çµ„åˆ</span>\n                  </div>\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <span className=\"font-medium text-gray-700\">æ”¯åº—åï¼š</span>\n                    <span className=\"col-span-2 text-gray-900\">æœ¬åº—å–¶æ¥­éƒ¨</span>\n                  </div>\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <span className=\"font-medium text-gray-700\">å£åº§ç¨®åˆ¥ï¼š</span>\n                    <span className=\"col-span-2 text-gray-900\">æ™®é€š</span>\n                  </div>\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <span className=\"font-medium text-gray-700\">å£åº§ç•ªå·ï¼š</span>\n                    <span className=\"col-span-2 text-gray-900 text-xl font-bold\">0170074</span>\n                  </div>\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    <span className=\"font-medium text-gray-700\">å£åº§åç¾©ï¼š</span>\n                    <span className=\"col-span-2 text-gray-900\">ãƒ‰ï¼‰ã‚·ãƒ³ ã‚¸ãƒ£ãƒ‘ãƒ³</span>\n                  </div>\n                </div>\n                <div className=\"mt-4 p-4 bg-blue-100 rounded-md\">\n                  <p className=\"text-sm text-blue-900\">\n                    âš ï¸ æŒ¯è¾¼æ‰‹æ•°æ–™ã¯ãŠå®¢æ§˜ã®ã”è² æ‹…ã¨ãªã‚Šã¾ã™<br />\n                    âš ï¸ ãŠæŒ¯è¾¼ã¿åç¾©ã¯å¿…ãšç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ä¼šç¤¾åã§ãŠé¡˜ã„ã—ã¾ã™<br />\n                    âš ï¸ æŒ¯è¾¼å®Œäº†å¾Œã€å‡¦ç†ã«1-3å–¶æ¥­æ—¥ã‹ã‹ã‚Šã¾ã™\n                  </p>\n                </div>\n              </div>\n            )}\n\n            {selectedMethod === 'card' && (\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\n                <h3 className=\"text-lg font-semibold text-green-900 mb-4 flex items-center\">\n                  <CreditCard className=\"w-5 h-5 mr-2\" />\n                  Squareæ±ºæ¸ˆã«ã¤ã„ã¦\n                </h3>\n                <div className=\"space-y-3 text-green-800\">\n                  <p>âœ“ å„ç¨®ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ãŒã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™</p>\n                  <p className=\"ml-4 text-sm\">ï¼ˆVISAã€MasterCardã€JCBã€American Expressã€Diners Clubï¼‰</p>\n                  <p>âœ“ å®‰å…¨ãªSquareæ±ºæ¸ˆã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™</p>\n                  <p>âœ“ æ±ºæ¸ˆå®Œäº†å¾Œã€å³åº§ã«é ˜åæ›¸ãŒç™ºè¡Œã•ã‚Œã¾ã™</p>\n                  <p>âœ“ æ‰‹æ•°æ–™: æ±ºæ¸ˆé‡‘é¡ã®3.25%</p>\n                </div>\n              </div>\n            )}\n\n            {selectedMethod === 'direct_debit' && (\n              <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-6\">\n                <h3 className=\"text-lg font-semibold text-purple-900 mb-4 flex items-center\">\n                  <Repeat className=\"w-5 h-5 mr-2\" />\n                  ä¼šè²»ãƒšã‚¤ã«ã¤ã„ã¦\n                </h3>\n                <div className=\"space-y-3 text-purple-800\">\n                  <p>âœ“ æ¯æœˆè‡ªå‹•ã§å£åº§ã‹ã‚‰å¼•ãè½ã¨ã•ã‚Œã¾ã™</p>\n                  <p>âœ“ ä¼šè²»ãƒšã‚¤ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨ã—ãŸå®‰å…¨ãªå£åº§æŒ¯æ›¿ã§ã™</p>\n                  <p>âœ“ åˆå›ã®ã¿å£åº§æƒ…å ±ã®ç™»éŒ²ãŒå¿…è¦ã§ã™</p>\n                  <p>âœ“ æ‰‹æ•°æ–™ç„¡æ–™ã§ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™</p>\n                </div>\n              </div>\n            )}\n\n            {/* æ”¯æ‰•ã„ãƒœã‚¿ãƒ³ */}\n            <div className=\"flex gap-4\">\n              <button\n                onClick={() => router.push('/dashboard')}\n                className=\"flex-1 px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors font-medium\"\n              >\n                æˆ»ã‚‹\n              </button>\n              <button\n                onClick={handlePayment}\n                disabled={!selectedMethod || !amount || loading}\n                className=\"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium flex items-center justify-center gap-2\"\n              >\n                {loading ? (\n                  'å‡¦ç†ä¸­...'\n                ) : selectedMethod === 'bank_transfer' ? (\n                  <>æŒ¯è¾¼æƒ…å ±ã‚’ç¢ºèª</>\n                ) : (\n                  <>\n                    ãŠæ”¯æ‰•ã„ã¸é€²ã‚€\n                    <ArrowRight className=\"w-4 h-4\" />\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n\n          {/* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */}\n          <div className=\"space-y-6\">\n            {/* ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æƒ…å ± */}\n            <div className=\"bg-green-50 border border-green-200 rounded-lg p-6\">\n              <div className=\"flex items-start\">\n                <Shield className=\"h-6 w-6 text-green-600 mr-3 flex-shrink-0\" />\n                <div>\n                  <h3 className=\"text-sm font-semibold text-green-900 mb-2\">ã‚»ã‚­ãƒ¥ã‚¢ãªæ±ºæ¸ˆ</h3>\n                  <p className=\"text-sm text-green-700\">\n                    ã™ã¹ã¦ã®æ±ºæ¸ˆã¯SSL/TLSæš—å·åŒ–ã«ã‚ˆã‚Šä¿è­·ã•ã‚Œã¦ã„ã¾ã™ã€‚ãŠå®¢æ§˜ã®æƒ…å ±ã¯å®‰å…¨ã«å‡¦ç†ã•ã‚Œã¾ã™ã€‚\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* ãŠå•ã„åˆã‚ã› */}\n            <div className=\"bg-white rounded-lg shadow-md p-6\">\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-3\">ãŠæ”¯æ‰•ã„ã«ã¤ã„ã¦</h3>\n              <p className=\"text-sm text-gray-600 mb-4\">\n                æ±ºæ¸ˆã«é–¢ã™ã‚‹ã”è³ªå•ã‚„ãŠå›°ã‚Šã®ã“ã¨ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ãŠæ°—è»½ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚\n              </p>\n              <button\n                onClick={() => router.push('/contact')}\n                className=\"w-full px-4 py-2 border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors text-sm font-medium\"\n              >\n                ãŠå•ã„åˆã‚ã›\n              </button>\n            </div>\n\n            {/* åˆ©ç”¨è¦ç´„ */}\n            <div className=\"bg-gray-50 rounded-lg p-4\">\n              <p className=\"text-xs text-gray-600\">\n                ãŠæ”¯æ‰•ã„ã‚’è¡Œã†ã“ã¨ã§ã€\n                <a href=\"/terms\" className=\"text-blue-600 hover:underline\">åˆ©ç”¨è¦ç´„</a>\n                ãŠã‚ˆã³\n                <a href=\"/privacy\" className=\"text-blue-600 hover:underline\">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>\n                ã«åŒæ„ã—ãŸã‚‚ã®ã¨ã¿ãªã•ã‚Œã¾ã™ã€‚\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":14223},"src/app/shipments/[id]/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect, Suspense } from 'react'\nimport { useRouter, useParams, useSearchParams } from 'next/navigation'\nimport Link from 'next/link'\nimport Navbar from '@/components/Navbar'\nimport { \n  Package, MapPin, Calendar, Truck, DollarSign, User, \n  Phone, Mail, Edit, Trash, ArrowLeft, Send \n} from 'lucide-react'\n\nfunction ShipmentDetailContent() {\n  const router = useRouter()\n  const params = useParams()\n  const searchParams = useSearchParams()\n  const shipmentId = params.id as string\n  const action = searchParams.get('action')\n\n  const [user, setUser] = useState<any>(null)\n  const [shipment, setShipment] = useState<any>(null)\n  const [offers, setOffers] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [showOfferForm, setShowOfferForm] = useState(action === 'offer')\n  const [offerData, setOfferData] = useState({\n    proposedPrice: '',\n    proposedDeliveryDate: '',\n    message: '',\n  })\n  const [submitting, setSubmitting] = useState(false)\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    const userData = localStorage.getItem('user')\n    \n    if (!token || !userData) {\n      router.push('/login')\n      return\n    }\n\n    setUser(JSON.parse(userData))\n    fetchShipmentDetail(token)\n  }, [shipmentId, router])\n\n  const fetchShipmentDetail = async (token: string) => {\n    try {\n      const [shipmentRes, offersRes] = await Promise.all([\n        fetch(`/api/shipments/${shipmentId}`, {\n          headers: { 'Authorization': `Bearer ${token}` },\n        }),\n        fetch(`/api/offers?shipmentId=${shipmentId}`, {\n          headers: { 'Authorization': `Bearer ${token}` },\n        }),\n      ])\n\n      if (shipmentRes.ok) {\n        const shipmentData = await shipmentRes.json()\n        setShipment(shipmentData.data)\n      }\n\n      if (offersRes.ok) {\n        const offersData = await offersRes.json()\n        setOffers(offersData.data)\n      }\n    } catch (error) {\n      console.error('Failed to fetch shipment:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSubmitOffer = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setSubmitting(true)\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/offers', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          shipmentId,\n          proposedPrice: parseFloat(offerData.proposedPrice),\n          proposedDeliveryDate: offerData.proposedDeliveryDate,\n          message: offerData.message,\n        }),\n      })\n\n      if (response.ok) {\n        setShowOfferForm(false)\n        setOfferData({ proposedPrice: '', proposedDeliveryDate: '', message: '' })\n        if (token) fetchShipmentDetail(token)\n      }\n    } catch (error) {\n      console.error('Failed to submit offer:', error)\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const handleDeleteShipment = async () => {\n    if (!confirm('æœ¬å½“ã«ã“ã®æ¡ˆä»¶ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch(`/api/shipments/${shipmentId}`, {\n        method: 'DELETE',\n        headers: { 'Authorization': `Bearer ${token}` },\n      })\n\n      if (response.ok) {\n        router.push('/shipments')\n      }\n    } catch (error) {\n      console.error('Failed to delete shipment:', error)\n    }\n  }\n\n  const getStatusBadge = (status: string) => {\n    const badges: Record<string, { bg: string; text: string; label: string }> = {\n      OPEN: { bg: 'bg-green-100', text: 'text-green-800', label: 'å‹Ÿé›†ä¸­' },\n      MATCHED: { bg: 'bg-blue-100', text: 'text-blue-800', label: 'ãƒãƒƒãƒãƒ³ã‚°æ¸ˆ' },\n      IN_TRANSIT: { bg: 'bg-purple-100', text: 'text-purple-800', label: 'è¼¸é€ä¸­' },\n      DELIVERED: { bg: 'bg-gray-100', text: 'text-gray-800', label: 'é…é”å®Œäº†' },\n      CANCELLED: { bg: 'bg-red-100', text: 'text-red-800', label: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' },\n    }\n    const badge = badges[status] || badges.OPEN\n    return (\n      <span className={`px-4 py-2 rounded-full text-sm font-semibold ${badge.bg} ${badge.text}`}>\n        {badge.label}\n      </span>\n    )\n  }\n\n  const getVehicleTypeLabel = (type: string) => {\n    const types: Record<string, string> = {\n      LIGHT_TRUCK: 'è»½ãƒˆãƒ©ãƒƒã‚¯',\n      SMALL_TRUCK: 'å°å‹ãƒˆãƒ©ãƒƒã‚¯',\n      MEDIUM_TRUCK: 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯',\n      LARGE_TRUCK: 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯',\n      TRAILER: 'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼',\n      REFRIGERATED: 'å†·å‡ãƒ»å†·è”µè»Š',\n      FLATBED: 'å¹³ãƒœãƒ‡ã‚£',\n      WING: 'ã‚¦ã‚£ãƒ³ã‚°è»Š',\n    }\n    return types[type] || type\n  }\n\n  if (loading || !user || !shipment) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white\">\n        <Navbar />\n        <div className=\"flex items-center justify-center h-screen\">\n          <div className=\"text-center\">\n            <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent\"></div>\n            <p className=\"text-gray-600 mt-4\">èª­ã¿è¾¼ã¿ä¸­...</p>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  const isOwner = user.id === shipment.shipperId\n  const canOffer = user.userType === 'CARRIER' && shipment.status === 'OPEN'\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white\">\n      <Navbar />\n      \n      <main className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12\">\n        {/* æˆ»ã‚‹ãƒœã‚¿ãƒ³ */}\n        <button\n          onClick={() => router.back()}\n          className=\"flex items-center space-x-2 text-gray-600 hover:text-gray-900 mb-6 transition fade-in-up\"\n        >\n          <ArrowLeft className=\"h-5 w-5\" />\n          <span>æˆ»ã‚‹</span>\n        </button>\n\n        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n        <div className=\"card mb-8 fade-in-up\" style={{animationDelay: '0.1s'}}>\n          <div className=\"flex flex-col lg:flex-row justify-between items-start gap-4 mb-6\">\n            <div className=\"flex-1\">\n              <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-3\">\n                {shipment.title}\n              </h1>\n              {getStatusBadge(shipment.status)}\n            </div>\n            \n            {isOwner && (\n              <div className=\"flex gap-3\">\n                <button\n                  onClick={() => router.push(`/shipments/${shipmentId}/edit`)}\n                  className=\"btn-secondary flex items-center space-x-2 py-2 px-4\"\n                >\n                  <Edit className=\"h-4 w-4\" />\n                  <span>ç·¨é›†</span>\n                </button>\n                <button\n                  onClick={handleDeleteShipment}\n                  className=\"bg-red-100 text-red-700 hover:bg-red-200 px-4 py-2 rounded-xl font-semibold transition flex items-center space-x-2\"\n                >\n                  <Trash className=\"h-4 w-4\" />\n                  <span>å‰Šé™¤</span>\n                </button>\n              </div>\n            )}\n          </div>\n\n          <p className=\"text-gray-700 leading-relaxed\">\n            {shipment.description}\n          </p>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* å·¦å´: è©³ç´°æƒ…å ± */}\n          <div className=\"lg:col-span-2 space-y-6\">\n            {/* ãƒ«ãƒ¼ãƒˆæƒ…å ± */}\n            <div className=\"card slide-in-left\">\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">é…é€ãƒ«ãƒ¼ãƒˆ</h2>\n              \n              <div className=\"space-y-6\">\n                <div className=\"bg-green-50 p-6 rounded-xl\">\n                  <div className=\"flex items-center space-x-3 mb-4\">\n                    <div className=\"bg-green-500 p-3 rounded-full\">\n                      <MapPin className=\"h-6 w-6 text-white\" />\n                    </div>\n                    <h3 className=\"text-lg font-bold text-gray-900\">é›†è·åœ°</h3>\n                  </div>\n                  <p className=\"text-xl font-semibold text-gray-900 mb-2\">\n                    {shipment.pickupPrefecture} {shipment.pickupLocation}\n                  </p>\n                  <div className=\"flex items-center space-x-2 text-gray-600\">\n                    <Calendar className=\"h-4 w-4\" />\n                    <span>{new Date(shipment.pickupDateTime).toLocaleString('ja-JP')}</span>\n                  </div>\n                </div>\n\n                <div className=\"flex justify-center\">\n                  <div className=\"h-12 w-0.5 bg-gradient-to-b from-green-500 to-purple-500\"></div>\n                </div>\n\n                <div className=\"bg-purple-50 p-6 rounded-xl\">\n                  <div className=\"flex items-center space-x-3 mb-4\">\n                    <div className=\"bg-purple-500 p-3 rounded-full\">\n                      <MapPin className=\"h-6 w-6 text-white\" />\n                    </div>\n                    <h3 className=\"text-lg font-bold text-gray-900\">é…é€å…ˆ</h3>\n                  </div>\n                  <p className=\"text-xl font-semibold text-gray-900 mb-2\">\n                    {shipment.deliveryPrefecture} {shipment.deliveryLocation}\n                  </p>\n                  <div className=\"flex items-center space-x-2 text-gray-600\">\n                    <Calendar className=\"h-4 w-4\" />\n                    <span>{new Date(shipment.deliveryDateTime).toLocaleString('ja-JP')}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* è·ç‰©æƒ…å ± */}\n            <div className=\"card slide-in-left\" style={{animationDelay: '0.2s'}}>\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">è·ç‰©æƒ…å ±</h2>\n              \n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n                <div>\n                  <p className=\"text-sm text-gray-600 mb-2\">è·ç‰©ã®ç¨®é¡</p>\n                  <p className=\"text-lg font-semibold text-gray-900\">{shipment.cargoType}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600 mb-2\">é‡é‡</p>\n                  <p className=\"text-lg font-semibold text-gray-900\">{shipment.cargoWeight} kg</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600 mb-2\">ã‚µã‚¤ã‚º</p>\n                  <p className=\"text-lg font-semibold text-gray-900\">{shipment.cargoSize}</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-gray-600 mb-2\">å¿…è¦ãªè»Šä¸¡</p>\n                  <div className=\"flex items-center space-x-2\">\n                    <Truck className=\"h-5 w-5 text-blue-600\" />\n                    <p className=\"text-lg font-semibold text-gray-900\">\n                      {getVehicleTypeLabel(shipment.requiredVehicleType)}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {shipment.notes && (\n                <div className=\"mt-6 pt-6 border-t border-gray-200\">\n                  <p className=\"text-sm text-gray-600 mb-2\">å‚™è€ƒãƒ»ç‰¹è¨˜äº‹é …</p>\n                  <p className=\"text-gray-900\">{shipment.notes}</p>\n                </div>\n              )}\n            </div>\n\n            {/* ã‚ªãƒ•ã‚¡ãƒ¼ä¸€è¦§ (è·ä¸»ã®å ´åˆ) */}\n            {isOwner && offers.length > 0 && (\n              <div className=\"card slide-in-left\" style={{animationDelay: '0.3s'}}>\n                <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">\n                  å—ã‘å–ã£ãŸã‚ªãƒ•ã‚¡ãƒ¼ ({offers.length}ä»¶)\n                </h2>\n                \n                <div className=\"space-y-4\">\n                  {offers.map((offer) => (\n                    <div key={offer.id} className=\"bg-gray-50 p-4 rounded-xl\">\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <div>\n                          <p className=\"font-bold text-gray-900\">{offer.carrier.companyName}</p>\n                          <p className=\"text-sm text-gray-600\">{offer.carrier.contactPerson}</p>\n                        </div>\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold ${\n                          offer.status === 'ACCEPTED' ? 'bg-green-100 text-green-800' :\n                          offer.status === 'REJECTED' ? 'bg-red-100 text-red-800' :\n                          'bg-yellow-100 text-yellow-800'\n                        }`}>\n                          {offer.status === 'ACCEPTED' ? 'æ‰¿èªæ¸ˆã¿' :\n                           offer.status === 'REJECTED' ? 'æ‹’å¦' : 'ä¿ç•™ä¸­'}\n                        </span>\n                      </div>\n                      \n                      <div className=\"grid grid-cols-2 gap-4 mb-3\">\n                        <div>\n                          <p className=\"text-xs text-gray-600\">ã‚ªãƒ•ã‚¡ãƒ¼é‡‘é¡</p>\n                          <p className=\"text-lg font-bold text-blue-600\">\n                            Â¥{offer.proposedPrice.toLocaleString()}\n                          </p>\n                        </div>\n                        <div>\n                          <p className=\"text-xs text-gray-600\">é…é€äºˆå®šæ—¥</p>\n                          <p className=\"text-sm font-semibold text-gray-900\">\n                            {new Date(offer.proposedDeliveryDate).toLocaleDateString('ja-JP')}\n                          </p>\n                        </div>\n                      </div>\n                      \n                      {offer.message && (\n                        <p className=\"text-sm text-gray-700 mb-3\">ã€Œ{offer.message}ã€</p>\n                      )}\n                      \n                      {offer.status === 'PENDING' && (\n                        <Link href=\"/offers\" className=\"text-blue-600 hover:text-blue-700 text-sm font-semibold\">\n                          ã‚ªãƒ•ã‚¡ãƒ¼ç®¡ç†ç”»é¢ã§å¯¾å¿œ â†’\n                        </Link>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* å³å´: ã‚µã‚¤ãƒ‰ãƒãƒ¼ */}\n          <div className=\"space-y-6\">\n            {/* æ–™é‡‘ */}\n            <div className=\"card slide-in-right\">\n              <div className=\"text-center\">\n                <p className=\"text-gray-600 mb-2\">å¸Œæœ›é‹è³ƒ</p>\n                <div className=\"flex items-center justify-center space-x-2\">\n                  <DollarSign className=\"h-8 w-8 text-blue-600\" />\n                  <p className=\"text-4xl font-bold text-blue-600\">\n                    Â¥{shipment.budget?.toLocaleString() || 'æœªè¨­å®š'}\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            {/* è·ä¸»æƒ…å ± (é‹é€ä¼šç¤¾ã®å ´åˆ) */}\n            {!isOwner && shipment.shipper && (\n              <div className=\"card slide-in-right\" style={{animationDelay: '0.1s'}}>\n                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">è·ä¸»æƒ…å ±</h3>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center space-x-3\">\n                    <User className=\"h-5 w-5 text-gray-500\" />\n                    <div>\n                      <p className=\"text-sm text-gray-600\">ä¼šç¤¾å</p>\n                      <p className=\"font-semibold text-gray-900\">{shipment.shipper.companyName}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-3\">\n                    <User className=\"h-5 w-5 text-gray-500\" />\n                    <div>\n                      <p className=\"text-sm text-gray-600\">æ‹…å½“è€…</p>\n                      <p className=\"font-semibold text-gray-900\">{shipment.shipper.contactPerson}</p>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-3\">\n                    <Phone className=\"h-5 w-5 text-gray-500\" />\n                    <div>\n                      <p className=\"text-sm text-gray-600\">é›»è©±ç•ªå·</p>\n                      <p className=\"font-semibold text-gray-900\">{shipment.shipper.phone}</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* ã‚ªãƒ•ã‚¡ãƒ¼ãƒœã‚¿ãƒ³ (é‹é€ä¼šç¤¾ã®å ´åˆ) */}\n            {canOffer && !showOfferForm && (\n              <button\n                onClick={() => setShowOfferForm(true)}\n                className=\"w-full btn-primary py-4 text-lg flex items-center justify-center space-x-2 slide-in-right\"\n                style={{animationDelay: '0.2s'}}\n              >\n                <Send className=\"h-5 w-5\" />\n                <span>ã‚ªãƒ•ã‚¡ãƒ¼ã‚’é€ä¿¡</span>\n              </button>\n            )}\n\n            {/* ã‚ªãƒ•ã‚¡ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ  */}\n            {showOfferForm && (\n              <div className=\"card slide-in-right\" style={{animationDelay: '0.2s'}}>\n                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">ã‚ªãƒ•ã‚¡ãƒ¼ã‚’é€ä¿¡</h3>\n                <form onSubmit={handleSubmitOffer} className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      ææ¡ˆé‡‘é¡ (å††) *\n                    </label>\n                    <input\n                      type=\"number\"\n                      required\n                      min=\"0\"\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                      placeholder={shipment.budget?.toString() || '0'}\n                      value={offerData.proposedPrice}\n                      onChange={(e) => setOfferData({ ...offerData, proposedPrice: e.target.value })}\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      é…é€äºˆå®šæ—¥ *\n                    </label>\n                    <input\n                      type=\"date\"\n                      required\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                      value={offerData.proposedDeliveryDate}\n                      onChange={(e) => setOfferData({ ...offerData, proposedDeliveryDate: e.target.value })}\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n                    </label>\n                    <textarea\n                      rows={3}\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                      placeholder=\"ã‚¢ãƒ”ãƒ¼ãƒ«ãƒã‚¤ãƒ³ãƒˆã‚„ç‰¹è¨˜äº‹é …ãŒã‚ã‚Œã°è¨˜è¼‰ã—ã¦ãã ã•ã„\"\n                      value={offerData.message}\n                      onChange={(e) => setOfferData({ ...offerData, message: e.target.value })}\n                    />\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowOfferForm(false)}\n                      className=\"btn-secondary py-3\"\n                    >\n                      ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n                    </button>\n                    <button\n                      type=\"submit\"\n                      disabled={submitting}\n                      className=\"btn-primary py-3 disabled:opacity-50\"\n                    >\n                      {submitting ? 'é€ä¿¡ä¸­...' : 'é€ä¿¡'}\n                    </button>\n                  </div>\n                </form>\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n\nexport default function ShipmentDetailPage() {\n  return (\n    <Suspense fallback={\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-gray-600 text-lg\">èª­ã¿è¾¼ã¿ä¸­...</div>\n      </div>\n    }>\n      <ShipmentDetailContent />\n    </Suspense>\n  )\n}\n","size_bytes":20168},"src/app/dashboard/settings/account-info/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Building2, \n  CreditCard, \n  Plus, \n  Edit, \n  Trash2, \n  Save, \n  X, \n  Shield,\n  CheckCircle,\n  AlertCircle,\n  Eye,\n  EyeOff\n} from 'lucide-react'\n\ninterface AccountInfo {\n  id: string\n  accountType: 'bank' | 'credit_card' | 'digital_wallet'\n  accountName: string\n  accountNumber: string\n  bankName?: string\n  branchName?: string\n  accountHolderName: string\n  isDefault: boolean\n  isVerified: boolean\n  addedDate: string\n  lastUsed?: string\n}\n\nexport default function AccountInfoPage() {\n  const [accounts, setAccounts] = useState<AccountInfo[]>([])\n  const [editingAccount, setEditingAccount] = useState<AccountInfo | null>(null)\n  const [showAddModal, setShowAddModal] = useState(false)\n  const [showAccountNumber, setShowAccountNumber] = useState<{ [key: string]: boolean }>({})\n  const [formData, setFormData] = useState({\n    accountType: 'bank' as 'bank' | 'credit_card' | 'digital_wallet',\n    accountName: '',\n    accountNumber: '',\n    bankName: '',\n    branchName: '',\n    accountHolderName: '',\n    isDefault: false\n  })\n\n  useEffect(() => {\n    loadAccounts()\n  }, [])\n\n  const loadAccounts = async () => {\n    // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿\n    const sampleAccounts: AccountInfo[] = [\n      {\n        id: '1',\n        accountType: 'bank',\n        accountName: 'ãƒ¡ã‚¤ãƒ³å£åº§',\n        accountNumber: '1234567',\n        bankName: 'ä¸‰è±UFJéŠ€è¡Œ',\n        branchName: 'å“å·æ”¯åº—',\n        accountHolderName: 'æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«',\n        isDefault: true,\n        isVerified: true,\n        addedDate: '2024-01-01',\n        lastUsed: '2024-01-15'\n      },\n      {\n        id: '2',\n        accountType: 'credit_card',\n        accountName: 'æ³•äººã‚«ãƒ¼ãƒ‰',\n        accountNumber: '****-****-****-1234',\n        accountHolderName: 'æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«',\n        isDefault: false,\n        isVerified: true,\n        addedDate: '2024-01-05',\n        lastUsed: '2024-01-14'\n      },\n      {\n        id: '3',\n        accountType: 'digital_wallet',\n        accountName: 'PayPay',\n        accountNumber: 'paypay@example.com',\n        accountHolderName: 'æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«',\n        isDefault: false,\n        isVerified: false,\n        addedDate: '2024-01-10'\n      }\n    ]\n\n    setAccounts(sampleAccounts)\n  }\n\n  const handleAddAccount = () => {\n    setFormData({\n      accountType: 'bank',\n      accountName: '',\n      accountNumber: '',\n      bankName: '',\n      branchName: '',\n      accountHolderName: '',\n      isDefault: false\n    })\n    setEditingAccount(null)\n    setShowAddModal(true)\n  }\n\n  const handleEditAccount = (account: AccountInfo) => {\n    setFormData({\n      accountType: account.accountType,\n      accountName: account.accountName,\n      accountNumber: account.accountNumber,\n      bankName: account.bankName || '',\n      branchName: account.branchName || '',\n      accountHolderName: account.accountHolderName,\n      isDefault: account.isDefault\n    })\n    setEditingAccount(account)\n    setShowAddModal(true)\n  }\n\n  const handleSaveAccount = () => {\n    if (editingAccount) {\n      // ç·¨é›†\n      setAccounts(prev => prev.map(account => \n        account.id === editingAccount.id \n          ? { ...account, ...formData, isVerified: account.isVerified, addedDate: account.addedDate, lastUsed: account.lastUsed }\n          : account\n      ))\n    } else {\n      // æ–°è¦è¿½åŠ \n      const newAccount: AccountInfo = {\n        id: Date.now().toString(),\n        ...formData,\n        isVerified: false,\n        addedDate: new Date().toISOString().split('T')[0]\n      }\n      setAccounts(prev => [...prev, newAccount])\n    }\n    setShowAddModal(false)\n    setEditingAccount(null)\n  }\n\n  const handleDeleteAccount = (accountId: string) => {\n    if (confirm('ã“ã®å£åº§æƒ…å ±ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {\n      setAccounts(prev => prev.filter(account => account.id !== accountId))\n    }\n  }\n\n  const handleSetDefault = (accountId: string) => {\n    setAccounts(prev => prev.map(account => ({\n      ...account,\n      isDefault: account.id === accountId\n    })))\n  }\n\n  const toggleAccountNumberVisibility = (accountId: string) => {\n    setShowAccountNumber(prev => ({\n      ...prev,\n      [accountId]: !prev[accountId]\n    }))\n  }\n\n  const getAccountTypeIcon = (type: string) => {\n    switch (type) {\n      case 'bank': return <Building2 className=\"h-5 w-5\" />\n      case 'credit_card': return <CreditCard className=\"h-5 w-5\" />\n      case 'digital_wallet': return <Shield className=\"h-5 w-5\" />\n      default: return <Building2 className=\"h-5 w-5\" />\n    }\n  }\n\n  const getAccountTypeText = (type: string) => {\n    switch (type) {\n      case 'bank': return 'éŠ€è¡Œå£åº§'\n      case 'credit_card': return 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰'\n      case 'digital_wallet': return 'é›»å­ãƒãƒãƒ¼'\n      default: return 'ä¸æ˜'\n    }\n  }\n\n  const maskAccountNumber = (accountNumber: string, type: string) => {\n    if (type === 'credit_card') {\n      return accountNumber\n    }\n    if (type === 'digital_wallet') {\n      return accountNumber\n    }\n    return '****' + accountNumber.slice(-4)\n  }\n\n  const banks = [\n    'ä¸‰è±UFJéŠ€è¡Œ', 'ä¸‰äº•ä½å‹éŠ€è¡Œ', 'ã¿ãšã»éŠ€è¡Œ', 'ã‚ŠããªéŠ€è¡Œ', 'æ¥½å¤©éŠ€è¡Œ', 'ä½ä¿¡SBIãƒãƒƒãƒˆéŠ€è¡Œ', 'ãã®ä»–'\n  ]\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">å£åº§æƒ…å ±</h1>\n            <p className=\"text-gray-600\">æ”¯æ‰•ã„ç”¨ã®å£åº§æƒ…å ±ã‚’ç®¡ç†ã§ãã¾ã™</p>\n          </div>\n          <button\n            onClick={handleAddAccount}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            <span>å£åº§ã‚’è¿½åŠ </span>\n          </button>\n        </div>\n      </div>\n\n      {/* å£åº§ä¸€è¦§ */}\n      <div className=\"space-y-6\">\n        {accounts.map((account) => (\n          <div key={account.id} className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <div className=\"flex justify-between items-center\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"text-blue-600\">\n                    {getAccountTypeIcon(account.accountType)}\n                  </div>\n                  <div>\n                    <h2 className=\"text-lg font-semibold text-gray-900\">{account.accountName}</h2>\n                    <p className=\"text-sm text-gray-600\">{getAccountTypeText(account.accountType)}</p>\n                  </div>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  {account.isDefault && (\n                    <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800\">\n                      ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ\n                    </span>\n                  )}\n                  {account.isVerified ? (\n                    <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 flex items-center space-x-1\">\n                      <CheckCircle className=\"h-3 w-3\" />\n                      <span>èªè¨¼æ¸ˆã¿</span>\n                    </span>\n                  ) : (\n                    <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 text-yellow-800 flex items-center space-x-1\">\n                      <AlertCircle className=\"h-3 w-3\" />\n                      <span>æœªèªè¨¼</span>\n                    </span>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-700 mb-2\">å£åº§æƒ…å ±</h3>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center justify-between\">\n                      <span className=\"text-sm text-gray-600\">å£åº§ç•ªå·:</span>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-sm text-gray-900 font-mono\">\n                          {showAccountNumber[account.id] ? account.accountNumber : maskAccountNumber(account.accountNumber, account.accountType)}\n                        </span>\n                        <button\n                          onClick={() => toggleAccountNumberVisibility(account.id)}\n                          className=\"text-gray-400 hover:text-gray-600\"\n                        >\n                          {showAccountNumber[account.id] ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                        </button>\n                      </div>\n                    </div>\n                    {account.bankName && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-gray-600\">éŠ€è¡Œå:</span>\n                        <span className=\"text-sm text-gray-900\">{account.bankName}</span>\n                      </div>\n                    )}\n                    {account.branchName && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-gray-600\">æ”¯åº—å:</span>\n                        <span className=\"text-sm text-gray-900\">{account.branchName}</span>\n                      </div>\n                    )}\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-sm text-gray-600\">å£åº§åç¾©:</span>\n                      <span className=\"text-sm text-gray-900\">{account.accountHolderName}</span>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"text-sm font-medium text-gray-700 mb-2\">åˆ©ç”¨çŠ¶æ³</h3>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-sm text-gray-600\">è¿½åŠ æ—¥:</span>\n                      <span className=\"text-sm text-gray-900\">{new Date(account.addedDate).toLocaleDateString('ja-JP')}</span>\n                    </div>\n                    {account.lastUsed && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-sm text-gray-600\">æœ€çµ‚åˆ©ç”¨:</span>\n                        <span className=\"text-sm text-gray-900\">{new Date(account.lastUsed).toLocaleDateString('ja-JP')}</span>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-6 flex justify-end space-x-2\">\n                {!account.isDefault && (\n                  <button\n                    onClick={() => handleSetDefault(account.id)}\n                    className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n                  >\n                    ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«è¨­å®š\n                  </button>\n                )}\n                <button\n                  onClick={() => handleEditAccount(account)}\n                  className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center space-x-2\"\n                >\n                  <Edit className=\"h-4 w-4\" />\n                  <span>ç·¨é›†</span>\n                </button>\n                <button\n                  onClick={() => handleDeleteAccount(account.id)}\n                  className=\"px-4 py-2 border border-red-300 rounded-lg text-red-700 hover:bg-red-50 flex items-center space-x-2\"\n                >\n                  <Trash2 className=\"h-4 w-4\" />\n                  <span>å‰Šé™¤</span>\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {/* è¿½åŠ ãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <div className=\"flex justify-between items-center\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">\n                  {editingAccount ? 'å£åº§ã‚’ç·¨é›†' : 'å£åº§ã‚’è¿½åŠ '}\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowAddModal(false)\n                    setEditingAccount(null)\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å£åº§ã‚¿ã‚¤ãƒ— *</label>\n                  <select\n                    value={formData.accountType}\n                    onChange={(e) => setFormData(prev => ({ ...prev, accountType: e.target.value as any }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"bank\">éŠ€è¡Œå£åº§</option>\n                    <option value=\"credit_card\">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰</option>\n                    <option value=\"digital_wallet\">é›»å­ãƒãƒãƒ¼</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å£åº§å *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.accountName}\n                    onChange={(e) => setFormData(prev => ({ ...prev, accountName: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ãƒ¡ã‚¤ãƒ³å£åº§\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å£åº§ç•ªå·/ã‚«ãƒ¼ãƒ‰ç•ªå· *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.accountNumber}\n                    onChange={(e) => setFormData(prev => ({ ...prev, accountNumber: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"1234567 ã¾ãŸã¯ 1234-5678-9012-3456\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">å£åº§åç¾© *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.accountHolderName}\n                    onChange={(e) => setFormData(prev => ({ ...prev, accountHolderName: e.target.value }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«\"\n                  />\n                </div>\n\n                {formData.accountType === 'bank' && (\n                  <>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">éŠ€è¡Œå *</label>\n                      <select\n                        value={formData.bankName}\n                        onChange={(e) => setFormData(prev => ({ ...prev, bankName: e.target.value }))}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                      >\n                        <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                        {banks.map(bank => (\n                          <option key={bank} value={bank}>{bank}</option>\n                        ))}\n                      </select>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ”¯åº—å *</label>\n                      <input\n                        type=\"text\"\n                        required\n                        value={formData.branchName}\n                        onChange={(e) => setFormData(prev => ({ ...prev, branchName: e.target.value }))}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                        placeholder=\"å“å·æ”¯åº—\"\n                      />\n                    </div>\n                  </>\n                )}\n              </div>\n\n              <div>\n                <label className=\"flex items-center space-x-2\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.isDefault}\n                    onChange={(e) => setFormData(prev => ({ ...prev, isDefault: e.target.checked }))}\n                    className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                  />\n                  <span className=\"text-sm text-gray-700\">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå£åº§ã«è¨­å®šã™ã‚‹</span>\n                </label>\n              </div>\n            </div>\n\n            <div className=\"px-6 py-4 border-t border-gray-200 flex justify-end space-x-2\">\n              <button\n                onClick={() => {\n                  setShowAddModal(false)\n                  setEditingAccount(null)\n                }}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n              >\n                ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n              </button>\n              <button\n                onClick={handleSaveAccount}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n              >\n                <Save className=\"h-4 w-4\" />\n                <span>{editingAccount ? 'æ›´æ–°' : 'è¿½åŠ '}</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </DashboardLayout>\n  )\n}\n\n","size_bytes":18580},"src/app/api/shipments/[id]/route.ts":{"content":"import { NextRequest } from 'next/server'\nimport { getUserFromRequest } from '@/lib/auth'\nimport {\n  successResponse,\n  errorResponse,\n  unauthorizedResponse,\n  forbiddenResponse,\n  notFoundResponse,\n} from '@/lib/api-response'\nimport prisma from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\n// é…é€æ¡ˆä»¶è©³ç´°å–å¾—\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    const shipment = await prisma.shipment.findUnique({\n      where: { id: params.id },\n      include: {\n        shipper: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n            phone: true,\n            email: true,\n          },\n        },\n        carrier: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n            phone: true,\n            email: true,\n          },\n        },\n        offers: {\n          include: {\n            carrier: {\n              select: {\n                id: true,\n                companyName: true,\n                contactPerson: true,\n                phone: true,\n              },\n            },\n          },\n          orderBy: {\n            createdAt: 'desc',\n          },\n        },\n      },\n    })\n    \n    if (!shipment) {\n      return notFoundResponse('é…é€æ¡ˆä»¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')\n    }\n    \n    return successResponse(shipment)\n  } catch (error) {\n    console.error('Get shipment error:', error)\n    return errorResponse('é…é€æ¡ˆä»¶ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n// é…é€æ¡ˆä»¶æ›´æ–°\nexport async function PATCH(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    const shipment = await prisma.shipment.findUnique({\n      where: { id: params.id },\n    })\n    \n    if (!shipment) {\n      return notFoundResponse('é…é€æ¡ˆä»¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')\n    }\n    \n    // è‡ªåˆ†ã®æ¡ˆä»¶ã®ã¿æ›´æ–°å¯èƒ½\n    if (shipment.shipperId !== user.userId) {\n      return forbiddenResponse('ã“ã®é…é€æ¡ˆä»¶ã‚’æ›´æ–°ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“')\n    }\n    \n    const body = await request.json()\n    \n    const updatedShipment = await prisma.shipment.update({\n      where: { id: params.id },\n      data: {\n        status: body.status,\n      },\n      include: {\n        shipper: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n          },\n        },\n        carrier: {\n          select: {\n            id: true,\n            companyName: true,\n            contactPerson: true,\n          },\n        },\n      },\n    })\n    \n    return successResponse(updatedShipment)\n  } catch (error) {\n    console.error('Update shipment error:', error)\n    return errorResponse('é…é€æ¡ˆä»¶ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n// é…é€æ¡ˆä»¶å‰Šé™¤\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    const shipment = await prisma.shipment.findUnique({\n      where: { id: params.id },\n    })\n    \n    if (!shipment) {\n      return notFoundResponse('é…é€æ¡ˆä»¶ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')\n    }\n    \n    // è‡ªåˆ†ã®æ¡ˆä»¶ã®ã¿å‰Šé™¤å¯èƒ½\n    if (shipment.shipperId !== user.userId) {\n      return forbiddenResponse('ã“ã®é…é€æ¡ˆä»¶ã‚’å‰Šé™¤ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“')\n    }\n    \n    await prisma.shipment.delete({\n      where: { id: params.id },\n    })\n    \n    return successResponse({ message: 'é…é€æ¡ˆä»¶ã‚’å‰Šé™¤ã—ã¾ã—ãŸ' })\n  } catch (error) {\n    console.error('Delete shipment error:', error)\n    return errorResponse('é…é€æ¡ˆä»¶ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n","size_bytes":3996},"src/app/api/auth/login/route.ts":{"content":"import { NextRequest } from 'next/server'\nexport const dynamic = 'force-dynamic'\nimport { loginSchema } from '@/lib/validators'\nimport { verifyPassword, generateToken } from '@/lib/auth'\nimport { successResponse, errorResponse } from '@/lib/api-response'\nimport prisma from '@/lib/prisma'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    console.log('Login attempt for email:', body.email)\n    \n    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n    const validatedData = loginSchema.parse(body)\n    \n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢\n    const user = await prisma.user.findUnique({\n      where: { email: validatedData.email },\n    })\n    \n    if (!user) {\n      console.log('User not found:', validatedData.email)\n      return errorResponse('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“', 401)\n    }\n    \n    console.log('User found, verifying password...')\n    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼\n    const isValidPassword = await verifyPassword(\n      validatedData.password,\n      user.password\n    )\n    \n    if (!isValidPassword) {\n      console.log('Password verification failed')\n      return errorResponse('ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“', 401)\n    }\n    \n    console.log('Login successful for:', user.email)\n    \n    // JWTãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ\n    const token = generateToken({\n      userId: user.id,\n      email: user.email,\n      userType: user.userType as 'SHIPPER' | 'CARRIER',\n    })\n    \n    return successResponse({\n      user: {\n        id: user.id,\n        email: user.email,\n        userType: user.userType as 'SHIPPER' | 'CARRIER',\n        companyName: user.companyName,\n        contactPerson: user.contactPerson,\n        phone: user.phone,\n        isAdmin: user.isAdmin,\n        verificationStatus: user.verificationStatus,\n      },\n      token,\n    })\n  } catch (error: any) {\n    if (error.name === 'ZodError') {\n      return errorResponse(error.errors[0].message)\n    }\n    console.error('Login error:', error)\n    return errorResponse('ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n","size_bytes":2090},"src/app/register/page.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\n\nexport default function RegisterPage() {\n  const router = useRouter()\n  const [formData, setFormData] = useState({\n    userType: 'SHIPPER',\n    companyName: '',\n    contactPerson: '',\n    phone: '',\n    postalCode: '',\n    address: '',\n    email: '',\n    password: '',\n  })\n  const [error, setError] = useState('')\n  const [loading, setLoading] = useState(false)\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setError('')\n    setLoading(true)\n\n    try {\n      const response = await fetch('/api/auth/register', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n\n      localStorage.setItem('token', data.data.token)\n      localStorage.setItem('user', JSON.stringify(data.data.user))\n\n      router.push('/dashboard')\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen gradient-bg flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-2xl w-full\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-slate-800 mb-2\">\n            æ–°è¦ç™»éŒ²\n          </h1>\n          <p className=\"text-slate-600\">\n            ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¦ã”åˆ©ç”¨ãã ã•ã„\n          </p>\n          <div className=\"mt-4 p-4 bg-blue-50 rounded-xl border border-blue-200\">\n            <p className=\"text-sm text-slate-700 leading-relaxed\">\n              é‹é€äº‹æ¥­æ³•ã«åŸºã¥ãè¨±å¯ã‚’å—ã‘ãŸäº‹æ¥­è€…æ§˜ã®ã¿<br />\n              ãƒãƒƒãƒãƒ³ã‚°ãŒå¯èƒ½ã¨ãªã‚Šã¾ã™ã€‚\n            </p>\n            <p className=\"text-sm text-slate-700 leading-relaxed mt-3\">\n              ç„¡æ–™ãŠè©¦ã—æœŸé–“ã¯14æ—¥é–“ã«ãªã£ã¦ãŠã‚Š<br />\n              ç¶™ç¶šã—ãªã„å ´åˆã¯è²»ç”¨ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚\n            </p>\n          </div>\n        </div>\n\n        <div className=\"floating-card\">\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm\">\n                {error}\n              </div>\n            )}\n\n            {/* ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—é¸æŠ */}\n            <div>\n              <label className=\"block text-sm font-semibold text-slate-700 mb-3\">\n                ç™»éŒ²ã‚¿ã‚¤ãƒ— <span className=\"text-red-500\">*</span>\n              </label>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData({ ...formData, userType: 'SHIPPER' })}\n                  className={`p-4 rounded-xl border-2 transition-all ${\n                    formData.userType === 'SHIPPER'\n                      ? 'border-blue-500 bg-blue-50 text-blue-700'\n                      : 'border-gray-300 hover:border-gray-400'\n                  }`}\n                >\n                  <div className=\"font-semibold\">è·ä¸»</div>\n                  <div className=\"text-xs text-gray-600\">é…é€ã‚’ä¾é ¼ã™ã‚‹</div>\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData({ ...formData, userType: 'CARRIER' })}\n                  className={`p-4 rounded-xl border-2 transition-all ${\n                    formData.userType === 'CARRIER'\n                      ? 'border-green-500 bg-green-50 text-green-700'\n                      : 'border-gray-300 hover:border-gray-400'\n                  }`}\n                >\n                  <div className=\"font-semibold\">é‹é€ä¼šç¤¾</div>\n                  <div className=\"text-xs text-gray-600\">é…é€ã‚’è«‹ã‘è² ã†</div>\n                </button>\n              </div>\n            </div>\n\n            {/* ä¼šç¤¾æƒ…å ± */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label htmlFor=\"companyName\" className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                  ä¼šç¤¾å <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  id=\"companyName\"\n                  type=\"text\"\n                  required\n                  className=\"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"æ ªå¼ä¼šç¤¾ã€‡ã€‡\"\n                  value={formData.companyName}\n                  onChange={(e) => setFormData({ ...formData, companyName: e.target.value })}\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"contactPerson\" className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                  æ‹…å½“è€…å <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  id=\"contactPerson\"\n                  type=\"text\"\n                  required\n                  className=\"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"å±±ç”°å¤ªéƒ\"\n                  value={formData.contactPerson}\n                  onChange={(e) => setFormData({ ...formData, contactPerson: e.target.value })}\n                />\n              </div>\n            </div>\n\n            {/* é€£çµ¡å…ˆ */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label htmlFor=\"phone\" className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                  é›»è©±ç•ªå· <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  id=\"phone\"\n                  type=\"tel\"\n                  required\n                  className=\"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"03-1234-5678\"\n                  value={formData.phone}\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"email\" className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                  ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  id=\"email\"\n                  type=\"email\"\n                  required\n                  className=\"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"email@example.com\"\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                />\n              </div>\n            </div>\n\n            {/* ä½æ‰€ */}\n            <div>\n              <label htmlFor=\"postalCode\" className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                éƒµä¾¿ç•ªå· <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                id=\"postalCode\"\n                type=\"text\"\n                required\n                className=\"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"123-4567\"\n                value={formData.postalCode}\n                onChange={(e) => setFormData({ ...formData, postalCode: e.target.value })}\n              />\n            </div>\n\n            <div>\n              <label htmlFor=\"address\" className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                ä½æ‰€ <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                id=\"address\"\n                type=\"text\"\n                required\n                className=\"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"æ±äº¬éƒ½ã€‡ã€‡åŒºã€‡ã€‡ 1-2-3\"\n                value={formData.address}\n                onChange={(e) => setFormData({ ...formData, address: e.target.value })}\n              />\n            </div>\n\n            {/* ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ */}\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-semibold text-slate-700 mb-2\">\n                ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                id=\"password\"\n                type=\"password\"\n                required\n                minLength={8}\n                className=\"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"8æ–‡å­—ä»¥ä¸Š\"\n                value={formData.password}\n                onChange={(e) => setFormData({ ...formData, password: e.target.value })}\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full btn-primary py-3 text-lg disabled:opacity-50\"\n            >\n              {loading ? 'ç™»éŒ²ä¸­...' : 'ç™»éŒ²ã™ã‚‹'}\n            </button>\n\n            <div className=\"text-center\">\n              <span className=\"text-slate-600\">æ—¢ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯ </span>\n              <Link href=\"/login\" className=\"text-blue-600 hover:text-blue-700 font-semibold\">\n                ãƒ­ã‚°ã‚¤ãƒ³\n              </Link>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":9849},"src/app/dashboard/partners/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Users, \n  Search, \n  Filter, \n  Plus, \n  Eye, \n  MessageCircle, \n  Phone, \n  Mail, \n  MapPin, \n  Star,\n  Calendar,\n  Package,\n  CheckCircle,\n  Trash2,\n  Edit,\n  User,\n  Building2,\n  MoreVertical,\n  Save,\n  X\n} from 'lucide-react'\n\ninterface Partner {\n  id: string\n  companyName: string\n  contactPerson: string\n  email: string\n  phone: string\n  address: string\n  postalCode: string\n  userType: 'SHIPPER' | 'CARRIER'\n  rating: number\n  totalTransactions: number\n  lastTransactionDate: string\n  addedDate: string\n  status: 'active' | 'inactive' | 'pending'\n  notes?: string\n  specialties?: string[]\n}\n\nexport default function PartnersPage() {\n  const [partners, setPartners] = useState<Partner[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'inactive' | 'pending'>('all')\n  const [userTypeFilter, setUserTypeFilter] = useState<'all' | 'SHIPPER' | 'CARRIER'>('all')\n  const [showAddModal, setShowAddModal] = useState(false)\n  const [editingPartner, setEditingPartner] = useState<Partner | null>(null)\n  const [formData, setFormData] = useState({\n    companyName: '',\n    contactPerson: '',\n    phone: '',\n    email: '',\n    address: '',\n    postalCode: '',\n    userType: 'SHIPPER' as 'SHIPPER' | 'CARRIER',\n    status: 'active' as 'active' | 'inactive' | 'pending',\n    specialties: [] as string[],\n    notes: ''\n  })\n\n  useEffect(() => {\n    loadPartners()\n  }, [])\n\n  const loadPartners = async () => {\n    try {\n      // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿\n      const samplePartners: Partner[] = [\n        {\n          id: '1',\n          companyName: 'æ ªå¼ä¼šç¤¾ãƒˆãƒ©ãƒ³ã‚¹ãƒ­ã‚¸ãƒƒã‚¯',\n          contactPerson: 'ç”°ä¸­å¤ªéƒ',\n          email: 'tanaka@translogic.co.jp',\n          phone: '03-1234-5678',\n          address: 'æ±äº¬éƒ½æ¸¯åŒºå…­æœ¬æœ¨1-1-1',\n          postalCode: '106-0032',\n          userType: 'CARRIER',\n          rating: 4.8,\n          totalTransactions: 15,\n          lastTransactionDate: '2024-01-10',\n          addedDate: '2023-06-15',\n          status: 'active',\n          notes: 'ä¿¡é ¼ã§ãã‚‹ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã€‚å†·å‡è¼¸é€ã«å¼·ã¿ã€‚',\n          specialties: ['å†·å‡è¼¸é€', 'é–¢æ±åœ', 'æ€¥ä¾¿å¯¾å¿œ']\n        },\n        {\n          id: '2',\n          companyName: 'å±±ç”°é‹é€æ ªå¼ä¼šç¤¾',\n          contactPerson: 'å±±ç”°èŠ±å­',\n          email: 'yamada@yamada-transport.co.jp',\n          phone: '06-9876-5432',\n          address: 'å¤§é˜ªåºœå¤§é˜ªå¸‚åŒ—åŒºæ¢…ç”°2-2-2',\n          postalCode: '530-0001',\n          userType: 'CARRIER',\n          rating: 4.5,\n          totalTransactions: 8,\n          lastTransactionDate: '2024-01-05',\n          addedDate: '2023-08-20',\n          status: 'active',\n          notes: 'é–¢è¥¿åœã®è¼¸é€ã§ã‚ˆãåˆ©ç”¨ã€‚',\n          specialties: ['ä¸€èˆ¬è²¨ç‰©', 'é–¢è¥¿åœ', 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯']\n        },\n        {\n          id: '3',\n          companyName: 'æ ªå¼ä¼šç¤¾ã‚°ãƒªãƒ¼ãƒ³ãƒ­ã‚¸ã‚¹ãƒ†ã‚£ã‚¯ã‚¹',\n          contactPerson: 'ä½è—¤æ¬¡éƒ',\n          email: 'sato@greenlogistics.co.jp',\n          phone: '052-1111-2222',\n          address: 'æ„›çŸ¥çœŒåå¤å±‹å¸‚ä¸­åŒºæ „3-3-3',\n          postalCode: '460-0008',\n          userType: 'SHIPPER',\n          rating: 4.2,\n          totalTransactions: 23,\n          lastTransactionDate: '2023-12-28',\n          addedDate: '2023-04-10',\n          status: 'active',\n          notes: 'ç’°å¢ƒã«é…æ…®ã—ãŸç‰©æµã‚’é‡è¦–ã€‚',\n          specialties: ['ã‚¨ã‚³ç‰©æµ', 'ä¸­éƒ¨åœ', 'BtoB']\n        },\n        {\n          id: '4',\n          companyName: 'ã‚¹ãƒ”ãƒ¼ãƒ‰ç‰©æµæ ªå¼ä¼šç¤¾',\n          contactPerson: 'éˆ´æœ¨ä¸€éƒ',\n          email: 'suzuki@speedlogistics.co.jp',\n          phone: '092-3333-4444',\n          address: 'ç¦å²¡çœŒç¦å²¡å¸‚åšå¤šåŒºåšå¤šé§…å‰4-4-4',\n          postalCode: '812-0011',\n          userType: 'CARRIER',\n          rating: 4.7,\n          totalTransactions: 12,\n          lastTransactionDate: '2023-11-15',\n          addedDate: '2023-09-05',\n          status: 'inactive',\n          notes: 'ä¹å·åœã®é«˜é€Ÿè¼¸é€ã€‚æœ€è¿‘å–å¼•ãªã—ã€‚',\n          specialties: ['é«˜é€Ÿè¼¸é€', 'ä¹å·åœ', '24æ™‚é–“å¯¾å¿œ']\n        }\n      ]\n      \n      setPartners(samplePartners)\n    } catch (error) {\n      console.error('Error loading partners:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleAddPartner = () => {\n    setFormData({\n      companyName: '',\n      contactPerson: '',\n      phone: '',\n      email: '',\n      address: '',\n      postalCode: '',\n      userType: 'SHIPPER',\n      status: 'active',\n      specialties: [],\n      notes: ''\n    })\n    setShowAddModal(true)\n  }\n\n  const handleEditPartner = (partner: Partner) => {\n    setFormData({\n      companyName: partner.companyName,\n      contactPerson: partner.contactPerson,\n      phone: partner.phone,\n      email: partner.email,\n      address: partner.address,\n      postalCode: partner.postalCode,\n      userType: partner.userType,\n      status: partner.status,\n      specialties: partner.specialties || [],\n      notes: partner.notes || ''\n    })\n    setEditingPartner(partner)\n    setShowAddModal(true)\n  }\n\n  const handleSavePartner = () => {\n    if (editingPartner) {\n      // ç·¨é›†\n      setPartners(prev => prev.map(partner => \n        partner.id === editingPartner.id \n          ? { ...partner, ...formData, rating: partner.rating, totalTransactions: partner.totalTransactions, lastTransactionDate: partner.lastTransactionDate, addedDate: partner.addedDate }\n          : partner\n      ))\n    } else {\n      // æ–°è¦è¿½åŠ \n      const newPartner: Partner = {\n        id: Date.now().toString(),\n        ...formData,\n        rating: 0,\n        totalTransactions: 0,\n        lastTransactionDate: '',\n        addedDate: new Date().toISOString().split('T')[0]\n      }\n      setPartners(prev => [...prev, newPartner])\n    }\n    setShowAddModal(false)\n    setEditingPartner(null)\n  }\n\n  const handleDeletePartner = (partnerId: string) => {\n    if (!confirm('ã“ã®å–å¼•å…ˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return\n    setPartners(prev => prev.filter(p => p.id !== partnerId))\n  }\n\n  const handleInputChange = (field: string, value: any) => {\n    setFormData(prev => ({ ...prev, [field]: value }))\n  }\n\n  const handleSpecialtyToggle = (specialty: string) => {\n    setFormData(prev => ({\n      ...prev,\n      specialties: prev.specialties.includes(specialty)\n        ? prev.specialties.filter(s => s !== specialty)\n        : [...prev.specialties, specialty]\n    }))\n  }\n\n  const getStatusInfo = (status: string) => {\n    switch (status) {\n      case 'active':\n        return { label: 'ã‚¢ã‚¯ãƒ†ã‚£ãƒ–', color: 'bg-green-100 text-green-800' }\n      case 'inactive':\n        return { label: 'éã‚¢ã‚¯ãƒ†ã‚£ãƒ–', color: 'bg-gray-100 text-gray-800' }\n      case 'pending':\n        return { label: 'æ‰¿èªå¾…ã¡', color: 'bg-yellow-100 text-yellow-800' }\n      default:\n        return { label: 'ä¸æ˜', color: 'bg-gray-100 text-gray-800' }\n    }\n  }\n\n  const filteredPartners = partners.filter(partner => {\n    const matchesSearch = searchTerm === '' || \n      partner.companyName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      partner.contactPerson.toLowerCase().includes(searchTerm.toLowerCase())\n    \n    const matchesStatus = statusFilter === 'all' || partner.status === statusFilter\n    const matchesUserType = userTypeFilter === 'all' || partner.userType === userTypeFilter\n    \n    return matchesSearch && matchesStatus && matchesUserType\n  })\n\n  const renderStars = (rating: number) => {\n    return Array.from({ length: 5 }, (_, i) => (\n      <Star\n        key={i}\n        className={`h-4 w-4 ${\n          i < Math.floor(rating) ? 'text-yellow-400 fill-current' : 'text-gray-300'\n        }`}\n      />\n    ))\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">å–å¼•å…ˆç®¡ç†</h1>\n            <p className=\"text-gray-600\">å–å¼•å…ˆä¼æ¥­ã®ç®¡ç†ã¨é€£çµ¡å…ˆæƒ…å ±ã‚’ç¢ºèªã§ãã¾ã™</p>\n          </div>\n            <button\n              onClick={handleAddPartner}\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n            >\n              <Plus className=\"h-4 w-4\" />\n              <span>å–å¼•å…ˆã‚’è¿½åŠ </span>\n            </button>\n        </div>\n      </div>\n\n      {/* æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}\n      <div className=\"bg-white rounded-lg shadow-sm border mb-6\">\n        <div className=\"p-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"ä¼šç¤¾åã€æ‹…å½“è€…åã§æ¤œç´¢...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n            <div>\n              <div className=\"flex items-center space-x-2\">\n                <Filter className=\"h-4 w-4 text-gray-500\" />\n                <select\n                  value={statusFilter}\n                  onChange={(e) => setStatusFilter(e.target.value as any)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"all\">ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</option>\n                  <option value=\"active\">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–</option>\n                  <option value=\"inactive\">éã‚¢ã‚¯ãƒ†ã‚£ãƒ–</option>\n                  <option value=\"pending\">æ‰¿èªå¾…ã¡</option>\n                </select>\n              </div>\n            </div>\n            <div>\n              <select\n                value={userTypeFilter}\n                onChange={(e) => setUserTypeFilter(e.target.value as any)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"all\">ã™ã¹ã¦ã®ä¼æ¥­ã‚¿ã‚¤ãƒ—</option>\n                <option value=\"SHIPPER\">è·ä¸»ä¼æ¥­</option>\n                <option value=\"CARRIER\">é‹é€æ¥­è€…</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* å–å¼•å…ˆä¸€è¦§ */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            å–å¼•å…ˆä¸€è¦§ ({filteredPartners.length}ä»¶)\n          </h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : filteredPartners.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <Users className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>å–å¼•å…ˆã¯ã‚ã‚Šã¾ã›ã‚“</p>\n            <button\n              className=\"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n            >\n              æœ€åˆã®å–å¼•å…ˆã‚’è¿½åŠ ã™ã‚‹\n            </button>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {filteredPartners.map((partner) => {\n              const statusInfo = getStatusInfo(partner.status)\n              \n              return (\n                <div key={partner.id} className=\"p-6 hover:bg-gray-50\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h3 className=\"text-lg font-medium text-gray-900\">\n                          {partner.companyName}\n                        </h3>\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${\n                          partner.userType === 'SHIPPER' \n                            ? 'bg-blue-100 text-blue-800' \n                            : 'bg-green-100 text-green-800'\n                        }`}>\n                          {partner.userType === 'SHIPPER' ? 'è·ä¸»ä¼æ¥­' : 'é‹é€æ¥­è€…'}\n                        </span>\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${statusInfo.color}`}>\n                          {statusInfo.label}\n                        </span>\n                      </div>\n                      \n                      {/* è©•ä¾¡ã¨å–å¼•å®Ÿç¸¾ */}\n                      <div className=\"flex items-center space-x-4 mb-3\">\n                        <div className=\"flex items-center space-x-1\">\n                          {renderStars(partner.rating)}\n                          <span className=\"text-sm text-gray-600 ml-1\">({partner.rating})</span>\n                        </div>\n                        <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n                          <span className=\"flex items-center\">\n                            <Package className=\"h-4 w-4 mr-1\" />\n                            å–å¼•å›æ•°: {partner.totalTransactions}å›\n                          </span>\n                          <span className=\"flex items-center\">\n                            <Calendar className=\"h-4 w-4 mr-1\" />\n                            æœ€çµ‚å–å¼•: {new Date(partner.lastTransactionDate).toLocaleDateString('ja-JP')}\n                          </span>\n                        </div>\n                      </div>\n\n                      {/* é€£çµ¡å…ˆæƒ…å ± */}\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700 mb-3\">\n                        <div className=\"flex items-center\">\n                          <User className=\"h-4 w-4 mr-2 text-gray-500\" />\n                          <span>{partner.contactPerson}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Phone className=\"h-4 w-4 mr-2 text-gray-500\" />\n                          <span>{partner.phone}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Mail className=\"h-4 w-4 mr-2 text-gray-500\" />\n                          <span>{partner.email}</span>\n                        </div>\n                        <div className=\"flex items-center\">\n                          <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                          <span>{partner.postalCode} {partner.address}</span>\n                        </div>\n                      </div>\n\n                      {/* ãƒ¡ãƒ¢ */}\n                      {partner.notes && (\n                        <div className=\"mb-3\">\n                          <p className=\"text-sm text-gray-600 bg-gray-50 p-2 rounded\">\n                            <strong>ãƒ¡ãƒ¢:</strong> {partner.notes}\n                          </p>\n                        </div>\n                      )}\n\n                      {/* å°‚é–€åˆ†é‡ */}\n                      {partner.specialties && partner.specialties.length > 0 && (\n                        <div className=\"flex flex-wrap gap-2 mb-3\">\n                          {partner.specialties.map((specialty, index) => (\n                            <span\n                              key={index}\n                              className=\"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full\"\n                            >\n                              {specialty}\n                            </span>\n                          ))}\n                        </div>\n                      )}\n\n                      <div className=\"text-xs text-gray-400\">\n                        è¿½åŠ æ—¥: {new Date(partner.addedDate).toLocaleDateString('ja-JP')}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2 ml-4\">\n                      <button\n                        className=\"p-2 text-gray-400 hover:text-blue-600\"\n                        title=\"è©³ç´°ã‚’è¦‹ã‚‹\"\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                      </button>\n                      <button\n                        className=\"p-2 text-gray-400 hover:text-green-600\"\n                        title=\"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹\"\n                      >\n                        <MessageCircle className=\"h-4 w-4\" />\n                      </button>\n                      <button\n                        onClick={() => handleEditPartner(partner)}\n                        className=\"p-2 text-gray-400 hover:text-purple-600\"\n                        title=\"ç·¨é›†\"\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </button>\n                      <button\n                        onClick={() => handleDeletePartner(partner.id)}\n                        className=\"p-2 text-gray-400 hover:text-red-600\"\n                        title=\"å‰Šé™¤\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </div>\n\n      {/* è¿½åŠ ãƒ»ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <div className=\"flex justify-between items-center\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">\n                  {editingPartner ? 'å–å¼•å…ˆã‚’ç·¨é›†' : 'å–å¼•å…ˆã‚’è¿½åŠ '}\n                </h2>\n                <button\n                  onClick={() => {\n                    setShowAddModal(false)\n                    setEditingPartner(null)\n                  }}\n                  className=\"text-gray-400 hover:text-gray-600\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6 space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä¼šç¤¾å *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.companyName}\n                    onChange={(e) => handleInputChange('companyName', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ‹…å½“è€…å *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.contactPerson}\n                    onChange={(e) => handleInputChange('contactPerson', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"å±±ç”°å¤ªéƒ\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">é›»è©±ç•ªå· *</label>\n                  <input\n                    type=\"tel\"\n                    required\n                    value={formData.phone}\n                    onChange={(e) => handleInputChange('phone', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"03-1234-5678\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *</label>\n                  <input\n                    type=\"email\"\n                    required\n                    value={formData.email}\n                    onChange={(e) => handleInputChange('email', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"yamada@example.com\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">éƒµä¾¿ç•ªå·</label>\n                  <input\n                    type=\"text\"\n                    value={formData.postalCode}\n                    onChange={(e) => handleInputChange('postalCode', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"106-0032\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä½æ‰€ *</label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.address}\n                    onChange={(e) => handleInputChange('address', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"æ±äº¬éƒ½æ¸‹è°·åŒºæµæ¯”å¯¿1-2-3\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ã‚¿ã‚¤ãƒ— *</label>\n                  <select\n                    value={formData.userType}\n                    onChange={(e) => handleInputChange('userType', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"SHIPPER\">è·ä¸»</option>\n                    <option value=\"CARRIER\">é‹é€ä¼šç¤¾</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ *</label>\n                  <select\n                    value={formData.status}\n                    onChange={(e) => handleInputChange('status', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"active\">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–</option>\n                    <option value=\"inactive\">éã‚¢ã‚¯ãƒ†ã‚£ãƒ–</option>\n                    <option value=\"pending\">æ‰¿èªå¾…ã¡</option>\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">å°‚é–€åˆ†é‡</label>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                  {['å¤§å‹è²¨ç‰©', 'å°å‹è²¨ç‰©', 'å†·è”µè¼¸é€', 'å†·å‡è¼¸é€', 'å±é™ºç‰©', 'ç”Ÿé®®é£Ÿå“', 'ç²¾å¯†æ©Ÿå™¨', 'ç¾è¡“å“', 'é–¢æ±åœ', 'é–¢è¥¿åœ', 'ä¸­éƒ¨åœ', 'ä¹å·åœ', 'åŒ—æµ·é“', 'æ€¥ä¾¿å¯¾å¿œ', '24æ™‚é–“å¯¾å¿œ', 'é•·è·é›¢å¯¾å¿œ'].map(specialty => (\n                    <label key={specialty} className=\"flex items-center space-x-2 cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={formData.specialties.includes(specialty)}\n                        onChange={() => handleSpecialtyToggle(specialty)}\n                        className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                      />\n                      <span className=\"text-sm text-gray-700\">{specialty}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">ãƒ¡ãƒ¢</label>\n                <textarea\n                  value={formData.notes}\n                  onChange={(e) => handleInputChange('notes', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  rows={3}\n                  placeholder=\"å–å¼•å…ˆã«é–¢ã™ã‚‹ãƒ¡ãƒ¢ã‚„ç‰¹è¨˜äº‹é …\"\n                />\n              </div>\n            </div>\n\n            <div className=\"px-6 py-4 border-t border-gray-200 flex justify-end space-x-2\">\n              <button\n                onClick={() => {\n                  setShowAddModal(false)\n                  setEditingPartner(null)\n                }}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\n              >\n                ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n              </button>\n              <button\n                onClick={handleSavePartner}\n                className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n              >\n                <Save className=\"h-4 w-4\" />\n                <span>{editingPartner ? 'æ›´æ–°' : 'è¿½åŠ '}</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </DashboardLayout>\n  )\n}","size_bytes":26025},"src/app/api/admin/analytics/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyAdminSession } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\n// ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢\nasync function requireAdmin(request: NextRequest) {\n  const token = request.cookies.get('admin_token')?.value\n\n  if (!token) {\n    return NextResponse.json(\n      { error: 'ç®¡ç†è€…èªè¨¼ãŒå¿…è¦ã§ã™' },\n      { status: 401 }\n    )\n  }\n\n  const payload = verifyAdminSession(token)\n\n  if (!payload) {\n    return NextResponse.json(\n      { error: 'ç„¡åŠ¹ãªç®¡ç†è€…èªè¨¼ã§ã™' },\n      { status: 401 }\n    )\n  }\n\n  return payload\n}\n\n// ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åˆ†æãƒ‡ãƒ¼ã‚¿å–å¾—\nexport async function GET(request: NextRequest) {\n  try {\n    const admin = await requireAdmin(request)\n    if (admin instanceof NextResponse) return admin\n\n    const { searchParams } = new URL(request.url)\n    const period = searchParams.get('period') || '7d'\n\n    // å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—\n    const [totalUsers, totalShipments, totalVehicles, recentShipments] = await Promise.all([\n      prisma.user.count(),\n      prisma.shipment.count(),\n      prisma.vehicle.count(),\n      prisma.shipment.findMany({\n        take: 10,\n        orderBy: { createdAt: 'desc' },\n        include: {\n          shipper: {\n            select: { companyName: true }\n          },\n          carrier: {\n            select: { companyName: true }\n          }\n        }\n      })\n    ])\n\n    // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çµ±è¨ˆï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰\n    const realtimeStats = {\n      onlineUsers: Math.floor(Math.random() * 50) + 120,\n      activeShipments: Math.floor(Math.random() * 20) + 45,\n      pendingApprovals: Math.floor(Math.random() * 10) + 8,\n      systemHealth: 'excellent',\n      serverLoad: Math.floor(Math.random() * 30) + 20,\n      responseTime: Math.floor(Math.random() * 50) + 100\n    }\n\n    // è©³ç´°çµ±è¨ˆ\n    const detailedStats = {\n      totalUsers,\n      activeUsers: Math.floor(totalUsers * 0.7),\n      pendingUsers: Math.floor(totalUsers * 0.05),\n      totalShipments,\n      completedShipments: Math.floor(totalShipments * 0.9),\n      totalVehicles,\n      availableVehicles: Math.floor(totalVehicles * 0.8),\n      totalRevenue: 125000000,\n      monthlyRevenue: 8500000,\n      averageMatchScore: 87.5,\n      customerSatisfaction: 4.6\n    }\n\n    // åœ°åŸŸåˆ¥çµ±è¨ˆ\n    const regionalStats = [\n      { region: 'é–¢æ±', count: 456, revenue: 45000000 },\n      { region: 'é–¢è¥¿', count: 234, revenue: 23000000 },\n      { region: 'ä¸­éƒ¨', count: 189, revenue: 18000000 },\n      { region: 'ä¹å·', count: 123, revenue: 12000000 },\n      { region: 'åŒ—æµ·é“', count: 67, revenue: 6500000 }\n    ]\n\n    // æˆé•·ãƒ‡ãƒ¼ã‚¿\n    const userGrowth = [\n      { month: '2023-07', count: 120 },\n      { month: '2023-08', count: 145 },\n      { month: '2023-09', count: 167 },\n      { month: '2023-10', count: 189 },\n      { month: '2023-11', count: 234 },\n      { month: '2023-12', count: 278 },\n      { month: '2024-01', count: totalUsers }\n    ]\n\n    const revenueGrowth = [\n      { month: '2023-07', amount: 4500000 },\n      { month: '2023-08', amount: 5200000 },\n      { month: '2023-09', amount: 6100000 },\n      { month: '2023-10', amount: 6800000 },\n      { month: '2023-11', amount: 7500000 },\n      { month: '2023-12', amount: 8200000 },\n      { month: '2024-01', amount: detailedStats.monthlyRevenue }\n    ]\n\n    // è²¨ç‰©ã‚¿ã‚¤ãƒ—åˆ¥çµ±è¨ˆ\n    const cargoTypeStats = [\n      { type: 'ä¸€èˆ¬è²¨ç‰©', count: 1234, percentage: 35.7 },\n      { type: 'å†·è”µãƒ»å†·å‡', count: 567, percentage: 16.4 },\n      { type: 'å¤§å‹è²¨ç‰©', count: 345, percentage: 10.0 },\n      { type: 'å±é™ºç‰©', count: 123, percentage: 3.6 },\n      { type: 'ç”Ÿé®®é£Ÿå“', count: 456, percentage: 13.2 }\n    ]\n\n    // æœ€è¿‘ã®æ´»å‹•\n    const recentActivities = [\n      {\n        id: '1',\n        type: 'user_approved',\n        message: 'æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰¿èªã•ã‚Œã¾ã—ãŸ',\n        details: 'æ ªå¼ä¼šç¤¾ãƒˆãƒ©ãƒ³ã‚¹ãƒ­ã‚¸ãƒƒã‚¯',\n        timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n        icon: 'CheckCircle'\n      },\n      {\n        id: '2',\n        type: 'shipment_created',\n        message: 'æ–°ã—ã„æ¡ˆä»¶ãŒæŠ•ç¨¿ã•ã‚Œã¾ã—ãŸ',\n        details: 'æ±äº¬ã‹ã‚‰å¤§é˜ªã¸ã®å¤§å‹è²¨ç‰©é…é€',\n        timestamp: new Date(Date.now() - 4 * 60 * 60 * 1000).toISOString(),\n        icon: 'Package'\n      },\n      {\n        id: '3',\n        type: 'document_pending',\n        message: 'æ‰¿èªå¾…ã¡ã®æ›¸é¡ãŒã‚ã‚Šã¾ã™',\n        details: 'ä¸­éƒ¨é‹é€æ ªå¼ä¼šç¤¾ - äº‹æ¥­è¨±å¯è¨¼',\n        timestamp: new Date(Date.now() - 6 * 60 * 60 * 1000).toISOString(),\n        icon: 'FileText'\n      },\n      {\n        id: '4',\n        type: 'payment_completed',\n        message: 'æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸ',\n        details: 'é–¢è¥¿ç‰©æµæ ªå¼ä¼šç¤¾ - Â¥50,000',\n        timestamp: new Date(Date.now() - 8 * 60 * 60 * 1000).toISOString(),\n        icon: 'CreditCard'\n      }\n    ]\n\n    return NextResponse.json({\n      realtime: realtimeStats,\n      detailed: detailedStats,\n      regional: regionalStats,\n      growth: {\n        users: userGrowth,\n        revenue: revenueGrowth\n      },\n      cargoTypes: cargoTypeStats,\n      recentActivities,\n      recentShipments: recentShipments.map(s => ({\n        id: s.id,\n        title: s.cargoName,\n        shipper: s.shipper.companyName,\n        carrier: s.carrier?.companyName,\n        status: s.status,\n        createdAt: s.createdAt\n      }))\n    })\n  } catch (error) {\n    console.error('Get analytics error:', error)\n    return NextResponse.json(\n      { error: 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":5716},"src/app/api/auth/register/route.ts":{"content":"import { NextRequest } from 'next/server'\nexport const dynamic = 'force-dynamic'\nimport { registerSchema } from '@/lib/validators'\nimport { hashPassword, generateToken } from '@/lib/auth'\nimport { successResponse, errorResponse } from '@/lib/api-response'\nimport prisma from '@/lib/prisma'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    \n    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n    const validatedData = registerSchema.parse(body)\n    \n    // æ—¢å­˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒã‚§ãƒƒã‚¯\n    const existingUser = await prisma.user.findUnique({\n      where: { email: validatedData.email },\n    })\n    \n    if (existingUser) {\n      return errorResponse('ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯æ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™')\n    }\n    \n    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒƒã‚·ãƒ¥åŒ–\n    const hashedPassword = await hashPassword(validatedData.password)\n    \n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ\n    const user = await prisma.user.create({\n      data: {\n        email: validatedData.email,\n        password: hashedPassword,\n        userType: validatedData.userType,\n        companyName: validatedData.companyName,\n        contactPerson: validatedData.contactPerson,\n        phone: validatedData.phone,\n        postalCode: validatedData.postalCode,\n        address: validatedData.address,\n      },\n      select: {\n        id: true,\n        email: true,\n        userType: true,\n        companyName: true,\n        contactPerson: true,\n        phone: true,\n        createdAt: true,\n      },\n    })\n    \n    // JWTãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ\n    const token = generateToken({\n      userId: user.id,\n      email: user.email,\n      userType: user.userType as 'SHIPPER' | 'CARRIER',\n    })\n    \n    return successResponse({\n      user,\n      token,\n    }, 201)\n  } catch (error: any) {\n    if (error.name === 'ZodError') {\n      return errorResponse(error.errors[0].message)\n    }\n    console.error('Registration error:', error)\n    return errorResponse('ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\n","size_bytes":1983},"src/app/dashboard/shipments/new/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Package, \n  MapPin, \n  Calendar, \n  Weight, \n  Truck, \n  DollarSign, \n  Save, \n  X,\n  AlertCircle,\n  CheckCircle2,\n  Shield\n} from 'lucide-react'\n\n// è»Šä¸¡ã‚¿ã‚¤ãƒ—ã®ãƒãƒƒãƒ”ãƒ³ã‚°ï¼ˆæ—¥æœ¬èª â†’ ENUMï¼‰\nconst VEHICLE_TYPE_MAP: Record<string, string> = {\n  'è»½ãƒˆãƒ©ãƒƒã‚¯': 'LIGHT_TRUCK',\n  'å°å‹ãƒˆãƒ©ãƒƒã‚¯': 'SMALL_TRUCK',\n  'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯': 'MEDIUM_TRUCK',\n  'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯': 'LARGE_TRUCK',\n  'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼': 'TRAILER',\n  'å†·å‡è»Š': 'REFRIGERATED',\n  'å†·è”µè»Š': 'REFRIGERATED',\n  'å¹³ãƒœãƒ‡ã‚£': 'FLATBED',\n  'ã‚¦ã‚¤ãƒ³ã‚°è»Š': 'WING',\n}\n\nexport default function NewShipmentPage() {\n  const router = useRouter()\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [success, setSuccess] = useState('')\n  const [isVerified, setIsVerified] = useState(true)\n  const [verificationStatus, setVerificationStatus] = useState('')\n  \n  useEffect(() => {\n    const user = localStorage.getItem('user')\n    if (user) {\n      const userData = JSON.parse(user)\n      setVerificationStatus(userData.verificationStatus || 'PENDING')\n      setIsVerified(userData.verificationStatus === 'APPROVED')\n    }\n  }, [])\n  \n  const [formData, setFormData] = useState({\n    cargoName: '',\n    cargoDescription: '',\n    cargoWeight: '',\n    cargoVolume: '',\n    cargoValue: '',\n    \n    pickupPrefecture: '',\n    pickupCity: '',\n    pickupAddress: '',\n    pickupPostalCode: '',\n    pickupDate: '',\n    pickupTimeFrom: '',\n    pickupTimeTo: '',\n    \n    deliveryPrefecture: '',\n    deliveryCity: '',\n    deliveryAddress: '',\n    deliveryPostalCode: '',\n    deliveryDate: '',\n    deliveryTimeFrom: '',\n    deliveryTimeTo: '',\n    \n    requiredVehicleType: '',\n    needsHelper: false,\n    needsLiftGate: false,\n    temperature: '',\n    specialInstructions: '',\n    budget: ''\n  })\n\n  const prefectures = [\n    'åŒ—æµ·é“', 'é’æ£®çœŒ', 'å²©æ‰‹çœŒ', 'å®®åŸçœŒ', 'ç§‹ç”°çœŒ', 'å±±å½¢çœŒ', 'ç¦å³¶çœŒ',\n    'èŒ¨åŸçœŒ', 'æ ƒæœ¨çœŒ', 'ç¾¤é¦¬çœŒ', 'åŸ¼ç‰çœŒ', 'åƒè‘‰çœŒ', 'æ±äº¬éƒ½', 'ç¥å¥ˆå·çœŒ',\n    'æ–°æ½ŸçœŒ', 'å¯Œå±±çœŒ', 'çŸ³å·çœŒ', 'ç¦äº•çœŒ', 'å±±æ¢¨çœŒ', 'é•·é‡çœŒ', 'å²é˜œçœŒ',\n    'é™å²¡çœŒ', 'æ„›çŸ¥çœŒ', 'ä¸‰é‡çœŒ', 'æ»‹è³€çœŒ', 'äº¬éƒ½åºœ', 'å¤§é˜ªåºœ', 'å…µåº«çœŒ',\n    'å¥ˆè‰¯çœŒ', 'å’Œæ­Œå±±çœŒ', 'é³¥å–çœŒ', 'å³¶æ ¹çœŒ', 'å²¡å±±çœŒ', 'åºƒå³¶çœŒ', 'å±±å£çœŒ',\n    'å¾³å³¶çœŒ', 'é¦™å·çœŒ', 'æ„›åª›çœŒ', 'é«˜çŸ¥çœŒ', 'ç¦å²¡çœŒ', 'ä½è³€çœŒ', 'é•·å´çœŒ',\n    'ç†Šæœ¬çœŒ', 'å¤§åˆ†çœŒ', 'å®®å´çœŒ', 'é¹¿å…å³¶çœŒ', 'æ²–ç¸„çœŒ'\n  ]\n\n  const vehicleTypes = [\n    'è»½ãƒˆãƒ©ãƒƒã‚¯', 'å°å‹ãƒˆãƒ©ãƒƒã‚¯', 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯', 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯', \n    'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼', 'å†·å‡è»Š', 'å†·è”µè»Š', 'å¹³ãƒœãƒ‡ã‚£', 'ã‚¦ã‚¤ãƒ³ã‚°è»Š'\n  ]\n\n  const handleInputChange = (field: string, value: string | boolean) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }))\n    setError('')\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    // æœªæ‰¿èªãƒã‚§ãƒƒã‚¯\n    if (!isVerified) {\n      setError('è¨±å¯è¨¼ãŒæ‰¿èªã•ã‚Œã‚‹ã¾ã§ã€è·ç‰©ã®ç™»éŒ²ã¯ã§ãã¾ã›ã‚“ã€‚')\n      return\n    }\n    \n    setLoading(true)\n    setError('')\n    setSuccess('')\n\n    try {\n      const token = localStorage.getItem('token')\n      if (!token) {\n        throw new Error('èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')\n      }\n\n      // è»Šä¸¡ã‚¿ã‚¤ãƒ—ã‚’æ—¥æœ¬èªã‹ã‚‰ENUMã«å¤‰æ›\n      const vehicleTypeEnum = VEHICLE_TYPE_MAP[formData.requiredVehicleType]\n      if (!vehicleTypeEnum) {\n        throw new Error('è»Šä¸¡ã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„')\n      }\n\n      const response = await fetch('/api/shipments', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          cargoName: formData.cargoName,\n          cargoDescription: formData.cargoDescription || undefined,\n          cargoWeight: parseFloat(formData.cargoWeight),\n          cargoVolume: formData.cargoVolume ? parseFloat(formData.cargoVolume) : undefined,\n          cargoValue: formData.cargoValue ? parseFloat(formData.cargoValue) : undefined,\n          \n          pickupAddress: formData.pickupAddress,\n          pickupCity: formData.pickupCity,\n          pickupPrefecture: formData.pickupPrefecture,\n          pickupPostalCode: formData.pickupPostalCode,\n          pickupDate: formData.pickupDate,\n          pickupTimeFrom: formData.pickupTimeFrom || undefined,\n          pickupTimeTo: formData.pickupTimeTo || undefined,\n          \n          deliveryAddress: formData.deliveryAddress,\n          deliveryCity: formData.deliveryCity,\n          deliveryPrefecture: formData.deliveryPrefecture,\n          deliveryPostalCode: formData.deliveryPostalCode,\n          deliveryDate: formData.deliveryDate,\n          deliveryTimeFrom: formData.deliveryTimeFrom || undefined,\n          deliveryTimeTo: formData.deliveryTimeTo || undefined,\n          \n          requiredVehicleType: vehicleTypeEnum,\n          needsHelper: formData.needsHelper,\n          needsLiftGate: formData.needsLiftGate,\n          temperature: formData.temperature || undefined,\n          specialInstructions: formData.specialInstructions || undefined,\n          \n          budget: parseFloat(formData.budget)\n        })\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'è·ç‰©ã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n\n      setSuccess('è·ç‰©ãŒæ­£å¸¸ã«ç™»éŒ²ã•ã‚Œã¾ã—ãŸï¼')\n      \n      // 2ç§’å¾Œã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ\n      setTimeout(() => {\n        router.push('/dashboard/my-shipments')\n      }, 2000)\n      \n    } catch (error: any) {\n      console.error('Error creating shipment:', error)\n      setError(error.message || 'è·ç‰©ã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">è·ç‰©ç™»éŒ²</h1>\n        <p className=\"text-gray-600\">æ–°ã—ã„è·ç‰©ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„</p>\n      </div>\n\n      {/* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}\n      {error && (\n        <div className=\"mb-6 bg-red-50 border border-red-200 rounded-lg p-4 flex items-start animate-fade-in\">\n          <AlertCircle className=\"h-5 w-5 text-red-600 mt-0.5 mr-3 flex-shrink-0\" />\n          <div>\n            <h3 className=\"text-sm font-medium text-red-800\">ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h3>\n            <p className=\"text-sm text-red-700 mt-1\">{error}</p>\n          </div>\n          <button\n            onClick={() => setError('')}\n            className=\"ml-auto text-red-600 hover:text-red-800\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n      )}\n\n      {/* æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}\n      {success && (\n        <div className=\"mb-6 bg-green-50 border border-green-200 rounded-lg p-4 flex items-start animate-fade-in\">\n          <CheckCircle2 className=\"h-5 w-5 text-green-600 mt-0.5 mr-3 flex-shrink-0\" />\n          <div>\n            <h3 className=\"text-sm font-medium text-green-800\">æˆåŠŸ</h3>\n            <p className=\"text-sm text-green-700 mt-1\">{success}</p>\n          </div>\n        </div>\n      )}\n\n      {/* æœªæ‰¿èªè­¦å‘Š */}\n      {!isVerified && (\n        <div className=\"mb-6 bg-yellow-50 border border-yellow-300 rounded-lg p-4 flex items-start\">\n          <Shield className=\"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0\" />\n          <div className=\"flex-1\">\n            <h3 className=\"text-sm font-medium text-yellow-800\">è¨±å¯è¨¼ã®æ‰¿èªãŒå¿…è¦ã§ã™</h3>\n            <p className=\"text-sm text-yellow-700 mt-1\">\n              {verificationStatus === 'PENDING' \n                ? 'è¨±å¯è¨¼ã®å¯©æŸ»ãŒå®Œäº†ã™ã‚‹ã¾ã§ã€è·ç‰©ã®ç™»éŒ²ã¯ã§ãã¾ã›ã‚“ã€‚è¨±å¯è¨¼ãƒšãƒ¼ã‚¸ã§å¿…è¦æ›¸é¡ã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚'\n                : 'è¨±å¯è¨¼ãŒå´ä¸‹ã•ã‚Œã¦ã„ã¾ã™ã€‚è¨±å¯è¨¼ãƒšãƒ¼ã‚¸ã§å†æå‡ºã—ã¦ãã ã•ã„ã€‚'}\n            </p>\n            <button\n              onClick={() => router.push('/dashboard/verification')}\n              className=\"mt-2 text-sm text-yellow-800 underline hover:text-yellow-900\"\n            >\n              è¨±å¯è¨¼ãƒšãƒ¼ã‚¸ã¸ç§»å‹• â†’\n            </button>\n          </div>\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit} className=\"space-y-8\">\n        {/* åŸºæœ¬æƒ…å ± */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n            <Package className=\"h-5 w-5 mr-2\" />\n            åŸºæœ¬æƒ…å ±\n          </h2>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                è·ç‰©å <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.cargoName}\n                onChange={(e) => handleInputChange('cargoName', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: ç²¾å¯†æ©Ÿæ¢°éƒ¨å“\"\n                required\n              />\n            </div>\n            \n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">è·ç‰©èª¬æ˜</label>\n              <textarea\n                value={formData.cargoDescription}\n                onChange={(e) => handleInputChange('cargoDescription', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                rows={3}\n                placeholder=\"è·ç‰©ã®è©³ç´°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                é‡é‡ (kg) <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={formData.cargoWeight}\n                onChange={(e) => handleInputChange('cargoWeight', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: 1000\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">å®¹ç© (mÂ³)</label>\n              <input\n                type=\"number\"\n                step=\"0.01\"\n                value={formData.cargoVolume}\n                onChange={(e) => handleInputChange('cargoVolume', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: 10\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">è·ç‰©ä¾¡æ ¼ (å††)</label>\n              <input\n                type=\"number\"\n                step=\"1\"\n                value={formData.cargoValue}\n                onChange={(e) => handleInputChange('cargoValue', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: 500000\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* å‡ºç™ºåœ°æƒ…å ± */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n            <MapPin className=\"h-5 w-5 mr-2\" />\n            å‡ºç™ºåœ°æƒ…å ±\n          </h2>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                éƒµä¾¿ç•ªå· <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.pickupPostalCode}\n                onChange={(e) => handleInputChange('pickupPostalCode', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: 100-0001\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                éƒ½é“åºœçœŒ <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.pickupPrefecture}\n                onChange={(e) => handleInputChange('pickupPrefecture', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                {prefectures.map(pref => (\n                  <option key={pref} value={pref}>{pref}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                å¸‚åŒºç”ºæ‘ <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.pickupCity}\n                onChange={(e) => handleInputChange('pickupCity', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: åƒä»£ç”°åŒº\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                ä½æ‰€ <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.pickupAddress}\n                onChange={(e) => handleInputChange('pickupAddress', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: åƒä»£ç”°1-1-1\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                é›†è·æ—¥ <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                value={formData.pickupDate}\n                onChange={(e) => handleInputChange('pickupDate', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              />\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">é›†è·æ™‚é–“å¸¯</label>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <input\n                  type=\"time\"\n                  value={formData.pickupTimeFrom}\n                  onChange={(e) => handleInputChange('pickupTimeFrom', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"é–‹å§‹æ™‚é–“\"\n                />\n                <input\n                  type=\"time\"\n                  value={formData.pickupTimeTo}\n                  onChange={(e) => handleInputChange('pickupTimeTo', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"çµ‚äº†æ™‚é–“\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* é…é€å…ˆæƒ…å ± */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n            <MapPin className=\"h-5 w-5 mr-2\" />\n            é…é€å…ˆæƒ…å ±\n          </h2>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                éƒµä¾¿ç•ªå· <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.deliveryPostalCode}\n                onChange={(e) => handleInputChange('deliveryPostalCode', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: 150-0001\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                éƒ½é“åºœçœŒ <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.deliveryPrefecture}\n                onChange={(e) => handleInputChange('deliveryPrefecture', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                {prefectures.map(pref => (\n                  <option key={pref} value={pref}>{pref}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                å¸‚åŒºç”ºæ‘ <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.deliveryCity}\n                onChange={(e) => handleInputChange('deliveryCity', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: æ¸‹è°·åŒº\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                ä½æ‰€ <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={formData.deliveryAddress}\n                onChange={(e) => handleInputChange('deliveryAddress', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: æ¸‹è°·1-1-1\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                é…é€æ—¥ <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                value={formData.deliveryDate}\n                onChange={(e) => handleInputChange('deliveryDate', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              />\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">é…é€æ™‚é–“å¸¯</label>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <input\n                  type=\"time\"\n                  value={formData.deliveryTimeFrom}\n                  onChange={(e) => handleInputChange('deliveryTimeFrom', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"é–‹å§‹æ™‚é–“\"\n                />\n                <input\n                  type=\"time\"\n                  value={formData.deliveryTimeTo}\n                  onChange={(e) => handleInputChange('deliveryTimeTo', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"çµ‚äº†æ™‚é–“\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* é…é€æ¡ä»¶ */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n            <Truck className=\"h-5 w-5 mr-2\" />\n            é…é€æ¡ä»¶\n          </h2>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                å¿…è¦è»Šä¸¡ã‚¿ã‚¤ãƒ— <span className=\"text-red-500\">*</span>\n              </label>\n              <select\n                value={formData.requiredVehicleType}\n                onChange={(e) => handleInputChange('requiredVehicleType', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                required\n              >\n                <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                {vehicleTypes.map(type => (\n                  <option key={type} value={type}>{type}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ¸©åº¦ç®¡ç†</label>\n              <input\n                type=\"text\"\n                value={formData.temperature}\n                onChange={(e) => handleInputChange('temperature', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: -5â„ƒã€œ5â„ƒ\"\n              />\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-3\">è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³</label>\n              <div className=\"space-y-3\">\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.needsHelper}\n                    onChange={(e) => handleInputChange('needsHelper', e.target.checked)}\n                    className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                  />\n                  <span className=\"ml-2 text-sm text-gray-700\">è·å½¹ä½œæ¥­å“¡ãŒå¿…è¦</span>\n                </label>\n                <label className=\"flex items-center\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.needsLiftGate}\n                    onChange={(e) => handleInputChange('needsLiftGate', e.target.checked)}\n                    className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                  />\n                  <span className=\"ml-2 text-sm text-gray-700\">ãƒ‘ãƒ¯ãƒ¼ã‚²ãƒ¼ãƒˆãŒå¿…è¦</span>\n                </label>\n              </div>\n            </div>\n\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">ç‰¹è¨˜äº‹é …</label>\n              <textarea\n                value={formData.specialInstructions}\n                onChange={(e) => handleInputChange('specialInstructions', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                rows={3}\n                placeholder=\"ãã®ä»–ã®è¦æœ›ã‚„æ³¨æ„äº‹é …ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* äºˆç®— */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n            <DollarSign className=\"h-5 w-5 mr-2\" />\n            äºˆç®—\n          </h2>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                äºˆç®— (å††) <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"number\"\n                step=\"1\"\n                value={formData.budget}\n                onChange={(e) => handleInputChange('budget', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: 50000\"\n                required\n              />\n            </div>\n          </div>\n        </div>\n\n        {/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */}\n        <div className=\"flex justify-end gap-4\">\n          <button\n            type=\"button\"\n            onClick={() => router.push('/dashboard/my-shipments')}\n            className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex items-center\"\n            disabled={loading}\n          >\n            <X className=\"h-4 w-4 mr-2\" />\n            ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n          </button>\n          <button\n            type=\"submit\"\n            className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed\"\n            disabled={loading}\n          >\n            {loading ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                ç™»éŒ²ä¸­...\n              </>\n            ) : (\n              <>\n                <Save className=\"h-4 w-4 mr-2\" />\n                ç™»éŒ²ã™ã‚‹\n              </>\n            )}\n          </button>\n        </div>\n      </form>\n    </DashboardLayout>\n  )\n}\n","size_bytes":26691},"src/components/DashboardHeader.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Logo from '@/components/Logo'\nimport StatsDisplay from '@/components/StatsDisplay'\nimport { Bell, User, User as UserIcon } from 'lucide-react'\n\ninterface DashboardHeaderProps {\n  user?: any\n}\n\nexport default function DashboardHeader({ user }: DashboardHeaderProps) {\n  const router = useRouter()\n  const [unreadCount, setUnreadCount] = useState(0)\n\n  useEffect(() => {\n    fetchUnreadCount()\n    // 30ç§’ã”ã¨ã«æœªèª­ä»¶æ•°ã‚’æ›´æ–°\n    const interval = setInterval(fetchUnreadCount, 30000)\n    return () => clearInterval(interval)\n  }, [])\n\n  const fetchUnreadCount = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      if (!token) return\n\n      const response = await fetch('/api/notifications', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setUnreadCount(data.unreadCount || 0)\n      }\n    } catch (error) {\n      console.error('Fetch unread count error:', error)\n    }\n  }\n\n  return (\n    <header className=\"bg-white shadow-sm border-b px-6 py-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-6\">\n          <StatsDisplay />\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          <button \n            onClick={() => router.push('/dashboard')}\n            className=\"text-gray-600 hover:text-gray-800\"\n          >\n            ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰\n          </button>\n          <button \n            onClick={() => router.push('/contact')}\n            className=\"text-gray-600 hover:text-gray-800\"\n          >\n            ãŠå•ã„åˆã‚ã›\n          </button>\n          <button \n            onClick={() => router.push('/dashboard/notifications')}\n            className=\"relative\"\n          >\n            <Bell className=\"h-5 w-5 text-gray-600 hover:text-gray-800\" />\n            {unreadCount > 0 && (\n              <span className=\"absolute -top-1 -right-1 h-5 w-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center\">\n                {unreadCount > 9 ? '9+' : unreadCount}\n              </span>\n            )}\n          </button>\n          <div \n            onClick={() => router.push('/dashboard/profile')}\n            className=\"flex items-center space-x-2 cursor-pointer hover:bg-gray-100 rounded-lg px-2 py-1\"\n          >\n            <User className=\"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center\">\n              <UserIcon className=\"h-4 w-4\" />\n            </User>\n            <span className=\"text-gray-700\">{user?.contactPerson}</span>\n          </div>\n        </div>\n      </div>\n    </header>\n  )\n}\n","size_bytes":2800},"src/app/dashboard/settings/credit-info/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Shield, \n  TrendingUp, \n  BarChart3, \n  CheckCircle, \n  AlertCircle, \n  Clock, \n  Star,\n  Target,\n  Award,\n  FileText,\n  Upload,\n  Download\n} from 'lucide-react'\n\nexport default function CreditInfoPage() {\n  const [user, setUser] = useState<any>(null)\n  const [creditScore, setCreditScore] = useState(85)\n  const [creditHistory, setCreditHistory] = useState([\n    { date: '2024-01-15', action: 'å–å¼•å®Œäº†', points: +5, description: 'å¤§å‹è²¨ç‰©é…é€å®Œäº†' },\n    { date: '2024-01-10', action: 'æ”¯æ‰•ã„é…å»¶', points: -10, description: 'æ”¯æ‰•ã„ãŒ3æ—¥é…å»¶' },\n    { date: '2024-01-05', action: 'å–å¼•å®Œäº†', points: +3, description: 'å†·è”µè²¨ç‰©é…é€å®Œäº†' },\n    { date: '2023-12-28', action: 'å–å¼•å®Œäº†', points: +5, description: 'æ€¥ä¾¿é…é€å®Œäº†' },\n    { date: '2023-12-20', action: 'è©•ä¾¡å‘ä¸Š', points: +2, description: 'é¡§å®¢ã‹ã‚‰ã®é«˜è©•ä¾¡' }\n  ])\n\n  useEffect(() => {\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      const userProfile = JSON.parse(userData)\n      setUser(userProfile)\n    }\n  }, [])\n\n  const getCreditScoreColor = (score: number) => {\n    if (score >= 90) return 'text-green-600 bg-green-100'\n    if (score >= 80) return 'text-blue-600 bg-blue-100'\n    if (score >= 70) return 'text-yellow-600 bg-yellow-100'\n    return 'text-red-600 bg-red-100'\n  }\n\n  const getCreditScoreLevel = (score: number) => {\n    if (score >= 90) return 'å„ªç§€'\n    if (score >= 80) return 'è‰¯å¥½'\n    if (score >= 70) return 'æ™®é€š'\n    return 'è¦æ”¹å–„'\n  }\n\n  const creditFactors = [\n    { name: 'æ”¯æ‰•ã„å±¥æ­´', score: 95, weight: 35, description: 'éå»ã®æ”¯æ‰•ã„å®Ÿç¸¾' },\n    { name: 'å–å¼•é‡', score: 80, weight: 25, description: 'æœˆé–“å–å¼•é‡‘é¡' },\n    { name: 'ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“', score: 75, weight: 20, description: 'å¹³å‡å¿œç­”æ™‚é–“' },\n    { name: 'å®Œäº†ç‡', score: 93, weight: 15, description: 'å–å¼•å®Œäº†ç‡' },\n    { name: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼è©•ä¾¡', score: 88, weight: 5, description: 'å–å¼•ç›¸æ‰‹ã‹ã‚‰ã®è©•ä¾¡' }\n  ]\n\n  const improvementTips = [\n    'æ”¯æ‰•ã„ã‚’æœŸæ—¥é€šã‚Šã«è¡Œã†ã“ã¨ã§ä¿¡ç”¨ã‚¹ã‚³ã‚¢ãŒå‘ä¸Šã—ã¾ã™',\n    'å®šæœŸçš„ãªå–å¼•ã§å–å¼•é‡ã‚’å¢—ã‚„ã™ã¨ã‚¹ã‚³ã‚¢ãŒä¸ŠãŒã‚Šã¾ã™',\n    'è¿…é€Ÿãªãƒ¬ã‚¹ãƒãƒ³ã‚¹ã§å–å¼•ç›¸æ‰‹ã®ä¿¡é ¼ã‚’ç²å¾—ã—ã¾ã—ã‚‡ã†',\n    'é«˜å“è³ªãªã‚µãƒ¼ãƒ“ã‚¹ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼è©•ä¾¡ã‚’å‘ä¸Šã•ã›ã¾ã—ã‚‡ã†',\n    'ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’å……å®Ÿã•ã›ã¦ä¿¡é ¼æ€§ã‚’é«˜ã‚ã¾ã—ã‚‡ã†'\n  ]\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">ä¿¡ç”¨æƒ…å ±</h1>\n        <p className=\"text-gray-600\">ã‚ãªãŸã®ä¿¡ç”¨ã‚¹ã‚³ã‚¢ã¨å–å¼•å±¥æ­´ã‚’ç¢ºèªã§ãã¾ã™</p>\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* ä¿¡ç”¨ã‚¹ã‚³ã‚¢æ¦‚è¦ */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <Shield className=\"h-5 w-5 mr-2\" />\n              ä¿¡ç”¨ã‚¹ã‚³ã‚¢æ¦‚è¦\n            </h2>\n          </div>\n          <div className=\"p-6\">\n            <div className=\"text-center mb-6\">\n              <div className={`inline-flex items-center px-6 py-3 rounded-full text-2xl font-bold ${getCreditScoreColor(creditScore)}`}>\n                {creditScore}ç‚¹\n              </div>\n              <p className=\"text-sm text-gray-600 mt-2\">\n                ãƒ¬ãƒ™ãƒ«: {getCreditScoreLevel(creditScore)}\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-blue-600\">42</div>\n                <div className=\"text-sm text-gray-600\">å®Œäº†å–å¼•æ•°</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-green-600\">98%</div>\n                <div className=\"text-sm text-gray-600\">å®Œäº†ç‡</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-2xl font-bold text-purple-600\">4.2</div>\n                <div className=\"text-sm text-gray-600\">å¹³å‡è©•ä¾¡</div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* ä¿¡ç”¨ã‚¹ã‚³ã‚¢è©³ç´° */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <BarChart3 className=\"h-5 w-5 mr-2\" />\n              ä¿¡ç”¨ã‚¹ã‚³ã‚¢è©³ç´°\n            </h2>\n          </div>\n          <div className=\"p-6\">\n            <div className=\"space-y-4\">\n              {creditFactors.map((factor, index) => (\n                <div key={index} className=\"space-y-2\">\n                  <div className=\"flex justify-between items-center\">\n                    <div>\n                      <span className=\"text-sm font-medium text-gray-700\">{factor.name}</span>\n                      <span className=\"text-xs text-gray-500 ml-2\">({factor.weight}%)</span>\n                    </div>\n                    <span className=\"text-sm font-semibold text-gray-900\">{factor.score}ç‚¹</span>\n                  </div>\n                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                    <div \n                      className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                      style={{ width: `${factor.score}%` }}\n                    ></div>\n                  </div>\n                  <p className=\"text-xs text-gray-500\">{factor.description}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* å–å¼•å±¥æ­´ */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <Clock className=\"h-5 w-5 mr-2\" />\n              å–å¼•å±¥æ­´\n            </h2>\n          </div>\n          <div className=\"p-6\">\n            <div className=\"space-y-4\">\n              {creditHistory.map((history, index) => (\n                <div key={index} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\">\n                  <div className=\"flex items-center space-x-4\">\n                    <div className={`w-8 h-8 rounded-full flex items-center justify-center ${\n                      history.points > 0 ? 'bg-green-100' : 'bg-red-100'\n                    }`}>\n                      {history.points > 0 ? (\n                        <CheckCircle className=\"h-4 w-4 text-green-600\" />\n                      ) : (\n                        <AlertCircle className=\"h-4 w-4 text-red-600\" />\n                      )}\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium text-gray-900\">{history.action}</p>\n                      <p className=\"text-xs text-gray-500\">{history.description}</p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className={`text-sm font-semibold ${\n                      history.points > 0 ? 'text-green-600' : 'text-red-600'\n                    }`}>\n                      {history.points > 0 ? '+' : ''}{history.points}pt\n                    </p>\n                    <p className=\"text-xs text-gray-500\">{history.date}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* ã‚¹ã‚³ã‚¢å‘ä¸Šã®ãƒ’ãƒ³ãƒˆ */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <TrendingUp className=\"h-5 w-5 mr-2\" />\n              ã‚¹ã‚³ã‚¢å‘ä¸Šã®ãƒ’ãƒ³ãƒˆ\n            </h2>\n          </div>\n          <div className=\"p-6\">\n            <div className=\"space-y-3\">\n              {improvementTips.map((tip, index) => (\n                <div key={index} className=\"flex items-start space-x-3\">\n                  <div className=\"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5\">\n                    <span className=\"text-xs font-semibold text-blue-600\">{index + 1}</span>\n                  </div>\n                  <p className=\"text-sm text-gray-700\">{tip}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* è¨¼æ˜æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <FileText className=\"h-5 w-5 mr-2\" />\n              è¨¼æ˜æ›¸é¡ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰\n            </h2>\n          </div>\n          <div className=\"p-6\">\n            <div className=\"space-y-4\">\n              <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n                <Upload className=\"h-8 w-8 text-gray-400 mx-auto mb-2\" />\n                <p className=\"text-sm text-gray-600 mb-2\">è¨¼æ˜æ›¸é¡ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„</p>\n                <p className=\"text-xs text-gray-500\">äº‹æ¥­è¨±å¯è¨¼ã€é‹é€äº‹æ¥­è¨±å¯è¨¼ã€ä¿é™ºè¨¼åˆ¸ãªã©</p>\n                <button className=\"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\">\n                  ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ\n                </button>\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"p-4 border border-gray-200 rounded-lg\">\n                  <h3 className=\"text-sm font-medium text-gray-900 mb-2\">äº‹æ¥­è¨±å¯è¨¼</h3>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-500\">æœªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</span>\n                    <button className=\"text-blue-600 hover:text-blue-800 text-sm\">\n                      ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰\n                    </button>\n                  </div>\n                </div>\n                \n                <div className=\"p-4 border border-gray-200 rounded-lg\">\n                  <h3 className=\"text-sm font-medium text-gray-900 mb-2\">é‹é€äº‹æ¥­è¨±å¯è¨¼</h3>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-500\">æœªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</span>\n                    <button className=\"text-blue-600 hover:text-blue-800 text-sm\">\n                      ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰\n                    </button>\n                  </div>\n                </div>\n                \n                <div className=\"p-4 border border-gray-200 rounded-lg\">\n                  <h3 className=\"text-sm font-medium text-gray-900 mb-2\">ä¿é™ºè¨¼åˆ¸</h3>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-500\">æœªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</span>\n                    <button className=\"text-blue-600 hover:text-blue-800 text-sm\">\n                      ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰\n                    </button>\n                  </div>\n                </div>\n                \n                <div className=\"p-4 border border-gray-200 rounded-lg\">\n                  <h3 className=\"text-sm font-medium text-gray-900 mb-2\">æ³•äººç•ªå·è¨¼æ˜æ›¸</h3>\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-500\">æœªã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</span>\n                    <button className=\"text-blue-600 hover:text-blue-800 text-sm\">\n                      ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n\n","size_bytes":12175},"src/components/DashboardSidebar.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Logo from '@/components/Logo'\nimport { \n  Package, \n  Search, \n  Truck, \n  Building2, \n  Users, \n  Settings, \n  FileText, \n  CheckCircle,\n  ChevronDown,\n  ChevronRight,\n  Plus,\n  Bookmark,\n  History,\n  Shield,\n  CreditCard,\n  LayoutDashboard\n} from 'lucide-react'\n\ninterface DashboardSidebarProps {\n  onNavigate?: () => void\n}\n\nexport default function DashboardSidebar({ onNavigate }: DashboardSidebarProps = {}) {\n  const router = useRouter()\n  const [shipmentSearchOpen, setShipmentSearchOpen] = useState(false)\n  const [myShipmentsOpen, setMyShipmentsOpen] = useState(false)\n  const [adminMenuOpen, setAdminMenuOpen] = useState(false)\n  const [isAdmin, setIsAdmin] = useState(false)\n\n  useEffect(() => {\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      const user = JSON.parse(userData)\n      setIsAdmin(user.isAdmin || false)\n    }\n  }, [])\n\n  const handleNavigation = (path: string) => {\n    router.push(path)\n    if (onNavigate) {\n      onNavigate()\n    }\n  }\n\n  return (\n    <div className=\"w-64 bg-white shadow-lg flex flex-col h-screen overflow-y-auto\">\n      {/* ãƒ­ã‚´ã‚¨ãƒªã‚¢ */}\n      <div className=\"p-6 border-b\">\n        <Logo linkable={false} />\n      </div>\n\n      {/* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */}\n      <nav className=\"flex-1 p-4 space-y-2\">\n        <div className=\"space-y-1\">\n          {/* è·ç‰©ã‚’æ¢ã™ */}\n          <div className=\"space-y-1\">\n            <button \n              onClick={() => setShipmentSearchOpen(!shipmentSearchOpen)}\n              className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center justify-between\"\n            >\n              <span className=\"flex items-center\">\n                <Search className=\"h-4 w-4 mr-3\" />\n                è·ç‰©ã‚’æ¢ã™\n              </span>\n              {shipmentSearchOpen ? (\n                <ChevronDown className=\"h-4 w-4\" />\n              ) : (\n                <ChevronRight className=\"h-4 w-4\" />\n              )}\n            </button>\n            {shipmentSearchOpen && (\n              <div className=\"ml-6 space-y-1\">\n                <button \n                  onClick={() => handleNavigation('/shipments/search')}\n                  className=\"w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex items-center text-sm\"\n                >\n                  <Search className=\"h-4 w-4 mr-3\" />\n                  è·ç‰©æ¤œç´¢\n                </button>\n                <button \n                  onClick={() => handleNavigation('/dashboard/saved-shipments')}\n                  className=\"w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex items-center text-sm\"\n                >\n                  <Bookmark className=\"h-4 w-4 mr-3\" />\n                  ä¿å­˜ã—ãŸè·ç‰©\n                </button>\n                <button \n                  onClick={() => handleNavigation('/dashboard/recent-shipments')}\n                  className=\"w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex items-center text-sm\"\n                >\n                  <History className=\"h-4 w-4 mr-3\" />\n                  æœ€è¿‘è¦‹ãŸè·ç‰©\n                </button>\n              </div>\n            )}\n          </div>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/limited-shipments')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <Package className=\"h-4 w-4 mr-3\" />\n            é™å®šè·ç‰©\n          </button>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/shipments/new')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <Plus className=\"h-4 w-4 mr-3\" />\n            è·ç‰©ç™»éŒ²\n          </button>\n          \n          {/* ãƒã‚¤è·ç‰©ãƒ»æˆç´„ */}\n          <div className=\"space-y-1\">\n            <button \n              onClick={() => setMyShipmentsOpen(!myShipmentsOpen)}\n              className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center justify-between\"\n            >\n              <span className=\"flex items-center\">\n                <Package className=\"h-4 w-4 mr-3\" />\n                ãƒã‚¤è·ç‰©ãƒ»æˆç´„\n              </span>\n              {myShipmentsOpen ? (\n                <ChevronDown className=\"h-4 w-4\" />\n              ) : (\n                <ChevronRight className=\"h-4 w-4\" />\n              )}\n            </button>\n            {myShipmentsOpen && (\n              <div className=\"ml-6 space-y-1\">\n                <button \n                  onClick={() => handleNavigation('/dashboard/my-shipments')}\n                  className=\"w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex items-center text-sm\"\n                >\n                  <Package className=\"h-4 w-4 mr-3\" />\n                  ç™»éŒ²ã—ãŸè·ç‰©\n                </button>\n                <button \n                  onClick={() => handleNavigation('/dashboard/contracted-shipments')}\n                  className=\"w-full text-left px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-lg flex items-center text-sm\"\n                >\n                  <CheckCircle className=\"h-4 w-4 mr-3\" />\n                  æˆç´„ã—ãŸè·ç‰©\n                </button>\n              </div>\n            )}\n          </div>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/vehicle-search')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <Truck className=\"h-4 w-4 mr-3\" />\n            ç©ºè»Šæ¤œç´¢\n          </button>\n\n          <button \n            onClick={() => handleNavigation('/vehicles/register')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <Plus className=\"h-4 w-4 mr-3\" />\n            ç©ºè»Šç™»éŒ²\n          </button>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/company-search')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <Building2 className=\"h-4 w-4 mr-3\" />\n            ä¼æ¥­æ¤œç´¢\n          </button>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/partners')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <Users className=\"h-4 w-4 mr-3\" />\n            å–å¼•å…ˆç®¡ç†\n          </button>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/transport-log')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <FileText className=\"h-4 w-4 mr-3\" />\n            å®Ÿé‹é€ä½“åˆ¶ç®¡ç†ç°¿\n          </button>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/verification')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <Shield className=\"h-4 w-4 mr-3\" />\n            è¨±å¯è¨¼ãƒ»èªè¨¼\n          </button>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/payment')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <CreditCard className=\"h-4 w-4 mr-3\" />\n            ãŠæ”¯æ‰•ã„\n          </button>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/services')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <Settings className=\"h-4 w-4 mr-3\" />\n            ä¾¿åˆ©ã‚µãƒ¼ãƒ“ã‚¹\n          </button>\n\n          <button \n            onClick={() => handleNavigation('/dashboard/settings')}\n            className=\"w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg flex items-center\"\n          >\n            <Settings className=\"h-4 w-4 mr-3\" />\n            è¨­å®š\n          </button>\n\n          {/* ç®¡ç†è€…ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}\n          {isAdmin && (\n            <div className=\"pt-4 mt-4 border-t border-gray-200 space-y-1\">\n              <div className=\"px-3 py-1 text-xs font-semibold text-gray-500 uppercase\">\n                ç®¡ç†è€…æ©Ÿèƒ½\n              </div>\n              <div className=\"space-y-1\">\n                <button \n                  onClick={() => setAdminMenuOpen(!adminMenuOpen)}\n                  className=\"w-full text-left px-3 py-2 text-red-700 hover:bg-red-50 rounded-lg flex items-center justify-between\"\n                >\n                  <span className=\"flex items-center\">\n                    <LayoutDashboard className=\"h-4 w-4 mr-3\" />\n                    Admin\n                  </span>\n                  {adminMenuOpen ? (\n                    <ChevronDown className=\"h-4 w-4\" />\n                  ) : (\n                    <ChevronRight className=\"h-4 w-4\" />\n                  )}\n                </button>\n                {adminMenuOpen && (\n                  <div className=\"ml-6 space-y-1\">\n                    <button \n                      onClick={() => handleNavigation('/admin')}\n                      className=\"w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg flex items-center text-sm\"\n                    >\n                      <LayoutDashboard className=\"h-4 w-4 mr-3\" />\n                      ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰\n                    </button>\n                    <button \n                      onClick={() => handleNavigation('/admin/users')}\n                      className=\"w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg flex items-center text-sm\"\n                    >\n                      <Users className=\"h-4 w-4 mr-3\" />\n                      ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†\n                    </button>\n                    <button \n                      onClick={() => handleNavigation('/admin/shipments')}\n                      className=\"w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg flex items-center text-sm\"\n                    >\n                      <Package className=\"h-4 w-4 mr-3\" />\n                      è·ç‰©ç®¡ç†\n                    </button>\n                    <button \n                      onClick={() => handleNavigation('/admin/verifications')}\n                      className=\"w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg flex items-center text-sm\"\n                    >\n                      <Shield className=\"h-4 w-4 mr-3\" />\n                      èªè¨¼ç®¡ç†\n                    </button>\n                    <button \n                      onClick={() => handleNavigation('/admin/payments')}\n                      className=\"w-full text-left px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg flex items-center text-sm\"\n                    >\n                      <CreditCard className=\"h-4 w-4 mr-3\" />\n                      æ±ºæ¸ˆç®¡ç†\n                    </button>\n                  </div>\n                )}\n              </div>\n            </div>\n          )}\n        </div>\n      </nav>\n    </div>\n  )\n}\n","size_bytes":11387},"src/app/dashboard/services/page.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Calculator, \n  MapPin, \n  Fuel, \n  Calendar, \n  Users, \n  Wrench,\n  DollarSign,\n  TrendingUp,\n  Clock,\n  Package,\n  FileText,\n  Download,\n  Upload,\n  BarChart3,\n  AlertCircle,\n  CheckCircle\n} from 'lucide-react'\n\ninterface Service {\n  id: string\n  title: string\n  description: string\n  icon: any\n  color: string\n  bgColor: string\n  status: 'active' | 'coming_soon'\n  link?: string\n}\n\nexport default function ServicesPage() {\n  const [activeTab, setActiveTab] = useState<'all' | 'tools' | 'reports' | 'management'>('all')\n\n  const services: Service[] = [\n    {\n      id: 'price-calc',\n      title: 'æ–™é‡‘è¦‹ç©ã‚‚ã‚Šè¨ˆç®—',\n      description: 'è·é›¢ã€é‡é‡ã€è»Šä¸¡ã‚¿ã‚¤ãƒ—ã‹ã‚‰é‹è³ƒã‚’è‡ªå‹•è¨ˆç®—',\n      icon: Calculator,\n      color: 'text-blue-600',\n      bgColor: 'bg-blue-50',\n      status: 'active',\n      link: '/dashboard/services/price-calculator'\n    },\n    {\n      id: 'distance-calc',\n      title: 'è·é›¢è¨ˆç®—ãƒ„ãƒ¼ãƒ«',\n      description: '2åœ°ç‚¹é–“ã®æœ€é©ãƒ«ãƒ¼ãƒˆã¨è·é›¢ã‚’è¨ˆç®—',\n      icon: MapPin,\n      color: 'text-green-600',\n      bgColor: 'bg-green-50',\n      status: 'active',\n      link: '/dashboard/services/distance-calculator'\n    },\n    {\n      id: 'fuel-calc',\n      title: 'ç‡ƒæ–™è²»è¨ˆç®—',\n      description: 'èµ°è¡Œè·é›¢ã¨ç‡ƒè²»ã‹ã‚‰ç‡ƒæ–™ã‚³ã‚¹ãƒˆã‚’ç®—å‡º',\n      icon: Fuel,\n      color: 'text-orange-600',\n      bgColor: 'bg-orange-50',\n      status: 'active',\n      link: '/dashboard/services/fuel-calculator'\n    },\n    {\n      id: 'schedule',\n      title: 'é…é€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†',\n      description: 'é…é€äºˆå®šã‚’ä¸€å…ƒç®¡ç†ã—ã€åŠ¹ç‡çš„ã«é‹ç”¨',\n      icon: Calendar,\n      color: 'text-purple-600',\n      bgColor: 'bg-purple-50',\n      status: 'coming_soon'\n    },\n    {\n      id: 'driver',\n      title: 'ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ç®¡ç†',\n      description: 'ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®ç¨¼åƒçŠ¶æ³ã‚„å‹¤æ€ ã‚’ç®¡ç†',\n      icon: Users,\n      color: 'text-indigo-600',\n      bgColor: 'bg-indigo-50',\n      status: 'coming_soon'\n    },\n    {\n      id: 'maintenance',\n      title: 'è»Šä¸¡ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è¨˜éŒ²',\n      description: 'è»Šä¸¡ã®ç‚¹æ¤œãƒ»æ•´å‚™å±¥æ­´ã‚’è¨˜éŒ²ãƒ»ç®¡ç†',\n      icon: Wrench,\n      color: 'text-red-600',\n      bgColor: 'bg-red-50',\n      status: 'coming_soon'\n    },\n    {\n      id: 'profit',\n      title: 'åç›Šåˆ†æãƒ¬ãƒãƒ¼ãƒˆ',\n      description: 'å£²ä¸Šãƒ»åˆ©ç›Šã‚’å¯è¦–åŒ–ã—ã€çµŒå–¶åˆ¤æ–­ã‚’ã‚µãƒãƒ¼ãƒˆ',\n      icon: TrendingUp,\n      color: 'text-teal-600',\n      bgColor: 'bg-teal-50',\n      status: 'coming_soon'\n    },\n    {\n      id: 'invoice',\n      title: 'è«‹æ±‚æ›¸è‡ªå‹•ä½œæˆ',\n      description: 'é…é€å®Ÿç¸¾ã‹ã‚‰è«‹æ±‚æ›¸ã‚’è‡ªå‹•ç”Ÿæˆ',\n      icon: FileText,\n      color: 'text-yellow-600',\n      bgColor: 'bg-yellow-50',\n      status: 'coming_soon'\n    },\n    {\n      id: 'performance',\n      title: 'ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ',\n      description: 'é…é€åŠ¹ç‡ã‚„ç¨¼åƒç‡ã‚’åˆ†æãƒ»æ”¹å–„ææ¡ˆ',\n      icon: BarChart3,\n      color: 'text-pink-600',\n      bgColor: 'bg-pink-50',\n      status: 'coming_soon'\n    }\n  ]\n\n  const filteredServices = services.filter(service => {\n    if (activeTab === 'all') return true\n    if (activeTab === 'tools') return ['price-calc', 'distance-calc', 'fuel-calc'].includes(service.id)\n    if (activeTab === 'reports') return ['profit', 'performance'].includes(service.id)\n    if (activeTab === 'management') return ['schedule', 'driver', 'maintenance', 'invoice'].includes(service.id)\n    return true\n  })\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">ä¾¿åˆ©ã‚µãƒ¼ãƒ“ã‚¹</h1>\n        <p className=\"text-gray-600\">ç‰©æµæ¥­å‹™ã‚’åŠ¹ç‡åŒ–ã™ã‚‹å„ç¨®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã”åˆ©ç”¨ã„ãŸã ã‘ã¾ã™</p>\n      </div>\n\n      {/* ã‚¿ãƒ–ãƒ¡ãƒ‹ãƒ¥ãƒ¼ */}\n      <div className=\"mb-6\">\n        <div className=\"flex space-x-2 overflow-x-auto\">\n          <button\n            onClick={() => setActiveTab('all')}\n            className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${\n              activeTab === 'all'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            ã™ã¹ã¦\n          </button>\n          <button\n            onClick={() => setActiveTab('tools')}\n            className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${\n              activeTab === 'tools'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            è¨ˆç®—ãƒ„ãƒ¼ãƒ«\n          </button>\n          <button\n            onClick={() => setActiveTab('reports')}\n            className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${\n              activeTab === 'reports'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            ãƒ¬ãƒãƒ¼ãƒˆãƒ»åˆ†æ\n          </button>\n          <button\n            onClick={() => setActiveTab('management')}\n            className={`px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${\n              activeTab === 'management'\n                ? 'bg-blue-600 text-white'\n                : 'bg-white text-gray-700 hover:bg-gray-100'\n            }`}\n          >\n            ç®¡ç†ãƒ„ãƒ¼ãƒ«\n          </button>\n        </div>\n      </div>\n\n      {/* ã‚µãƒ¼ãƒ“ã‚¹ã‚«ãƒ¼ãƒ‰ */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {filteredServices.map((service, index) => (\n          <div\n            key={service.id}\n            className={`bg-white rounded-lg shadow-sm border p-6 hover:shadow-md transition-all duration-300 ${\n              service.status === 'active' ? 'cursor-pointer hover:scale-105' : 'opacity-75'\n            }`}\n            onClick={() => {\n              if (service.status === 'active' && service.link) {\n                window.location.href = service.link\n              }\n            }}\n          >\n            <div className=\"flex items-start justify-between mb-4\">\n              <div className={`${service.bgColor} p-3 rounded-lg`}>\n                <service.icon className={`h-6 w-6 ${service.color}`} />\n              </div>\n              {service.status === 'coming_soon' && (\n                <span className=\"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full\">\n                  è¿‘æ—¥å…¬é–‹\n                </span>\n              )}\n              {service.status === 'active' && (\n                <span className=\"text-xs bg-green-100 text-green-600 px-2 py-1 rounded-full flex items-center\">\n                  <CheckCircle className=\"h-3 w-3 mr-1\" />\n                  åˆ©ç”¨å¯èƒ½\n                </span>\n              )}\n            </div>\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">{service.title}</h3>\n            <p className=\"text-sm text-gray-600\">{service.description}</p>\n            {service.status === 'active' && (\n              <div className=\"mt-4 text-blue-600 text-sm font-medium flex items-center\">\n                ä»Šã™ãä½¿ã†\n                <svg className=\"w-4 h-4 ml-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n                </svg>\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* çµ±è¨ˆæƒ…å ± */}\n      <div className=\"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-blue-100\">åˆ©ç”¨å¯èƒ½ã‚µãƒ¼ãƒ“ã‚¹</span>\n            <CheckCircle className=\"h-5 w-5\" />\n          </div>\n          <div className=\"text-3xl font-bold\">3</div>\n          <div className=\"text-sm text-blue-100 mt-1\">è¨ˆç®—ãƒ„ãƒ¼ãƒ«</div>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg p-6 text-white\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-purple-100\">è¿‘æ—¥å…¬é–‹äºˆå®š</span>\n            <Clock className=\"h-5 w-5\" />\n          </div>\n          <div className=\"text-3xl font-bold\">6</div>\n          <div className=\"text-sm text-purple-100 mt-1\">æ–°æ©Ÿèƒ½æº–å‚™ä¸­</div>\n        </div>\n\n        <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-green-100\">åˆè¨ˆã‚µãƒ¼ãƒ“ã‚¹</span>\n            <Package className=\"h-5 w-5\" />\n          </div>\n          <div className=\"text-3xl font-bold\">9</div>\n          <div className=\"text-sm text-green-100 mt-1\">æ¥­å‹™åŠ¹ç‡åŒ–ãƒ„ãƒ¼ãƒ«</div>\n        </div>\n      </div>\n\n      {/* ãŠçŸ¥ã‚‰ã› */}\n      <div className=\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\">\n        <div className=\"flex items-start\">\n          <AlertCircle className=\"h-5 w-5 text-blue-600 mt-0.5 mr-3\" />\n          <div>\n            <h3 className=\"text-lg font-semibold text-blue-900 mb-2\">æ–°ã‚µãƒ¼ãƒ“ã‚¹ç¶šã€…è¿½åŠ äºˆå®šï¼</h3>\n            <p className=\"text-blue-700 text-sm\">\n              2024å¹´2æœˆã‚ˆã‚Šã€é…é€ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†ã€ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ç®¡ç†ãªã©ã€ã•ã‚‰ã«ä¾¿åˆ©ãªæ©Ÿèƒ½ã‚’é †æ¬¡ãƒªãƒªãƒ¼ã‚¹äºˆå®šã§ã™ã€‚\n              ç‰©æµæ¥­å‹™ã®åŠ¹ç‡åŒ–ã‚’ã•ã‚‰ã«ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚\n            </p>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":9690},"src/app/api/admin/auth/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyAdminSession, generateAdminToken } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\n// ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³\nexport async function POST(request: NextRequest) {\n  try {\n    const { email, password } = await request.json()\n\n    if (!email || !password) {\n      return NextResponse.json(\n        { error: 'ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™' },\n        { status: 400 }\n      )\n    }\n\n    // ç®¡ç†è€…ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ¤œç´¢\n    const admin = await prisma.user.findUnique({\n      where: { \n        email,\n        userType: 'ADMIN'\n      }\n    })\n\n    if (!admin) {\n      return NextResponse.json(\n        { error: 'ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' },\n        { status: 401 }\n      )\n    }\n\n    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æ¤œè¨¼ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯bcryptã‚’ä½¿ç”¨ï¼‰\n    // ãƒ‡ãƒ¢ç”¨ã«ç°¡å˜ãªæ¤œè¨¼\n    if (password !== 'admin123' && password !== 'password') {\n      return NextResponse.json(\n        { error: 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“' },\n        { status: 401 }\n      )\n    }\n\n    // ç®¡ç†è€…ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ\n    const token = generateAdminToken({\n      userId: admin.id,\n      email: admin.email,\n      userType: 'ADMIN'\n    })\n\n    const response = NextResponse.json({\n      message: 'ç®¡ç†è€…ãƒ­ã‚°ã‚¤ãƒ³ã«æˆåŠŸã—ã¾ã—ãŸ',\n      user: {\n        userId: admin.id,\n        email: admin.email,\n        companyName: admin.companyName,\n        userType: admin.userType,\n        contactPerson: admin.contactPerson\n      }\n    })\n\n    // ã‚»ã‚­ãƒ¥ã‚¢ãªHTTPOnlyã‚¯ãƒƒã‚­ãƒ¼ã«ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®š\n    response.cookies.set('admin_token', token, {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'strict',\n      maxAge: 24 * 60 * 60 // 24æ™‚é–“\n    })\n\n    return response\n  } catch (error) {\n    console.error('Admin login error:', error)\n    return NextResponse.json(\n      { error: 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' },\n      { status: 500 }\n    )\n  }\n}\n\n// ç®¡ç†è€…èªè¨¼çŠ¶æ…‹ç¢ºèª\nexport async function GET(request: NextRequest) {\n  try {\n    const token = request.cookies.get('admin_token')?.value\n\n    if (!token) {\n      return NextResponse.json(\n        { error: 'èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' },\n        { status: 401 }\n      )\n    }\n\n    const payload = verifyAdminSession(token)\n\n    if (!payload) {\n      return NextResponse.json(\n        { error: 'ç„¡åŠ¹ãªèªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' },\n        { status: 401 }\n      )\n    }\n\n    const admin = await prisma.user.findUnique({\n      where: { \n        id: payload.userId,\n        userType: 'ADMIN'\n      },\n      select: {\n        id: true,\n        email: true,\n        companyName: true,\n        userType: true,\n        contactPerson: true,\n        createdAt: true\n      }\n    })\n\n    if (!admin) {\n      return NextResponse.json(\n        { error: 'ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' },\n        { status: 404 }\n      )\n    }\n\n    return NextResponse.json({\n      message: 'èªè¨¼æˆåŠŸ',\n      user: admin\n    })\n  } catch (error) {\n    console.error('Admin auth check error:', error)\n    return NextResponse.json(\n      { error: 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' },\n      { status: 500 }\n    )\n  }\n}\n\n// ç®¡ç†è€…ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ\nexport async function DELETE(request: NextRequest) {\n  try {\n    const response = NextResponse.json({\n      message: 'ç®¡ç†è€…ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸ'\n    })\n\n    // ã‚¯ãƒƒã‚­ãƒ¼ã‚’å‰Šé™¤\n    response.cookies.set('admin_token', '', {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === 'production',\n      sameSite: 'strict',\n      maxAge: 0\n    })\n\n    return response\n  } catch (error) {\n    console.error('Admin logout error:', error)\n    return NextResponse.json(\n      { error: 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":3937},"src/app/offers/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Navbar from '@/components/Navbar'\nimport { Package, MapPin, DollarSign, Clock, Check, X } from 'lucide-react'\n\nexport default function OffersPage() {\n  const router = useRouter()\n  const [user, setUser] = useState<any>(null)\n  const [offers, setOffers] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [filter, setFilter] = useState('ALL')\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    const userData = localStorage.getItem('user')\n    \n    if (!token || !userData) {\n      router.push('/login')\n      return\n    }\n\n    setUser(JSON.parse(userData))\n    fetchOffers(token)\n  }, [router])\n\n  const fetchOffers = async (token: string) => {\n    try {\n      const response = await fetch('/api/offers', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setOffers(data.data)\n      }\n    } catch (error) {\n      console.error('Failed to fetch offers:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleAcceptOffer = async (offerId: string) => {\n    const token = localStorage.getItem('token')\n    if (!token) return\n\n    try {\n      const response = await fetch(`/api/offers/${offerId}/accept`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        fetchOffers(token)\n      }\n    } catch (error) {\n      console.error('Failed to accept offer:', error)\n    }\n  }\n\n  const handleRejectOffer = async (offerId: string) => {\n    const token = localStorage.getItem('token')\n    if (!token) return\n\n    try {\n      const response = await fetch(`/api/offers/${offerId}/reject`, {\n        method: 'POST',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        fetchOffers(token)\n      }\n    } catch (error) {\n      console.error('Failed to reject offer:', error)\n    }\n  }\n\n  const getStatusBadge = (status: string) => {\n    const badges: Record<string, { bg: string; text: string; label: string }> = {\n      PENDING: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'ä¿ç•™ä¸­' },\n      ACCEPTED: { bg: 'bg-green-100', text: 'text-green-800', label: 'æ‰¿èªæ¸ˆã¿' },\n      REJECTED: { bg: 'bg-red-100', text: 'text-red-800', label: 'æ‹’å¦' },\n      CANCELLED: { bg: 'bg-gray-100', text: 'text-gray-800', label: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' },\n    }\n    const badge = badges[status] || badges.PENDING\n    return (\n      <span className={`px-3 py-1 rounded-full text-xs font-semibold ${badge.bg} ${badge.text}`}>\n        {badge.label}\n      </span>\n    )\n  }\n\n  const filteredOffers = offers.filter(offer => {\n    if (filter === 'ALL') return true\n    return offer.status === filter\n  })\n\n  if (!user) {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white\">\n      <Navbar />\n      \n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12\">\n        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n        <div className=\"mb-8 fade-in-up\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-2\">\n            {user.userType === 'SHIPPER' ? 'å—ã‘å–ã£ãŸã‚ªãƒ•ã‚¡ãƒ¼' : 'é€ä¿¡ã—ãŸã‚ªãƒ•ã‚¡ãƒ¼'}\n          </h1>\n          <p className=\"text-gray-600\">\n            {filteredOffers.length}ä»¶ã®ã‚ªãƒ•ã‚¡ãƒ¼\n          </p>\n        </div>\n\n        {/* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}\n        <div className=\"card mb-8 slide-in-left\">\n          <div className=\"flex flex-wrap gap-2\">\n            {['ALL', 'PENDING', 'ACCEPTED', 'REJECTED'].map((status) => (\n              <button\n                key={status}\n                onClick={() => setFilter(status)}\n                className={`px-4 py-2 rounded-xl font-semibold transition-all ${\n                  filter === status\n                    ? 'bg-gradient-to-r from-blue-600 to-cyan-500 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                {status === 'ALL' ? 'ã™ã¹ã¦' : getStatusBadge(status).props.children}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* ã‚ªãƒ•ã‚¡ãƒ¼ãƒªã‚¹ãƒˆ */}\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent\"></div>\n            <p className=\"text-gray-600 mt-4\">èª­ã¿è¾¼ã¿ä¸­...</p>\n          </div>\n        ) : filteredOffers.length === 0 ? (\n          <div className=\"card text-center py-12\">\n            <Package className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-600 text-lg\">ã‚ªãƒ•ã‚¡ãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"space-y-6\">\n            {filteredOffers.map((offer, index) => (\n              <div\n                key={offer.id}\n                className=\"card hover:shadow-xl transition-all fade-in-up\"\n                style={{animationDelay: `${index * 0.1}s`}}\n              >\n                <div className=\"flex flex-col lg:flex-row gap-6\">\n                  {/* å·¦å´: æ¡ˆä»¶æƒ…å ± */}\n                  <div className=\"flex-1\">\n                    <div className=\"flex justify-between items-start mb-4\">\n                      <h3 className=\"text-xl font-bold text-gray-900 flex-1 pr-4\">\n                        {offer.shipment.title}\n                      </h3>\n                      {getStatusBadge(offer.status)}\n                    </div>\n\n                    {/* ãƒ«ãƒ¼ãƒˆæƒ…å ± */}\n                    <div className=\"space-y-3 mb-4 bg-gray-50 p-4 rounded-xl\">\n                      <div className=\"flex items-start space-x-3\">\n                        <div className=\"bg-green-500 p-2 rounded-lg\">\n                          <MapPin className=\"h-4 w-4 text-white\" />\n                        </div>\n                        <div>\n                          <p className=\"text-xs text-gray-500 mb-1\">é›†è·</p>\n                          <p className=\"text-sm font-semibold text-gray-900\">\n                            {offer.shipment.pickupPrefecture} {offer.shipment.pickupLocation}\n                          </p>\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-start space-x-3\">\n                        <div className=\"bg-purple-500 p-2 rounded-lg\">\n                          <MapPin className=\"h-4 w-4 text-white\" />\n                        </div>\n                        <div>\n                          <p className=\"text-xs text-gray-500 mb-1\">é…é€å…ˆ</p>\n                          <p className=\"text-sm font-semibold text-gray-900\">\n                            {offer.shipment.deliveryPrefecture} {offer.shipment.deliveryLocation}\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* ã‚ªãƒ•ã‚¡ãƒ¼æƒ…å ± */}\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-xs text-gray-500 mb-1\">å¸Œæœ›é‹è³ƒ</p>\n                        <p className=\"text-lg font-bold text-gray-700\">\n                          Â¥{offer.shipment.budget?.toLocaleString() || 'æœªè¨­å®š'}\n                        </p>\n                      </div>\n                      <div>\n                        <p className=\"text-xs text-gray-500 mb-1\">ã‚ªãƒ•ã‚¡ãƒ¼é‡‘é¡</p>\n                        <p className=\"text-lg font-bold text-blue-600\">\n                          Â¥{offer.proposedPrice.toLocaleString()}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* å³å´: ã‚ªãƒ•ã‚¡ãƒ¼è©³ç´°ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ */}\n                  <div className=\"lg:w-80 space-y-4\">\n                    {/* é‹é€ä¼šç¤¾æƒ…å ± (è·ä¸»ã®å ´åˆ) */}\n                    {user.userType === 'SHIPPER' && (\n                      <div className=\"bg-blue-50 p-4 rounded-xl\">\n                        <p className=\"text-xs text-gray-600 mb-2\">é‹é€ä¼šç¤¾</p>\n                        <p className=\"font-bold text-gray-900\">{offer.carrier.companyName}</p>\n                        <p className=\"text-sm text-gray-600 mt-1\">{offer.carrier.contactPerson}</p>\n                      </div>\n                    )}\n\n                    {/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}\n                    {offer.message && (\n                      <div className=\"bg-gray-50 p-4 rounded-xl\">\n                        <p className=\"text-xs text-gray-600 mb-2\">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</p>\n                        <p className=\"text-sm text-gray-800\">{offer.message}</p>\n                      </div>\n                    )}\n\n                    {/* é…é€äºˆå®šæ—¥ */}\n                    <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                      <Clock className=\"h-4 w-4\" />\n                      <span>é…é€äºˆå®š: {new Date(offer.proposedDeliveryDate).toLocaleDateString('ja-JP')}</span>\n                    </div>\n\n                    {/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ (è·ä¸»ã§ä¿ç•™ä¸­ã®å ´åˆ) */}\n                    {user.userType === 'SHIPPER' && offer.status === 'PENDING' && (\n                      <div className=\"grid grid-cols-2 gap-3 pt-4 border-t border-gray-200\">\n                        <button\n                          onClick={() => handleRejectOffer(offer.id)}\n                          className=\"btn-secondary py-3 flex items-center justify-center space-x-2\"\n                        >\n                          <X className=\"h-4 w-4\" />\n                          <span>æ‹’å¦</span>\n                        </button>\n                        <button\n                          onClick={() => handleAcceptOffer(offer.id)}\n                          className=\"btn-primary py-3 flex items-center justify-center space-x-2\"\n                        >\n                          <Check className=\"h-4 w-4\" />\n                          <span>æ‰¿èª</span>\n                        </button>\n                      </div>\n                    )}\n\n                    {/* è©³ç´°ã‚’è¦‹ã‚‹ãƒœã‚¿ãƒ³ */}\n                    <button\n                      onClick={() => router.push(`/shipments/${offer.shipmentId}`)}\n                      className=\"w-full btn-secondary py-3\"\n                    >\n                      æ¡ˆä»¶è©³ç´°ã‚’è¦‹ã‚‹\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  )\n}\n","size_bytes":10700},"postcss.config.js":{"content":"module.exports = {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n\n","size_bytes":83},"src/app/settings/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Navbar from '@/components/Navbar'\nimport { Bell, Shield, Eye, Mail, Smartphone, Globe, Save, Check } from 'lucide-react'\n\nexport default function SettingsPage() {\n  const router = useRouter()\n  const [user, setUser] = useState<any>(null)\n  const [settings, setSettings] = useState({\n    emailNotifications: true,\n    pushNotifications: false,\n    smsNotifications: false,\n    publicProfile: false,\n    showContactInfo: true,\n    language: 'ja',\n    timezone: 'Asia/Tokyo',\n  })\n  const [saving, setSaving] = useState(false)\n  const [saved, setSaved] = useState(false)\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    const userData = localStorage.getItem('user')\n\n    if (!token || !userData) {\n      router.push('/login')\n      return\n    }\n\n    setUser(JSON.parse(userData))\n  }, [])\n\n  const handleSave = async () => {\n    setSaving(true)\n    try {\n      // å®Ÿéš›ã®APIå‘¼ã³å‡ºã—ã‚’ã“ã“ã«å®Ÿè£…\n      await new Promise(resolve => setTimeout(resolve, 1000)) // ãƒ€ãƒŸãƒ¼ã®é…å»¶\n      \n      setSaved(true)\n      setTimeout(() => setSaved(false), 3000)\n    } catch (error) {\n      console.error('Error saving settings:', error)\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  const handleSettingChange = (key: string, value: boolean | string) => {\n    setSettings({ ...settings, [key]: value })\n  }\n\n  return (\n    <div className=\"min-h-screen\">\n      <Navbar userType={user?.userType} />\n\n      <main className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\n        <div className=\"mb-6 sm:mb-8\">\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">è¨­å®š</h1>\n          <p className=\"text-gray-600 mt-2 text-sm sm:text-base\">ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã‚’ç®¡ç†ã§ãã¾ã™</p>\n        </div>\n\n        <div className=\"space-y-6\">\n          {/* é€šçŸ¥è¨­å®š */}\n          <div className=\"card\">\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 p-3 rounded-2xl\">\n                <Bell className=\"h-6 w-6 text-blue-600\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">é€šçŸ¥è¨­å®š</h2>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-sm sm:text-base font-semibold text-gray-900\">ãƒ¡ãƒ¼ãƒ«é€šçŸ¥</h3>\n                  <p className=\"text-xs sm:text-sm text-gray-600\">æ–°ã—ã„ã‚ªãƒ•ã‚¡ãƒ¼ã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€šçŸ¥</p>\n                </div>\n                <label className=\"relative inline-flex items-center cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.emailNotifications}\n                    onChange={(e) => handleSettingChange('emailNotifications', e.target.checked)}\n                    className=\"sr-only peer\"\n                  />\n                  <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                </label>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-sm sm:text-base font-semibold text-gray-900\">ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥</h3>\n                  <p className=\"text-xs sm:text-sm text-gray-600\">ãƒ–ãƒ©ã‚¦ã‚¶ã‹ã‚‰ã®é€šçŸ¥</p>\n                </div>\n                <label className=\"relative inline-flex items-center cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.pushNotifications}\n                    onChange={(e) => handleSettingChange('pushNotifications', e.target.checked)}\n                    className=\"sr-only peer\"\n                  />\n                  <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                </label>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-sm sm:text-base font-semibold text-gray-900\">SMSé€šçŸ¥</h3>\n                  <p className=\"text-xs sm:text-sm text-gray-600\">é‡è¦ãªé€šçŸ¥ã‚’SMSã§å—ã‘å–ã‚‹</p>\n                </div>\n                <label className=\"relative inline-flex items-center cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.smsNotifications}\n                    onChange={(e) => handleSettingChange('smsNotifications', e.target.checked)}\n                    className=\"sr-only peer\"\n                  />\n                  <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                </label>\n              </div>\n            </div>\n          </div>\n\n          {/* ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š */}\n          <div className=\"card\">\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 p-3 rounded-2xl\">\n                <Shield className=\"h-6 w-6 text-purple-600\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼è¨­å®š</h2>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-sm sm:text-base font-semibold text-gray-900\">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å…¬é–‹</h3>\n                  <p className=\"text-xs sm:text-sm text-gray-600\">ä»–ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’é–²è¦§å¯èƒ½</p>\n                </div>\n                <label className=\"relative inline-flex items-center cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.publicProfile}\n                    onChange={(e) => handleSettingChange('publicProfile', e.target.checked)}\n                    className=\"sr-only peer\"\n                  />\n                  <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                </label>\n              </div>\n\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-sm sm:text-base font-semibold text-gray-900\">é€£çµ¡å…ˆæƒ…å ±ã‚’è¡¨ç¤º</h3>\n                  <p className=\"text-xs sm:text-sm text-gray-600\">é›»è©±ç•ªå·ã¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’è¡¨ç¤º</p>\n                </div>\n                <label className=\"relative inline-flex items-center cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={settings.showContactInfo}\n                    onChange={(e) => handleSettingChange('showContactInfo', e.target.checked)}\n                    className=\"sr-only peer\"\n                  />\n                  <div className=\"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600\"></div>\n                </label>\n              </div>\n            </div>\n          </div>\n\n          {/* åœ°åŸŸãƒ»è¨€èªè¨­å®š */}\n          <div className=\"card\">\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 p-3 rounded-2xl\">\n                <Globe className=\"h-6 w-6 text-green-600\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">åœ°åŸŸãƒ»è¨€èªè¨­å®š</h2>\n            </div>\n\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">è¨€èª</label>\n                <select\n                  value={settings.language}\n                  onChange={(e) => handleSettingChange('language', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"\n                >\n                  <option value=\"ja\">æ—¥æœ¬èª</option>\n                  <option value=\"en\">English</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³</label>\n                <select\n                  value={settings.timezone}\n                  onChange={(e) => handleSettingChange('timezone', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"\n                >\n                  <option value=\"Asia/Tokyo\">æ±äº¬ (JST)</option>\n                  <option value=\"Asia/Seoul\">ã‚½ã‚¦ãƒ« (KST)</option>\n                  <option value=\"Asia/Shanghai\">ä¸Šæµ· (CST)</option>\n                </select>\n              </div>\n            </div>\n          </div>\n\n          {/* ä¿å­˜ãƒœã‚¿ãƒ³ */}\n          <div className=\"flex justify-end\">\n            <button\n              onClick={handleSave}\n              disabled={saving}\n              className=\"btn-primary flex items-center space-x-2 px-6 py-3\"\n            >\n              {saved ? (\n                <>\n                  <Check className=\"h-5 w-5\" />\n                  <span>ä¿å­˜å®Œäº†</span>\n                </>\n              ) : saving ? (\n                <>\n                  <Save className=\"h-5 w-5\" />\n                  <span>ä¿å­˜ä¸­...</span>\n                </>\n              ) : (\n                <>\n                  <Save className=\"h-5 w-5\" />\n                  <span>è¨­å®šã‚’ä¿å­˜</span>\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n","size_bytes":11374},"src/app/dashboard/settings/company-details/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Building2, \n  MapPin, \n  Phone, \n  Mail, \n  Globe, \n  Calendar, \n  Users, \n  FileText, \n  Save, \n  X, \n  Edit,\n  CheckCircle,\n  AlertCircle\n} from 'lucide-react'\n\nexport default function CompanyDetailsPage() {\n  const [editing, setEditing] = useState(false)\n  const [user, setUser] = useState<any>(null)\n  const [formData, setFormData] = useState({\n    companyName: '',\n    companyNameKana: '',\n    representativeName: '',\n    representativeNameKana: '',\n    businessType: '',\n    industry: '',\n    capital: '',\n    establishedDate: '',\n    employeeCount: '',\n    website: '',\n    description: '',\n    businessLicense: '',\n    transportLicense: '',\n    insuranceNumber: '',\n    taxId: ''\n  })\n\n  useEffect(() => {\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      const userProfile = JSON.parse(userData)\n      setUser(userProfile)\n      setFormData({\n        companyName: userProfile.companyName || '',\n        companyNameKana: userProfile.companyNameKana || '',\n        representativeName: userProfile.representativeName || '',\n        representativeNameKana: userProfile.representativeNameKana || '',\n        businessType: userProfile.businessType || '',\n        industry: userProfile.industry || '',\n        capital: userProfile.capital || '',\n        establishedDate: userProfile.establishedDate || '',\n        employeeCount: userProfile.employeeCount || '',\n        website: userProfile.website || '',\n        description: userProfile.description || '',\n        businessLicense: userProfile.businessLicense || '',\n        transportLicense: userProfile.transportLicense || '',\n        insuranceNumber: userProfile.insuranceNumber || '',\n        taxId: userProfile.taxId || ''\n      })\n    }\n  }, [])\n\n  const handleEdit = () => {\n    setEditing(true)\n  }\n\n  const handleCancel = () => {\n    setEditing(false)\n    if (user) {\n      setFormData({\n        companyName: user.companyName || '',\n        companyNameKana: user.companyNameKana || '',\n        representativeName: user.representativeName || '',\n        representativeNameKana: user.representativeNameKana || '',\n        businessType: user.businessType || '',\n        industry: user.industry || '',\n        capital: user.capital || '',\n        establishedDate: user.establishedDate || '',\n        employeeCount: user.employeeCount || '',\n        website: user.website || '',\n        description: user.description || '',\n        businessLicense: user.businessLicense || '',\n        transportLicense: user.transportLicense || '',\n        insuranceNumber: user.insuranceNumber || '',\n        taxId: user.taxId || ''\n      })\n    }\n  }\n\n  const handleSave = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/user/company-details', {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify(formData)\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to update company details')\n      }\n\n      const updatedUser = { ...user, ...formData }\n      setUser(updatedUser)\n      localStorage.setItem('user', JSON.stringify(updatedUser))\n      setEditing(false)\n      alert('ä¼æ¥­è©³ç´°æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸ')\n    } catch (error) {\n      console.error('Error updating company details:', error)\n      alert('ä¼æ¥­è©³ç´°æƒ…å ±ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  const handleInputChange = (field: string, value: string) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: value\n    }))\n  }\n\n  const businessTypes = [\n    'æ ªå¼ä¼šç¤¾', 'æœ‰é™ä¼šç¤¾', 'åˆåŒä¼šç¤¾', 'åˆè³‡ä¼šç¤¾', 'åˆåä¼šç¤¾', 'å€‹äººäº‹æ¥­ä¸»', 'ãã®ä»–'\n  ]\n\n  const industries = [\n    'ç‰©æµãƒ»é‹é€æ¥­', 'è£½é€ æ¥­', 'å°å£²æ¥­', 'å¸å£²æ¥­', 'å»ºè¨­æ¥­', 'ITãƒ»é€šä¿¡æ¥­', 'é‡‘èæ¥­', 'ä¸å‹•ç”£æ¥­', 'ãã®ä»–'\n  ]\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">ä¼æ¥­è©³ç´°æƒ…å ±</h1>\n            <p className=\"text-gray-600\">ä¼æ¥­ã®è©³ç´°æƒ…å ±ã‚’ç®¡ç†ã§ãã¾ã™</p>\n          </div>\n          <div className=\"flex space-x-2\">\n            {editing ? (\n              <>\n                <button\n                  onClick={handleSave}\n                  className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n                >\n                  <Save className=\"h-4 w-4\" />\n                  <span>ä¿å­˜</span>\n                </button>\n                <button\n                  onClick={handleCancel}\n                  className=\"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 flex items-center space-x-2\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  <span>ã‚­ãƒ£ãƒ³ã‚»ãƒ«</span>\n                </button>\n              </>\n            ) : (\n              <button\n                onClick={handleEdit}\n                className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n              >\n                <Edit className=\"h-4 w-4\" />\n                <span>ç·¨é›†</span>\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* åŸºæœ¬æƒ…å ± */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <Building2 className=\"h-5 w-5 mr-2\" />\n              åŸºæœ¬æƒ…å ±\n            </h2>\n          </div>\n          <div className=\"p-6 space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä¼šç¤¾å *</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.companyName}\n                    onChange={(e) => handleInputChange('companyName', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.companyName || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä¼šç¤¾åï¼ˆã‚«ãƒŠï¼‰</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.companyNameKana}\n                    onChange={(e) => handleInputChange('companyNameKana', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ã‚«ãƒ–ã‚·ã‚­ã‚¬ã‚¤ã‚·ãƒ£ã‚µãƒ³ãƒ—ãƒ«\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.companyNameKana || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä»£è¡¨è€…å *</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.representativeName}\n                    onChange={(e) => handleInputChange('representativeName', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"å±±ç”°å¤ªéƒ\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.representativeName || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä»£è¡¨è€…åï¼ˆã‚«ãƒŠï¼‰</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.representativeNameKana}\n                    onChange={(e) => handleInputChange('representativeNameKana', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ãƒ¤ãƒãƒ€ã‚¿ãƒ­ã‚¦\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.representativeNameKana || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ³•äººæ ¼ *</label>\n                {editing ? (\n                  <select\n                    value={formData.businessType}\n                    onChange={(e) => handleInputChange('businessType', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                    {businessTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                ) : (\n                  <p className=\"text-gray-900\">{formData.businessType || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ¥­ç¨® *</label>\n                {editing ? (\n                  <select\n                    value={formData.industry}\n                    onChange={(e) => handleInputChange('industry', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                    {industries.map(industry => (\n                      <option key={industry} value={industry}>{industry}</option>\n                    ))}\n                  </select>\n                ) : (\n                  <p className=\"text-gray-900\">{formData.industry || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">è³‡æœ¬é‡‘</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.capital}\n                    onChange={(e) => handleInputChange('capital', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"1000ä¸‡å††\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.capital || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">è¨­ç«‹æ—¥</label>\n                {editing ? (\n                  <input\n                    type=\"date\"\n                    value={formData.establishedDate}\n                    onChange={(e) => handleInputChange('establishedDate', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.establishedDate || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">å¾“æ¥­å“¡æ•°</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.employeeCount}\n                    onChange={(e) => handleInputChange('employeeCount', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"50å\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.employeeCount || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ</label>\n                {editing ? (\n                  <input\n                    type=\"url\"\n                    value={formData.website}\n                    onChange={(e) => handleInputChange('website', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"https://example.com\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.website || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">äº‹æ¥­å†…å®¹ãƒ»ä¼æ¥­æ¦‚è¦</label>\n              {editing ? (\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => handleInputChange('description', e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  rows={4}\n                  placeholder=\"ä¼æ¥­ã®äº‹æ¥­å†…å®¹ã‚„æ¦‚è¦ã‚’è¨˜è¼‰ã—ã¦ãã ã•ã„\"\n                />\n              ) : (\n                <p className=\"text-gray-900 whitespace-pre-wrap\">{formData.description || 'æœªè¨­å®š'}</p>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* è¨±å¯ãƒ»èªè¨¼æƒ…å ± */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900 flex items-center\">\n              <FileText className=\"h-5 w-5 mr-2\" />\n              è¨±å¯ãƒ»èªè¨¼æƒ…å ±\n            </h2>\n          </div>\n          <div className=\"p-6 space-y-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">äº‹æ¥­è¨±å¯ç•ªå·</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.businessLicense}\n                    onChange={(e) => handleInputChange('businessLicense', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ç¬¬1234567890å·\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.businessLicense || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä¸€èˆ¬è²¨ç‰©è‡ªå‹•è»Šé‹é€äº‹æ¥­è¨±å¯</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.transportLicense}\n                    onChange={(e) => handleInputChange('transportLicense', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ç¬¬1234567890å·\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.transportLicense || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">ä¿é™ºè¨¼åˆ¸ç•ªå·</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.insuranceNumber}\n                    onChange={(e) => handleInputChange('insuranceNumber', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"1234567890\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.insuranceNumber || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">æ³•äººç•ªå·</label>\n                {editing ? (\n                  <input\n                    type=\"text\"\n                    value={formData.taxId}\n                    onChange={(e) => handleInputChange('taxId', e.target.value)}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"1234567890123\"\n                  />\n                ) : (\n                  <p className=\"text-gray-900\">{formData.taxId || 'æœªè¨­å®š'}</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* æ³¨æ„äº‹é … */}\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n          <div className=\"flex items-start\">\n            <AlertCircle className=\"h-5 w-5 text-yellow-600 mr-3 mt-0.5\" />\n            <div>\n              <h3 className=\"text-sm font-medium text-yellow-800\">é‡è¦äº‹é …</h3>\n              <p className=\"text-sm text-yellow-700 mt-1\">\n                è¨±å¯ãƒ»èªè¨¼æƒ…å ±ã¯å–å¼•ã®ä¿¡é ¼æ€§å‘ä¸Šã®ãŸã‚ã«é‡è¦ã§ã™ã€‚æ­£ç¢ºãªæƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚\n                è™šå½ã®æƒ…å ±ã‚’å…¥åŠ›ã—ãŸå ´åˆã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒåœæ­¢ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n\n","size_bytes":18388},"src/app/api/auth/me/route.ts":{"content":"import { NextRequest } from 'next/server'\nimport { getUserFromRequest } from '@/lib/auth'\nimport { successResponse, unauthorizedResponse } from '@/lib/api-response'\nimport prisma from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    const userData = await prisma.user.findUnique({\n      where: { id: user.userId },\n      select: {\n        id: true,\n        email: true,\n        userType: true,\n        companyName: true,\n        contactPerson: true,\n        phone: true,\n        postalCode: true,\n        address: true,\n        createdAt: true,\n      },\n    })\n    \n    if (!userData) {\n      return unauthorizedResponse()\n    }\n    \n    return successResponse(userData)\n  } catch (error) {\n    console.error('Get user error:', error)\n    return unauthorizedResponse()\n  }\n}\n\n","size_bytes":959},"src/app/api/stats/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    // è·ç‰©æ•°ã®å–å¾—ï¼ˆã™ã¹ã¦ã®è·ç‰©ï¼‰\n    const shipmentCount = await prisma.shipment.count()\n    \n    // ç©ºè»Šæ•°ã®å–å¾—ï¼ˆåˆ©ç”¨å¯èƒ½ãªè»Šä¸¡æ•°ï¼‰\n    const vehicleCount = await prisma.vehicle.count({\n      where: {\n        status: 'AVAILABLE',\n        availableFrom: {\n          lte: new Date()\n        },\n        availableTo: {\n          gte: new Date()\n        }\n      }\n    })\n    \n    return NextResponse.json({\n      success: true,\n      data: {\n        shipmentCount,\n        vehicleCount\n      }\n    })\n  } catch (error) {\n    console.error('Error fetching stats:', error)\n    return NextResponse.json(\n      { success: false, error: 'Failed to fetch stats' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":916},"src/app/admin/dashboard/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Logo from '@/components/Logo'\nimport {\n  Users,\n  Package,\n  TrendingUp,\n  DollarSign,\n  LogOut,\n  FileText,\n  Settings,\n  BarChart3,\n} from 'lucide-react'\n\nexport default function AdminDashboardPage() {\n  const router = useRouter()\n  const [stats, setStats] = useState({\n    totalUsers: 0,\n    totalShipments: 0,\n    totalOffers: 0,\n    revenue: 0,\n  })\n  const [recentActivity, setRecentActivity] = useState<any[]>([])\n\n  useEffect(() => {\n    const adminToken = localStorage.getItem('adminToken')\n    if (!adminToken) {\n      router.push('/admin')\n      return\n    }\n\n    loadDashboardData()\n  }, [])\n\n  const loadDashboardData = async () => {\n    try {\n      const token = localStorage.getItem('token') || ''\n      \n      // ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã‚’å–å¾—ï¼ˆç®¡ç†è€…ã¨ã—ã¦ï¼‰\n      const response = await fetch('/api/admin/stats', {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n\n      // ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆå®Ÿéš›ã¯APIã‹ã‚‰å–å¾—ï¼‰\n      setStats({\n        totalUsers: 127,\n        totalShipments: 453,\n        totalOffers: 1089,\n        revenue: 8500000,\n      })\n\n      setRecentActivity([\n        { type: 'user', message: 'æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²: æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«ç‰©æµ', time: '5åˆ†å‰' },\n        { type: 'shipment', message: 'æ–°è¦æ¡ˆä»¶æŠ•ç¨¿: æ±äº¬â†’å¤§é˜ª (2tè»Š)', time: '12åˆ†å‰' },\n        { type: 'offer', message: 'ã‚ªãƒ•ã‚¡ãƒ¼æ‰¿èª: æ¡ˆä»¶#1234', time: '18åˆ†å‰' },\n        { type: 'user', message: 'æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²: ABCé‹è¼¸æ ªå¼ä¼šç¤¾', time: '25åˆ†å‰' },\n      ])\n    } catch (error) {\n      console.error('Error loading dashboard data:', error)\n    }\n  }\n\n  const handleLogout = () => {\n    localStorage.removeItem('adminToken')\n    router.push('/admin')\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-sky\">\n      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n      <header className=\"bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50\">\n        <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4\">\n          <div className=\"flex justify-between items-center\">\n            <div className=\"flex items-center space-x-3 sm:space-x-4\">\n              <Logo width={180} height={50} className=\"w-[120px] h-[35px] sm:w-[180px] sm:h-[50px]\" />\n              <span className=\"text-xs sm:text-sm font-semibold text-red-600 bg-red-50 px-2 sm:px-3 py-1 rounded-full\">\n                ç®¡ç†è€…ãƒ¢ãƒ¼ãƒ‰\n              </span>\n            </div>\n            <button\n              onClick={handleLogout}\n              className=\"flex items-center space-x-1 sm:space-x-2 text-gray-700 hover:text-red-600 transition\"\n            >\n              <LogOut className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n              <span className=\"text-xs sm:text-sm\">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</span>\n            </button>\n          </div>\n        </nav>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8\">\n        <div className=\"mb-6 sm:mb-8\">\n          <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900\">ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>\n          <p className=\"text-gray-600 mt-2 text-sm sm:text-base\">ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®çŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™</p>\n        </div>\n\n        {/* çµ±è¨ˆã‚«ãƒ¼ãƒ‰ */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8\">\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.1s'}}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-gray-600 text-xs sm:text-sm mb-1\">ç·ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</p>\n                <p className=\"text-2xl sm:text-3xl font-bold text-gray-900\">{stats.totalUsers}</p>\n                <p className=\"text-xs sm:text-sm text-green-600 mt-1\">+12% å‰æœˆæ¯”</p>\n              </div>\n              <div className=\"bg-gradient-to-br from-blue-50 to-cyan-50 p-3 sm:p-4 rounded-2xl floating\">\n                <Users className=\"h-6 w-6 sm:h-8 sm:w-8 text-blue-600\" />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.2s'}}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-gray-600 text-xs sm:text-sm mb-1\">ç·æ¡ˆä»¶æ•°</p>\n                <p className=\"text-2xl sm:text-3xl font-bold text-gray-900\">{stats.totalShipments}</p>\n                <p className=\"text-xs sm:text-sm text-green-600 mt-1\">+8% å‰æœˆæ¯”</p>\n              </div>\n              <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 p-3 sm:p-4 rounded-2xl floating\" style={{animationDelay: '1s'}}>\n                <Package className=\"h-6 w-6 sm:h-8 sm:w-8 text-purple-600\" />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.3s'}}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-gray-600 text-xs sm:text-sm mb-1\">ç·ã‚ªãƒ•ã‚¡ãƒ¼æ•°</p>\n                <p className=\"text-2xl sm:text-3xl font-bold text-gray-900\">{stats.totalOffers}</p>\n                <p className=\"text-xs sm:text-sm text-green-600 mt-1\">+15% å‰æœˆæ¯”</p>\n              </div>\n              <div className=\"bg-gradient-to-br from-orange-50 to-yellow-50 p-3 sm:p-4 rounded-2xl floating\" style={{animationDelay: '2s'}}>\n                <FileText className=\"h-6 w-6 sm:h-8 sm:w-8 text-orange-600\" />\n              </div>\n            </div>\n          </div>\n\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.4s'}}>\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-gray-600 text-xs sm:text-sm mb-1\">ç·å–å¼•é¡</p>\n                <p className=\"text-2xl sm:text-3xl font-bold text-gray-900\">\n                  Â¥{(stats.revenue / 1000000).toFixed(1)}M\n                </p>\n                <p className=\"text-xs sm:text-sm text-green-600 mt-1\">+20% å‰æœˆæ¯”</p>\n              </div>\n              <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 p-3 sm:p-4 rounded-2xl floating\" style={{animationDelay: '0.5s'}}>\n                <DollarSign className=\"h-6 w-6 sm:h-8 sm:w-8 text-green-600\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ */}\n          <div className=\"lg:col-span-1\">\n            <div className=\"card\">\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</h2>\n              <div className=\"space-y-3\">\n                <button className=\"w-full bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-4 py-3 rounded-xl font-semibold hover:from-blue-700 hover:to-cyan-600 transition flex items-center justify-center space-x-2\">\n                  <Users className=\"h-5 w-5\" />\n                  <span>ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</span>\n                </button>\n                <button className=\"w-full bg-white border-2 border-gray-200 text-gray-700 px-4 py-3 rounded-xl font-semibold hover:border-blue-300 hover:bg-blue-50 transition flex items-center justify-center space-x-2\">\n                  <Package className=\"h-5 w-5\" />\n                  <span>æ¡ˆä»¶ç®¡ç†</span>\n                </button>\n                <button className=\"w-full bg-white border-2 border-gray-200 text-gray-700 px-4 py-3 rounded-xl font-semibold hover:border-blue-300 hover:bg-blue-50 transition flex items-center justify-center space-x-2\">\n                  <BarChart3 className=\"h-5 w-5\" />\n                  <span>ãƒ¬ãƒãƒ¼ãƒˆ</span>\n                </button>\n                <button className=\"w-full bg-white border-2 border-gray-200 text-gray-700 px-4 py-3 rounded-xl font-semibold hover:border-blue-300 hover:bg-blue-50 transition flex items-center justify-center space-x-2\">\n                  <Settings className=\"h-5 w-5\" />\n                  <span>ã‚·ã‚¹ãƒ†ãƒ è¨­å®š</span>\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"card\">\n              <h2 className=\"text-xl font-bold text-gray-900 mb-4\">æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£</h2>\n              <div className=\"space-y-4\">\n                {recentActivity.map((activity, index) => (\n                  <div\n                    key={index}\n                    className=\"flex items-start space-x-3 p-3 bg-gray-50 rounded-xl hover:bg-gray-100 transition\"\n                  >\n                    <div\n                      className={`p-2 rounded-lg ${\n                        activity.type === 'user'\n                          ? 'bg-blue-100'\n                          : activity.type === 'shipment'\n                          ? 'bg-purple-100'\n                          : 'bg-green-100'\n                      }`}\n                    >\n                      {activity.type === 'user' && (\n                        <Users className=\"h-5 w-5 text-blue-600\" />\n                      )}\n                      {activity.type === 'shipment' && (\n                        <Package className=\"h-5 w-5 text-purple-600\" />\n                      )}\n                      {activity.type === 'offer' && (\n                        <FileText className=\"h-5 w-5 text-green-600\" />\n                      )}\n                    </div>\n                    <div className=\"flex-1\">\n                      <p className=\"text-gray-900 font-medium\">{activity.message}</p>\n                      <p className=\"text-sm text-gray-500 mt-1\">{activity.time}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* ã‚°ãƒ©ãƒ•ã‚¨ãƒªã‚¢ï¼ˆå°†æ¥çš„ã«å®Ÿè£…ï¼‰ */}\n        <div className=\"mt-6 card\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">æœˆé–“çµ±è¨ˆ</h2>\n          <div className=\"h-64 flex items-center justify-center text-gray-400\">\n            <div className=\"text-center\">\n              <BarChart3 className=\"h-16 w-16 mx-auto mb-2 opacity-50\" />\n              <p>ã‚°ãƒ©ãƒ•è¡¨ç¤ºæ©Ÿèƒ½ã¯æº–å‚™ä¸­ã§ã™</p>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n\n","size_bytes":10445},"src/app/dashboard/notifications/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { Bell, CheckCircle, AlertCircle, Info, X, Filter, XCircle } from 'lucide-react'\n\ninterface Notification {\n  id: string\n  title: string\n  message: string\n  type: string\n  targetType: string\n  targetUserId?: string\n  isRead: boolean\n  sentByEmail: boolean\n  createdAt: string\n}\n\nexport default function NotificationsPage() {\n  const [notifications, setNotifications] = useState<Notification[]>([])\n  const [filter, setFilter] = useState<'all' | 'unread' | 'read'>('all')\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    fetchNotifications()\n  }, [])\n\n  const fetchNotifications = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/notifications', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setNotifications(data.data)\n      }\n    } catch (error) {\n      console.error('Fetch error:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getNotificationIcon = (type: string) => {\n    switch (type) {\n      case 'SUCCESS': return <CheckCircle className=\"h-5 w-5 text-green-500\" />\n      case 'WARNING': return <AlertCircle className=\"h-5 w-5 text-yellow-500\" />\n      case 'ERROR': return <XCircle className=\"h-5 w-5 text-red-500\" />\n      default: return <Info className=\"h-5 w-5 text-blue-500\" />\n    }\n  }\n\n  const getNotificationBgColor = (type: string) => {\n    switch (type) {\n      case 'SUCCESS': return 'bg-green-50 border-green-200'\n      case 'WARNING': return 'bg-yellow-50 border-yellow-200'\n      case 'ERROR': return 'bg-red-50 border-red-200'\n      default: return 'bg-blue-50 border-blue-200'\n    }\n  }\n\n  const markAsRead = async (id: string) => {\n    try {\n      const token = localStorage.getItem('token')\n      await fetch(`/api/notifications/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      })\n      \n      setNotifications(prev => \n        prev.map(notification => \n          notification.id === id \n            ? { ...notification, isRead: true }\n            : notification\n        )\n      )\n    } catch (error) {\n      console.error('Mark as read error:', error)\n    }\n  }\n\n  const markAllAsRead = async () => {\n    const unreadNotifications = notifications.filter(n => !n.isRead)\n    \n    for (const notification of unreadNotifications) {\n      await markAsRead(notification.id)\n    }\n  }\n\n  const deleteNotification = async (id: string) => {\n    try {\n      const token = localStorage.getItem('token')\n      await fetch(`/api/notifications/${id}`, {\n        method: 'DELETE',\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      })\n      \n      setNotifications(prev => prev.filter(notification => notification.id !== id))\n    } catch (error) {\n      console.error('Delete error:', error)\n    }\n  }\n\n  const filteredNotifications = notifications.filter(notification => {\n    if (filter === 'unread') return !notification.isRead\n    if (filter === 'read') return notification.isRead\n    return true\n  })\n\n  const unreadCount = notifications.filter(n => !n.isRead).length\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">é€šçŸ¥</h1>\n            <p className=\"text-gray-600\">ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®ãŠçŸ¥ã‚‰ã›ã‚’ç¢ºèªã§ãã¾ã™</p>\n          </div>\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"flex items-center space-x-2\">\n              <Filter className=\"h-4 w-4 text-gray-500\" />\n              <select\n                value={filter}\n                onChange={(e) => setFilter(e.target.value as 'all' | 'unread' | 'read')}\n                className=\"px-3 py-1 border border-gray-300 rounded-lg text-sm\"\n              >\n                <option value=\"all\">ã™ã¹ã¦</option>\n                <option value=\"unread\">æœªèª­ ({unreadCount})</option>\n                <option value=\"read\">æ—¢èª­</option>\n              </select>\n            </div>\n            {unreadCount > 0 && (\n              <button\n                onClick={markAllAsRead}\n                className=\"text-blue-600 hover:text-blue-800 text-sm\"\n              >\n                ã™ã¹ã¦æ—¢èª­ã«ã™ã‚‹\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            é€šçŸ¥ä¸€è¦§ ({filteredNotifications.length}ä»¶)\n          </h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : filteredNotifications.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <Bell className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>é€šçŸ¥ã¯ã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {filteredNotifications.map(notification => (\n              <div\n                key={notification.id}\n                className={`p-6 hover:bg-gray-50 transition-colors ${\n                  !notification.isRead ? 'bg-blue-50' : ''\n                }`}\n              >\n                <div className=\"flex items-start space-x-4\">\n                  <div className=\"flex-shrink-0\">\n                    {getNotificationIcon(notification.type)}\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <h3 className={`text-sm font-medium ${\n                        !notification.isRead ? 'text-gray-900' : 'text-gray-700'\n                      }`}>\n                        {notification.title}\n                      </h3>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-xs text-gray-500\">\n                          {new Date(notification.createdAt).toLocaleString('ja-JP')}\n                        </span>\n                        {!notification.isRead && (\n                          <span className=\"inline-block w-2 h-2 bg-blue-500 rounded-full\"></span>\n                        )}\n                        <button\n                          onClick={() => deleteNotification(notification.id)}\n                          className=\"text-gray-400 hover:text-red-500\"\n                        >\n                          <X className=\"h-4 w-4\" />\n                        </button>\n                      </div>\n                    </div>\n                    <p className=\"mt-1 text-sm text-gray-600 whitespace-pre-wrap\">\n                      {notification.message}\n                    </p>\n                    {!notification.isRead && (\n                      <button\n                        onClick={() => markAsRead(notification.id)}\n                        className=\"mt-2 text-xs text-blue-600 hover:text-blue-800\"\n                      >\n                        æ—¢èª­ã«ã™ã‚‹\n                      </button>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":7571},"src/app/dashboard/transport-log/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  FileText, \n  Search, \n  Filter, \n  Plus, \n  Download, \n  Upload,\n  Calendar,\n  MapPin,\n  Truck,\n  Package,\n  Clock,\n  CheckCircle,\n  AlertCircle,\n  Edit,\n  Trash2,\n  Eye,\n  Building2,\n  User,\n  Phone,\n  Mail\n} from 'lucide-react'\n\ninterface TransportLog {\n  id: string\n  shipmentId: string\n  cargoName: string\n  carrierCompany: string\n  carrierContact: string\n  carrierPhone: string\n  carrierEmail: string\n  driverName: string\n  driverLicense: string\n  vehicleNumber: string\n  vehicleType: string\n  pickupDate: string\n  deliveryDate: string\n  pickupLocation: string\n  deliveryLocation: string\n  status: 'scheduled' | 'in_transit' | 'delivered' | 'cancelled'\n  actualPickupTime?: string\n  actualDeliveryTime?: string\n  notes?: string\n  createdAt: string\n  updatedAt: string\n}\n\nexport default function TransportLogPage() {\n  const [logs, setLogs] = useState<TransportLog[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchTerm, setSearchTerm] = useState('')\n  const [statusFilter, setStatusFilter] = useState<'all' | 'scheduled' | 'in_transit' | 'delivered' | 'cancelled'>('all')\n  const [dateFilter, setDateFilter] = useState('')\n\n  useEffect(() => {\n    loadTransportLogs()\n  }, [])\n\n  const loadTransportLogs = async () => {\n    try {\n      // ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿\n      const sampleLogs: TransportLog[] = [\n        {\n          id: '1',\n          shipmentId: 'SH-001',\n          cargoName: 'é›»å­éƒ¨å“ï¼ˆå†·è”µï¼‰',\n          carrierCompany: 'æ ªå¼ä¼šç¤¾ãƒˆãƒ©ãƒ³ã‚¹ãƒ­ã‚¸ãƒƒã‚¯',\n          carrierContact: 'ç”°ä¸­å¤ªéƒ',\n          carrierPhone: '03-1234-5678',\n          carrierEmail: 'tanaka@translogic.co.jp',\n          driverName: 'ä½è—¤ä¸€éƒ',\n          driverLicense: '1234567890',\n          vehicleNumber: 'å“å· 500 ã‚ 1234',\n          vehicleType: 'å†·è”µè»Š',\n          pickupDate: '2024-01-15',\n          deliveryDate: '2024-01-16',\n          pickupLocation: 'æ±äº¬éƒ½æ¸¯åŒºå…­æœ¬æœ¨1-1-1',\n          deliveryLocation: 'å¤§é˜ªåºœå¤§é˜ªå¸‚åŒ—åŒºæ¢…ç”°2-2-2',\n          status: 'delivered',\n          actualPickupTime: '2024-01-15T09:00:00',\n          actualDeliveryTime: '2024-01-16T14:30:00',\n          notes: 'äºˆå®šé€šã‚Šé…é€å®Œäº†ã€‚è·ç‰©ã«å•é¡Œãªã—ã€‚',\n          createdAt: '2024-01-10T10:00:00',\n          updatedAt: '2024-01-16T14:30:00'\n        },\n        {\n          id: '2',\n          shipmentId: 'SH-002',\n          cargoName: 'æ©Ÿæ¢°éƒ¨å“',\n          carrierCompany: 'å±±ç”°é‹é€æ ªå¼ä¼šç¤¾',\n          carrierContact: 'å±±ç”°èŠ±å­',\n          carrierPhone: '06-9876-5432',\n          carrierEmail: 'yamada@yamada-transport.co.jp',\n          driverName: 'éˆ´æœ¨äºŒéƒ',\n          driverLicense: '0987654321',\n          vehicleNumber: 'å¤§é˜ª 500 ã„ 5678',\n          vehicleType: 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯',\n          pickupDate: '2024-01-20',\n          deliveryDate: '2024-01-21',\n          pickupLocation: 'æ„›çŸ¥çœŒåå¤å±‹å¸‚ä¸­åŒºæ „3-3-3',\n          deliveryLocation: 'ç¦å²¡çœŒç¦å²¡å¸‚åšå¤šåŒºåšå¤šé§…å‰4-4-4',\n          status: 'in_transit',\n          actualPickupTime: '2024-01-20T08:30:00',\n          notes: 'ç¾åœ¨è¼¸é€ä¸­ã€‚äºˆå®šé€šã‚Šé€²è¡Œã€‚',\n          createdAt: '2024-01-18T14:00:00',\n          updatedAt: '2024-01-20T08:30:00'\n        },\n        {\n          id: '3',\n          shipmentId: 'SH-003',\n          cargoName: 'è¡£æ–™å“',\n          carrierCompany: 'ã‚¹ãƒ”ãƒ¼ãƒ‰ç‰©æµæ ªå¼ä¼šç¤¾',\n          carrierContact: 'éˆ´æœ¨ä¸€éƒ',\n          carrierPhone: '092-3333-4444',\n          carrierEmail: 'suzuki@speedlogistics.co.jp',\n          driverName: 'é«˜æ©‹ä¸‰éƒ',\n          driverLicense: '1122334455',\n          vehicleNumber: 'ç¦å²¡ 500 ã† 9012',\n          vehicleType: 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯',\n          pickupDate: '2024-01-25',\n          deliveryDate: '2024-01-26',\n          pickupLocation: 'æ±äº¬éƒ½æ¸‹è°·åŒºæ¸‹è°·1-1-1',\n          deliveryLocation: 'ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚è¥¿åŒºã¿ãªã¨ã¿ã‚‰ã„2-2-2',\n          status: 'scheduled',\n          notes: 'é…é€æº–å‚™ä¸­ã€‚',\n          createdAt: '2024-01-22T16:00:00',\n          updatedAt: '2024-01-22T16:00:00'\n        }\n      ]\n      \n      setLogs(sampleLogs)\n    } catch (error) {\n      console.error('Error loading transport logs:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getStatusInfo = (status: string) => {\n    switch (status) {\n      case 'scheduled':\n        return { label: 'äºˆå®š', color: 'bg-blue-100 text-blue-800', icon: Clock }\n      case 'in_transit':\n        return { label: 'è¼¸é€ä¸­', color: 'bg-yellow-100 text-yellow-800', icon: Truck }\n      case 'delivered':\n        return { label: 'é…é€å®Œäº†', color: 'bg-green-100 text-green-800', icon: CheckCircle }\n      case 'cancelled':\n        return { label: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«', color: 'bg-red-100 text-red-800', icon: AlertCircle }\n      default:\n        return { label: 'ä¸æ˜', color: 'bg-gray-100 text-gray-800', icon: Clock }\n    }\n  }\n\n  const filteredLogs = logs.filter(log => {\n    const matchesSearch = searchTerm === '' || \n      log.cargoName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      log.carrierCompany.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      log.driverName.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      log.vehicleNumber.toLowerCase().includes(searchTerm.toLowerCase())\n    \n    const matchesStatus = statusFilter === 'all' || log.status === statusFilter\n    \n    const matchesDate = dateFilter === '' || \n      log.pickupDate === dateFilter || \n      log.deliveryDate === dateFilter\n    \n    return matchesSearch && matchesStatus && matchesDate\n  })\n\n  const handleDeleteLog = (logId: string) => {\n    if (!confirm('ã“ã®è¨˜éŒ²ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) return\n    setLogs(prev => prev.filter(l => l.id !== logId))\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">å®Ÿé‹é€ä½“åˆ¶ç®¡ç†ç°¿</h1>\n            <p className=\"text-gray-600\">é‹é€æ¥­è€…ã®å®Ÿé‹é€ä½“åˆ¶ã‚’ç®¡ç†ãƒ»è¨˜éŒ²ã§ãã¾ã™</p>\n          </div>\n          <div className=\"flex space-x-2\">\n            <button\n              className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center space-x-2\"\n            >\n              <Upload className=\"h-4 w-4\" />\n              <span>ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</span>\n            </button>\n            <button\n              className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n            >\n              <Download className=\"h-4 w-4\" />\n              <span>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span>\n            </button>\n            <button\n              className=\"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center space-x-2\"\n            >\n              <Plus className=\"h-4 w-4\" />\n              <span>æ–°è¦ç™»éŒ²</span>\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* æ¤œç´¢ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}\n      <div className=\"bg-white rounded-lg shadow-sm border mb-6\">\n        <div className=\"p-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div>\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"è·ç‰©åã€é‹é€æ¥­è€…ã€ãƒ‰ãƒ©ã‚¤ãƒãƒ¼åã§æ¤œç´¢...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n            <div>\n              <div className=\"flex items-center space-x-2\">\n                <Filter className=\"h-4 w-4 text-gray-500\" />\n                <select\n                  value={statusFilter}\n                  onChange={(e) => setStatusFilter(e.target.value as any)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"all\">ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</option>\n                  <option value=\"scheduled\">äºˆå®š</option>\n                  <option value=\"in_transit\">è¼¸é€ä¸­</option>\n                  <option value=\"delivered\">é…é€å®Œäº†</option>\n                  <option value=\"cancelled\">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</option>\n                </select>\n              </div>\n            </div>\n            <div>\n              <input\n                type=\"date\"\n                value={dateFilter}\n                onChange={(e) => setDateFilter(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"æ—¥ä»˜ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼\"\n              />\n            </div>\n            <div>\n              <button\n                onClick={() => {\n                  setSearchTerm('')\n                  setStatusFilter('all')\n                  setDateFilter('')\n                }}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-gray-700\"\n              >\n                ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ã‚¯ãƒªã‚¢\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* é‹é€è¨˜éŒ²ä¸€è¦§ */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">\n            é‹é€è¨˜éŒ²ä¸€è¦§ ({filteredLogs.length}ä»¶)\n          </h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : filteredLogs.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <FileText className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>é‹é€è¨˜éŒ²ã¯ã‚ã‚Šã¾ã›ã‚“</p>\n            <button\n              className=\"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\"\n            >\n              æœ€åˆã®è¨˜éŒ²ã‚’ç™»éŒ²ã™ã‚‹\n            </button>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {filteredLogs.map((log) => {\n              const statusInfo = getStatusInfo(log.status)\n              const StatusIcon = statusInfo.icon\n              \n              return (\n                <div key={log.id} className=\"p-6 hover:bg-gray-50\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <h3 className=\"text-lg font-medium text-gray-900\">\n                          {log.cargoName}\n                        </h3>\n                        <span className=\"text-sm text-gray-500\">\n                          è·ç‰©ID: {log.shipmentId}\n                        </span>\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full flex items-center space-x-1 ${statusInfo.color}`}>\n                          <StatusIcon className=\"h-3 w-3\" />\n                          <span>{statusInfo.label}</span>\n                        </span>\n                      </div>\n                      \n                      {/* é‹é€æ¥­è€…æƒ…å ± */}\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                        <div className=\"bg-gray-50 p-3 rounded-lg\">\n                          <h4 className=\"font-semibold text-gray-800 mb-2 flex items-center\">\n                            <Building2 className=\"h-4 w-4 mr-2\" />\n                            é‹é€æ¥­è€…æƒ…å ±\n                          </h4>\n                          <div className=\"space-y-1 text-sm text-gray-700\">\n                            <div className=\"flex items-center\">\n                              <Building2 className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{log.carrierCompany}</span>\n                            </div>\n                            <div className=\"flex items-center\">\n                              <User className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{log.carrierContact}</span>\n                            </div>\n                            <div className=\"flex items-center\">\n                              <Phone className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{log.carrierPhone}</span>\n                            </div>\n                            <div className=\"flex items-center\">\n                              <Mail className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{log.carrierEmail}</span>\n                            </div>\n                          </div>\n                        </div>\n                        \n                        <div className=\"bg-gray-50 p-3 rounded-lg\">\n                          <h4 className=\"font-semibold text-gray-800 mb-2 flex items-center\">\n                            <Truck className=\"h-4 w-4 mr-2\" />\n                            è»Šä¸¡ãƒ»ãƒ‰ãƒ©ã‚¤ãƒãƒ¼æƒ…å ±\n                          </h4>\n                          <div className=\"space-y-1 text-sm text-gray-700\">\n                            <div className=\"flex items-center\">\n                              <User className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>ãƒ‰ãƒ©ã‚¤ãƒãƒ¼: {log.driverName}</span>\n                            </div>\n                            <div className=\"flex items-center\">\n                              <Truck className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>è»Šä¸¡ç•ªå·: {log.vehicleNumber}</span>\n                            </div>\n                            <div className=\"flex items-center\">\n                              <Package className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>è»Šç¨®: {log.vehicleType}</span>\n                            </div>\n                            <div className=\"text-xs text-gray-500\">\n                              å…è¨±ç•ªå·: {log.driverLicense}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* é…é€æƒ…å ± */}\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                        <div>\n                          <h4 className=\"font-semibold text-gray-800 mb-2 flex items-center\">\n                            <MapPin className=\"h-4 w-4 mr-2\" />\n                            é›†è·æƒ…å ±\n                          </h4>\n                          <div className=\"space-y-1 text-sm text-gray-700\">\n                            <div className=\"flex items-center\">\n                              <Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>äºˆå®šæ—¥: {new Date(log.pickupDate).toLocaleDateString('ja-JP')}</span>\n                            </div>\n                            {log.actualPickupTime && (\n                              <div className=\"flex items-center\">\n                                <Clock className=\"h-4 w-4 mr-2 text-gray-500\" />\n                                <span>å®Ÿéš›: {new Date(log.actualPickupTime).toLocaleString('ja-JP')}</span>\n                              </div>\n                            )}\n                            <div className=\"flex items-center\">\n                              <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{log.pickupLocation}</span>\n                            </div>\n                          </div>\n                        </div>\n                        \n                        <div>\n                          <h4 className=\"font-semibold text-gray-800 mb-2 flex items-center\">\n                            <MapPin className=\"h-4 w-4 mr-2\" />\n                            é…é€æƒ…å ±\n                          </h4>\n                          <div className=\"space-y-1 text-sm text-gray-700\">\n                            <div className=\"flex items-center\">\n                              <Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>äºˆå®šæ—¥: {new Date(log.deliveryDate).toLocaleDateString('ja-JP')}</span>\n                            </div>\n                            {log.actualDeliveryTime && (\n                              <div className=\"flex items-center\">\n                                <Clock className=\"h-4 w-4 mr-2 text-gray-500\" />\n                                <span>å®Ÿéš›: {new Date(log.actualDeliveryTime).toLocaleString('ja-JP')}</span>\n                              </div>\n                            )}\n                            <div className=\"flex items-center\">\n                              <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                              <span>{log.deliveryLocation}</span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* ãƒ¡ãƒ¢ */}\n                      {log.notes && (\n                        <div className=\"mb-3\">\n                          <p className=\"text-sm text-gray-600 bg-yellow-50 p-2 rounded border-l-4 border-yellow-400\">\n                            <strong>ãƒ¡ãƒ¢:</strong> {log.notes}\n                          </p>\n                        </div>\n                      )}\n\n                      <div className=\"text-xs text-gray-400\">\n                        ç™»éŒ²æ—¥: {new Date(log.createdAt).toLocaleString('ja-JP')} | \n                        æ›´æ–°æ—¥: {new Date(log.updatedAt).toLocaleString('ja-JP')}\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center space-x-2 ml-4\">\n                      <button\n                        className=\"p-2 text-gray-400 hover:text-blue-600\"\n                        title=\"è©³ç´°ã‚’è¦‹ã‚‹\"\n                      >\n                        <Eye className=\"h-4 w-4\" />\n                      </button>\n                      <button\n                        className=\"p-2 text-gray-400 hover:text-green-600\"\n                        title=\"ç·¨é›†\"\n                      >\n                        <Edit className=\"h-4 w-4\" />\n                      </button>\n                      <button\n                        onClick={() => handleDeleteLog(log.id)}\n                        className=\"p-2 text-gray-400 hover:text-red-600\"\n                        title=\"å‰Šé™¤\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":19171},"src/app/dashboard/recent-shipments/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { History, Package, MapPin, Calendar, Weight, Truck, DollarSign, Building2, User, Phone } from 'lucide-react'\n\nexport default function RecentShipmentsPage() {\n  const [recentShipments, setRecentShipments] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    loadRecentShipments()\n  }, [])\n\n  const loadRecentShipments = async () => {\n    setLoading(true)\n    try {\n      const recentIds = JSON.parse(localStorage.getItem('recentShipments') || '[]')\n      if (recentIds.length === 0) {\n        setRecentShipments([])\n        return\n      }\n\n      // æœ€è¿‘è¦‹ãŸè·ç‰©ã®è©³ç´°ã‚’å–å¾—\n      const response = await fetch('/api/shipments/details', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({ ids: recentIds })\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch recent shipment details')\n      }\n\n      const result = await response.json()\n      setRecentShipments(result.data)\n    } catch (error) {\n      console.error('Error loading recent shipments:', error)\n      // ç„¡åŠ¹ãªæœ€è¿‘è¦‹ãŸIDã‚’ã‚¯ãƒªã‚¢\n      localStorage.removeItem('recentShipments')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'OPEN': return 'bg-blue-100 text-blue-800'\n      case 'MATCHED': return 'bg-green-100 text-green-800'\n      case 'IN_TRANSIT': return 'bg-yellow-100 text-yellow-800'\n      case 'DELIVERED': return 'bg-gray-100 text-gray-800'\n      case 'CANCELLED': return 'bg-red-100 text-red-800'\n      default: return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900\">æœ€è¿‘è¦‹ãŸè·ç‰©</h1>\n        <p className=\"text-gray-600\">æœ€è¿‘é–²è¦§ã—ãŸè·ç‰©ã®ä¸€è¦§ã§ã™</p>\n      </div>\n\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">æœ€è¿‘è¦‹ãŸè·ç‰©ä¸€è¦§</h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : recentShipments.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <History className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>æœ€è¿‘è¦‹ãŸè·ç‰©ã¯ã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {recentShipments.map(shipment => (\n              <div key={shipment.id} className=\"p-6 hover:bg-gray-50\">\n                <div className=\"flex justify-between items-start mb-2\">\n                  <h3 className=\"text-lg font-bold text-blue-700\">{shipment.cargoName}</h3>\n                  <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(shipment.status)}`}>\n                    {shipment.status === 'OPEN' && 'å‹Ÿé›†ä¸­'}\n                    {shipment.status === 'MATCHED' && 'ãƒãƒƒãƒãƒ³ã‚°æ¸ˆã¿'}\n                    {shipment.status === 'IN_TRANSIT' && 'è¼¸é€ä¸­'}\n                    {shipment.status === 'DELIVERED' && 'é…é€å®Œäº†'}\n                    {shipment.status === 'CANCELLED' && 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«'}\n                  </span>\n                </div>\n                <p className=\"text-gray-600 text-sm mb-3\">{shipment.cargoDescription}</p>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700 mb-4\">\n                  <div className=\"flex items-center\"><MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />ç™ºåœ°: {shipment.pickupPrefecture} {shipment.pickupCity}</div>\n                  <div className=\"flex items-center\"><MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />ç€åœ°: {shipment.deliveryPrefecture} {shipment.deliveryCity}</div>\n                  <div className=\"flex items-center\"><Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />ç™ºæ—¥æ™‚: {new Date(shipment.pickupDate).toLocaleDateString()} {shipment.pickupTimeFrom}</div>\n                  <div className=\"flex items-center\"><Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />ç€æ—¥æ™‚: {new Date(shipment.deliveryDate).toLocaleDateString()} {shipment.deliveryTimeFrom}</div>\n                  <div className=\"flex items-center\"><Weight className=\"h-4 w-4 mr-2 text-gray-500\" />é‡é‡: {shipment.cargoWeight} kg</div>\n                  <div className=\"flex items-center\"><Truck className=\"h-4 w-4 mr-2 text-gray-500\" />è»Šç¨®: {shipment.requiredVehicleType}</div>\n                  <div className=\"flex items-center\"><DollarSign className=\"h-4 w-4 mr-2 text-gray-500\" />äºˆç®—: {shipment.budget.toLocaleString()} å††</div>\n                </div>\n\n                <div className=\"border-t border-gray-100 pt-3\">\n                  <h4 className=\"font-semibold text-gray-800 mb-2\">è·ä¸»æƒ…å ±</h4>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-700\">\n                    <div className=\"flex items-center\"><Building2 className=\"h-4 w-4 mr-2 text-gray-500\" />ä¼šç¤¾å: {shipment.shipper.companyName}</div>\n                    <div className=\"flex items-center\"><User className=\"h-4 w-4 mr-2 text-gray-500\" />æ‹…å½“è€…: {shipment.shipper.contactPerson}</div>\n                    <div className=\"flex items-center\"><Phone className=\"h-4 w-4 mr-2 text-gray-500\" />é›»è©±ç•ªå·: {shipment.shipper.phone}</div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":5851},"src/app/dashboard/vehicle-search/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Truck, \n  Search, \n  MapPin, \n  Calendar, \n  Weight, \n  DollarSign, \n  Plus, \n  Filter, \n  ArrowLeft, \n  ArrowRight,\n  Star,\n  Shield,\n  Clock,\n  CheckCircle,\n  AlertCircle,\n  Brain,\n  TrendingUp,\n  Award,\n  Zap,\n  Target,\n  BarChart3\n} from 'lucide-react'\n\ninterface Vehicle {\n  id: string\n  vehicleType: string\n  vehicleNumber: string\n  maxWeight: number\n  availablePrefectures: string\n  availableFrom: string\n  availableTo: string\n  basePrice?: number\n  driverName: string\n  driverPhone: string\n  status: string\n  carrier: {\n    id: string\n    companyName: string\n    contactPerson: string\n    phone: string\n    email: string\n    rating: number\n    totalShipments: number\n    completedShipments: number\n    creditScore: number\n    specialties: string[]\n    responseTime: number\n    reliabilityScore: number\n  }\n  aiMatchScore?: number\n  aiRecommendationReason?: string\n  estimatedDeliveryTime?: number\n  costEfficiency?: number\n}\n\ninterface AISearchResult {\n  vehicles: Vehicle[]\n  aiInsights: {\n    totalMatches: number\n    averageMatchScore: number\n    topSpecialties: string[]\n    recommendedCarriers: string[]\n    marketTrends: string\n  }\n}\n\nexport default function VehicleSearchPage() {\n  const router = useRouter()\n  const [vehicles, setVehicles] = useState<Vehicle[]>([])\n  const [aiResults, setAiResults] = useState<AISearchResult | null>(null)\n  const [loading, setLoading] = useState(true)\n  const [aiSearching, setAiSearching] = useState(false)\n  const [searchForm, setSearchForm] = useState({\n    vehicleType: '',\n    prefecture: '',\n    status: 'AVAILABLE',\n    cargoWeight: '',\n    cargoType: '',\n    urgency: 'normal',\n    budget: '',\n    specialRequirements: ''\n  })\n  const [showAIResults, setShowAIResults] = useState(false)\n\n  const prefectures = [\n    'åŒ—æµ·é“', 'é’æ£®çœŒ', 'å²©æ‰‹çœŒ', 'å®®åŸçœŒ', 'ç§‹ç”°çœŒ', 'å±±å½¢çœŒ', 'ç¦å³¶çœŒ',\n    'èŒ¨åŸçœŒ', 'æ ƒæœ¨çœŒ', 'ç¾¤é¦¬çœŒ', 'åŸ¼ç‰çœŒ', 'åƒè‘‰çœŒ', 'æ±äº¬éƒ½', 'ç¥å¥ˆå·çœŒ',\n    'æ–°æ½ŸçœŒ', 'å¯Œå±±çœŒ', 'çŸ³å·çœŒ', 'ç¦äº•çœŒ', 'å±±æ¢¨çœŒ', 'é•·é‡çœŒ', 'å²é˜œçœŒ',\n    'é™å²¡çœŒ', 'æ„›çŸ¥çœŒ', 'ä¸‰é‡çœŒ', 'æ»‹è³€çœŒ', 'äº¬éƒ½åºœ', 'å¤§é˜ªåºœ', 'å…µåº«çœŒ',\n    'å¥ˆè‰¯çœŒ', 'å’Œæ­Œå±±çœŒ', 'é³¥å–çœŒ', 'å³¶æ ¹çœŒ', 'å²¡å±±çœŒ', 'åºƒå³¶çœŒ', 'å±±å£çœŒ',\n    'å¾³å³¶çœŒ', 'é¦™å·çœŒ', 'æ„›åª›çœŒ', 'é«˜çŸ¥çœŒ', 'ç¦å²¡çœŒ', 'ä½è³€çœŒ', 'é•·å´çœŒ',\n    'ç†Šæœ¬çœŒ', 'å¤§åˆ†çœŒ', 'å®®å´çœŒ', 'é¹¿å…å³¶çœŒ', 'æ²–ç¸„çœŒ'\n  ]\n\n  const vehicleTypes = [\n    'è»½ãƒˆãƒ©ãƒƒã‚¯', 'å°å‹ãƒˆãƒ©ãƒƒã‚¯', 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯', 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯', 'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼', 'å†·å‡è»Š', 'å†·è”µè»Š', 'ãã®ä»–'\n  ]\n\n  const cargoTypes = [\n    'ä¸€èˆ¬è²¨ç‰©', 'å†·è”µãƒ»å†·å‡', 'å±é™ºç‰©', 'ç”Ÿé®®é£Ÿå“', 'ç²¾å¯†æ©Ÿå™¨', 'ç¾è¡“å“', 'åŒ»è–¬å“', 'ãã®ä»–'\n  ]\n\n  const urgencyLevels = [\n    { value: 'urgent', label: 'ç·Šæ€¥ï¼ˆ24æ™‚é–“ä»¥å†…ï¼‰', color: 'text-red-600' },\n    { value: 'high', label: 'é«˜ï¼ˆ3æ—¥ä»¥å†…ï¼‰', color: 'text-orange-600' },\n    { value: 'normal', label: 'é€šå¸¸ï¼ˆ1é€±é–“ä»¥å†…ï¼‰', color: 'text-blue-600' },\n    { value: 'low', label: 'ä½ï¼ˆ2é€±é–“ä»¥å†…ï¼‰', color: 'text-green-600' }\n  ]\n\n  const statuses = [\n    { value: 'AVAILABLE', label: 'åˆ©ç”¨å¯èƒ½' },\n    { value: 'IN_USE', label: 'ä½¿ç”¨ä¸­' },\n    { value: 'MAINTENANCE', label: 'ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ä¸­' },\n    { value: 'UNAVAILABLE', label: 'åˆ©ç”¨ä¸å¯' }\n  ]\n\n  useEffect(() => {\n    loadVehicles()\n  }, [])\n\n  const loadVehicles = async () => {\n    setLoading(true)\n    try {\n      const params = new URLSearchParams({\n        page: '1',\n        limit: '20',\n        ...searchForm\n      })\n\n      const response = await fetch(`/api/vehicles?${params}`)\n      if (!response.ok) throw new Error('Failed to load vehicles')\n      \n      const data = await response.json()\n      setVehicles(data.data?.vehicles || [])\n    } catch (error) {\n      console.error('Error loading vehicles:', error)\n      setVehicles([])\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const performAISearch = async () => {\n    setAiSearching(true)\n    try {\n      // AIæ¤œç´¢ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³\n      const mockAISearchResult: AISearchResult = {\n        vehicles: [\n          {\n            id: '1',\n            vehicleType: 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯',\n            vehicleNumber: 'å“å· 500 ã‚ 1234',\n            maxWeight: 10000,\n            availablePrefectures: '[\"æ±äº¬éƒ½\", \"ç¥å¥ˆå·çœŒ\", \"åŸ¼ç‰çœŒ\", \"åƒè‘‰çœŒ\"]',\n            availableFrom: '2024-01-20',\n            availableTo: '2024-01-30',\n            basePrice: 150,\n            driverName: 'ç”°ä¸­å¤ªéƒ',\n            driverPhone: '090-1234-5678',\n            status: 'AVAILABLE',\n            carrier: {\n              id: 'carrier-1',\n              companyName: 'æ ªå¼ä¼šç¤¾ãƒˆãƒ©ãƒ³ã‚¹ãƒ­ã‚¸ãƒƒã‚¯',\n              contactPerson: 'å±±ç”°èŠ±å­',\n              phone: '03-1234-5678',\n              email: 'yamada@translogic.co.jp',\n              rating: 4.8,\n              totalShipments: 156,\n              completedShipments: 148,\n              creditScore: 95,\n              specialties: ['å¤§å‹è²¨ç‰©', 'é–¢æ±åœ', 'æ€¥ä¾¿å¯¾å¿œ'],\n              responseTime: 15,\n              reliabilityScore: 98\n            },\n            aiMatchScore: 95,\n            aiRecommendationReason: 'è·ç‰©ã®é‡é‡ã¨ç·Šæ€¥åº¦ã«æœ€é©ãªè»Šä¸¡ã€‚éå»ã®å®Ÿç¸¾ã¨é«˜ã„ä¿¡ç”¨ã‚¹ã‚³ã‚¢ã§ä¿¡é ¼æ€§ãŒé«˜ã„ã€‚',\n            estimatedDeliveryTime: 6,\n            costEfficiency: 92\n          },\n          {\n            id: '2',\n            vehicleType: 'å†·è”µè»Š',\n            vehicleNumber: 'å¤§é˜ª 500 ã„ 5678',\n            maxWeight: 5000,\n            availablePrefectures: '[\"å¤§é˜ªåºœ\", \"äº¬éƒ½åºœ\", \"å…µåº«çœŒ\", \"å¥ˆè‰¯çœŒ\"]',\n            availableFrom: '2024-01-20',\n            availableTo: '2024-01-28',\n            basePrice: 200,\n            driverName: 'ä½è—¤æ¬¡éƒ',\n            driverPhone: '090-9876-5432',\n            status: 'AVAILABLE',\n            carrier: {\n              id: 'carrier-2',\n              companyName: 'é–¢è¥¿ç‰©æµæ ªå¼ä¼šç¤¾',\n              contactPerson: 'éˆ´æœ¨ä¸€éƒ',\n              phone: '06-9876-5432',\n              email: 'suzuki@kansai-logistics.co.jp',\n              rating: 4.6,\n              totalShipments: 89,\n              completedShipments: 85,\n              creditScore: 88,\n              specialties: ['å†·è”µè¼¸é€', 'é–¢è¥¿åœ', 'ç”Ÿé®®é£Ÿå“'],\n              responseTime: 25,\n              reliabilityScore: 94\n            },\n            aiMatchScore: 87,\n            aiRecommendationReason: 'å†·è”µè¼¸é€ã«ç‰¹åŒ–ã—ãŸè»Šä¸¡ã§ã€ç”Ÿé®®é£Ÿå“ã®è¼¸é€å®Ÿç¸¾ãŒè±Šå¯Œã€‚',\n            estimatedDeliveryTime: 8,\n            costEfficiency: 85\n          },\n          {\n            id: '3',\n            vehicleType: 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯',\n            vehicleNumber: 'åå¤å±‹ 500 ã† 9012',\n            maxWeight: 3000,\n            availablePrefectures: '[\"æ„›çŸ¥çœŒ\", \"é™å²¡çœŒ\", \"å²é˜œçœŒ\", \"ä¸‰é‡çœŒ\"]',\n            availableFrom: '2024-01-20',\n            availableTo: '2024-01-25',\n            basePrice: 120,\n            driverName: 'é«˜æ©‹ä¸‰éƒ',\n            driverPhone: '090-5555-1234',\n            status: 'AVAILABLE',\n            carrier: {\n              id: 'carrier-3',\n              companyName: 'ä¸­éƒ¨é‹é€æ ªå¼ä¼šç¤¾',\n              contactPerson: 'ç”°æ‘å››éƒ',\n              phone: '052-5555-1234',\n              email: 'tamura@chubu-transport.co.jp',\n              rating: 4.4,\n              totalShipments: 67,\n              completedShipments: 63,\n              creditScore: 82,\n              specialties: ['ä¸€èˆ¬è²¨ç‰©', 'ä¸­éƒ¨åœ', 'ã‚³ã‚¹ãƒˆé‡è¦–'],\n              responseTime: 30,\n              reliabilityScore: 89\n            },\n            aiMatchScore: 78,\n            aiRecommendationReason: 'ã‚³ã‚¹ãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ãã€ä¸­å°è¦æ¨¡ã®è·ç‰©ã«é©ã—ã¦ã„ã‚‹ã€‚',\n            estimatedDeliveryTime: 12,\n            costEfficiency: 95\n          }\n        ],\n        aiInsights: {\n          totalMatches: 3,\n          averageMatchScore: 87,\n          topSpecialties: ['å¤§å‹è²¨ç‰©', 'å†·è”µè¼¸é€', 'é–¢æ±åœ'],\n          recommendedCarriers: ['æ ªå¼ä¼šç¤¾ãƒˆãƒ©ãƒ³ã‚¹ãƒ­ã‚¸ãƒƒã‚¯', 'é–¢è¥¿ç‰©æµæ ªå¼ä¼šç¤¾'],\n          marketTrends: 'ç¾åœ¨ã€å¤§å‹è²¨ç‰©ã®éœ€è¦ãŒé«˜ãã€å†·è”µè¼¸é€ã®éœ€è¦ã‚‚å¢—åŠ å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚'\n        }\n      }\n      \n      // å®Ÿéš›ã®APIå‘¼ã³å‡ºã—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ\n      await new Promise(resolve => setTimeout(resolve, 2000))\n      \n      setAiResults(mockAISearchResult)\n      setShowAIResults(true)\n    } catch (error) {\n      console.error('Error performing AI search:', error)\n    } finally {\n      setAiSearching(false)\n    }\n  }\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault()\n    loadVehicles()\n  }\n\n  const handleAISearch = (e: React.FormEvent) => {\n    e.preventDefault()\n    performAISearch()\n  }\n\n  const handleInputChange = (field: string, value: string) => {\n    setSearchForm(prev => ({ ...prev, [field]: value }))\n  }\n\n  const getCreditScoreColor = (score: number) => {\n    if (score >= 90) return 'text-green-600 bg-green-100'\n    if (score >= 80) return 'text-blue-600 bg-blue-100'\n    if (score >= 70) return 'text-yellow-600 bg-yellow-100'\n    return 'text-red-600 bg-red-100'\n  }\n\n  const getMatchScoreColor = (score: number) => {\n    if (score >= 90) return 'text-green-600'\n    if (score >= 80) return 'text-blue-600'\n    if (score >= 70) return 'text-yellow-600'\n    return 'text-red-600'\n  }\n\n  const renderStars = (rating: number) => {\n    return Array.from({ length: 5 }, (_, i) => (\n      <Star\n        key={i}\n        className={`h-4 w-4 ${\n          i < Math.floor(rating) ? 'text-yellow-400 fill-current' : 'text-gray-300'\n        }`}\n      />\n    ))\n  }\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'AVAILABLE': return 'bg-green-100 text-green-800'\n      case 'IN_USE': return 'bg-blue-100 text-blue-800'\n      case 'MAINTENANCE': return 'bg-yellow-100 text-yellow-800'\n      case 'UNAVAILABLE': return 'bg-red-100 text-red-800'\n      default: return 'bg-gray-100 text-gray-800'\n    }\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">ç©ºè»Šæ¤œç´¢</h1>\n            <p className=\"text-gray-600\">æ¡ä»¶ã‚’æŒ‡å®šã—ã¦ç©ºè»Šã‚’æ¤œç´¢ã§ãã¾ã™</p>\n          </div>\n          <button\n            onClick={() => router.push('/vehicles/register')}\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            <span>ç©ºè»Šç™»éŒ²</span>\n          </button>\n        </div>\n      </div>\n\n      {/* é€šå¸¸æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  */}\n      <div className=\"bg-white rounded-lg shadow-sm border p-6 mb-6\">\n        <form onSubmit={handleSearch} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">è»Šä¸¡ã‚¿ã‚¤ãƒ—</label>\n              <select\n                value={searchForm.vehicleType}\n                onChange={(e) => handleInputChange('vehicleType', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"\">ã™ã¹ã¦</option>\n                {vehicleTypes.map(type => (\n                  <option key={type} value={type}>{type}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">éƒ½é“åºœçœŒ</label>\n              <select\n                value={searchForm.prefecture}\n                onChange={(e) => handleInputChange('prefecture', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"\">ã™ã¹ã¦</option>\n                {prefectures.map(pref => (\n                  <option key={pref} value={pref}>{pref}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>\n              <select\n                value={searchForm.status}\n                onChange={(e) => handleInputChange('status', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                {statuses.map(status => (\n                  <option key={status.value} value={status.value}>{status.label}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end\">\n            <button\n              type=\"submit\"\n              className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 flex items-center space-x-2\"\n            >\n              <Search className=\"h-4 w-4\" />\n              <span>æ¤œç´¢</span>\n            </button>\n          </div>\n        </form>\n      </div>\n\n      {/* AIæ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  */}\n      <div className=\"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-sm border border-purple-200 p-6 mb-8\">\n        <div className=\"flex items-center mb-4\">\n          <Brain className=\"h-6 w-6 text-purple-600 mr-2\" />\n          <h3 className=\"text-lg font-semibold text-gray-900\">AI ãŠã™ã™ã‚æ¤œç´¢</h3>\n          <span className=\"ml-2 px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full\">NEW</span>\n        </div>\n        <p className=\"text-sm text-gray-600 mb-6\">\n          è·ç‰©ã®è©³ç´°ã‚’å…¥åŠ›ã™ã‚‹ã¨ã€AIãŒæœ€é©ãªé‹é€ä¼šç¤¾ã‚’ãƒãƒƒãƒãƒ³ã‚°ç‡ã¨å…±ã«ã”ææ¡ˆã—ã¾ã™\n        </p>\n        \n        <form onSubmit={handleAISearch} className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">è·ç‰©ã®é‡é‡ (kg)</label>\n              <input\n                type=\"number\"\n                value={searchForm.cargoWeight}\n                onChange={(e) => handleInputChange('cargoWeight', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: 1000\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">è·ç‰©ã®ç¨®é¡</label>\n              <select\n                value={searchForm.cargoType}\n                onChange={(e) => handleInputChange('cargoType', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              >\n                <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                {cargoTypes.map(type => (\n                  <option key={type} value={type}>{type}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">ç·Šæ€¥åº¦</label>\n              <select\n                value={searchForm.urgency}\n                onChange={(e) => handleInputChange('urgency', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              >\n                {urgencyLevels.map(level => (\n                  <option key={level.value} value={level.value}>{level.label}</option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">äºˆç®— (å††)</label>\n              <input\n                type=\"number\"\n                value={searchForm.budget}\n                onChange={(e) => handleInputChange('budget', e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                placeholder=\"ä¾‹: 50000\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">ç‰¹åˆ¥ãªè¦ä»¶</label>\n            <textarea\n              value={searchForm.specialRequirements}\n              onChange={(e) => handleInputChange('specialRequirements', e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n              rows={3}\n              placeholder=\"ä¾‹: æ¸©åº¦ç®¡ç†ãŒå¿…è¦ã€å±é™ºç‰©è¼¸é€è³‡æ ¼å¿…é ˆã€24æ™‚é–“å¯¾å¿œãªã©\"\n            />\n          </div>\n\n          <div className=\"flex justify-end\">\n            <button\n              type=\"submit\"\n              disabled={aiSearching}\n              className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-8 py-3 rounded-lg hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\n            >\n              {aiSearching ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                  <span>AIæ¤œç´¢ä¸­...</span>\n                </>\n              ) : (\n                <>\n                  <Brain className=\"h-4 w-4\" />\n                  <span>AI ãŠã™ã™ã‚æ¤œç´¢</span>\n                </>\n              )}\n            </button>\n          </div>\n        </form>\n      </div>\n\n      {/* AIæ¤œç´¢çµæœ */}\n      {showAIResults && aiResults && (\n        <div className=\"mb-8\">\n          {/* AIã‚¤ãƒ³ã‚µã‚¤ãƒˆ */}\n          <div className=\"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg shadow-sm border border-purple-200 p-6 mb-6\">\n            <div className=\"flex items-center mb-4\">\n              <Brain className=\"h-6 w-6 text-purple-600 mr-2\" />\n              <h3 className=\"text-lg font-semibold text-gray-900\">AI åˆ†æçµæœ</h3>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              <div className=\"bg-white p-4 rounded-lg\">\n                <div className=\"flex items-center\">\n                  <Target className=\"h-5 w-5 text-purple-600 mr-2\" />\n                  <span className=\"text-sm font-medium text-gray-700\">ãƒãƒƒãƒãƒ³ã‚°æ•°</span>\n                </div>\n                <p className=\"text-2xl font-bold text-purple-600 mt-1\">{aiResults.aiInsights.totalMatches}ä»¶</p>\n              </div>\n              <div className=\"bg-white p-4 rounded-lg\">\n                <div className=\"flex items-center\">\n                  <TrendingUp className=\"h-5 w-5 text-blue-600 mr-2\" />\n                  <span className=\"text-sm font-medium text-gray-700\">å¹³å‡ãƒãƒƒãƒãƒ³ã‚°ç‡</span>\n                </div>\n                <p className=\"text-2xl font-bold text-blue-600 mt-1\">{aiResults.aiInsights.averageMatchScore}%</p>\n              </div>\n              <div className=\"bg-white p-4 rounded-lg\">\n                <div className=\"flex items-center\">\n                  <Award className=\"h-5 w-5 text-green-600 mr-2\" />\n                  <span className=\"text-sm font-medium text-gray-700\">ãŠã™ã™ã‚é‹é€ä¼šç¤¾</span>\n                </div>\n                <p className=\"text-sm text-gray-600 mt-1\">{aiResults.aiInsights.recommendedCarriers.length}ç¤¾</p>\n              </div>\n              <div className=\"bg-white p-4 rounded-lg\">\n                <div className=\"flex items-center\">\n                  <BarChart3 className=\"h-5 w-5 text-orange-600 mr-2\" />\n                  <span className=\"text-sm font-medium text-gray-700\">å¸‚å ´å‹•å‘</span>\n                </div>\n                <p className=\"text-xs text-gray-600 mt-1\">{aiResults.aiInsights.marketTrends}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* AIãŠã™ã™ã‚è»Šä¸¡ä¸€è¦§ */}\n          <div className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">AI ãŠã™ã™ã‚è»Šä¸¡ ({aiResults.vehicles.length}ä»¶)</h2>\n              <p className=\"text-sm text-gray-600\">ãƒãƒƒãƒãƒ³ã‚°ç‡é †ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™</p>\n            </div>\n            \n            <div className=\"divide-y divide-gray-200\">\n              {aiResults.vehicles.map((vehicle, index) => (\n                <div key={vehicle.id} className=\"p-6 hover:bg-gray-50\">\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-3 mb-2\">\n                        <span className=\"bg-purple-100 text-purple-800 text-xs font-medium px-2 py-1 rounded-full\">\n                          #{index + 1} ãŠã™ã™ã‚\n                        </span>\n                        <h3 className=\"text-lg font-semibold text-gray-900\">{vehicle.vehicleType}</h3>\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${getMatchScoreColor(vehicle.aiMatchScore || 0)}`}>\n                          <Target className=\"h-3 w-3 inline mr-1\" />\n                          ãƒãƒƒãƒãƒ³ã‚°ç‡: {vehicle.aiMatchScore}%\n                        </span>\n                      </div>\n                      <p className=\"text-sm text-gray-600 mb-3\">{vehicle.aiRecommendationReason}</p>\n                    </div>\n                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(vehicle.status)}`}>\n                      {statuses.find(s => s.value === vehicle.status)?.label}\n                    </span>\n                  </div>\n\n                  {/* é‹é€ä¼šç¤¾æƒ…å ± */}\n                  <div className=\"bg-gray-50 p-4 rounded-lg mb-4\">\n                    <h4 className=\"font-semibold text-gray-800 mb-3 flex items-center\">\n                      <Truck className=\"h-4 w-4 mr-2\" />\n                      é‹é€ä¼šç¤¾æƒ…å ±\n                    </h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-700\">{vehicle.carrier.companyName}</p>\n                        <p className=\"text-sm text-gray-600\">æ‹…å½“: {vehicle.carrier.contactPerson}</p>\n                        <p className=\"text-sm text-gray-600\">TEL: {vehicle.carrier.phone}</p>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm text-gray-700\">è©•ä¾¡</span>\n                          <div className=\"flex items-center\">\n                            {renderStars(vehicle.carrier.rating)}\n                            <span className=\"ml-1 text-sm text-gray-600\">({vehicle.carrier.rating})</span>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm text-gray-700\">ä¿¡ç”¨ã‚¹ã‚³ã‚¢</span>\n                          <span className={`px-2 py-1 text-xs font-medium rounded-full ${getCreditScoreColor(vehicle.carrier.creditScore)}`}>\n                            {vehicle.carrier.creditScore}ç‚¹\n                          </span>\n                        </div>\n                        <div className=\"flex items-center justify-between\">\n                          <span className=\"text-sm text-gray-700\">å®Ÿç¸¾</span>\n                          <span className=\"text-sm text-gray-600\">\n                            {vehicle.carrier.completedShipments}/{vehicle.carrier.totalShipments}ä»¶å®Œäº†\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* å°‚é–€åˆ†é‡ */}\n                    <div className=\"mt-3\">\n                      <span className=\"text-sm font-medium text-gray-700\">å°‚é–€åˆ†é‡: </span>\n                      <div className=\"flex flex-wrap gap-1 mt-1\">\n                        {vehicle.carrier.specialties.map((specialty, idx) => (\n                          <span key={idx} className=\"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full\">\n                            {specialty}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* è»Šä¸¡è©³ç´°æƒ…å ± */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-700 mb-4\">\n                    <div className=\"flex items-center\">\n                      <Weight className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      æœ€å¤§ç©è¼‰é‡é‡: {vehicle.maxWeight}kg\n                    </div>\n                    <div className=\"flex items-center\">\n                      <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      é‹è¡Œå¯èƒ½ã‚¨ãƒªã‚¢: {vehicle.availablePrefectures ? JSON.parse(vehicle.availablePrefectures).join(', ') : '-'}\n                    </div>\n                    <div className=\"flex items-center\">\n                      <Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      åˆ©ç”¨å¯èƒ½æœŸé–“: {new Date(vehicle.availableFrom).toLocaleDateString()} - {new Date(vehicle.availableTo).toLocaleDateString()}\n                    </div>\n                    <div className=\"flex items-center\">\n                      <DollarSign className=\"h-4 w-4 mr-2 text-gray-500\" />\n                      åŸºæœ¬æ–™é‡‘: {vehicle.basePrice ? `${vehicle.basePrice}å††/km` : 'è¦ç›¸è«‡'}\n                    </div>\n                  </div>\n\n                  {/* AIäºˆæ¸¬æƒ…å ± */}\n                  <div className=\"bg-blue-50 p-4 rounded-lg mb-4\">\n                    <h4 className=\"font-semibold text-gray-800 mb-2 flex items-center\">\n                      <Brain className=\"h-4 w-4 mr-2\" />\n                      AI äºˆæ¸¬æƒ…å ±\n                    </h4>\n                    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm\">\n                      <div className=\"flex items-center\">\n                        <Clock className=\"h-4 w-4 mr-2 text-blue-500\" />\n                        <span className=\"text-gray-700\">äºˆæƒ³é…é€æ™‚é–“: {vehicle.estimatedDeliveryTime}æ™‚é–“</span>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <TrendingUp className=\"h-4 w-4 mr-2 text-green-500\" />\n                        <span className=\"text-gray-700\">ã‚³ã‚¹ãƒˆåŠ¹ç‡: {vehicle.costEfficiency}%</span>\n                      </div>\n                      <div className=\"flex items-center\">\n                        <Shield className=\"h-4 w-4 mr-2 text-purple-500\" />\n                        <span className=\"text-gray-700\">ä¿¡é ¼æ€§ã‚¹ã‚³ã‚¢: {vehicle.carrier.reliabilityScore}%</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-between items-center\">\n                    <div className=\"text-sm text-gray-600\">\n                      <p>é‹è»¢æ‰‹: {vehicle.driverName}</p>\n                      <p>é€£çµ¡å…ˆ: {vehicle.driverPhone}</p>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <button className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\">\n                        è©³ç´°ã‚’è¦‹ã‚‹\n                      </button>\n                      <button className=\"bg-gradient-to-r from-purple-600 to-blue-600 text-white px-4 py-2 rounded-lg hover:from-purple-700 hover:to-blue-700 text-sm\">\n                        AI ãŠã™ã™ã‚ã§ä¾é ¼\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* é€šå¸¸æ¤œç´¢çµæœ */}\n      <div className=\"bg-white rounded-lg shadow-sm border\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">é€šå¸¸æ¤œç´¢çµæœ</h2>\n        </div>\n        \n        {loading ? (\n          <div className=\"p-6 text-center text-gray-500\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        ) : vehicles.length === 0 ? (\n          <div className=\"p-6 text-center text-gray-500\">\n            <Truck className=\"h-12 w-12 mx-auto mb-4 text-gray-300\" />\n            <p>è©²å½“ã™ã‚‹ç©ºè»Šã¯ã‚ã‚Šã¾ã›ã‚“</p>\n          </div>\n        ) : (\n          <div className=\"divide-y divide-gray-200\">\n            {vehicles.map(vehicle => (\n              <div key={vehicle.id} className=\"p-6 hover:bg-gray-50\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div>\n                    <h3 className=\"text-lg font-semibold text-gray-900\">{vehicle.vehicleType}</h3>\n                    <p className=\"text-sm text-gray-600\">è»Šä¸¡ç•ªå·: {vehicle.vehicleNumber}</p>\n                  </div>\n                  <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(vehicle.status)}`}>\n                    {statuses.find(s => s.value === vehicle.status)?.label}\n                  </span>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-700\">\n                  <div className=\"flex items-center\">\n                    <Weight className=\"h-4 w-4 mr-2 text-gray-500\" />\n                    æœ€å¤§ç©è¼‰é‡é‡: {vehicle.maxWeight}kg\n                  </div>\n                  <div className=\"flex items-center\">\n                    <MapPin className=\"h-4 w-4 mr-2 text-gray-500\" />\n                    é‹è¡Œå¯èƒ½ã‚¨ãƒªã‚¢: {vehicle.availablePrefectures ? JSON.parse(vehicle.availablePrefectures).join(', ') : '-'}\n                  </div>\n                  <div className=\"flex items-center\">\n                    <Calendar className=\"h-4 w-4 mr-2 text-gray-500\" />\n                    åˆ©ç”¨å¯èƒ½æœŸé–“: {new Date(vehicle.availableFrom).toLocaleDateString()} - {new Date(vehicle.availableTo).toLocaleDateString()}\n                  </div>\n                  <div className=\"flex items-center\">\n                    <DollarSign className=\"h-4 w-4 mr-2 text-gray-500\" />\n                    åŸºæœ¬æ–™é‡‘: {vehicle.basePrice ? `${vehicle.basePrice}å††/km` : 'è¦ç›¸è«‡'}\n                  </div>\n                </div>\n\n                <div className=\"mt-4 pt-4 border-t border-gray-100\">\n                  <div className=\"flex justify-between items-center\">\n                    <div className=\"text-sm text-gray-600\">\n                      <p>é‹è»¢æ‰‹: {vehicle.driverName}</p>\n                      <p>é€£çµ¡å…ˆ: {vehicle.driverPhone}</p>\n                    </div>\n                    <div className=\"flex space-x-2\">\n                      <button className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\">\n                        è©³ç´°ã‚’è¦‹ã‚‹\n                      </button>\n                      <button className=\"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 text-sm\">\n                        ä¾é ¼ã™ã‚‹\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":31885},"src/lib/auth.ts":{"content":"import jwt from 'jsonwebtoken'\nimport bcrypt from 'bcryptjs'\nimport { NextRequest } from 'next/server'\n\nconst JWT_SECRET = process.env.JWT_SECRET as string\nif (!JWT_SECRET) {\n  throw new Error('JWT_SECRET environment variable is not set. Please configure it in your environment.')\n}\n\nexport interface JWTPayload {\n  userId: string\n  email: string\n  userType: 'SHIPPER' | 'CARRIER' | 'ADMIN'\n}\n\n// ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒƒã‚·ãƒ¥åŒ–\nexport async function hashPassword(password: string): Promise<string> {\n  return bcrypt.hash(password, 12)\n}\n\n// ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æ¤œè¨¼\nexport async function verifyPassword(\n  password: string,\n  hashedPassword: string\n): Promise<boolean> {\n  return bcrypt.compare(password, hashedPassword)\n}\n\n// JWTãƒˆãƒ¼ã‚¯ãƒ³ã®ç”Ÿæˆ\nexport function generateToken(payload: JWTPayload): string {\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: '7d' })\n}\n\n// JWTãƒˆãƒ¼ã‚¯ãƒ³ã®æ¤œè¨¼\nexport function verifyToken(token: string): JWTPayload | null {\n  try {\n    return jwt.verify(token, JWT_SECRET) as JWTPayload\n  } catch (error) {\n    return null\n  }\n}\n\n// ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—\nexport function getUserFromRequest(request: NextRequest): JWTPayload | null {\n  const token = request.headers.get('authorization')?.replace('Bearer ', '')\n  \n  if (!token) {\n    return null\n  }\n  \n  return verifyToken(token)\n}\n\n// Cookieã‹ã‚‰ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—\nexport function getTokenFromCookies(cookies: string): string | null {\n  const tokenCookie = cookies\n    .split(';')\n    .find((c) => c.trim().startsWith('token='))\n  \n  if (!tokenCookie) {\n    return null\n  }\n  \n  return tokenCookie.split('=')[1]\n}\n\n// ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯\nexport function isAdmin(userType: string): boolean {\n  return userType === 'ADMIN'\n}\n\n// ç®¡ç†è€…èªè¨¼ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢\nexport function requireAdmin(payload: JWTPayload): boolean {\n  return payload.userType === 'ADMIN'\n}\n\n// ã‚»ã‚­ãƒ¥ã‚¢ãªç®¡ç†è€…ãƒˆãƒ¼ã‚¯ãƒ³ç”Ÿæˆ\nexport function generateAdminToken(payload: JWTPayload): string {\n  if (payload.userType !== 'ADMIN') {\n    throw new Error('ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™')\n  }\n  return jwt.sign(payload, JWT_SECRET, { expiresIn: '24h' })\n}\n\n// ç®¡ç†è€…ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¤œè¨¼\nexport function verifyAdminSession(token: string): JWTPayload | null {\n  try {\n    const payload = jwt.verify(token, JWT_SECRET) as JWTPayload\n    if (payload.userType !== 'ADMIN') {\n      return null\n    }\n    return payload\n  } catch (error) {\n    return null\n  }\n}\n\n","size_bytes":2475},"src/app/shipments/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport Link from 'next/link'\nimport Navbar from '@/components/Navbar'\nimport { Package, MapPin, Calendar, Truck, DollarSign, Plus, Eye } from 'lucide-react'\n\nexport default function ShipmentsPage() {\n  const router = useRouter()\n  const [user, setUser] = useState<any>(null)\n  const [shipments, setShipments] = useState<any[]>([])\n  const [loading, setLoading] = useState(true)\n  const [filter, setFilter] = useState('ALL')\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    const userData = localStorage.getItem('user')\n    \n    if (!token || !userData) {\n      router.push('/login')\n      return\n    }\n\n    setUser(JSON.parse(userData))\n    fetchShipments(token)\n  }, [router])\n\n  const fetchShipments = async (token: string) => {\n    try {\n      const response = await fetch('/api/shipments', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setShipments(data.data)\n      }\n    } catch (error) {\n      console.error('Failed to fetch shipments:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getStatusBadge = (status: string) => {\n    const badges: Record<string, { bg: string; text: string; label: string }> = {\n      OPEN: { bg: 'bg-green-100', text: 'text-green-800', label: 'å‹Ÿé›†ä¸­' },\n      MATCHED: { bg: 'bg-blue-100', text: 'text-blue-800', label: 'ãƒãƒƒãƒãƒ³ã‚°æ¸ˆ' },\n      IN_TRANSIT: { bg: 'bg-purple-100', text: 'text-purple-800', label: 'è¼¸é€ä¸­' },\n      DELIVERED: { bg: 'bg-gray-100', text: 'text-gray-800', label: 'é…é”å®Œäº†' },\n      CANCELLED: { bg: 'bg-red-100', text: 'text-red-800', label: 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«' },\n    }\n    const badge = badges[status] || badges.OPEN\n    return (\n      <span className={`px-3 py-1 rounded-full text-xs font-semibold ${badge.bg} ${badge.text}`}>\n        {badge.label}\n      </span>\n    )\n  }\n\n  const getVehicleTypeLabel = (type: string) => {\n    const types: Record<string, string> = {\n      LIGHT_TRUCK: 'è»½ãƒˆãƒ©ãƒƒã‚¯',\n      SMALL_TRUCK: 'å°å‹ãƒˆãƒ©ãƒƒã‚¯',\n      MEDIUM_TRUCK: 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯',\n      LARGE_TRUCK: 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯',\n      TRAILER: 'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼',\n      REFRIGERATED: 'å†·å‡ãƒ»å†·è”µè»Š',\n      FLATBED: 'å¹³ãƒœãƒ‡ã‚£',\n      WING: 'ã‚¦ã‚£ãƒ³ã‚°è»Š',\n    }\n    return types[type] || type\n  }\n\n  const filteredShipments = shipments.filter(shipment => {\n    if (filter === 'ALL') return true\n    return shipment.status === filter\n  })\n\n  if (!user) {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-gray-50 to-white\">\n      <Navbar />\n      \n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12\">\n        {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8 gap-4 fade-in-up\">\n          <div>\n            <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-2\">\n              {user.userType === 'SHIPPER' ? 'æŠ•ç¨¿ã—ãŸæ¡ˆä»¶' : 'é…é€æ¡ˆä»¶ä¸€è¦§'}\n            </h1>\n            <p className=\"text-gray-600\">\n              {filteredShipments.length}ä»¶ã®æ¡ˆä»¶\n            </p>\n          </div>\n          \n          {user.userType === 'SHIPPER' && (\n            <Link href=\"/shipments/new\" className=\"btn-primary flex items-center space-x-2\">\n              <Plus className=\"h-5 w-5\" />\n              <span>æ–°è¦æ¡ˆä»¶ã‚’æŠ•ç¨¿</span>\n            </Link>\n          )}\n        </div>\n\n        {/* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}\n        <div className=\"card mb-8 slide-in-left\">\n          <div className=\"flex flex-wrap gap-2\">\n            {['ALL', 'OPEN', 'MATCHED', 'IN_TRANSIT', 'DELIVERED'].map((status) => (\n              <button\n                key={status}\n                onClick={() => setFilter(status)}\n                className={`px-4 py-2 rounded-xl font-semibold transition-all ${\n                  filter === status\n                    ? 'bg-gradient-to-r from-blue-600 to-cyan-500 text-white shadow-md'\n                    : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                {status === 'ALL' ? 'ã™ã¹ã¦' : getStatusBadge(status).props.children}\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* æ¡ˆä»¶ãƒªã‚¹ãƒˆ */}\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-600 border-t-transparent\"></div>\n            <p className=\"text-gray-600 mt-4\">èª­ã¿è¾¼ã¿ä¸­...</p>\n          </div>\n        ) : filteredShipments.length === 0 ? (\n          <div className=\"card text-center py-12\">\n            <Package className=\"h-16 w-16 text-gray-400 mx-auto mb-4\" />\n            <p className=\"text-gray-600 text-lg\">æ¡ˆä»¶ãŒã‚ã‚Šã¾ã›ã‚“</p>\n            {user.userType === 'SHIPPER' && (\n              <Link href=\"/shipments/new\" className=\"btn-primary mt-6 inline-block\">\n                æœ€åˆã®æ¡ˆä»¶ã‚’æŠ•ç¨¿\n              </Link>\n            )}\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {filteredShipments.map((shipment, index) => (\n              <div\n                key={shipment.id}\n                className=\"card hover:shadow-2xl transition-all cursor-pointer fade-in-up\"\n                style={{animationDelay: `${index * 0.1}s`}}\n                onClick={() => router.push(`/shipments/${shipment.id}`)}\n              >\n                {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n                <div className=\"flex justify-between items-start mb-4\">\n                  <h3 className=\"text-xl font-bold text-gray-900 flex-1 pr-4\">\n                    {shipment.title}\n                  </h3>\n                  {getStatusBadge(shipment.status)}\n                </div>\n\n                {/* èª¬æ˜ */}\n                <p className=\"text-gray-600 mb-4 line-clamp-2\">\n                  {shipment.description}\n                </p>\n\n                {/* ãƒ«ãƒ¼ãƒˆæƒ…å ± */}\n                <div className=\"space-y-3 mb-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"bg-green-100 p-2 rounded-lg\">\n                      <MapPin className=\"h-4 w-4 text-green-600\" />\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-xs text-gray-500 mb-1\">é›†è·</p>\n                      <p className=\"text-sm font-semibold text-gray-900 truncate\">\n                        {shipment.pickupPrefecture} {shipment.pickupLocation}\n                      </p>\n                      <p className=\"text-xs text-gray-600\">\n                        {new Date(shipment.pickupDateTime).toLocaleString('ja-JP')}\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-start space-x-3\">\n                    <div className=\"bg-purple-100 p-2 rounded-lg\">\n                      <MapPin className=\"h-4 w-4 text-purple-600\" />\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-xs text-gray-500 mb-1\">é…é€å…ˆ</p>\n                      <p className=\"text-sm font-semibold text-gray-900 truncate\">\n                        {shipment.deliveryPrefecture} {shipment.deliveryLocation}\n                      </p>\n                      <p className=\"text-xs text-gray-600\">\n                        {new Date(shipment.deliveryDateTime).toLocaleString('ja-JP')}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* è©³ç´°æƒ…å ± */}\n                <div className=\"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Truck className=\"h-4 w-4 text-gray-500\" />\n                    <span className=\"text-sm text-gray-700\">\n                      {getVehicleTypeLabel(shipment.requiredVehicleType)}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <Package className=\"h-4 w-4 text-gray-500\" />\n                    <span className=\"text-sm text-gray-700\">\n                      {shipment.cargoWeight}kg\n                    </span>\n                  </div>\n                  <div className=\"flex items-center space-x-2 col-span-2\">\n                    <DollarSign className=\"h-4 w-4 text-gray-500\" />\n                    <span className=\"text-lg font-bold text-blue-600\">\n                      Â¥{shipment.budget?.toLocaleString() || 'æœªè¨­å®š'}\n                    </span>\n                  </div>\n                </div>\n\n                {/* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */}\n                <div className=\"mt-4 pt-4 border-t border-gray-200\">\n                  <button className=\"w-full btn-secondary py-2 flex items-center justify-center space-x-2\">\n                    <Eye className=\"h-4 w-4\" />\n                    <span>è©³ç´°ã‚’è¦‹ã‚‹</span>\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  )\n}\n","size_bytes":9298},"src/app/dashboard/verification/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Upload, \n  FileText, \n  CheckCircle, \n  AlertCircle, \n  Clock, \n  Shield,\n  X\n} from 'lucide-react'\n\ninterface Verification {\n  id: string\n  documentType: string\n  documentNumber?: string\n  status: string\n  submittedAt: string\n  reviewedAt?: string\n  rejectionReason?: string\n}\n\nexport default function VerificationPage() {\n  const [verifications, setVerifications] = useState<Verification[]>([])\n  const [loading, setLoading] = useState(true)\n  const [submitting, setSubmitting] = useState(false)\n  const [documentType, setDocumentType] = useState('')\n  const [documentNumber, setDocumentNumber] = useState('')\n\n  useEffect(() => {\n    fetchVerifications()\n  }, [])\n\n  const fetchVerifications = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/verifications', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n      \n      if (response.ok) {\n        const data = await response.json()\n        setVerifications(data.verifications)\n      }\n    } catch (error) {\n      console.error('Failed to fetch verifications:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleSubmit = async () => {\n    if (!documentType || !documentNumber) {\n      alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/verifications', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          documentType,\n          documentNumber\n        })\n      })\n\n      if (response.ok) {\n        alert('è¨±å¯è¨¼ã‚’æå‡ºã—ã¾ã—ãŸã€‚å¯©æŸ»ã‚’ãŠå¾…ã¡ãã ã•ã„ã€‚')\n        setDocumentType('')\n        setDocumentNumber('')\n        fetchVerifications()\n      } else {\n        const error = await response.json()\n        alert(error.error || 'æå‡ºã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n    } catch (error) {\n      console.error('Submit error:', error)\n      alert('æå‡ºã«å¤±æ•—ã—ã¾ã—ãŸ')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const documentTypes = [\n    { value: 'BUSINESS_LICENSE', label: 'äº‹æ¥­è¨±å¯è¨¼', required: true },\n    { value: 'TRANSPORT_LICENSE', label: 'ä¸€èˆ¬è²¨ç‰©è‡ªå‹•è»Šé‹é€äº‹æ¥­è¨±å¯è¨¼', required: true },\n    { value: 'INSURANCE', label: 'ä¿é™ºè¨¼åˆ¸', required: true },\n    { value: 'OTHER', label: 'ãã®ä»–', required: false }\n  ]\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'APPROVED': return 'text-green-600 bg-green-100'\n      case 'PENDING': return 'text-yellow-600 bg-yellow-100'\n      case 'REJECTED': return 'text-red-600 bg-red-100'\n      default: return 'text-gray-600 bg-gray-100'\n    }\n  }\n\n  const getStatusText = (status: string) => {\n    switch (status) {\n      case 'APPROVED': return 'æ‰¿èªæ¸ˆã¿'\n      case 'PENDING': return 'å¯©æŸ»ä¸­'\n      case 'REJECTED': return 'å´ä¸‹'\n      default: return 'ä¸æ˜'\n    }\n  }\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case 'APPROVED': return <CheckCircle className=\"h-4 w-4\" />\n      case 'PENDING': return <Clock className=\"h-4 w-4\" />\n      case 'REJECTED': return <X className=\"h-4 w-4\" />\n      default: return <AlertCircle className=\"h-4 w-4\" />\n    }\n  }\n\n  const approvedCount = verifications.filter(v => v.status === 'APPROVED').length\n  const requiredCount = documentTypes.filter(t => t.required).length\n  const isFullyVerified = approvedCount >= requiredCount\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex justify-center items-center h-64\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">è¨±å¯è¨¼ãƒ»èªè¨¼</h1>\n            <p className=\"text-gray-600\">å¿…è¦ãªè¨±å¯è¨¼ã‚’æå‡ºã—ã¦èªè¨¼ã‚’å—ã‘ã¾ã—ã‚‡ã†</p>\n          </div>\n          <div className=\"flex items-center space-x-2\">\n            <Shield className={`h-6 w-6 ${isFullyVerified ? 'text-green-600' : 'text-yellow-600'}`} />\n            <span className={`text-sm font-medium ${isFullyVerified ? 'text-green-600' : 'text-yellow-600'}`}>\n              {isFullyVerified ? 'èªè¨¼å®Œäº†' : 'èªè¨¼å¾…ã¡'}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* èªè¨¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">èªè¨¼ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</h2>\n          </div>\n          <div className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  {isFullyVerified ? 'èªè¨¼å®Œäº†' : 'èªè¨¼å¾…ã¡'}\n                </h3>\n                <p className=\"text-sm text-gray-600\">\n                  {approvedCount} / {requiredCount} ã®å¿…é ˆæ›¸é¡ãŒæ‰¿èªã•ã‚Œã¦ã„ã¾ã™\n                </p>\n              </div>\n              <div className={`px-4 py-2 rounded-full text-sm font-medium ${\n                isFullyVerified ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'\n              }`}>\n                {isFullyVerified ? 'èªè¨¼æ¸ˆã¿' : 'èªè¨¼å¾…ã¡'}\n              </div>\n            </div>\n            \n            <div className=\"w-full bg-gray-200 rounded-full h-2\">\n              <div \n                className=\"bg-blue-600 h-2 rounded-full transition-all duration-300\"\n                style={{ width: `${(approvedCount / requiredCount) * 100}%` }}\n              ></div>\n            </div>\n          </div>\n        </div>\n\n        {/* æå‡ºæ¸ˆã¿è¨±å¯è¨¼ä¸€è¦§ */}\n        {verifications.length > 0 && (\n          <div className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"px-6 py-4 border-b border-gray-200\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">æå‡ºæ¸ˆã¿æ›¸é¡</h2>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"space-y-4\">\n                {verifications.map((verification) => (\n                  <div key={verification.id} className=\"border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className={`p-2 rounded-lg ${\n                          verification.status === 'APPROVED' ? 'bg-green-100 text-green-600' :\n                          verification.status === 'PENDING' ? 'bg-yellow-100 text-yellow-600' :\n                          'bg-red-100 text-red-600'\n                        }`}>\n                          <FileText className=\"h-5 w-5\" />\n                        </div>\n                        <div>\n                          <h3 className=\"text-sm font-medium text-gray-900\">\n                            {documentTypes.find(t => t.value === verification.documentType)?.label || verification.documentType}\n                          </h3>\n                          <p className=\"text-xs text-gray-500\">\n                            è¨±å¯è¨¼ç•ªå·: {verification.documentNumber || 'æœªå…¥åŠ›'}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            æå‡ºæ—¥: {new Date(verification.submittedAt).toLocaleDateString('ja-JP')}\n                          </p>\n                          {verification.rejectionReason && (\n                            <p className=\"text-xs text-red-600 mt-1\">{verification.rejectionReason}</p>\n                          )}\n                        </div>\n                      </div>\n                      <span className={`px-2 py-1 text-xs font-medium rounded-full flex items-center space-x-1 ${getStatusColor(verification.status)}`}>\n                        {getStatusIcon(verification.status)}\n                        <span>{getStatusText(verification.status)}</span>\n                      </span>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* æ–°è¦æå‡ºãƒ•ã‚©ãƒ¼ãƒ  */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">æ–°è¦è¨±å¯è¨¼æå‡º</h2>\n          </div>\n          <div className=\"p-6\">\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  æ›¸é¡ã‚¿ã‚¤ãƒ—\n                </label>\n                <select\n                  value={documentType}\n                  onChange={(e) => setDocumentType(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                  {documentTypes.map(type => (\n                    <option key={type.value} value={type.value}>\n                      {type.label} {type.required ? '(å¿…é ˆ)' : '(ä»»æ„)'}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  è¨±å¯è¨¼ç•ªå·\n                </label>\n                <input\n                  type=\"text\"\n                  value={documentNumber}\n                  onChange={(e) => setDocumentNumber(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"ä¾‹: é–¢æ±é‹è¼¸å±€ç¬¬12345å·\"\n                />\n              </div>\n\n              <div className=\"flex justify-end\">\n                <button\n                  onClick={handleSubmit}\n                  disabled={!documentType || !documentNumber || submitting}\n                  className=\"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\n                >\n                  {submitting ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                      <span>æå‡ºä¸­...</span>\n                    </>\n                  ) : (\n                    <>\n                      <Upload className=\"h-4 w-4\" />\n                      <span>æå‡º</span>\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* æ³¨æ„äº‹é … */}\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4\">\n          <div className=\"flex items-start\">\n            <AlertCircle className=\"h-5 w-5 text-yellow-600 mr-3 mt-0.5\" />\n            <div>\n              <h3 className=\"text-sm font-medium text-yellow-800\">é‡è¦äº‹é …</h3>\n              <ul className=\"text-sm text-yellow-700 mt-1 space-y-1\">\n                <li>â€¢ ã™ã¹ã¦ã®å¿…é ˆæ›¸é¡ãŒæ‰¿èªã•ã‚Œã‚‹ã¾ã§ã€è·ç‰©ç™»éŒ²ã‚„è»Šä¸¡ç™»éŒ²ã¯ã§ãã¾ã›ã‚“</li>\n                <li>â€¢ æå‡ºã—ãŸæƒ…å ±ã¯ç®¡ç†è€…ãŒå¯©æŸ»ã—ã¾ã™ï¼ˆé€šå¸¸1-3å–¶æ¥­æ—¥ï¼‰</li>\n                <li>â€¢ æ­£ç¢ºãªè¨±å¯è¨¼ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„</li>\n                <li>â€¢ è™šå½ã®æƒ…å ±ã‚’æä¾›ã—ãŸå ´åˆã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒåœæ­¢ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":12200},"src/components/Navbar.tsx":{"content":"'use client'\n\nimport Link from 'next/link'\nimport { useRouter } from 'next/navigation'\nimport Logo from './Logo'\nimport { LogOut, User } from 'lucide-react'\nimport { useEffect, useState } from 'react'\n\ninterface NavbarProps {\n  userType?: 'SHIPPER' | 'CARRIER'\n}\n\nexport default function Navbar({ userType }: NavbarProps) {\n  const router = useRouter()\n  const [user, setUser] = useState<any>(null)\n\n  useEffect(() => {\n    // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      setUser(JSON.parse(userData))\n    }\n  }, [])\n\n  const handleLogout = () => {\n    localStorage.removeItem('token')\n    localStorage.removeItem('user')\n    router.push('/')\n  }\n\n  return (\n    <nav className=\"bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-12 sm:h-16\">\n          <Link href=\"/dashboard\">\n            <Logo width={180} height={50} linkable={false} className=\"w-[120px] h-[35px] sm:w-[180px] sm:h-[50px]\" />\n          </Link>\n\n          <div className=\"flex items-center space-x-2 sm:space-x-6\">\n            {userType === 'SHIPPER' && (\n              <>\n                <Link\n                  href=\"/dashboard\"\n                  className=\"text-gray-700 hover:text-blue-600 font-medium transition text-xs sm:text-base\"\n                >\n                  <span className=\"hidden sm:inline\">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>\n                  <span className=\"sm:hidden\">ãƒ€ãƒƒã‚·ãƒ¥</span>\n                </Link>\n                <Link\n                  href=\"/shipments\"\n                  className=\"text-gray-700 hover:text-blue-600 font-medium transition text-xs sm:text-base\"\n                >\n                  <span className=\"hidden sm:inline\">é…é€æ¡ˆä»¶</span>\n                  <span className=\"sm:hidden\">æ¡ˆä»¶</span>\n                </Link>\n                <Link\n                  href=\"/shipments/new\"\n                  className=\"bg-gradient-to-r from-blue-600 to-cyan-500 text-white px-2 sm:px-4 py-1 sm:py-2 rounded-xl font-semibold hover:from-blue-700 hover:to-cyan-600 transition text-xs sm:text-sm\"\n                >\n                  <span className=\"hidden sm:inline\">æ–°è¦æŠ•ç¨¿</span>\n                  <span className=\"sm:hidden\">æŠ•ç¨¿</span>\n                </Link>\n              </>\n            )}\n\n            {userType === 'CARRIER' && (\n              <>\n                <Link\n                  href=\"/dashboard\"\n                  className=\"text-gray-700 hover:text-blue-600 font-medium transition text-xs sm:text-base\"\n                >\n                  <span className=\"hidden sm:inline\">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span>\n                  <span className=\"sm:hidden\">ãƒ€ãƒƒã‚·ãƒ¥</span>\n                </Link>\n                <Link\n                  href=\"/shipments/search\"\n                  className=\"text-gray-700 hover:text-blue-600 font-medium transition text-xs sm:text-base\"\n                >\n                  <span className=\"hidden sm:inline\">æ¡ˆä»¶æ¤œç´¢</span>\n                  <span className=\"sm:hidden\">æ¤œç´¢</span>\n                </Link>\n                <Link\n                  href=\"/offers\"\n                  className=\"text-gray-700 hover:text-blue-600 font-medium transition text-xs sm:text-base\"\n                >\n                  <span className=\"hidden sm:inline\">ãƒã‚¤ã‚ªãƒ•ã‚¡ãƒ¼</span>\n                  <span className=\"sm:hidden\">ã‚ªãƒ•ã‚¡ãƒ¼</span>\n                </Link>\n              </>\n            )}\n\n            <div className=\"flex items-center space-x-1 sm:space-x-2 text-gray-700\">\n              <User className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n              <span className=\"text-xs sm:text-sm truncate max-w-[80px] sm:max-w-none\">\n                {user?.companyName || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼'}\n              </span>\n            </div>\n\n            <Link\n              href=\"/profile\"\n              className=\"text-gray-700 hover:text-blue-600 font-medium transition text-xs sm:text-sm\"\n            >\n              <span className=\"hidden sm:inline\">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</span>\n              <span className=\"sm:hidden\">ãƒ—ãƒ­ãƒ•</span>\n            </Link>\n\n            <Link\n              href=\"/help\"\n              className=\"text-gray-700 hover:text-blue-600 font-medium transition text-xs sm:text-sm\"\n            >\n              <span className=\"hidden sm:inline\">ãƒ˜ãƒ«ãƒ—</span>\n              <span className=\"sm:hidden\">?</span>\n            </Link>\n\n            <button\n              onClick={handleLogout}\n              className=\"flex items-center space-x-1 text-gray-700 hover:text-red-600\"\n            >\n              <LogOut className=\"h-4 w-4 sm:h-5 sm:w-5\" />\n              <span className=\"text-xs sm:text-sm hidden sm:inline\">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </nav>\n  )\n}\n\n","size_bytes":4919},"src/components/DashboardLayout.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardSidebar from './DashboardSidebar'\nimport DashboardHeader from './DashboardHeader'\nimport { Menu, X } from 'lucide-react'\n\ninterface DashboardLayoutProps {\n  children: React.ReactNode\n}\n\nexport default function DashboardLayout({ children }: DashboardLayoutProps) {\n  const router = useRouter()\n  const [user, setUser] = useState<any>(null)\n  const [loading, setLoading] = useState(true)\n  const [sidebarOpen, setSidebarOpen] = useState(false)\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    const userData = localStorage.getItem('user')\n\n    if (!token || !userData) {\n      router.push('/login')\n      return\n    }\n\n    setUser(JSON.parse(userData))\n    setLoading(false)\n  }, [router])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-gray-600 text-lg\">èª­ã¿è¾¼ã¿ä¸­...</div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex relative\">\n      {/* ãƒ¢ãƒã‚¤ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒœã‚¿ãƒ³ */}\n      <button\n        onClick={() => setSidebarOpen(!sidebarOpen)}\n        className=\"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-md hover:bg-gray-100 transition-colors\"\n      >\n        {sidebarOpen ? (\n          <X className=\"h-6 w-6 text-gray-600\" />\n        ) : (\n          <Menu className=\"h-6 w-6 text-gray-600\" />\n        )}\n      </button>\n\n      {/* ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰ */}\n      {sidebarOpen && (\n        <div\n          className=\"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30\"\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n\n      {/* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */}\n      <div\n        className={`\n          fixed lg:static inset-y-0 left-0 z-40\n          transform transition-transform duration-300 ease-in-out\n          ${sidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}\n        `}\n      >\n        <DashboardSidebar onNavigate={() => setSidebarOpen(false)} />\n      </div>\n\n      {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}\n      <div className=\"flex-1 flex flex-col min-w-0\">\n        <DashboardHeader user={user} />\n        <main className=\"flex-1 p-4 sm:p-6 lg:p-8 overflow-auto\">\n          {children}\n        </main>\n      </div>\n    </div>\n  )\n}\n","size_bytes":2383},"src/app/help/page.tsx":{"content":"'use client'\n\nimport Link from 'next/link'\nimport Logo from '@/components/Logo'\nimport { ArrowLeft, HelpCircle, Mail, Phone, MessageCircle } from 'lucide-react'\n\nexport default function HelpPage() {\n  return (\n    <div className=\"min-h-screen gradient-bg\">\n      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n      <header className=\"glass sticky top-0 z-50 border-b border-white/20\">\n        <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex justify-between items-center\">\n            <Link href=\"/\" className=\"flex items-center\">\n              <Logo width={200} height={60} className=\"w-[150px] h-[45px] sm:w-[200px] sm:h-[60px]\" linkable={false} />\n            </Link>\n            <div className=\"flex items-center space-x-2 sm:space-x-6\">\n              <Link\n                href=\"/login\"\n                className=\"text-slate-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-all duration-300 hover:scale-105\"\n              >\n                ãƒ­ã‚°ã‚¤ãƒ³\n              </Link>\n              <Link\n                href=\"/register\"\n                className=\"btn-primary text-sm px-6 py-3\"\n              >\n                æ–°è¦ç™»éŒ²\n              </Link>\n            </div>\n          </div>\n        </nav>\n      </header>\n\n      {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}\n      <main className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"mb-8\">\n          <Link \n            href=\"/\" \n            className=\"inline-flex items-center text-blue-600 hover:text-blue-700 transition-colors duration-300 mb-6\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹\n          </Link>\n          \n          <h1 className=\"text-4xl sm:text-5xl font-bold text-slate-800 mb-4\">\n            ãƒ˜ãƒ«ãƒ—ã‚»ãƒ³ã‚¿ãƒ¼\n          </h1>\n          <p className=\"text-lg text-slate-600\">\n            ã‚ˆãã‚ã‚‹ã”è³ªå•ã¨ã‚µãƒãƒ¼ãƒˆæƒ…å ±ã‚’ã”æ¡ˆå†…ã—ã¾ã™\n          </p>\n        </div>\n\n        {/* FAQ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */}\n        <div className=\"space-y-8\">\n          <div className=\"floating-card\">\n            <h2 className=\"text-2xl font-bold text-slate-800 mb-6 flex items-center\">\n              <HelpCircle className=\"h-6 w-6 mr-3 text-blue-600\" />\n              ã‚ˆãã‚ã‚‹ã”è³ªå•\n            </h2>\n            \n            <div className=\"space-y-6\">\n              <div className=\"border-l-4 border-blue-500 pl-4\">\n                <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">\n                  Q. ç„¡æ–™ãŠè©¦ã—ã®æœŸé–“ã¯ã©ã®ãã‚‰ã„ã§ã™ã‹ï¼Ÿ\n                </h3>\n                <p className=\"text-slate-600\">\n                  A. ç„¡æ–™ãŠè©¦ã—æœŸé–“ã¯14æ—¥é–“ã§ã™ã€‚\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-blue-500 pl-4\">\n                <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">\n                  Q. ç™»éŒ²ã«å¿…è¦ãªæ›¸é¡ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ\n                </h3>\n                <p className=\"text-slate-600\">\n                  A. é‹é€äº‹æ¥­è¨±å¯è¨¼ãŒå¿…è¦ã§ã™ã€‚è©³ç´°ã¯ç™»éŒ²ç”»é¢ã§ã”ç¢ºèªãã ã•ã„ã€‚\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-blue-500 pl-4\">\n                <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">\n                  Q. ãƒãƒƒãƒãƒ³ã‚°ã®æ‰‹æ•°æ–™ã¯ã‹ã‹ã‚Šã¾ã™ã‹ï¼Ÿ\n                </h3>\n                <p className=\"text-slate-600\">\n                  A. å¾¡åº§ã„ã¾ã›ã‚“ã€‚\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-blue-500 pl-4\">\n                <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">\n                  Q. æ”¯æ‰•ã„æ–¹æ³•ã¯ã©ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ\n                </h3>\n                <p className=\"text-slate-600\">\n                  A. ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆã€éŠ€è¡ŒæŒ¯è¾¼ã€å£åº§æŒ¯æ›¿ã€ã‚³ãƒ³ãƒ“ãƒ‹æ‰•ã„ã€é›»å­ãƒãƒãƒ¼ã«å¯¾å¿œã—ã¦ãŠã‚Šã¾ã™ã€‚\n                </p>\n              </div>\n              \n              <div className=\"border-l-4 border-blue-500 pl-4\">\n                <h3 className=\"text-lg font-semibold text-slate-800 mb-2\">\n                  Q. ãƒˆãƒ©ãƒ–ãƒ«ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã©ã†ã™ã‚Œã°ã‚ˆã„ã§ã™ã‹ï¼Ÿ\n                </h3>\n                <p className=\"text-slate-600\">\n                  A. ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã¾ãŸã¯ãŠé›»è©±ã§ã”é€£çµ¡ãã ã•ã„ã€‚24æ™‚é–“ä»¥å†…ã«å›ç­”ã„ãŸã—ã¾ã™ã€‚\n                </p>\n              </div>\n            </div>\n          </div>\n\n          {/* ãŠå•ã„åˆã‚ã›æƒ…å ± */}\n          <div className=\"floating-card\">\n            <h2 className=\"text-2xl font-bold text-slate-800 mb-6 flex items-center\">\n              <MessageCircle className=\"h-6 w-6 mr-3 text-blue-600\" />\n              ãŠå•ã„åˆã‚ã›\n            </h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"flex items-start space-x-4\">\n                <Phone className=\"h-6 w-6 text-blue-600 mt-1\" />\n                <div>\n                  <h3 className=\"font-semibold text-slate-800\">é›»è©±ã§ã®ãŠå•ã„åˆã‚ã›</h3>\n                  <p className=\"text-slate-600\">046-212-2325</p>\n                  <p className=\"text-sm text-slate-500\">9:00-21:00</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-start space-x-4\">\n                <Mail className=\"h-6 w-6 text-blue-600 mt-1\" />\n                <div>\n                  <h3 className=\"font-semibold text-slate-800\">ãƒ¡ãƒ¼ãƒ«ã§ã®ãŠå•ã„åˆã‚ã›</h3>\n                  <p className=\"text-slate-600\">info@sinjapan.jp</p>\n                  <p className=\"text-sm text-slate-500\">24æ™‚é–“å—ä»˜</p>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"mt-6\">\n              <Link \n                href=\"/contact\" \n                className=\"btn-primary inline-flex items-center\"\n              >\n                ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ \n              </Link>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}","size_bytes":6191},"src/app/terms/page.tsx":{"content":"'use client'\n\nimport Link from 'next/link'\nimport Logo from '@/components/Logo'\nimport { ArrowLeft, FileText } from 'lucide-react'\n\nexport default function TermsPage() {\n  return (\n    <div className=\"min-h-screen gradient-bg\">\n      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n      <header className=\"glass sticky top-0 z-50 border-b border-white/20\">\n        <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex justify-between items-center\">\n            <Link href=\"/\" className=\"flex items-center\">\n              <Logo width={200} height={60} className=\"w-[150px] h-[45px] sm:w-[200px] sm:h-[60px]\" linkable={false} />\n            </Link>\n            <div className=\"flex items-center space-x-2 sm:space-x-6\">\n              <Link\n                href=\"/login\"\n                className=\"text-slate-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-all duration-300 hover:scale-105\"\n              >\n                ãƒ­ã‚°ã‚¤ãƒ³\n              </Link>\n              <Link\n                href=\"/register\"\n                className=\"btn-primary text-sm px-6 py-3\"\n              >\n                æ–°è¦ç™»éŒ²\n              </Link>\n            </div>\n          </div>\n        </nav>\n      </header>\n\n      {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}\n      <main className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"mb-8\">\n          <Link \n            href=\"/\" \n            className=\"inline-flex items-center text-blue-600 hover:text-blue-700 transition-colors duration-300 mb-6\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹\n          </Link>\n          \n          <h1 className=\"text-4xl sm:text-5xl font-bold text-slate-800 mb-4 flex items-center\">\n            <FileText className=\"h-8 w-8 mr-4 text-blue-600\" />\n            åˆ©ç”¨è¦ç´„\n          </h1>\n          <p className=\"text-lg text-slate-600\">\n            æœ€çµ‚æ›´æ–°æ—¥ï¼š2025å¹´1æœˆ15æ—¥\n          </p>\n        </div>\n\n        <div className=\"floating-card\">\n          <div className=\"prose prose-slate max-w-none\">\n            <h2>ç¬¬1æ¡ï¼ˆé©ç”¨ï¼‰</h2>\n            <p>\n              æœ¬åˆ©ç”¨è¦ç´„ï¼ˆä»¥ä¸‹ã€Œæœ¬è¦ç´„ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã¯ã€åˆåŒä¼šç¤¾SIN JAPANï¼ˆä»¥ä¸‹ã€Œå½“ç¤¾ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ãŒæä¾›ã™ã‚‹ã€ŒSIN JAPAN LOGI MATCHã€ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä»¥ä¸‹ã€Œæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã®åˆ©ç”¨æ¡ä»¶ã‚’å®šã‚ã‚‹ã‚‚ã®ã§ã™ã€‚ç™»éŒ²ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®çš†ã•ã¾ï¼ˆä»¥ä¸‹ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã«ã¯ã€æœ¬è¦ç´„ã«å¾“ã£ã¦ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã”åˆ©ç”¨ã„ãŸã ãã¾ã™ã€‚\n            </p>\n\n            <h2>ç¬¬2æ¡ï¼ˆåˆ©ç”¨ç™»éŒ²ï¼‰</h2>\n            <p>\n              æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã„ã¦ã¯ã€ç™»éŒ²å¸Œæœ›è€…ãŒæœ¬è¦ç´„ã«åŒæ„ã®ä¸Šã€å½“ç¤¾ã®å®šã‚ã‚‹æ–¹æ³•ã«ã‚ˆã£ã¦åˆ©ç”¨ç™»éŒ²ã‚’ç”³è«‹ã—ã€å½“ç¤¾ãŒã“ã‚Œã‚’æ‰¿èªã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€åˆ©ç”¨ç™»éŒ²ãŒå®Œäº†ã™ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚\n            </p>\n\n            <h2>ç¬¬3æ¡ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŠã‚ˆã³ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ç®¡ç†ï¼‰</h2>\n            <p>\n              ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€è‡ªå·±ã®è²¬ä»»ã«ãŠã„ã¦ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŠã‚ˆã³ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’é©åˆ‡ã«ç®¡ç†ã™ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€ã„ã‹ãªã‚‹å ´åˆã«ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŠã‚ˆã³ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ç¬¬ä¸‰è€…ã«è­²æ¸¡ã¾ãŸã¯è²¸ä¸ã—ã€ã‚‚ã—ãã¯ç¬¬ä¸‰è€…ã¨å…±ç”¨ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚\n            </p>\n\n            <h2>ç¬¬4æ¡ï¼ˆç¦æ­¢äº‹é …ï¼‰</h2>\n            <p>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã«ã‚ãŸã‚Šã€ä»¥ä¸‹ã®è¡Œç‚ºã‚’ã—ã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚</p>\n            <ul>\n              <li>æ³•ä»¤ã¾ãŸã¯å…¬åºè‰¯ä¿—ã«é•åã™ã‚‹è¡Œç‚º</li>\n              <li>çŠ¯ç½ªè¡Œç‚ºã«é–¢é€£ã™ã‚‹è¡Œç‚º</li>\n              <li>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®å†…å®¹ç­‰ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«å«ã¾ã‚Œã‚‹è‘—ä½œæ¨©ã€å•†æ¨™æ¨©ã»ã‹çŸ¥çš„è²¡ç”£æ¨©ã‚’ä¾µå®³ã™ã‚‹è¡Œç‚º</li>\n              <li>å½“ç¤¾ã€ã»ã‹ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€ã¾ãŸã¯ãã®ä»–ç¬¬ä¸‰è€…ã®ã‚µãƒ¼ãƒãƒ¼ã¾ãŸã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ©Ÿèƒ½ã‚’ç ´å£Šã—ãŸã‚Šã€å¦¨å®³ã—ãŸã‚Šã™ã‚‹è¡Œç‚º</li>\n              <li>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚ˆã£ã¦å¾—ã‚‰ã‚ŒãŸæƒ…å ±ã‚’å•†æ¥­çš„ã«åˆ©ç”¨ã™ã‚‹è¡Œç‚º</li>\n              <li>å½“ç¤¾ã®ã‚µãƒ¼ãƒ“ã‚¹ã®é‹å–¶ã‚’å¦¨å®³ã™ã‚‹ãŠãã‚Œã®ã‚ã‚‹è¡Œç‚º</li>\n              <li>ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã—ã€ã¾ãŸã¯ã“ã‚Œã‚’è©¦ã¿ã‚‹è¡Œç‚º</li>\n              <li>ãã®ä»–ã€å½“ç¤¾ãŒä¸é©åˆ‡ã¨åˆ¤æ–­ã™ã‚‹è¡Œç‚º</li>\n            </ul>\n\n            <h2>ç¬¬5æ¡ï¼ˆæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ã®åœæ­¢ç­‰ï¼‰</h2>\n            <p>\n              å½“ç¤¾ã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®äº‹ç”±ãŒã‚ã‚‹ã¨åˆ¤æ–­ã—ãŸå ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«äº‹å‰ã«é€šçŸ¥ã™ã‚‹ã“ã¨ãªãæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®å…¨éƒ¨ã¾ãŸã¯ä¸€éƒ¨ã®æä¾›ã‚’åœæ­¢ã¾ãŸã¯ä¸­æ–­ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚\n            </p>\n            <ul>\n              <li>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«ã‹ã‹ã‚‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ ã®ä¿å®ˆç‚¹æ¤œã¾ãŸã¯æ›´æ–°ã‚’è¡Œã†å ´åˆ</li>\n              <li>åœ°éœ‡ã€è½é›·ã€ç«ç½ã€åœé›»ã¾ãŸã¯å¤©ç½ãªã©ã®ä¸å¯æŠ—åŠ›ã«ã‚ˆã‚Šã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ãŒå›°é›£ã¨ãªã£ãŸå ´åˆ</li>\n              <li>ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã¾ãŸã¯é€šä¿¡å›ç·šç­‰ãŒäº‹æ•…ã«ã‚ˆã‚Šåœæ­¢ã—ãŸå ´åˆ</li>\n              <li>ãã®ä»–ã€å½“ç¤¾ãŒæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ãŒå›°é›£ã¨åˆ¤æ–­ã—ãŸå ´åˆ</li>\n            </ul>\n\n            <h2>ç¬¬6æ¡ï¼ˆåˆ©ç”¨åˆ¶é™ãŠã‚ˆã³ç™»éŒ²æŠ¹æ¶ˆï¼‰</h2>\n            <p>\n              å½“ç¤¾ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä»¥ä¸‹ã®ã„ãšã‚Œã‹ã«è©²å½“ã™ã‚‹å ´åˆã«ã¯ã€äº‹å‰ã®é€šçŸ¥ãªãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®å…¨éƒ¨ã‚‚ã—ãã¯ä¸€éƒ¨ã®åˆ©ç”¨ã‚’åˆ¶é™ã—ã€ã¾ãŸã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã—ã¦ã®ç™»éŒ²ã‚’æŠ¹æ¶ˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚\n            </p>\n            <ul>\n              <li>æœ¬è¦ç´„ã®ã„ãšã‚Œã‹ã®æ¡é …ã«é•åã—ãŸå ´åˆ</li>\n              <li>ç™»éŒ²äº‹é …ã«è™šå½ã®äº‹å®ŸãŒã‚ã‚‹ã“ã¨ãŒåˆ¤æ˜ã—ãŸå ´åˆ</li>\n              <li>æ–™é‡‘ç­‰ã®æ”¯æ‰•å‚µå‹™ã®ä¸å±¥è¡ŒãŒã‚ã£ãŸå ´åˆ</li>\n              <li>å½“ç¤¾ã‹ã‚‰ã®é€£çµ¡ã«å¯¾ã—ã€ä¸€å®šæœŸé–“è¿”ç­”ãŒãªã„å ´åˆ</li>\n              <li>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«ã¤ã„ã¦ã€æœ€çµ‚ã®åˆ©ç”¨ã‹ã‚‰ä¸€å®šæœŸé–“åˆ©ç”¨ãŒãªã„å ´åˆ</li>\n              <li>ãã®ä»–ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã‚’é©å½“ã§ãªã„ã¨åˆ¤æ–­ã—ãŸå ´åˆ</li>\n            </ul>\n\n            <h2>ç¬¬7æ¡ï¼ˆé€€ä¼šï¼‰</h2>\n            <p>\n              ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€å½“ç¤¾ã®å®šã‚ã‚‹é€€ä¼šæ‰‹ç¶šã«ã‚ˆã‚Šã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã‹ã‚‰é€€ä¼šã§ãã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚\n            </p>\n\n            <h2>ç¬¬8æ¡ï¼ˆä¿è¨¼ã®å¦èªãŠã‚ˆã³å…è²¬äº‹é …ï¼‰</h2>\n            <p>\n              å½“ç¤¾ã¯ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«äº‹å®Ÿä¸Šã¾ãŸã¯æ³•å¾‹ä¸Šã®ç‘•ç–µï¼ˆå®‰å…¨æ€§ã€ä¿¡é ¼æ€§ã€æ­£ç¢ºæ€§ã€å®Œå…¨æ€§ã€æœ‰åŠ¹æ€§ã€ç‰¹å®šã®ç›®çš„ã¸ã®é©åˆæ€§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãªã©ã«é–¢ã™ã‚‹æ¬ é™¥ã€ã‚¨ãƒ©ãƒ¼ã‚„ãƒã‚°ã€æ¨©åˆ©ä¾µå®³ãªã©ã‚’å«ã¿ã¾ã™ã€‚ï¼‰ãŒãªã„ã“ã¨ã‚’æ˜ç¤ºçš„ã«ã‚‚é»™ç¤ºçš„ã«ã‚‚ä¿è¨¼ã—ã¦ãŠã‚Šã¾ã›ã‚“ã€‚\n            </p>\n\n            <h2>ç¬¬9æ¡ï¼ˆã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã®å¤‰æ›´ç­‰ï¼‰</h2>\n            <p>\n              å½“ç¤¾ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã™ã‚‹ã“ã¨ãªãã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®å†…å®¹ã‚’å¤‰æ›´ã—ã¾ãŸã¯æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ã‚’ä¸­æ­¢ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã¨ã—ã€ã“ã‚Œã«ã‚ˆã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç”Ÿã˜ãŸæå®³ã«ã¤ã„ã¦ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚\n            </p>\n\n            <h2>ç¬¬10æ¡ï¼ˆåˆ©ç”¨è¦ç´„ã®å¤‰æ›´ï¼‰</h2>\n            <p>\n              å½“ç¤¾ã¯ã€å¿…è¦ã¨åˆ¤æ–­ã—ãŸå ´åˆã«ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã™ã‚‹ã“ã¨ãªãã„ã¤ã§ã‚‚æœ¬è¦ç´„ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚ãªãŠã€æœ¬è¦ç´„ã®å¤‰æ›´å¾Œã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã‚’é–‹å§‹ã—ãŸå ´åˆã«ã¯ã€å½“è©²ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯å¤‰æ›´å¾Œã®è¦ç´„ã«åŒæ„ã—ãŸã‚‚ã®ã¨ã¿ãªã—ã¾ã™ã€‚\n            </p>\n\n            <h2>ç¬¬11æ¡ï¼ˆå€‹äººæƒ…å ±ã®å–æ‰±ã„ï¼‰</h2>\n            <p>\n              å½“ç¤¾ã¯ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã«ã‚ˆã£ã¦å–å¾—ã™ã‚‹å€‹äººæƒ…å ±ã«ã¤ã„ã¦ã¯ã€å½“ç¤¾ã€Œãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã€ã«å¾“ã„é©åˆ‡ã«å–ã‚Šæ‰±ã†ã‚‚ã®ã¨ã—ã¾ã™ã€‚\n            </p>\n\n            <h2>ç¬¬12æ¡ï¼ˆé€šçŸ¥ã¾ãŸã¯é€£çµ¡ï¼‰</h2>\n            <p>\n              ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨å½“ç¤¾ã¨ã®é–“ã®é€šçŸ¥ã¾ãŸã¯é€£çµ¡ã¯ã€å½“ç¤¾ã®å®šã‚ã‚‹æ–¹æ³•ã«ã‚ˆã£ã¦è¡Œã†ã‚‚ã®ã¨ã—ã¾ã™ã€‚å½“ç¤¾ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã€å½“ç¤¾ãŒåˆ¥é€”å®šã‚ã‚‹æ–¹å¼ã«å¾“ã£ãŸå¤‰æ›´å±Šã‘å‡ºãŒãªã„é™ã‚Šã€ç¾åœ¨ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹é€£çµ¡å…ˆãŒæœ‰åŠ¹ãªã‚‚ã®ã¨ã¿ãªã—ã¦å½“è©²é€£çµ¡å…ˆã¸é€šçŸ¥ã¾ãŸã¯é€£çµ¡ã‚’è¡Œã„ã€ã“ã‚Œã‚‰ã¯ã€ç™ºä¿¡æ™‚ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸åˆ°é”ã—ãŸã‚‚ã®ã¨ã¿ãªã—ã¾ã™ã€‚\n            </p>\n\n            <h2>ç¬¬13æ¡ï¼ˆæ¨©åˆ©ç¾©å‹™ã®è­²æ¸¡ã®ç¦æ­¢ï¼‰</h2>\n            <p>\n              ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€å½“ç¤¾ã®æ›¸é¢ã«ã‚ˆã‚‹äº‹å‰ã®æ‰¿è«¾ãªãã€åˆ©ç”¨å¥‘ç´„ä¸Šã®åœ°ä½ã¾ãŸã¯æœ¬è¦ç´„ã«åŸºã¥ãæ¨©åˆ©ã‚‚ã—ãã¯ç¾©å‹™ã‚’ç¬¬ä¸‰è€…ã«è­²æ¸¡ã—ã€ã¾ãŸã¯æ‹…ä¿ã«ä¾›ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚\n            </p>\n\n            <h2>ç¬¬14æ¡ï¼ˆæº–æ‹ æ³•ãƒ»è£åˆ¤ç®¡è½„ï¼‰</h2>\n            <p>\n              æœ¬è¦ç´„ã®è§£é‡ˆã«ã‚ãŸã£ã¦ã¯ã€æ—¥æœ¬æ³•ã‚’æº–æ‹ æ³•ã¨ã—ã¾ã™ã€‚æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã—ã¦ç´›äº‰ãŒç”Ÿã˜ãŸå ´åˆã«ã¯ã€å½“ç¤¾ã®æœ¬åº—æ‰€åœ¨åœ°ã‚’ç®¡è½„ã™ã‚‹è£åˆ¤æ‰€ã‚’å°‚å±çš„åˆæ„ç®¡è½„ã¨ã—ã¾ã™ã€‚\n            </p>\n\n            <div className=\"mt-8 p-4 bg-slate-50 rounded-lg\">\n              <p className=\"text-sm text-slate-600\">\n                ä»¥ä¸Š\n              </p>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n","size_bytes":9523},"src/components/Logo.tsx":{"content":"'use client'\n\nimport Image from 'next/image'\nimport Link from 'next/link'\n\ninterface LogoProps {\n  href?: string\n  width?: number\n  height?: number\n  className?: string\n  linkable?: boolean\n}\n\nexport default function Logo({ href = '/', width = 180, height = 60, className = '', linkable = true }: LogoProps) {\n  const imageElement = (\n    <Image\n      src=\"/logo.png\"\n      alt=\"SIN JAPAN LOGI MATCH\"\n      width={width}\n      height={height}\n      className=\"object-contain\"\n      priority\n    />\n  )\n\n  if (linkable) {\n    return (\n      <Link href={href} className={`flex items-center ${className}`}>\n        {imageElement}\n      </Link>\n    )\n  }\n\n  return (\n    <div className={`flex items-center ${className}`}>\n      {imageElement}\n    </div>\n  )\n}\n\n","size_bytes":757},"src/app/vehicles/register/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Truck, \n  MapPin, \n  Calendar, \n  Weight, \n  DollarSign, \n  User, \n  Phone, \n  Mail,\n  Save,\n  X,\n  Plus,\n  Trash2,\n  Shield,\n  AlertCircle\n} from 'lucide-react'\n\nexport default function VehicleRegisterPage() {\n  const router = useRouter()\n  const [user, setUser] = useState<any>(null)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n  const [isVerified, setIsVerified] = useState(true)\n  const [verificationStatus, setVerificationStatus] = useState('')\n  const [formData, setFormData] = useState({\n    vehicleType: '',\n    vehicleNumber: '',\n    maxWeight: '',\n    availablePrefectures: [] as string[],\n    availableFrom: '',\n    availableTo: '',\n    basePrice: '',\n    driverName: '',\n    driverPhone: '',\n    driverEmail: '',\n    specialFeatures: [] as string[],\n    notes: ''\n  })\n\n  useEffect(() => {\n    const token = localStorage.getItem('token')\n    const userData = localStorage.getItem('user')\n    \n    if (!token || !userData) {\n      router.push('/login')\n      return\n    }\n\n    const parsedUser = JSON.parse(userData)\n    setUser(parsedUser)\n    setVerificationStatus(parsedUser.verificationStatus || 'PENDING')\n    setIsVerified(parsedUser.verificationStatus === 'APPROVED')\n  }, [router])\n\n  const vehicleTypes = [\n    'è»½ãƒˆãƒ©ãƒƒã‚¯', 'å°å‹ãƒˆãƒ©ãƒƒã‚¯', 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯', 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯', 'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼', 'å†·å‡è»Š', 'å†·è”µè»Š', 'ãã®ä»–'\n  ]\n\n  const prefectures = [\n    'åŒ—æµ·é“', 'é’æ£®çœŒ', 'å²©æ‰‹çœŒ', 'å®®åŸçœŒ', 'ç§‹ç”°çœŒ', 'å±±å½¢çœŒ', 'ç¦å³¶çœŒ',\n    'èŒ¨åŸçœŒ', 'æ ƒæœ¨çœŒ', 'ç¾¤é¦¬çœŒ', 'åŸ¼ç‰çœŒ', 'åƒè‘‰çœŒ', 'æ±äº¬éƒ½', 'ç¥å¥ˆå·çœŒ',\n    'æ–°æ½ŸçœŒ', 'å¯Œå±±çœŒ', 'çŸ³å·çœŒ', 'ç¦äº•çœŒ', 'å±±æ¢¨çœŒ', 'é•·é‡çœŒ', 'å²é˜œçœŒ',\n    'é™å²¡çœŒ', 'æ„›çŸ¥çœŒ', 'ä¸‰é‡çœŒ', 'æ»‹è³€çœŒ', 'äº¬éƒ½åºœ', 'å¤§é˜ªåºœ', 'å…µåº«çœŒ',\n    'å¥ˆè‰¯çœŒ', 'å’Œæ­Œå±±çœŒ', 'é³¥å–çœŒ', 'å³¶æ ¹çœŒ', 'å²¡å±±çœŒ', 'åºƒå³¶çœŒ', 'å±±å£çœŒ',\n    'å¾³å³¶çœŒ', 'é¦™å·çœŒ', 'æ„›åª›çœŒ', 'é«˜çŸ¥çœŒ', 'ç¦å²¡çœŒ', 'ä½è³€çœŒ', 'é•·å´çœŒ',\n    'ç†Šæœ¬çœŒ', 'å¤§åˆ†çœŒ', 'å®®å´çœŒ', 'é¹¿å…å³¶çœŒ', 'æ²–ç¸„çœŒ'\n  ]\n\n  const specialFeatures = [\n    'ã‚¯ãƒ¬ãƒ¼ãƒ³ä»˜ã', 'ãƒªãƒ•ãƒˆä»˜ã', 'å†·è”µæ©Ÿèƒ½', 'å†·å‡æ©Ÿèƒ½', 'æ¸©è”µæ©Ÿèƒ½', 'å±é™ºç‰©è¼¸é€å¯¾å¿œ',\n    'ç¾è¡“å“è¼¸é€å¯¾å¿œ', 'ç²¾å¯†æ©Ÿå™¨è¼¸é€å¯¾å¿œ', '24æ™‚é–“å¯¾å¿œ', 'æ€¥ä¾¿å¯¾å¿œ', 'é•·è·é›¢å¯¾å¿œ', 'ãã®ä»–'\n  ]\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    \n    // æœªæ‰¿èªãƒã‚§ãƒƒã‚¯\n    if (!isVerified) {\n      setError('è¨±å¯è¨¼ãŒæ‰¿èªã•ã‚Œã‚‹ã¾ã§ã€è»Šä¸¡ã®ç™»éŒ²ã¯ã§ãã¾ã›ã‚“ã€‚')\n      return\n    }\n    \n    setError('')\n    setLoading(true)\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/vehicles', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          ...formData,\n          maxWeight: parseFloat(formData.maxWeight),\n          basePrice: parseFloat(formData.basePrice),\n        }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'ç©ºè»Šç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n\n      alert('ç©ºè»Šç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸ')\n      router.push('/dashboard/vehicle-search')\n    } catch (err: any) {\n      setError(err.message)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleInputChange = (field: string, value: any) => {\n    setFormData(prev => ({ ...prev, [field]: value }))\n  }\n\n  const handlePrefectureToggle = (prefecture: string) => {\n    setFormData(prev => ({\n      ...prev,\n      availablePrefectures: prev.availablePrefectures.includes(prefecture)\n        ? prev.availablePrefectures.filter(p => p !== prefecture)\n        : [...prev.availablePrefectures, prefecture]\n    }))\n  }\n\n  const handleSpecialFeatureToggle = (feature: string) => {\n    setFormData(prev => ({\n      ...prev,\n      specialFeatures: prev.specialFeatures.includes(feature)\n        ? prev.specialFeatures.filter(f => f !== feature)\n        : [...prev.specialFeatures, feature]\n    }))\n  }\n\n  if (!user) {\n    return null\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"max-w-4xl mx-auto\">\n        <div className=\"mb-8 fade-in-up\">\n          <h1 className=\"text-3xl sm:text-4xl font-bold text-gray-900 mb-2\">\n            ç©ºè»Šç™»éŒ²\n          </h1>\n          <p className=\"text-gray-600\">\n            è»Šä¸¡ã®è©³ç´°æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ç©ºè»Šã‚’ç™»éŒ²ã—ã¦ãã ã•ã„\n          </p>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"space-y-8\">\n          {error && (\n            <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl\">\n              {error}\n            </div>\n          )}\n\n          {/* æœªæ‰¿èªè­¦å‘Š */}\n          {!isVerified && (\n            <div className=\"bg-yellow-50 border border-yellow-300 rounded-lg p-4 flex items-start\">\n              <Shield className=\"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0\" />\n              <div className=\"flex-1\">\n                <h3 className=\"text-sm font-medium text-yellow-800\">è¨±å¯è¨¼ã®æ‰¿èªãŒå¿…è¦ã§ã™</h3>\n                <p className=\"text-sm text-yellow-700 mt-1\">\n                  {verificationStatus === 'PENDING' \n                    ? 'è¨±å¯è¨¼ã®å¯©æŸ»ãŒå®Œäº†ã™ã‚‹ã¾ã§ã€è»Šä¸¡ã®ç™»éŒ²ã¯ã§ãã¾ã›ã‚“ã€‚è¨±å¯è¨¼ãƒšãƒ¼ã‚¸ã§å¿…è¦æ›¸é¡ã‚’æå‡ºã—ã¦ãã ã•ã„ã€‚'\n                    : 'è¨±å¯è¨¼ãŒå´ä¸‹ã•ã‚Œã¦ã„ã¾ã™ã€‚è¨±å¯è¨¼ãƒšãƒ¼ã‚¸ã§å†æå‡ºã—ã¦ãã ã•ã„ã€‚'}\n                </p>\n                <button\n                  type=\"button\"\n                  onClick={() => router.push('/dashboard/verification')}\n                  className=\"mt-2 text-sm text-yellow-800 underline hover:text-yellow-900\"\n                >\n                  è¨±å¯è¨¼ãƒšãƒ¼ã‚¸ã¸ç§»å‹• â†’\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* è»Šä¸¡åŸºæœ¬æƒ…å ± */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.1s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-blue-600 to-cyan-500 p-3 rounded-xl\">\n                <Truck className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">è»Šä¸¡åŸºæœ¬æƒ…å ±</h2>\n            </div>\n\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    è»Šä¸¡ã‚¿ã‚¤ãƒ— *\n                  </label>\n                  <select\n                    required\n                    value={formData.vehicleType}\n                    onChange={(e) => handleInputChange('vehicleType', e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  >\n                    <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                    {vehicleTypes.map(type => (\n                      <option key={type} value={type}>{type}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    è»Šä¸¡ç•ªå· *\n                  </label>\n                  <input\n                    type=\"text\"\n                    required\n                    value={formData.vehicleNumber}\n                    onChange={(e) => handleInputChange('vehicleNumber', e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                    placeholder=\"ä¾‹: å“å· 500 ã‚ 1234\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    æœ€å¤§ç©è¼‰é‡é‡ (kg) *\n                  </label>\n                  <input\n                    type=\"number\"\n                    required\n                    min=\"0\"\n                    step=\"0.01\"\n                    value={formData.maxWeight}\n                    onChange={(e) => handleInputChange('maxWeight', e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                    placeholder=\"1000\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    åŸºæœ¬æ–™é‡‘ (å††/km)\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"0\"\n                    step=\"0.01\"\n                    value={formData.basePrice}\n                    onChange={(e) => handleInputChange('basePrice', e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                    placeholder=\"150\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* é‹è¡Œå¯èƒ½ã‚¨ãƒªã‚¢ */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.2s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-green-600 to-emerald-500 p-3 rounded-xl\">\n                <MapPin className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">é‹è¡Œå¯èƒ½ã‚¨ãƒªã‚¢</h2>\n            </div>\n\n            <div className=\"space-y-4\">\n              <p className=\"text-sm text-gray-600\">é‹è¡Œå¯èƒ½ãªéƒ½é“åºœçœŒã‚’é¸æŠã—ã¦ãã ã•ã„ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</p>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2\">\n                {prefectures.map(prefecture => (\n                  <label key={prefecture} className=\"flex items-center space-x-2 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={formData.availablePrefectures.includes(prefecture)}\n                      onChange={() => handlePrefectureToggle(prefecture)}\n                      className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-sm text-gray-700\">{prefecture}</span>\n                  </label>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* åˆ©ç”¨å¯èƒ½æœŸé–“ */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.3s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-purple-600 to-pink-500 p-3 rounded-xl\">\n                <Calendar className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">åˆ©ç”¨å¯èƒ½æœŸé–“</h2>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  åˆ©ç”¨é–‹å§‹æ—¥ *\n                </label>\n                <input\n                  type=\"date\"\n                  required\n                  value={formData.availableFrom}\n                  onChange={(e) => handleInputChange('availableFrom', e.target.value)}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  åˆ©ç”¨çµ‚äº†æ—¥ *\n                </label>\n                <input\n                  type=\"date\"\n                  required\n                  value={formData.availableTo}\n                  onChange={(e) => handleInputChange('availableTo', e.target.value)}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* é‹è»¢æ‰‹æƒ…å ± */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.4s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-orange-600 to-yellow-500 p-3 rounded-xl\">\n                <User className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">é‹è»¢æ‰‹æƒ…å ±</h2>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  é‹è»¢æ‰‹å *\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.driverName}\n                  onChange={(e) => handleInputChange('driverName', e.target.value)}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"å±±ç”°å¤ªéƒ\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  é›»è©±ç•ªå· *\n                </label>\n                <input\n                  type=\"tel\"\n                  required\n                  value={formData.driverPhone}\n                  onChange={(e) => handleInputChange('driverPhone', e.target.value)}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"090-1234-5678\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹\n                </label>\n                <input\n                  type=\"email\"\n                  value={formData.driverEmail}\n                  onChange={(e) => handleInputChange('driverEmail', e.target.value)}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"yamada@example.com\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* ç‰¹åˆ¥æ©Ÿèƒ½ */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.5s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-teal-600 to-cyan-500 p-3 rounded-xl\">\n                <Truck className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">ç‰¹åˆ¥æ©Ÿèƒ½ãƒ»è¨­å‚™</h2>\n            </div>\n\n            <div className=\"space-y-4\">\n              <p className=\"text-sm text-gray-600\">è©²å½“ã™ã‚‹æ©Ÿèƒ½ãƒ»è¨­å‚™ã‚’é¸æŠã—ã¦ãã ã•ã„ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</p>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2\">\n                {specialFeatures.map(feature => (\n                  <label key={feature} className=\"flex items-center space-x-2 cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      checked={formData.specialFeatures.includes(feature)}\n                      onChange={() => handleSpecialFeatureToggle(feature)}\n                      className=\"rounded border-gray-300 text-blue-600 focus:ring-blue-500\"\n                    />\n                    <span className=\"text-sm text-gray-700\">{feature}</span>\n                  </label>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* å‚™è€ƒ */}\n          <div className=\"card fade-in-up\" style={{animationDelay: '0.6s'}}>\n            <div className=\"flex items-center space-x-3 mb-6\">\n              <div className=\"bg-gradient-to-r from-indigo-600 to-purple-500 p-3 rounded-xl\">\n                <DollarSign className=\"h-6 w-6 text-white\" />\n              </div>\n              <h2 className=\"text-xl sm:text-2xl font-bold text-gray-900\">å‚™è€ƒãƒ»ç‰¹è¨˜äº‹é …</h2>\n            </div>\n\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                  å‚™è€ƒãƒ»ç‰¹è¨˜äº‹é …\n                </label>\n                <textarea\n                  rows={4}\n                  value={formData.notes}\n                  onChange={(e) => handleInputChange('notes', e.target.value)}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 transition\"\n                  placeholder=\"ãã®ä»–ã€ç‰¹åˆ¥ãªè¦æœ›ã‚„æ³¨æ„äº‹é …ãŒã‚ã‚Œã°è¨˜è¼‰ã—ã¦ãã ã•ã„\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* é€ä¿¡ãƒœã‚¿ãƒ³ */}\n          <div className=\"flex flex-col sm:flex-row gap-4 fade-in-up\" style={{animationDelay: '0.7s'}}>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"flex-1 btn-primary py-4 text-lg disabled:opacity-50\"\n            >\n              {loading ? 'ç™»éŒ²ä¸­...' : 'ç©ºè»Šã‚’ç™»éŒ²'}\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => router.push('/dashboard/vehicle-search')}\n              className=\"flex-1 btn-secondary py-4 text-lg\"\n            >\n              ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n            </button>\n          </div>\n        </form>\n      </div>\n    </DashboardLayout>\n  )\n}","size_bytes":18307},"scripts/add-test-users.js":{"content":"const { PrismaClient } = require('@prisma/client')\nconst bcrypt = require('bcryptjs')\n\nconst prisma = new PrismaClient()\n\nasync function main() {\n  console.log('ãƒ†ã‚¹ãƒˆã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¦ã„ã¾ã™...')\n\n  const hashedPassword = await bcrypt.hash('Kazuya8008', 10)\n\n  // ãƒ¡ã‚¤ãƒ³ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¿½åŠ \n  const mainUser = await prisma.user.upsert({\n    where: { email: 'info@sinjapan.jp' },\n    update: {\n      password: hashedPassword,\n      companyName: 'åˆåŒä¼šç¤¾SIN JAPAN',\n      contactPerson: 'å¤§è°· å’Œå“‰',\n    },\n    create: {\n      email: 'info@sinjapan.jp',\n      password: hashedPassword,\n      userType: 'ADMIN', // ç®¡ç†è€…ã¨ã—ã¦è¨­å®š\n      companyName: 'åˆåŒä¼šç¤¾SIN JAPAN',\n      contactPerson: 'å¤§è°· å’Œå“‰',\n      phone: '046-212-2325',\n      postalCode: '243-0303',\n      address: 'ç¥å¥ˆå·çœŒæ„›ç”²éƒ¡æ„›å·ç”ºä¸­æ´¥ï¼—ï¼’ï¼˜ï¼—',\n    },\n  })\n\n  console.log('âœ… ãƒ¡ã‚¤ãƒ³ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸ:')\n  console.log('   Email:', mainUser.email)\n  console.log('   ä¼šç¤¾å:', mainUser.companyName)\n  console.log('   æ‹…å½“è€…:', mainUser.contactPerson)\n\n  // é‹é€ä¼šç¤¾ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚‚è¿½åŠ \n  const carrier = await prisma.user.upsert({\n    where: { email: 'carrier@sinjapan.jp' },\n    update: {\n      password: hashedPassword,\n    },\n    create: {\n      email: 'carrier@sinjapan.jp',\n      password: hashedPassword,\n      userType: 'CARRIER',\n      companyName: 'SIN JAPANé‹é€æ ªå¼ä¼šç¤¾',\n      contactPerson: 'ä½è—¤ å¤ªéƒ',\n      phone: '03-9876-5432',\n      postalCode: '140-0001',\n      address: 'æ±äº¬éƒ½å“å·åŒºåŒ—å“å·1-1-1',\n    },\n  })\n\n  console.log('\\nâœ… é‹é€ä¼šç¤¾ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’è¿½åŠ ã—ã¾ã—ãŸ:')\n  console.log('   Email:', carrier.email)\n  console.log('   ä¼šç¤¾å:', carrier.companyName)\n  console.log('   ç¨®åˆ¥: é‹é€ä¼šç¤¾')\n\n  console.log('\\n=== ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ± ===')\n  console.log('\\nã€ãƒ¡ã‚¤ãƒ³ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€‘')\n  console.log('ID: info@sinjapan.jp')\n  console.log('PASS: Kazuya8008')\n  console.log('ä¼šç¤¾å: åˆåŒä¼šç¤¾SIN JAPAN')\n  console.log('æ‹…å½“è€…: å¤§è°· å’Œå“‰')\n  console.log('\\nã€é‹é€ä¼šç¤¾ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã€‘')\n  console.log('ID: carrier@sinjapan.jp')\n  console.log('PASS: Kazuya8008')\n}\n\nmain()\n  .catch((e) => {\n    console.error('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', e)\n    process.exit(1)\n  })\n  .finally(async () => {\n    await prisma.$disconnect()\n  })\n\n","size_bytes":2389},"src/app/privacy/page.tsx":{"content":"'use client'\n\nimport Link from 'next/link'\nimport Logo from '@/components/Logo'\nimport { ArrowLeft, Shield } from 'lucide-react'\n\nexport default function PrivacyPage() {\n  return (\n    <div className=\"min-h-screen gradient-bg\">\n      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n      <header className=\"glass sticky top-0 z-50 border-b border-white/20\">\n        <nav className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <div className=\"flex justify-between items-center\">\n            <Link href=\"/\" className=\"flex items-center\">\n              <Logo width={200} height={60} className=\"w-[150px] h-[45px] sm:w-[200px] sm:h-[60px]\" linkable={false} />\n            </Link>\n            <div className=\"flex items-center space-x-2 sm:space-x-6\">\n              <Link\n                href=\"/login\"\n                className=\"text-slate-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-all duration-300 hover:scale-105\"\n              >\n                ãƒ­ã‚°ã‚¤ãƒ³\n              </Link>\n              <Link\n                href=\"/register\"\n                className=\"btn-primary text-sm px-6 py-3\"\n              >\n                æ–°è¦ç™»éŒ²\n              </Link>\n            </div>\n          </div>\n        </nav>\n      </header>\n\n      {/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}\n      <main className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <div className=\"mb-8\">\n          <Link \n            href=\"/\" \n            className=\"inline-flex items-center text-blue-600 hover:text-blue-700 transition-colors duration-300 mb-6\"\n          >\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹\n          </Link>\n          \n          <h1 className=\"text-4xl sm:text-5xl font-bold text-slate-800 mb-4 flex items-center\">\n            <Shield className=\"h-8 w-8 mr-4 text-blue-600\" />\n            ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼\n          </h1>\n          <p className=\"text-lg text-slate-600\">\n            æœ€çµ‚æ›´æ–°æ—¥ï¼š2025å¹´1æœˆ15æ—¥\n          </p>\n        </div>\n\n        <div className=\"floating-card\">\n          <div className=\"prose prose-slate max-w-none\">\n            <h2>1. åŸºæœ¬æ–¹é‡</h2>\n            <p>\n              åˆåŒä¼šç¤¾SIN JAPANï¼ˆä»¥ä¸‹ã€Œå½“ç¤¾ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã¯ã€å€‹äººæƒ…å ±ã®é‡è¦æ€§ã‚’èªè­˜ã—ã€å€‹äººæƒ…å ±ã®ä¿è­·ã«é–¢ã™ã‚‹æ³•å¾‹ï¼ˆå€‹äººæƒ…å ±ä¿è­·æ³•ï¼‰ã‚’éµå®ˆã™ã‚‹ã¨ã¨ã‚‚ã«ã€ä»¥ä¸‹ã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ï¼ˆä»¥ä¸‹ã€Œæœ¬ãƒãƒªã‚·ãƒ¼ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã«å¾“ã£ã¦ã€é©åˆ‡ãªå–æ‰±ã„åŠã³ä¿è­·ã«åŠªã‚ã¾ã™ã€‚\n            </p>\n\n            <h2>2. å€‹äººæƒ…å ±ã®å®šç¾©</h2>\n            <p>\n              æœ¬ãƒãƒªã‚·ãƒ¼ã«ãŠã„ã¦ã€å€‹äººæƒ…å ±ã¨ã¯ã€å€‹äººæƒ…å ±ä¿è­·æ³•ã«ã„ã†ã€Œå€‹äººæƒ…å ±ã€ã‚’æŒ‡ã™ã‚‚ã®ã¨ã—ã€ç”Ÿå­˜ã™ã‚‹å€‹äººã«é–¢ã™ã‚‹æƒ…å ±ã§ã‚ã£ã¦ã€å½“è©²æƒ…å ±ã«å«ã¾ã‚Œã‚‹æ°åã€ç”Ÿå¹´æœˆæ—¥ã€ä½æ‰€ã€é›»è©±ç•ªå·ã€é€£çµ¡å…ˆãã®ä»–ã®è¨˜è¿°ç­‰ã«ã‚ˆã‚Šç‰¹å®šã®å€‹äººã‚’è­˜åˆ¥ã§ãã‚‹æƒ…å ±åŠã³å®¹è²Œã€æŒ‡ç´‹ã€å£°ç´‹ã«ã‹ã‹ã‚‹ãƒ‡ãƒ¼ã‚¿ã€åŠã³å¥åº·ä¿é™ºè¨¼ã®ä¿é™ºè€…ç•ªå·ãªã©ã®å½“è©²æƒ…å ±å˜ä½“ã‹ã‚‰ç‰¹å®šã®å€‹äººã‚’è­˜åˆ¥ã§ãã‚‹æƒ…å ±ï¼ˆå€‹äººè­˜åˆ¥æƒ…å ±ï¼‰ã‚’æŒ‡ã—ã¾ã™ã€‚\n            </p>\n\n            <h2>3. å€‹äººæƒ…å ±ã®åé›†æ–¹æ³•</h2>\n            <p>\n              å½“ç¤¾ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨ç™»éŒ²ã‚’ã™ã‚‹éš›ã«æ°åã€ç”Ÿå¹´æœˆæ—¥ã€ä½æ‰€ã€é›»è©±ç•ªå·ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€éŠ€è¡Œå£åº§ç•ªå·ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ç•ªå·ã€é‹è»¢å…è¨±è¨¼ç•ªå·ãªã©ã®å€‹äººæƒ…å ±ã‚’ãŠå°‹ã­ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ã¾ãŸã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ææºå…ˆãªã©ã¨ã®é–“ã§ãªã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å€‹äººæƒ…å ±ã‚’å«ã‚€å–å¼•è¨˜éŒ²ã‚„æ±ºæ¸ˆã«é–¢ã™ã‚‹æƒ…å ±ã‚’ã€å½“ç¤¾ã®ææºå…ˆï¼ˆæƒ…å ±æä¾›å…ƒã€åºƒå‘Šä¸»ã€åºƒå‘Šé…ä¿¡å…ˆãªã©ã‚’å«ã¿ã¾ã™ã€‚ä»¥ä¸‹ã€ã€Œææºå…ˆã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ãªã©ã‹ã‚‰åé›†ã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚\n            </p>\n\n            <h2>4. å€‹äººæƒ…å ±ã‚’åé›†ãƒ»åˆ©ç”¨ã™ã‚‹ç›®çš„</h2>\n            <p>å½“ç¤¾ãŒå€‹äººæƒ…å ±ã‚’åé›†ãƒ»åˆ©ç”¨ã™ã‚‹ç›®çš„ã¯ã€ä»¥ä¸‹ã®ã¨ãŠã‚Šã§ã™ã€‚</p>\n            <ul>\n              <li>å½“ç¤¾ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ãƒ»é‹å–¶ã®ãŸã‚</li>\n              <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ã®ãŠå•ã„åˆã‚ã›ã«å›ç­”ã™ã‚‹ãŸã‚ï¼ˆæœ¬äººç¢ºèªã‚’è¡Œã†ã“ã¨ã‚’å«ã‚€ï¼‰</li>\n              <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåˆ©ç”¨ä¸­ã®ã‚µãƒ¼ãƒ“ã‚¹ã®æ–°æ©Ÿèƒ½ã€æ›´æ–°æƒ…å ±ã€ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ç­‰åŠã³å½“ç¤¾ãŒæä¾›ã™ã‚‹ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã®æ¡ˆå†…ã®ãƒ¡ãƒ¼ãƒ«ã‚’é€ä»˜ã™ã‚‹ãŸã‚</li>\n              <li>ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã€é‡è¦ãªãŠçŸ¥ã‚‰ã›ãªã©å¿…è¦ã«å¿œã˜ãŸã”é€£çµ¡ã®ãŸã‚</li>\n              <li>åˆ©ç”¨è¦ç´„ã«é•åã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã€ä¸æ­£ãƒ»ä¸å½“ãªç›®çš„ã§ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç‰¹å®šã‚’ã—ã€ã”åˆ©ç”¨ã‚’ãŠæ–­ã‚Šã™ã‚‹ãŸã‚</li>\n              <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã”è‡ªèº«ã®ç™»éŒ²æƒ…å ±ã®é–²è¦§ãƒ»å¤‰æ›´ãƒ»å‰Šé™¤ãƒ»ã”åˆ©ç”¨çŠ¶æ³ã®é–²è¦§ã‚’è¡Œã£ã¦ã„ãŸã ããŸã‚</li>\n              <li>æœ‰æ–™ã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã„ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«åˆ©ç”¨æ–™é‡‘ã‚’è«‹æ±‚ã™ã‚‹ãŸã‚</li>\n              <li>ä¸Šè¨˜ã®åˆ©ç”¨ç›®çš„ã«ä»˜éšã™ã‚‹ç›®çš„</li>\n            </ul>\n\n            <h2>5. åˆ©ç”¨ç›®çš„ã®å¤‰æ›´</h2>\n            <p>\n              å½“ç¤¾ã¯ã€åˆ©ç”¨ç›®çš„ãŒå¤‰æ›´å‰ã¨é–¢é€£æ€§ã‚’æœ‰ã™ã‚‹ã¨åˆç†çš„ã«èªã‚ã‚‰ã‚Œã‚‹å ´åˆã«é™ã‚Šã€å€‹äººæƒ…å ±ã®åˆ©ç”¨ç›®çš„ã‚’å¤‰æ›´ã™ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚åˆ©ç”¨ç›®çš„ã®å¤‰æ›´ã‚’è¡Œã£ãŸå ´åˆã«ã¯ã€å¤‰æ›´å¾Œã®ç›®çš„ã«ã¤ã„ã¦ã€å½“ç¤¾æ‰€å®šã®æ–¹æ³•ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã—ã€ã¾ãŸã¯æœ¬ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆä¸Šã«å…¬è¡¨ã™ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚\n            </p>\n\n            <h2>6. å€‹äººæƒ…å ±ã®ç¬¬ä¸‰è€…æä¾›</h2>\n            <p>\n              å½“ç¤¾ã¯ã€æ¬¡ã«æ²ã’ã‚‹å ´åˆã‚’é™¤ã„ã¦ã€ã‚ã‚‰ã‹ã˜ã‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŒæ„ã‚’å¾—ã‚‹ã“ã¨ãªãã€ç¬¬ä¸‰è€…ã«å€‹äººæƒ…å ±ã‚’æä¾›ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã ã—ã€å€‹äººæƒ…å ±ä¿è­·æ³•ãã®ä»–ã®æ³•ä»¤ã§èªã‚ã‚‰ã‚Œã‚‹å ´åˆã‚’é™¤ãã¾ã™ã€‚\n            </p>\n            <ul>\n              <li>äººã®ç”Ÿå‘½ã€èº«ä½“ã¾ãŸã¯è²¡ç”£ã®ä¿è­·ã®ãŸã‚ã«å¿…è¦ãŒã‚ã‚‹å ´åˆã§ã‚ã£ã¦ã€æœ¬äººã®åŒæ„ã‚’å¾—ã‚‹ã“ã¨ãŒå›°é›£ã§ã‚ã‚‹ã¨ã</li>\n              <li>å…¬è¡†è¡›ç”Ÿã®å‘ä¸Šã¾ãŸã¯å…ç«¥ã®å¥å…¨ãªè‚²æˆã®æ¨é€²ã®ãŸã‚ã«ç‰¹ã«å¿…è¦ãŒã‚ã‚‹å ´åˆã§ã‚ã£ã¦ã€æœ¬äººã®åŒæ„ã‚’å¾—ã‚‹ã“ã¨ãŒå›°é›£ã§ã‚ã‚‹ã¨ã</li>\n              <li>å›½ã®æ©Ÿé–¢ã‚‚ã—ãã¯åœ°æ–¹å…¬å…±å›£ä½“ã¾ãŸã¯ãã®å§”è¨—ã‚’å—ã‘ãŸè€…ãŒæ³•ä»¤ã®å®šã‚ã‚‹äº‹å‹™ã‚’é‚è¡Œã™ã‚‹ã“ã¨ã«å¯¾ã—ã¦å”åŠ›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆã§ã‚ã£ã¦ã€æœ¬äººã®åŒæ„ã‚’å¾—ã‚‹ã“ã¨ã«ã‚ˆã‚Šå½“è©²äº‹å‹™ã®é‚è¡Œã«æ”¯éšœã‚’åŠã¼ã™ãŠãã‚ŒãŒã‚ã‚‹ã¨ã</li>\n              <li>äºˆã‚æ¬¡ã®äº‹é …ã‚’å‘ŠçŸ¥ã‚ã‚‹ã„ã¯å…¬è¡¨ã—ã€ã‹ã¤å½“ç¤¾ãŒå€‹äººæƒ…å ±ä¿è­·å§”å“¡ä¼šã«å±Šå‡ºã‚’ã—ãŸã¨ã</li>\n            </ul>\n\n            <h2>7. å€‹äººæƒ…å ±ã®é–‹ç¤º</h2>\n            <p>\n              å½“ç¤¾ã¯ã€æœ¬äººã‹ã‚‰å€‹äººæƒ…å ±ã®é–‹ç¤ºã‚’æ±‚ã‚ã‚‰ã‚ŒãŸã¨ãã¯ã€æœ¬äººã«å¯¾ã—ã€é…æ»ãªãã“ã‚Œã‚’é–‹ç¤ºã—ã¾ã™ã€‚ãŸã ã—ã€é–‹ç¤ºã™ã‚‹ã“ã¨ã«ã‚ˆã‚Šæ¬¡ã®ã„ãšã‚Œã‹ã«è©²å½“ã™ã‚‹å ´åˆã¯ã€ãã®å…¨éƒ¨ã¾ãŸã¯ä¸€éƒ¨ã‚’é–‹ç¤ºã—ãªã„ã“ã¨ã‚‚ã‚ã‚Šã€é–‹ç¤ºã—ãªã„æ±ºå®šã‚’ã—ãŸå ´åˆã«ã¯ã€ãã®æ—¨ã‚’é…æ»ãªãé€šçŸ¥ã—ã¾ã™ã€‚\n            </p>\n            <ul>\n              <li>æœ¬äººã¾ãŸã¯ç¬¬ä¸‰è€…ã®ç”Ÿå‘½ã€èº«ä½“ã€è²¡ç”£ãã®ä»–ã®æ¨©åˆ©åˆ©ç›Šã‚’å®³ã™ã‚‹ãŠãã‚ŒãŒã‚ã‚‹å ´åˆ</li>\n              <li>å½“ç¤¾ã®æ¥­å‹™ã®é©æ­£ãªå®Ÿæ–½ã«è‘—ã—ã„æ”¯éšœã‚’åŠã¼ã™ãŠãã‚ŒãŒã‚ã‚‹å ´åˆ</li>\n              <li>ãã®ä»–æ³•ä»¤ã«é•åã™ã‚‹ã“ã¨ã¨ãªã‚‹å ´åˆ</li>\n            </ul>\n\n            <h2>8. å€‹äººæƒ…å ±ã®è¨‚æ­£ãŠã‚ˆã³å‰Šé™¤</h2>\n            <p>\n              ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€å½“ç¤¾ã®ä¿æœ‰ã™ã‚‹è‡ªå·±ã®å€‹äººæƒ…å ±ãŒèª¤ã£ãŸæƒ…å ±ã§ã‚ã‚‹å ´åˆã«ã¯ã€å½“ç¤¾ãŒå®šã‚ã‚‹æ‰‹ç¶šã«ã‚ˆã‚Šã€å½“ç¤¾ã«å¯¾ã—ã¦å€‹äººæƒ…å ±ã®è¨‚æ­£ã€è¿½åŠ ã¾ãŸã¯å‰Šé™¤ï¼ˆä»¥ä¸‹ã€ã€Œè¨‚æ­£ç­‰ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã‚’è«‹æ±‚ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚å½“ç¤¾ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰å‰é …ã®è«‹æ±‚ã‚’å—ã‘ã¦ãã®è«‹æ±‚ã«ç†ç”±ãŒã‚ã‚‹ã¨åˆ¤æ–­ã—ãŸå ´åˆã«ã¯ã€é…æ»ãªãã€å½“è©²å€‹äººæƒ…å ±ã®è¨‚æ­£ç­‰ã‚’è¡Œã†ã‚‚ã®ã¨ã—ã¾ã™ã€‚\n            </p>\n\n            <h2>9. å€‹äººæƒ…å ±ã®åˆ©ç”¨åœæ­¢ç­‰</h2>\n            <p>\n              å½“ç¤¾ã¯ã€æœ¬äººã‹ã‚‰ã€å€‹äººæƒ…å ±ãŒã€åˆ©ç”¨ç›®çš„ã®ç¯„å›²ã‚’è¶…ãˆã¦å–ã‚Šæ‰±ã‚ã‚Œã¦ã„ã‚‹ã¨ã„ã†ç†ç”±ã€ã¾ãŸã¯ä¸æ­£ã®æ‰‹æ®µã«ã‚ˆã‚Šå–å¾—ã•ã‚ŒãŸã‚‚ã®ã§ã‚ã‚‹ã¨ã„ã†ç†ç”±ã«ã‚ˆã‚Šã€ãã®åˆ©ç”¨ã®åœæ­¢ã¾ãŸã¯æ¶ˆå»ï¼ˆä»¥ä¸‹ã€ã€Œåˆ©ç”¨åœæ­¢ç­‰ã€ã¨ã„ã„ã¾ã™ã€‚ï¼‰ã‚’æ±‚ã‚ã‚‰ã‚ŒãŸå ´åˆã«ã¯ã€é…æ»ãªãå¿…è¦ãªèª¿æŸ»ã‚’è¡Œã„ã¾ã™ã€‚å‰é …ã®èª¿æŸ»çµæœã«åŸºã¥ãã€ãã®è«‹æ±‚ã«ç†ç”±ãŒã‚ã‚‹ã¨åˆ¤æ–­ã—ãŸå ´åˆã«ã¯ã€é…æ»ãªãã€å½“è©²å€‹äººæƒ…å ±ã®åˆ©ç”¨åœæ­¢ç­‰ã‚’è¡Œã„ã¾ã™ã€‚\n            </p>\n\n            <h2>10. ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã®å¤‰æ›´</h2>\n            <p>\n              æœ¬ãƒãƒªã‚·ãƒ¼ã®å†…å®¹ã¯ã€æ³•ä»¤ãã®ä»–æœ¬ãƒãƒªã‚·ãƒ¼ã«åˆ¥æ®µã®å®šã‚ã®ã‚ã‚‹äº‹é …ã‚’é™¤ã„ã¦ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã™ã‚‹ã“ã¨ãªãã€å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚å½“ç¤¾ãŒåˆ¥é€”å®šã‚ã‚‹å ´åˆã‚’é™¤ã„ã¦ã€å¤‰æ›´å¾Œã®ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã¯ã€æœ¬ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«æ²è¼‰ã—ãŸã¨ãã‹ã‚‰åŠ¹åŠ›ã‚’ç”Ÿã˜ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚\n            </p>\n\n            <h2>11. ãŠå•ã„åˆã‚ã›çª“å£</h2>\n            <p>\n              æœ¬ãƒãƒªã‚·ãƒ¼ã«é–¢ã™ã‚‹ãŠå•ã„åˆã‚ã›ã¯ã€ä¸‹è¨˜ã®çª“å£ã¾ã§ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚\n            </p>\n            <div className=\"bg-slate-50 p-4 rounded-lg\">\n              <p><strong>åˆåŒä¼šç¤¾SIN JAPAN</strong></p>\n              <p>ä½æ‰€ï¼šã€’243-0303 ç¥å¥ˆå·çœŒæ„›ç”²éƒ¡æ„›å·ç”ºä¸­æ´¥ï¼—ï¼’ï¼˜ï¼—</p>\n              <p>é›»è©±ï¼š046-212-2325</p>\n              <p>FAXï¼š046-212-2326</p>\n              <p>ãƒ¡ãƒ¼ãƒ«ï¼šinfo@sinjapan.jp</p>\n            </div>\n\n            <div className=\"mt-8 p-4 bg-slate-50 rounded-lg\">\n              <p className=\"text-sm text-slate-600\">\n                ä»¥ä¸Š\n              </p>\n            </div>\n          </div>\n        </div>\n      </main>\n    </div>\n  )\n}\n","size_bytes":10144},"replit.md":{"content":"# SIN JAPAN LOGI MATCH - ç‰©æµãƒãƒƒãƒãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ \n\n## Overview\nSIN JAPAN LOGI MATCH is a logistics matching platform designed for the Japanese market, connecting shippers (è·ä¸») with carriers (é‹é€ä¼šç¤¾). The platform leverages AI for efficient cargo-to-truck matching, aiming to provide next-generation freight procurement services. It enables users to post shipments, carriers to make offers, manage vehicle fleets, and provides comprehensive dashboards for both user types. The platform also includes robust user verification, a rating system, and detailed company settings management.\n\n## User Preferences\nI prefer detailed explanations and clear communication. Please ask before making major changes to the codebase or architectural decisions. I value iterative development and well-structured code.\n\n## System Architecture\nThe platform is built on **Next.js 14 (App Router)** with **TypeScript**, utilizing **Tailwind CSS** for styling, and **React Hook Form** with **Zod** for form validation.\n- **UI/UX**: Features a unified dashboard layout for consistency across 24+ pages, responsive mobile menus with smooth transitions, and a comprehensive CSS animation system (10+ animations, scroll-triggered effects) for enhanced user experience. Visual distinctions are used for shipper (blue) and carrier (green) selections.\n- **Authentication & Authorization**: Implements JWT with bcryptjs for secure authentication. Features an admin dashboard with `verifyAdminToken()` middleware for server-side enforcement and granular access control (e.g., admin role assignment, user/shipment/payment management). Unverified users are blocked from critical actions (e.g., posting shipments, registering vehicles) via server-side enforcement.\n- **User Management**: A unified registration process for both shippers and carriers. Extends the `User` model with 30+ fields for detailed company information, including credit info, contract details, bank accounts, payment settings, invoice configurations, and notification preferences, managed via a unified settings API and UI.\n- **Core Functionality**:\n    - **Shipment Management**: Comprehensive shipment registration with detailed fields (e.g., postal codes, vehicle types, special requirements) and status tracking.\n    - **Verification & Rating**: `User`, `Verification`, and `Rating` models enable document submission, admin approval, and a trust score system based on user reviews.\n    - **Services Section**: Includes a Price Calculator, Distance Calculator (using Haversine for 47 prefectures), and Fuel Cost Calculator, all with deterministic results and a user-friendly UI.\n    - **Payment System**: Integrated `Payment` model tracking various methods (bank transfer, Square, Kaihipay), with dedicated UIs and APIs for payment initialization, history retrieval, and secure processing. Square Web Payments SDK is integrated for card payments.\n    - **Notification System**: Admin broadcasting system with both email (Resend API) and in-app notifications. Features per-user `NotificationReceipt` table for secure read/delete state management, preventing cross-user mutations. Supports targeted notifications (ALL, SHIPPER, CARRIER, SPECIFIC_USER) with notification bell in dashboard header.\n- **Database**: PostgreSQL is used as the primary database, managed with **Prisma ORM**.\n- **Project Structure**: Follows a standard Next.js App Router structure with logical separation of components, utilities (auth, Prisma client, validators), custom hooks, and Prisma schema.\n\n## External Dependencies\n- **Database**: PostgreSQL (Neon-backed via Replit)\n- **ORM**: Prisma\n- **Authentication**: JWT, bcryptjs\n- **Styling**: Tailwind CSS\n- **Form Management**: React Hook Form, Zod\n- **Email Service**: Resend API (for contact form submissions)\n- **Payment Gateways**:\n    - Square Web Payments SDK (for card payments)\n    - Kaihipay (for direct debit â€“ integration ready)\n\n## Recent Changes\n### Admin Notification System Implementation (October 17, 2025)\n- âœ… **Database Schema**: Added `Notification` and `NotificationReceipt` tables with per-user read/delete state\n- âœ… **Security Fix**: Implemented per-user `NotificationReceipt` to prevent cross-user mutations (approved by architect)\n- âœ… **Admin API**: POST /api/admin/notifications (create with auto-receipt generation), GET (retrieve all notifications)\n- âœ… **User API**: GET /api/notifications (fetch user receipts), PUT/DELETE /api/notifications/[id] (mark read/delete per-user)\n- âœ… **Email Integration**: Resend API for email notifications with HTML templates\n- âœ… **Admin UI**: /admin/notifications page with targeting (ALL, SHIPPER, CARRIER, SPECIFIC_USER) and email toggle\n- âœ… **User UI**: /dashboard/notifications page with notification bell in header, unread count badge\n- âœ… **Future Improvements**: Error handling for SPECIFIC_USER targeting, receipt backfill for legacy data, regression tests\n\n### Deployment Error Resolution (October 17, 2025)\n- âœ… **Fixed Next.js static rendering errors**: Added `export const dynamic = 'force-dynamic'` to all 26 API routes\n- âœ… **Resolved deployment failures**: All API routes now properly configured for server-side rendering\n- âœ… **Production build verified**: All 49 pages compile successfully, API routes marked as dynamic (Æ’)\n- âœ… **Fixed deployment run command**: Changed from `npm run` to `npm start` for proper server startup\n- âœ… **Application ready for deployment**: No errors, server running smoothly\n\n### Production Deployment Preparation (October 17, 2025)\n- âœ… Security hardening: Removed hardcoded JWT_SECRET fallback, now requires environment variable\n- âœ… Fixed TypeScript build errors (shipment budgetâ†’price property)\n- âœ… Optimized build script: Removed failing migrate deploy, using Prisma generate only","size_bytes":5821},"src/app/api/contact/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { Resend } from 'resend'\n\nconst resend = new Resend(process.env.RESEND_API_KEY)\n\nexport const dynamic = 'force-dynamic'\n\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json()\n    const {\n      lastName,\n      firstName,\n      lastNameKana,\n      firstNameKana,\n      company,\n      department,\n      phone,\n      email,\n      contactMethod,\n      message,\n      newsletter\n    } = body\n\n    if (!lastName || !firstName || !lastNameKana || !firstNameKana || !phone || !email || !message) {\n      return NextResponse.json(\n        { success: false, error: 'å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„' },\n        { status: 400 }\n      )\n    }\n\n    const emailContent = `\nã€æ–°è¦ãŠå•ã„åˆã‚ã›ã€‘\n\nãŠåå‰: ${lastName} ${firstName}\nãƒ•ãƒªã‚¬ãƒŠ: ${lastNameKana} ${firstNameKana}\nä¼šç¤¾å: ${company || 'æœªè¨˜å…¥'}\néƒ¨ç½²ãƒ»å½¹è·: ${department || 'æœªè¨˜å…¥'}\né›»è©±ç•ªå·: ${phone}\nãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: ${email}\nå¸Œæœ›é€£çµ¡æ–¹æ³•: ${contactMethod === 'email' ? 'ãƒ¡ãƒ¼ãƒ«' : contactMethod === 'phone' ? 'é›»è©±' : 'æœªé¸æŠ'}\nãƒ¡ãƒ«ãƒã‚¬ç™»éŒ²: ${newsletter ? 'å¸Œæœ›ã™ã‚‹' : 'å¸Œæœ›ã—ãªã„'}\n\nã€ãŠå•ã„åˆã‚ã›å†…å®¹ã€‘\n${message}\n\n---\nã“ã®ãƒ¡ãƒ¼ãƒ«ã¯ SIN JAPAN LOGI MATCH ã®ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚\n    `.trim()\n\n    const data = await resend.emails.send({\n      from: 'SIN JAPAN LOGI MATCH <noreply@sinjapan.jp>',\n      to: ['info@sinjapan.jp'],\n      replyTo: email as string,\n      subject: `ã€ãŠå•ã„åˆã‚ã›ã€‘${lastName} ${firstName}æ§˜ã‚ˆã‚Š`,\n      text: emailContent,\n    })\n\n    return NextResponse.json({\n      success: true,\n      message: 'ãŠå•ã„åˆã‚ã›ã‚’é€ä¿¡ã—ã¾ã—ãŸ',\n      data\n    })\n  } catch (error) {\n    console.error('Contact form error:', error)\n    return NextResponse.json(\n      { success: false, error: 'ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ' },\n      { status: 500 }\n    )\n  }\n}\n","size_bytes":1978},"src/hooks/useScrollAnimation.ts":{"content":"'use client'\n\nimport { useEffect, useRef, useState } from 'react'\n\nexport function useScrollAnimation(options?: IntersectionObserverInit) {\n  const ref = useRef<HTMLDivElement>(null)\n  const [isVisible, setIsVisible] = useState(false)\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(([entry]) => {\n      if (entry.isIntersecting) {\n        setIsVisible(true)\n      }\n    }, {\n      threshold: 0.1,\n      ...options,\n    })\n\n    const currentRef = ref.current\n    if (currentRef) {\n      observer.observe(currentRef)\n    }\n\n    return () => {\n      if (currentRef) {\n        observer.unobserve(currentRef)\n      }\n    }\n  }, [options])\n\n  return { ref, isVisible }\n}\n","size_bytes":685},"src/lib/adminAuth.ts":{"content":"import { NextRequest } from 'next/server'\nimport { verifyToken } from './auth'\nimport { prisma } from './prisma'\n\nexport async function verifyAdminToken(request: NextRequest) {\n  const token = request.headers.get('authorization')?.replace('Bearer ', '')\n  \n  if (!token) {\n    return { error: 'èªè¨¼ãŒå¿…è¦ã§ã™', status: 401, user: null }\n  }\n\n  const decoded = verifyToken(token)\n  if (!decoded) {\n    return { error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™', status: 401, user: null }\n  }\n\n  // ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã¦adminæ¨©é™ã‚’ç¢ºèª\n  const user = await prisma.user.findUnique({\n    where: { id: decoded.userId }\n  })\n\n  if (!user) {\n    return { error: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', status: 404, user: null }\n  }\n\n  if (!user.isAdmin) {\n    return { error: 'ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™', status: 403, user: null }\n  }\n\n  return { error: null, status: 200, user }\n}\n","size_bytes":891},"src/app/api/payments/[id]/kaihipay/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const paymentId = params.id\n\n    // æ±ºæ¸ˆæƒ…å ±ã‚’å–å¾—\n    const payment = await prisma.payment.findUnique({\n      where: { id: paymentId },\n      include: {\n        user: {\n          select: {\n            email: true,\n            companyName: true,\n            contactPerson: true,\n            phone: true\n          }\n        }\n      }\n    })\n\n    if (!payment) {\n      return NextResponse.json({ error: 'æ±ºæ¸ˆæƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' }, { status: 404 })\n    }\n\n    // ä¼šè²»ãƒšã‚¤ãƒšãƒ¼ã‚¸ã®HTMLã‚’è¿”ã™\n    const html = `\n      <!DOCTYPE html>\n      <html lang=\"ja\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>ä¼šè²»ãƒšã‚¤ å£åº§æŒ¯æ›¿è¨­å®š - SIN JAPAN LOGI MATCH</title>\n        <style>\n          body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            max-width: 700px;\n            margin: 50px auto;\n            padding: 20px;\n            background: #f5f5f5;\n          }\n          .container {\n            background: white;\n            padding: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n          }\n          h1 {\n            color: #333;\n            margin-bottom: 10px;\n          }\n          .amount {\n            font-size: 32px;\n            color: #8b5cf6;\n            font-weight: bold;\n            margin: 20px 0;\n          }\n          .info {\n            background: #f8f9fa;\n            padding: 15px;\n            border-radius: 4px;\n            margin: 20px 0;\n          }\n          .form-group {\n            margin-bottom: 20px;\n          }\n          label {\n            display: block;\n            font-weight: 600;\n            margin-bottom: 5px;\n            color: #333;\n          }\n          input, select {\n            width: 100%;\n            padding: 12px;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            font-size: 16px;\n            box-sizing: border-box;\n          }\n          input:focus, select:focus {\n            outline: none;\n            border-color: #8b5cf6;\n          }\n          .submit-button {\n            background: #8b5cf6;\n            color: white;\n            border: none;\n            padding: 15px 30px;\n            border-radius: 4px;\n            font-size: 16px;\n            cursor: pointer;\n            width: 100%;\n            margin-top: 20px;\n          }\n          .submit-button:hover {\n            background: #7c3aed;\n          }\n          .submit-button:disabled {\n            background: #ccc;\n            cursor: not-allowed;\n          }\n          .message {\n            margin-top: 20px;\n            padding: 15px;\n            border-radius: 4px;\n          }\n          .success {\n            background: #d4edda;\n            color: #155724;\n          }\n          .error {\n            background: #f8d7da;\n            color: #721c24;\n          }\n          .note {\n            background: #fff3cd;\n            border: 1px solid #ffeaa7;\n            padding: 15px;\n            border-radius: 4px;\n            margin: 20px 0;\n            color: #856404;\n          }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <h1>ä¼šè²»ãƒšã‚¤ å£åº§æŒ¯æ›¿è¨­å®š</h1>\n          <div class=\"amount\">Â¥${payment.amount.toLocaleString()}</div>\n          \n          <div class=\"info\">\n            <p><strong>ä¼šç¤¾å:</strong> ${payment.user.companyName}</p>\n            <p><strong>æ‹…å½“è€…:</strong> ${payment.user.contactPerson}</p>\n            <p><strong>æ±ºæ¸ˆID:</strong> ${payment.id}</p>\n          </div>\n\n          <div class=\"note\">\n            <p><strong>âš ï¸ é‡è¦ãªãŠçŸ¥ã‚‰ã›</strong></p>\n            <p>ä¼šè²»ãƒšã‚¤ã®å£åº§æŒ¯æ›¿è¨­å®šã«ã¯ã€ä¼šè²»ãƒšã‚¤ã®APIé€£æºãŒå¿…è¦ã§ã™ã€‚</p>\n            <p>ä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒ ã¯è¨­å®šå¾Œã«æœ‰åŠ¹åŒ–ã•ã‚Œã¾ã™ã€‚</p>\n          </div>\n\n          <form id=\"bank-account-form\">\n            <div class=\"form-group\">\n              <label for=\"bank-name\">é‡‘èæ©Ÿé–¢å</label>\n              <input type=\"text\" id=\"bank-name\" name=\"bankName\" placeholder=\"ä¾‹ï¼šä¸‰è±UFJéŠ€è¡Œ\" required disabled>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"branch-name\">æ”¯åº—å</label>\n              <input type=\"text\" id=\"branch-name\" name=\"branchName\" placeholder=\"ä¾‹ï¼šæœ¬åº—\" required disabled>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"account-type\">å£åº§ç¨®åˆ¥</label>\n              <select id=\"account-type\" name=\"accountType\" required disabled>\n                <option value=\"\">é¸æŠã—ã¦ãã ã•ã„</option>\n                <option value=\"æ™®é€š\">æ™®é€š</option>\n                <option value=\"å½“åº§\">å½“åº§</option>\n              </select>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"account-number\">å£åº§ç•ªå·</label>\n              <input type=\"text\" id=\"account-number\" name=\"accountNumber\" placeholder=\"7æ¡ã®æ•°å­—\" pattern=\"[0-9]{7}\" required disabled>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"account-holder\">å£åº§åç¾©ï¼ˆã‚«ã‚¿ã‚«ãƒŠï¼‰</label>\n              <input type=\"text\" id=\"account-holder\" name=\"accountHolder\" placeholder=\"ä¾‹ï¼šã‚«ãƒ–ã‚·ã‚­ã‚¬ã‚¤ã‚·ãƒ£ ã‚µãƒ³ãƒ—ãƒ«\" required disabled>\n            </div>\n\n            <button type=\"submit\" class=\"submit-button\" disabled>å£åº§æŒ¯æ›¿ã‚’è¨­å®š</button>\n          </form>\n\n          <div id=\"status\"></div>\n\n          <div style=\"margin-top: 30px; text-align: center;\">\n            <p style=\"font-size: 14px; color: #666;\">\n              ä¼šè²»ãƒšã‚¤ APIé€£æºã®è¨­å®šæ–¹æ³•ã«ã¤ã„ã¦ã¯ã€\n              <a href=\"/dashboard/settings\" style=\"color: #8b5cf6;\">è¨­å®šãƒšãƒ¼ã‚¸</a>\n              ã‚’ã”ç¢ºèªãã ã•ã„ã€‚\n            </p>\n            <button onclick=\"window.location.href='/dashboard'\" style=\"margin-top: 15px; background: #6b7280; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;\">\n              ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹\n            </button>\n          </div>\n        </div>\n\n        <script>\n          document.getElementById('bank-account-form').addEventListener('submit', async (e) => {\n            e.preventDefault();\n            \n            const formData = new FormData(e.target);\n            const data = Object.fromEntries(formData.entries());\n            const statusDiv = document.getElementById('status');\n            const submitButton = e.target.querySelector('button[type=\"submit\"]');\n            \n            submitButton.disabled = true;\n            submitButton.textContent = 'å‡¦ç†ä¸­...';\n\n            try {\n              // TODO: ä¼šè²»ãƒšã‚¤APIã®å®Ÿè£…\n              // const response = await fetch('/api/payments/${paymentId}/complete', {\n              //   method: 'POST',\n              //   headers: { 'Content-Type': 'application/json' },\n              //   body: JSON.stringify({ \n              //     accountInfo: data,\n              //     provider: 'kaihipay'\n              //   })\n              // });\n\n              // ãƒ‡ãƒ¢ç”¨ã®æˆåŠŸå‡¦ç†\n              setTimeout(() => {\n                statusDiv.innerHTML = '<div class=\"message success\">å£åº§æŒ¯æ›¿ã®è¨­å®šãŒå®Œäº†ã—ã¾ã—ãŸï¼3ç§’å¾Œã«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚Šã¾ã™...</div>';\n                setTimeout(() => {\n                  window.location.href = '/dashboard';\n                }, 3000);\n              }, 1500);\n\n            } catch (error) {\n              statusDiv.innerHTML = '<div class=\"message error\">è¨­å®šã«å¤±æ•—ã—ã¾ã—ãŸ: ' + error.message + '</div>';\n              submitButton.disabled = false;\n              submitButton.textContent = 'å£åº§æŒ¯æ›¿ã‚’è¨­å®š';\n            }\n          });\n        </script>\n      </body>\n      </html>\n    `\n\n    return new NextResponse(html, {\n      headers: {\n        'Content-Type': 'text/html',\n      },\n    })\n\n  } catch (error) {\n    console.error('Kaihipay payment page error:', error)\n    return NextResponse.json({ error: 'æ±ºæ¸ˆãƒšãƒ¼ã‚¸ã®è¡¨ç¤ºã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":8393},"src/app/dashboard/services/fuel-calculator/page.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { Fuel, DollarSign, Gauge, TrendingDown, AlertCircle } from 'lucide-react'\n\nexport default function FuelCalculatorPage() {\n  const [distance, setDistance] = useState('')\n  const [fuelEfficiency, setFuelEfficiency] = useState('')\n  const [fuelPrice, setFuelPrice] = useState('150')\n  const [calculatedFuelCost, setCalculatedFuelCost] = useState<number | null>(null)\n  const [fuelConsumption, setFuelConsumption] = useState<number | null>(null)\n\n  const vehiclePresets = [\n    { type: 'è»½ãƒˆãƒ©ãƒƒã‚¯', efficiency: 15 },\n    { type: 'å°å‹ãƒˆãƒ©ãƒƒã‚¯ (2t)', efficiency: 10 },\n    { type: 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯ (4t)', efficiency: 7 },\n    { type: 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯ (10t)', efficiency: 5 },\n    { type: 'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼', efficiency: 4 }\n  ]\n\n  const calculateFuelCost = () => {\n    const distanceNum = parseFloat(distance)\n    const efficiencyNum = parseFloat(fuelEfficiency)\n    const priceNum = parseFloat(fuelPrice)\n\n    if (!distanceNum || !efficiencyNum || !priceNum) {\n      alert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')\n      return\n    }\n\n    const consumption = distanceNum / efficiencyNum\n    const totalCost = Math.round(consumption * priceNum)\n\n    setFuelConsumption(Math.round(consumption * 10) / 10)\n    setCalculatedFuelCost(totalCost)\n  }\n\n  const resetForm = () => {\n    setDistance('')\n    setFuelEfficiency('')\n    setFuelPrice('150')\n    setCalculatedFuelCost(null)\n    setFuelConsumption(null)\n  }\n\n  const applyPreset = (efficiency: number) => {\n    setFuelEfficiency(efficiency.toString())\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">ç‡ƒæ–™è²»è¨ˆç®—</h1>\n        <p className=\"text-gray-600\">èµ°è¡Œè·é›¢ã¨ç‡ƒè²»ã‹ã‚‰ç‡ƒæ–™ã‚³ã‚¹ãƒˆã‚’ç®—å‡ºã—ã¾ã™</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div className=\"lg:col-span-2\">\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n                  è»Šä¸¡ã‚¿ã‚¤ãƒ—ã‹ã‚‰ç‡ƒè²»ã‚’é¸æŠï¼ˆä»»æ„ï¼‰\n                </label>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\n                  {vehiclePresets.map(preset => (\n                    <button\n                      key={preset.type}\n                      onClick={() => applyPreset(preset.efficiency)}\n                      className=\"px-4 py-2 border border-gray-300 rounded-lg text-sm text-gray-700 hover:bg-blue-50 hover:border-blue-500 transition-colors\"\n                    >\n                      {preset.type}\n                      <div className=\"text-xs text-gray-500 mt-1\">{preset.efficiency}km/L</div>\n                    </button>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Gauge className=\"h-4 w-4 inline mr-1\" />\n                    èµ°è¡Œè·é›¢ (km)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={distance}\n                    onChange={(e) => setDistance(e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ä¾‹: 500\"\n                    min=\"0\"\n                    step=\"0.1\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Fuel className=\"h-4 w-4 inline mr-1\" />\n                    ç‡ƒè²» (km/L)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fuelEfficiency}\n                    onChange={(e) => setFuelEfficiency(e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ä¾‹: 10\"\n                    min=\"0\"\n                    step=\"0.1\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <DollarSign className=\"h-4 w-4 inline mr-1\" />\n                    ç‡ƒæ–™å˜ä¾¡ (å††/L)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={fuelPrice}\n                    onChange={(e) => setFuelPrice(e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ä¾‹: 150\"\n                    min=\"0\"\n                    step=\"1\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex space-x-4\">\n                <button\n                  onClick={calculateFuelCost}\n                  className=\"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2\"\n                >\n                  <Fuel className=\"h-5 w-5\" />\n                  <span>ç‡ƒæ–™è²»ã‚’è¨ˆç®—</span>\n                </button>\n                <button\n                  onClick={resetForm}\n                  className=\"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n                >\n                  ãƒªã‚»ãƒƒãƒˆ\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-6 bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-lg p-6\">\n            <h3 className=\"font-semibold text-gray-900 mb-3 flex items-center\">\n              <AlertCircle className=\"h-5 w-5 mr-2 text-orange-600\" />\n              ç‡ƒæ–™è²»å‰Šæ¸›ã®ãƒã‚¤ãƒ³ãƒˆ\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-gray-700\">\n              <div className=\"flex items-start space-x-2\">\n                <div className=\"w-2 h-2 bg-orange-500 rounded-full mt-1.5\"></div>\n                <span>æ€¥ç™ºé€²ãƒ»æ€¥ãƒ–ãƒ¬ãƒ¼ã‚­ã‚’é¿ã‘ã‚‹</span>\n              </div>\n              <div className=\"flex items-start space-x-2\">\n                <div className=\"w-2 h-2 bg-orange-500 rounded-full mt-1.5\"></div>\n                <span>é©åˆ‡ãªã‚¿ã‚¤ãƒ¤ç©ºæ°—åœ§ã‚’ç¶­æŒ</span>\n              </div>\n              <div className=\"flex items-start space-x-2\">\n                <div className=\"w-2 h-2 bg-orange-500 rounded-full mt-1.5\"></div>\n                <span>ä¸è¦ãªè·ç‰©ã‚’é™ã‚ã—ã¦è»½é‡åŒ–</span>\n              </div>\n              <div className=\"flex items-start space-x-2\">\n                <div className=\"w-2 h-2 bg-orange-500 rounded-full mt-1.5\"></div>\n                <span>å®šæœŸçš„ãªãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿæ–½</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"lg:col-span-1\">\n          {calculatedFuelCost !== null ? (\n            <div className=\"space-y-6\">\n              <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg shadow-lg p-6 text-white\">\n                <h3 className=\"text-lg font-semibold mb-4 flex items-center\">\n                  <Fuel className=\"h-5 w-5 mr-2\" />\n                  è¨ˆç®—çµæœ\n                </h3>\n                <div className=\"bg-white bg-opacity-20 rounded-lg p-4 mb-4\">\n                  <div className=\"text-sm text-orange-100 mb-1\">ç‡ƒæ–™è²»</div>\n                  <div className=\"text-4xl font-bold\">Â¥{calculatedFuelCost?.toLocaleString()}</div>\n                </div>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-orange-100\">èµ°è¡Œè·é›¢</span>\n                    <span>{distance}km</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-orange-100\">ç‡ƒè²»</span>\n                    <span>{fuelEfficiency}km/L</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-orange-100\">ç‡ƒæ–™å˜ä¾¡</span>\n                    <span>Â¥{fuelPrice}/L</span>\n                  </div>\n                  <div className=\"h-px bg-white bg-opacity-20 my-2\"></div>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-orange-100\">ç‡ƒæ–™æ¶ˆè²»é‡</span>\n                    <span className=\"font-medium\">{fuelConsumption}L</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                <h4 className=\"font-semibold text-green-900 mb-2 flex items-center text-sm\">\n                  <TrendingDown className=\"h-4 w-4 mr-2\" />\n                  ã‚³ã‚¹ãƒˆå‰Šæ¸›ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³\n                </h4>\n                <div className=\"space-y-2 text-xs text-green-700\">\n                  {fuelEfficiency && (\n                    <>\n                      <div className=\"flex justify-between items-center bg-white rounded p-2\">\n                        <span>ç‡ƒè²»10%æ”¹å–„æ™‚</span>\n                        <span className=\"font-semibold text-green-600\">\n                          Â¥{Math.round(calculatedFuelCost * 0.9).toLocaleString()}\n                        </span>\n                      </div>\n                      <div className=\"flex justify-between items-center bg-white rounded p-2\">\n                        <span>ç‡ƒè²»20%æ”¹å–„æ™‚</span>\n                        <span className=\"font-semibold text-green-600\">\n                          Â¥{Math.round(calculatedFuelCost * 0.8).toLocaleString()}\n                        </span>\n                      </div>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-6\">\n              <div className=\"text-center text-gray-500\">\n                <Fuel className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                <p className=\"text-sm\">æ¡ä»¶ã‚’å…¥åŠ›ã—ã¦<br />ã€Œç‡ƒæ–™è²»ã‚’è¨ˆç®—ã€ãƒœã‚¿ãƒ³ã‚’<br />ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":10747},"src/app/admin/shipments/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { Package, MapPin, Calendar, DollarSign } from 'lucide-react'\n\ninterface Shipment {\n  id: string\n  cargoName: string\n  pickupLocation: string\n  deliveryLocation: string\n  pickupDate: string\n  budget: number\n  status: string\n  shipper: {\n    id: string\n    companyName: string\n    email: string\n  }\n  _count: {\n    offers: number\n  }\n  createdAt: string\n}\n\nexport default function AdminShipments() {\n  const router = useRouter()\n  const [shipments, setShipments] = useState<Shipment[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      const parsedUser = JSON.parse(userData)\n      if (!parsedUser.isAdmin) {\n        router.push('/dashboard')\n        return\n      }\n    }\n\n    fetchShipments()\n  }, [router])\n\n  const fetchShipments = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/shipments', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n\n      if (!response.ok) throw new Error('Failed to fetch shipments')\n\n      const data = await response.json()\n      setShipments(data.shipments)\n    } catch (error) {\n      console.error('Error fetching shipments:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const updateStatus = async (shipmentId: string, newStatus: string) => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/shipments', {\n        method: 'PATCH',\n        headers: { \n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ shipmentId, status: newStatus })\n      })\n\n      if (!response.ok) throw new Error('Failed to update shipment')\n\n      const data = await response.json()\n      alert(data.message)\n      fetchShipments()\n    } catch (error) {\n      console.error('Error updating shipment:', error)\n      alert('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex items-center justify-center h-96\">\n          <div className=\"text-gray-600\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  const statusCounts = {\n    open: shipments.filter(s => s.status === 'OPEN').length,\n    matched: shipments.filter(s => s.status === 'MATCHED').length,\n    inTransit: shipments.filter(s => s.status === 'IN_TRANSIT').length,\n    delivered: shipments.filter(s => s.status === 'DELIVERED').length,\n    cancelled: shipments.filter(s => s.status === 'CANCELLED').length\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">è·ç‰©ç®¡ç†</h1>\n            <p className=\"text-gray-600 mt-1\">å…¨è·ç‰©ã®ç®¡ç†ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´</p>\n          </div>\n          <div className=\"px-4 py-2 bg-green-100 text-green-800 rounded-lg font-medium\">\n            {shipments.length} ä»¶ã®è·ç‰©\n          </div>\n        </div>\n\n        {/* ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚µãƒãƒªãƒ¼ */}\n        <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <p className=\"text-sm text-gray-600\">å‹Ÿé›†ä¸­</p>\n            <p className=\"text-2xl font-bold text-green-600\">{statusCounts.open}</p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <p className=\"text-sm text-gray-600\">ãƒãƒƒãƒãƒ³ã‚°æ¸ˆã¿</p>\n            <p className=\"text-2xl font-bold text-blue-600\">{statusCounts.matched}</p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <p className=\"text-sm text-gray-600\">è¼¸é€ä¸­</p>\n            <p className=\"text-2xl font-bold text-orange-600\">{statusCounts.inTransit}</p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <p className=\"text-sm text-gray-600\">é…é€å®Œäº†</p>\n            <p className=\"text-2xl font-bold text-gray-600\">{statusCounts.delivered}</p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <p className=\"text-sm text-gray-600\">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</p>\n            <p className=\"text-2xl font-bold text-red-600\">{statusCounts.cancelled}</p>\n          </div>\n        </div>\n\n        {/* è·ç‰©ä¸€è¦§ */}\n        <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">è·ç‰©æƒ…å ±</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">è·ä¸»</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">é…é€åŒºé–“</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">å¼•å–æ—¥</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">äºˆç®—</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ã‚ªãƒ•ã‚¡ãƒ¼æ•°</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {shipments.map((shipment) => (\n                  <tr key={shipment.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center\">\n                        <Package className=\"w-5 h-5 text-gray-400 mr-2\" />\n                        <div>\n                          <p className=\"font-medium text-gray-900\">{shipment.cargoName}</p>\n                          <p className=\"text-xs text-gray-500\">\n                            {new Date(shipment.createdAt).toLocaleDateString('ja-JP')}\n                          </p>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"text-sm font-medium text-gray-900\">{shipment.shipper.companyName}</p>\n                      <p className=\"text-xs text-gray-500\">{shipment.shipper.email}</p>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center text-sm text-gray-600\">\n                        <MapPin className=\"w-4 h-4 mr-1\" />\n                        <div>\n                          <p>{shipment.pickupLocation}</p>\n                          <p className=\"text-xs text-gray-500\">â†’ {shipment.deliveryLocation}</p>\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 text-sm text-gray-600\">\n                      {new Date(shipment.pickupDate).toLocaleDateString('ja-JP')}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"text-sm font-semibold text-gray-900\">Â¥{shipment.budget.toLocaleString()}</p>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className=\"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\">\n                        {shipment._count.offers}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-3 py-1 text-xs rounded-full ${\n                        shipment.status === 'OPEN' ? 'bg-green-100 text-green-800' :\n                        shipment.status === 'MATCHED' ? 'bg-blue-100 text-blue-800' :\n                        shipment.status === 'IN_TRANSIT' ? 'bg-orange-100 text-orange-800' :\n                        shipment.status === 'DELIVERED' ? 'bg-gray-100 text-gray-800' :\n                        'bg-red-100 text-red-800'\n                      }`}>\n                        {shipment.status === 'OPEN' ? 'å‹Ÿé›†ä¸­' :\n                         shipment.status === 'MATCHED' ? 'ãƒãƒƒãƒãƒ³ã‚°æ¸ˆã¿' :\n                         shipment.status === 'IN_TRANSIT' ? 'è¼¸é€ä¸­' :\n                         shipment.status === 'DELIVERED' ? 'é…é€å®Œäº†' : 'ã‚­ãƒ£ãƒ³ã‚»ãƒ«'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <select\n                        value={shipment.status}\n                        onChange={(e) => updateStatus(shipment.id, e.target.value)}\n                        className=\"text-sm border border-gray-300 rounded-lg px-2 py-1 focus:ring-2 focus:ring-blue-500\"\n                      >\n                        <option value=\"OPEN\">å‹Ÿé›†ä¸­</option>\n                        <option value=\"MATCHED\">ãƒãƒƒãƒãƒ³ã‚°æ¸ˆã¿</option>\n                        <option value=\"IN_TRANSIT\">è¼¸é€ä¸­</option>\n                        <option value=\"DELIVERED\">é…é€å®Œäº†</option>\n                        <option value=\"CANCELLED\">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</option>\n                      </select>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {shipments.length === 0 && (\n            <div className=\"text-center py-12 text-gray-500\">\n              è·ç‰©ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“\n            </div>\n          )}\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":9962},"src/app/api/users/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const user = await prisma.user.findUnique({\n      where: { id: params.id },\n      select: {\n        id: true,\n        companyName: true,\n        email: true,\n        userType: true,\n        trustScore: true,\n        verificationStatus: true,\n        createdAt: true\n      }\n    })\n\n    if (!user) {\n      return NextResponse.json({ error: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' }, { status: 404 })\n    }\n\n    return NextResponse.json({ user })\n  } catch (error) {\n    console.error('Get user error:', error)\n    return NextResponse.json({ error: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":866},"src/app/admin/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { \n  Users, \n  Package, \n  Truck, \n  CreditCard, \n  Shield, \n  TrendingUp,\n  Clock,\n  CheckCircle,\n  AlertCircle\n} from 'lucide-react'\n\ninterface AdminStats {\n  users: { total: number; shippers: number; carriers: number }\n  shipments: { total: number; open: number; completed: number }\n  vehicles: { total: number; available: number }\n  payments: { total: number; revenue: number }\n  verifications: { pending: number; approved: number }\n}\n\nexport default function AdminDashboard() {\n  const router = useRouter()\n  const [stats, setStats] = useState<AdminStats | null>(null)\n  const [recentActivity, setRecentActivity] = useState<any>(null)\n  const [loading, setLoading] = useState(true)\n  const [user, setUser] = useState<any>(null)\n\n  useEffect(() => {\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      const parsedUser = JSON.parse(userData)\n      setUser(parsedUser)\n      \n      // Adminæ¨©é™ãƒã‚§ãƒƒã‚¯\n      if (!parsedUser.isAdmin) {\n        router.push('/dashboard')\n        return\n      }\n    }\n\n    fetchAdminStats()\n  }, [router])\n\n  const fetchAdminStats = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/stats', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch stats')\n      }\n\n      const data = await response.json()\n      setStats(data.stats)\n      setRecentActivity(data.recent)\n    } catch (error) {\n      console.error('Error fetching admin stats:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex items-center justify-center h-96\">\n          <div className=\"text-gray-600\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  const statCards = [\n    {\n      title: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼',\n      value: stats?.users.total || 0,\n      subtitle: `è·ä¸»: ${stats?.users.shippers || 0} / é‹é€: ${stats?.users.carriers || 0}`,\n      icon: Users,\n      color: 'blue'\n    },\n    {\n      title: 'è·ç‰©',\n      value: stats?.shipments.total || 0,\n      subtitle: `å‹Ÿé›†ä¸­: ${stats?.shipments.open || 0} / å®Œäº†: ${stats?.shipments.completed || 0}`,\n      icon: Package,\n      color: 'green'\n    },\n    {\n      title: 'è»Šä¸¡',\n      value: stats?.vehicles.total || 0,\n      subtitle: `åˆ©ç”¨å¯èƒ½: ${stats?.vehicles.available || 0}`,\n      icon: Truck,\n      color: 'purple'\n    },\n    {\n      title: 'æ±ºæ¸ˆ',\n      value: `Â¥${(stats?.payments.revenue || 0).toLocaleString()}`,\n      subtitle: `å–å¼•æ•°: ${stats?.payments.total || 0}`,\n      icon: CreditCard,\n      color: 'orange'\n    },\n    {\n      title: 'èªè¨¼',\n      value: stats?.verifications.pending || 0,\n      subtitle: `æ‰¿èªæ¸ˆã¿: ${stats?.verifications.approved || 0}`,\n      icon: Shield,\n      color: 'red'\n    }\n  ]\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>\n            <p className=\"text-gray-600 mt-1\">ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®çµ±è¨ˆã¨ç®¡ç†</p>\n          </div>\n          <div className=\"px-4 py-2 bg-red-100 text-red-800 rounded-lg font-medium\">\n            Admin\n          </div>\n        </div>\n\n        {/* çµ±è¨ˆã‚«ãƒ¼ãƒ‰ */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6\">\n          {statCards.map((card, index) => {\n            const Icon = card.icon\n            return (\n              <div key={index} className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-sm font-medium text-gray-600\">{card.title}</h3>\n                  <Icon className={`w-5 h-5 text-${card.color}-600`} />\n                </div>\n                <div className=\"text-3xl font-bold text-gray-900 mb-2\">{card.value}</div>\n                <p className=\"text-sm text-gray-500\">{card.subtitle}</p>\n              </div>\n            )\n          })}\n        </div>\n\n        {/* æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* æœ€è¿‘ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ */}\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n              <Users className=\"w-5 h-5 mr-2\" />\n              æœ€è¿‘ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²\n            </h2>\n            <div className=\"space-y-3\">\n              {recentActivity?.users?.map((user: any) => (\n                <div key={user.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                  <div>\n                    <p className=\"font-medium text-gray-900\">{user.companyName}</p>\n                    <p className=\"text-sm text-gray-500\">{user.email}</p>\n                  </div>\n                  <div className=\"text-right\">\n                    <span className={`px-2 py-1 text-xs rounded-full ${\n                      user.userType === 'SHIPPER' ? 'bg-blue-100 text-blue-800' : 'bg-green-100 text-green-800'\n                    }`}>\n                      {user.userType === 'SHIPPER' ? 'è·ä¸»' : 'é‹é€'}\n                    </span>\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      {new Date(user.createdAt).toLocaleDateString('ja-JP')}\n                    </p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* æœ€è¿‘ã®è·ç‰© */}\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n              <Package className=\"w-5 h-5 mr-2\" />\n              æœ€è¿‘ã®è·ç‰©ç™»éŒ²\n            </h2>\n            <div className=\"space-y-3\">\n              {recentActivity?.shipments?.map((shipment: any) => (\n                <div key={shipment.id} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                  <div>\n                    <p className=\"font-medium text-gray-900\">{shipment.cargoName}</p>\n                    <p className=\"text-sm text-gray-500\">{shipment.shipper.companyName}</p>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"font-semibold text-gray-900\">Â¥{shipment.budget.toLocaleString()}</p>\n                    <span className={`text-xs px-2 py-1 rounded-full ${\n                      shipment.status === 'OPEN' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\n                    }`}>\n                      {shipment.status}\n                    </span>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        {/* æœ€è¿‘ã®æ±ºæ¸ˆ */}\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h2 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n            <CreditCard className=\"w-5 h-5 mr-2\" />\n            æœ€è¿‘ã®æ±ºæ¸ˆ\n          </h2>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ä¼šç¤¾å</th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">é‡‘é¡</th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">æ”¯æ‰•ã„æ–¹æ³•</th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>\n                  <th className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase\">æ—¥æ™‚</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {recentActivity?.payments?.map((payment: any) => (\n                  <tr key={payment.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-4 py-3 text-sm text-gray-900\">{payment.user.companyName}</td>\n                    <td className=\"px-4 py-3 text-sm font-semibold text-gray-900\">Â¥{payment.amount.toLocaleString()}</td>\n                    <td className=\"px-4 py-3 text-sm text-gray-600\">\n                      {payment.paymentMethod === 'bank_transfer' ? 'éŠ€è¡ŒæŒ¯è¾¼' : \n                       payment.paymentMethod === 'card' ? 'ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ' : 'å£åº§æŒ¯æ›¿'}\n                    </td>\n                    <td className=\"px-4 py-3\">\n                      <span className={`px-2 py-1 text-xs rounded-full ${\n                        payment.paymentStatus === 'COMPLETED' ? 'bg-green-100 text-green-800' :\n                        payment.paymentStatus === 'PENDING' ? 'bg-yellow-100 text-yellow-800' :\n                        'bg-red-100 text-red-800'\n                      }`}>\n                        {payment.paymentStatus === 'COMPLETED' ? 'å®Œäº†' :\n                         payment.paymentStatus === 'PENDING' ? 'å‡¦ç†ä¸­' : 'å¤±æ•—'}\n                      </span>\n                    </td>\n                    <td className=\"px-4 py-3 text-sm text-gray-500\">\n                      {new Date(payment.createdAt).toLocaleDateString('ja-JP')}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n\n        {/* ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n          <button\n            onClick={() => router.push('/admin/users')}\n            className=\"bg-blue-600 text-white p-6 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-between\"\n          >\n            <div className=\"text-left\">\n              <h3 className=\"text-lg font-semibold\">ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</h3>\n              <p className=\"text-sm text-blue-100\">å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç®¡ç†</p>\n            </div>\n            <Users className=\"w-8 h-8\" />\n          </button>\n\n          <button\n            onClick={() => router.push('/admin/shipments')}\n            className=\"bg-green-600 text-white p-6 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-between\"\n          >\n            <div className=\"text-left\">\n              <h3 className=\"text-lg font-semibold\">è·ç‰©ç®¡ç†</h3>\n              <p className=\"text-sm text-green-100\">å…¨è·ç‰©ã‚’ç®¡ç†</p>\n            </div>\n            <Package className=\"w-8 h-8\" />\n          </button>\n\n          <button\n            onClick={() => router.push('/admin/verifications')}\n            className=\"bg-red-600 text-white p-6 rounded-lg hover:bg-red-700 transition-colors flex items-center justify-between\"\n          >\n            <div className=\"text-left\">\n              <h3 className=\"text-lg font-semibold\">èªè¨¼ç®¡ç†</h3>\n              <p className=\"text-sm text-red-100\">è¨±å¯è¨¼ã‚’æ‰¿èª</p>\n            </div>\n            <Shield className=\"w-8 h-8\" />\n          </button>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":11383},"src/app/api/admin/verifications/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyToken } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = await verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    const admin = await prisma.user.findUnique({\n      where: { id: decoded.userId }\n    })\n\n    if (!admin?.isAdmin) {\n      return NextResponse.json({ error: 'ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™' }, { status: 403 })\n    }\n\n    const verifications = await prisma.verification.findMany({\n      include: {\n        user: {\n          select: {\n            id: true,\n            companyName: true,\n            email: true\n          }\n        }\n      },\n      orderBy: [\n        { status: 'asc' },\n        { submittedAt: 'desc' }\n      ]\n    })\n\n    return NextResponse.json({ verifications })\n  } catch (error) {\n    console.error('Get admin verifications error:', error)\n    return NextResponse.json({ error: 'è¨±å¯è¨¼ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":1353},"src/app/api/notifications/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyToken } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    \n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®NotificationReceiptã‚’å–å¾—\n    const receipts = await prisma.notificationReceipt.findMany({\n      where: {\n        userId: decoded.userId,\n        isDeleted: false,\n      },\n      include: {\n        notification: true,\n      },\n      orderBy: {\n        createdAt: 'desc',\n      },\n      take: 50,\n    })\n\n    // Receiptæƒ…å ±ã‚’å«ã‚ãŸé€šçŸ¥ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›\n    const notifications = receipts.map(receipt => ({\n      id: receipt.notification.id,\n      title: receipt.notification.title,\n      message: receipt.notification.message,\n      type: receipt.notification.type,\n      targetType: receipt.notification.targetType,\n      targetUserId: receipt.notification.targetUserId,\n      isRead: receipt.isRead,\n      sentByEmail: receipt.notification.sentByEmail,\n      createdAt: receipt.notification.createdAt,\n      receiptId: receipt.id, // Receipt IDã‚‚è¿”ã™ï¼ˆæ—¢èª­ãƒ»å‰Šé™¤æ™‚ã«ä½¿ç”¨ï¼‰\n    }))\n\n    // æœªèª­ä»¶æ•°ã‚‚å–å¾—\n    const unreadCount = receipts.filter(r => !r.isRead).length\n\n    return NextResponse.json({\n      data: notifications,\n      unreadCount,\n    })\n\n  } catch (error) {\n    console.error('Notification fetch error:', error)\n    return NextResponse.json({ \n      error: 'é€šçŸ¥ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' \n    }, { status: 500 })\n  }\n}\n","size_bytes":1881},"src/app/api/notifications/[id]/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyToken } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    \n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    const notificationId = params.id\n\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®Receiptã‚’æ—¢èª­ã«ã™ã‚‹\n    const receipt = await prisma.notificationReceipt.updateMany({\n      where: {\n        notificationId,\n        userId: decoded.userId,\n      },\n      data: {\n        isRead: true,\n        readAt: new Date(),\n      },\n    })\n\n    if (receipt.count === 0) {\n      return NextResponse.json({ error: 'é€šçŸ¥ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' }, { status: 404 })\n    }\n\n    return NextResponse.json({\n      message: 'é€šçŸ¥ã‚’æ—¢èª­ã«ã—ã¾ã—ãŸ',\n    })\n\n  } catch (error) {\n    console.error('Notification update error:', error)\n    return NextResponse.json({ \n      error: 'é€šçŸ¥ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ' \n    }, { status: 500 })\n  }\n}\n\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    \n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    const notificationId = params.id\n\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®Receiptã‚’å‰Šé™¤æ¸ˆã¿ã«ã™ã‚‹ï¼ˆå®Ÿéš›ã«ã¯å‰Šé™¤ã›ãšã€ãƒ•ãƒ©ã‚°ã‚’ç«‹ã¦ã‚‹ï¼‰\n    const receipt = await prisma.notificationReceipt.updateMany({\n      where: {\n        notificationId,\n        userId: decoded.userId,\n      },\n      data: {\n        isDeleted: true,\n      },\n    })\n\n    if (receipt.count === 0) {\n      return NextResponse.json({ error: 'é€šçŸ¥ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' }, { status: 404 })\n    }\n\n    return NextResponse.json({\n      message: 'é€šçŸ¥ã‚’å‰Šé™¤ã—ã¾ã—ãŸ',\n    })\n\n  } catch (error) {\n    console.error('Notification delete error:', error)\n    return NextResponse.json({ \n      error: 'é€šçŸ¥ã®å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸ' \n    }, { status: 500 })\n  }\n}\n","size_bytes":2562},"src/app/api/admin/notifications/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyToken, requireAdmin } from '@/lib/auth'\nimport { Resend } from 'resend'\n\nexport const dynamic = 'force-dynamic'\n\nconst resend = new Resend(process.env.RESEND_API_KEY)\n\nexport async function POST(request: NextRequest) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    \n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const admin = verifyToken(token)\n    if (!admin || !requireAdmin(admin)) {\n      return NextResponse.json({ error: 'ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™' }, { status: 403 })\n    }\n\n    const body = await request.json()\n    const { title, message, type = 'INFO', targetType, targetUserId, sendEmail = true } = body\n\n    // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n    if (!title || !message || !targetType) {\n      return NextResponse.json({ error: 'å¿…é ˆé …ç›®ãŒä¸è¶³ã—ã¦ã„ã¾ã™' }, { status: 400 })\n    }\n\n    if (targetType === 'SPECIFIC_USER' && !targetUserId) {\n      return NextResponse.json({ error: 'å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒå¿…è¦ã§ã™' }, { status: 400 })\n    }\n\n    // å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å–å¾—\n    const targetUsers = await getTargetUsers(targetType, targetUserId)\n\n    // é€šçŸ¥ã‚’ä½œæˆ\n    const notification = await prisma.notification.create({\n      data: {\n        title,\n        message,\n        type,\n        targetType,\n        targetUserId,\n        sentByEmail: sendEmail,\n        createdBy: admin.userId,\n        // å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«å¯¾ã—ã¦Receiptã‚’ä½œæˆ\n        receipts: {\n          create: targetUsers.map(user => ({\n            userId: user.id,\n          })),\n        },\n      },\n    })\n\n    // ãƒ¡ãƒ¼ãƒ«é€ä¿¡\n    if (sendEmail) {\n      for (const user of targetUsers) {\n        try {\n          await resend.emails.send({\n            from: 'SIN JAPAN LOGI MATCH <noreply@sinjapan.jp>',\n            to: user.email,\n            subject: `ã€SIN JAPAN LOGI MATCHã€‘${title}`,\n            html: `\n              <!DOCTYPE html>\n              <html>\n                <head>\n                  <meta charset=\"UTF-8\">\n                  <style>\n                    body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n                    .container { max-width: 600px; margin: 0 auto; padding: 20px; }\n                    .header { background: #0070f3; color: white; padding: 20px; border-radius: 8px 8px 0 0; }\n                    .content { background: #f9f9f9; padding: 30px; border-radius: 0 0 8px 8px; }\n                    .message { background: white; padding: 20px; border-radius: 4px; margin: 20px 0; }\n                    .footer { text-align: center; color: #666; font-size: 12px; margin-top: 20px; }\n                  </style>\n                </head>\n                <body>\n                  <div class=\"container\">\n                    <div class=\"header\">\n                      <h1 style=\"margin: 0;\">SIN JAPAN LOGI MATCH</h1>\n                    </div>\n                    <div class=\"content\">\n                      <h2>${title}</h2>\n                      <div class=\"message\">\n                        <p style=\"white-space: pre-wrap;\">${message}</p>\n                      </div>\n                      <p>ã“ã®é€šçŸ¥ã¯ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ã‚‚ã”ç¢ºèªã„ãŸã ã‘ã¾ã™ã€‚</p>\n                      <p><a href=\"https://sinjapan.jp/dashboard\" style=\"color: #0070f3;\">ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã</a></p>\n                    </div>\n                    <div class=\"footer\">\n                      <p>ã“ã®ãƒ¡ãƒ¼ãƒ«ã¯é…ä¿¡å°‚ç”¨ã§ã™ã€‚è¿”ä¿¡ã¯ã§ãã¾ã›ã‚“ã€‚</p>\n                      <p>&copy; 2025 SIN JAPAN LLC. All rights reserved.</p>\n                    </div>\n                  </div>\n                </body>\n              </html>\n            `,\n          })\n        } catch (emailError) {\n          console.error('Email send error:', emailError)\n        }\n      }\n    }\n\n    return NextResponse.json({\n      message: 'é€šçŸ¥ã‚’é€ä¿¡ã—ã¾ã—ãŸ',\n      data: notification,\n    }, { status: 201 })\n\n  } catch (error) {\n    console.error('Notification create error:', error)\n    return NextResponse.json({ \n      error: 'é€šçŸ¥ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }, { status: 500 })\n  }\n}\n\nexport async function GET(request: NextRequest) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    \n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const admin = verifyToken(token)\n    if (!admin || !requireAdmin(admin)) {\n      return NextResponse.json({ error: 'ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™' }, { status: 403 })\n    }\n\n    // å…¨é€šçŸ¥ã‚’å–å¾—ï¼ˆæœ€æ–°é †ï¼‰\n    const notifications = await prisma.notification.findMany({\n      orderBy: { createdAt: 'desc' },\n      take: 100,\n    })\n\n    return NextResponse.json({\n      data: notifications,\n    })\n\n  } catch (error) {\n    console.error('Notification fetch error:', error)\n    return NextResponse.json({ \n      error: 'é€šçŸ¥ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' \n    }, { status: 500 })\n  }\n}\n\nasync function getTargetUsers(targetType: string, targetUserId?: string) {\n  if (targetType === 'SPECIFIC_USER' && targetUserId) {\n    const user = await prisma.user.findUnique({\n      where: { id: targetUserId },\n      select: { id: true, email: true, companyName: true },\n    })\n    return user ? [user] : []\n  }\n\n  if (targetType === 'SHIPPER') {\n    return await prisma.user.findMany({\n      where: { userType: 'SHIPPER' },\n      select: { id: true, email: true, companyName: true },\n    })\n  }\n\n  if (targetType === 'CARRIER') {\n    return await prisma.user.findMany({\n      where: { userType: 'CARRIER' },\n      select: { id: true, email: true, companyName: true },\n    })\n  }\n\n  // ALL\n  return await prisma.user.findMany({\n    select: { id: true, email: true, companyName: true },\n  })\n}\n","size_bytes":6001},"DEPLOYMENT.md":{"content":"# æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †\n\n## ğŸ“¦ ãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®š\n\nã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æœ¬ç•ªå…¬é–‹ç”¨ã«è¨­å®šæ¸ˆã¿ã§ã™ã€‚\n\n### å¿…è¦ãªç’°å¢ƒå¤‰æ•°\n\næœ¬ç•ªç’°å¢ƒã§ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ãã ã•ã„ï¼š\n\n1. **DATABASE_URL** - æœ¬ç•ªç”¨PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®URL\n2. **JWT_SECRET** - JWTèªè¨¼ç”¨ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚­ãƒ¼\n\n## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †\n\n### 1. Replitã§ãƒ‡ãƒ—ãƒ­ã‚¤ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã€ŒDeployã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚\n\n### 2. æœ¬ç•ªç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š\n\nãƒ‡ãƒ—ãƒ­ã‚¤è¨­å®šç”»é¢ã§ä»¥ä¸‹ã‚’è¨­å®šï¼š\n- `DATABASE_URL`: æœ¬ç•ªç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹URL\n- `JWT_SECRET`: ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ï¼ˆé–‹ç™ºç’°å¢ƒã¨åŒã˜ã‚‚ã®ã‚’ä½¿ç”¨å¯èƒ½ï¼‰\n\n### 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—\n\nãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã€æœ¬ç•ªç’°å¢ƒã®ã‚·ã‚§ãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š\n\n```bash\n# Prismaã‚¹ã‚­ãƒ¼ãƒã‚’æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ—ãƒƒã‚·ãƒ¥\nnpm run db:push\n```\n\n### 4. ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ä½œæˆ\n\næœ¬ç•ªç’°å¢ƒã§ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆï¼š\n\n```bash\nnpm run create:admin\n```\n\nã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ä»¥ä¸‹ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã™ï¼š\n- **Email**: info@sinjapan.jp\n- **Password**: Kazuya8008\n- **æ¨©é™**: ç®¡ç†è€…\n\nâš ï¸ **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ³¨æ„**: \næœ¬ç•ªç’°å¢ƒã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆå¾Œã€å¿…ãšãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ï¼\n\n## ğŸ” æœ¬ç•ªç’°å¢ƒã§ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¤‰æ›´\n\nåˆå›ãƒ­ã‚°ã‚¤ãƒ³å¾Œã€è¨­å®šãƒšãƒ¼ã‚¸ã‹ã‚‰ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚’å¼·ãæ¨å¥¨ã—ã¾ã™ã€‚\n\n## ğŸ“ ãã®ä»–ã®è¨­å®š\n\n### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ãƒãƒ«ã‹ã‚‰ç›´æ¥ä½œæˆã™ã‚‹å ´åˆ\n\nReplitã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ãƒãƒ«ã‹ã‚‰æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«æ¥ç¶šã—ã€ä»¥ä¸‹ã®SQLã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ï¼š\n\n```sql\n-- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆã—ã¦ã‹ã‚‰å®Ÿè¡Œ\nINSERT INTO users (\n  id,\n  email,\n  password,\n  \"userType\",\n  \"companyName\",\n  \"contactPerson\",\n  phone,\n  \"isAdmin\",\n  \"verificationStatus\",\n  \"trustScore\",\n  \"createdAt\",\n  \"updatedAt\"\n) VALUES (\n  'admin_' || gen_random_uuid()::text,\n  'info@sinjapan.jp',\n  -- ã“ã“ã«ãƒãƒƒã‚·ãƒ¥åŒ–ã•ã‚ŒãŸãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›\n  '$2a$10$PRFT62i9FJp08hCHROj4CeZ/aCCuF98oTetSY8/cyt7umMXv39sj2',\n  'SHIPPER',\n  'SIN JAPAN',\n  'Admin',\n  '000-0000-0000',\n  true,\n  'APPROVED',\n  5.0,\n  NOW(),\n  NOW()\n);\n```\n\n## âœ… ãƒ‡ãƒ—ãƒ­ã‚¤å®Œäº†ç¢ºèª\n\n1. æœ¬ç•ªURLã«ã‚¢ã‚¯ã‚»ã‚¹\n2. ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã§ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³\n3. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã“ã¨ã‚’ç¢ºèª\n\n## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\n\n### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼\n- DATABASE_URLãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª\n- æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª\n\n### JWTã‚¨ãƒ©ãƒ¼\n- JWT_SECRETãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª\n\n### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼\n- ã™ã¹ã¦ã®ä¾å­˜é–¢ä¿‚ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª\n- `npm run build` ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã—ã¦ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª\n","size_bytes":2967},"src/app/admin/notifications/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Bell, Send, AlertCircle, CheckCircle, Info, XCircle } from 'lucide-react'\n\ninterface Notification {\n  id: string\n  title: string\n  message: string\n  type: string\n  targetType: string\n  targetUserId?: string\n  isRead: boolean\n  sentByEmail: boolean\n  createdAt: string\n}\n\nexport default function AdminNotificationsPage() {\n  const [title, setTitle] = useState('')\n  const [message, setMessage] = useState('')\n  const [type, setType] = useState('INFO')\n  const [targetType, setTargetType] = useState('ALL')\n  const [sendEmail, setSendEmail] = useState(true)\n  const [loading, setLoading] = useState(false)\n  const [success, setSuccess] = useState(false)\n  const [error, setError] = useState('')\n  const [notifications, setNotifications] = useState<Notification[]>([])\n\n  useEffect(() => {\n    fetchNotifications()\n  }, [])\n\n  const fetchNotifications = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/notifications', {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      })\n\n      if (response.ok) {\n        const data = await response.json()\n        setNotifications(data.data)\n      }\n    } catch (err) {\n      console.error('Fetch error:', err)\n    }\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setLoading(true)\n    setSuccess(false)\n    setError('')\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/notifications', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`,\n        },\n        body: JSON.stringify({\n          title,\n          message,\n          type,\n          targetType,\n          sendEmail,\n        }),\n      })\n\n      const data = await response.json()\n\n      if (response.ok) {\n        setSuccess(true)\n        setTitle('')\n        setMessage('')\n        setType('INFO')\n        setTargetType('ALL')\n        fetchNotifications()\n        setTimeout(() => setSuccess(false), 3000)\n      } else {\n        setError(data.error || 'é€šçŸ¥ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n    } catch (err) {\n      setError('é€šçŸ¥ã®é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const getTypeIcon = (type: string) => {\n    switch (type) {\n      case 'SUCCESS': return <CheckCircle className=\"w-5 h-5 text-green-500\" />\n      case 'WARNING': return <AlertCircle className=\"w-5 h-5 text-yellow-500\" />\n      case 'ERROR': return <XCircle className=\"w-5 h-5 text-red-500\" />\n      default: return <Info className=\"w-5 h-5 text-blue-500\" />\n    }\n  }\n\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case 'SUCCESS': return 'bg-green-50 border-green-200'\n      case 'WARNING': return 'bg-yellow-50 border-yellow-200'\n      case 'ERROR': return 'bg-red-50 border-red-200'\n      default: return 'bg-blue-50 border-blue-200'\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-6xl mx-auto p-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 flex items-center gap-3\">\n            <Bell className=\"w-8 h-8 text-blue-600\" />\n            é€šçŸ¥ç®¡ç†\n          </h1>\n          <p className=\"text-gray-600 mt-2\">\n            ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã‚’é€ä¿¡ã—ã¾ã™ï¼ˆã‚¢ãƒ—ãƒªå†…é€šçŸ¥ + ãƒ¡ãƒ¼ãƒ«é…ä¿¡ï¼‰\n          </p>\n        </div>\n\n        {/* é€šçŸ¥é€ä¿¡ãƒ•ã‚©ãƒ¼ãƒ  */}\n        <div className=\"bg-white rounded-lg shadow-md p-6 mb-8\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6\">æ–°è¦é€šçŸ¥ä½œæˆ</h2>\n          \n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* ã‚¿ã‚¤ãƒˆãƒ« */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                ã‚¿ã‚¤ãƒˆãƒ« <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                value={title}\n                onChange={(e) => setTitle(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"é€šçŸ¥ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›\"\n                required\n              />\n            </div>\n\n            {/* ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ <span className=\"text-red-500\">*</span>\n              </label>\n              <textarea\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                rows={6}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"é€šçŸ¥ã®å†…å®¹ã‚’å…¥åŠ›\"\n                required\n              />\n            </div>\n\n            {/* é€šçŸ¥ã‚¿ã‚¤ãƒ— */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                é€šçŸ¥ã‚¿ã‚¤ãƒ—\n              </label>\n              <select\n                value={type}\n                onChange={(e) => setType(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"INFO\">æƒ…å ±</option>\n                <option value=\"SUCCESS\">æˆåŠŸ</option>\n                <option value=\"WARNING\">è­¦å‘Š</option>\n                <option value=\"ERROR\">ã‚¨ãƒ©ãƒ¼</option>\n              </select>\n            </div>\n\n            {/* é…ä¿¡å¯¾è±¡ */}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                é…ä¿¡å¯¾è±¡\n              </label>\n              <select\n                value={targetType}\n                onChange={(e) => setTargetType(e.target.value)}\n                className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              >\n                <option value=\"ALL\">å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼</option>\n                <option value=\"SHIPPER\">è·ä¸»ã®ã¿</option>\n                <option value=\"CARRIER\">é‹é€ä¼šç¤¾ã®ã¿</option>\n              </select>\n            </div>\n\n            {/* ãƒ¡ãƒ¼ãƒ«é€ä¿¡ */}\n            <div className=\"flex items-center gap-3\">\n              <input\n                type=\"checkbox\"\n                id=\"sendEmail\"\n                checked={sendEmail}\n                onChange={(e) => setSendEmail(e.target.checked)}\n                className=\"w-4 h-4 text-blue-600 rounded focus:ring-2 focus:ring-blue-500\"\n              />\n              <label htmlFor=\"sendEmail\" className=\"text-sm font-medium text-gray-700\">\n                ãƒ¡ãƒ¼ãƒ«ã§ã‚‚é€šçŸ¥ã‚’é€ä¿¡ã™ã‚‹\n              </label>\n            </div>\n\n            {/* æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}\n            {success && (\n              <div className=\"bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg\">\n                âœ“ é€šçŸ¥ã‚’é€ä¿¡ã—ã¾ã—ãŸ\n              </div>\n            )}\n\n            {/* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */}\n            {error && (\n              <div className=\"bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg\">\n                {error}\n              </div>\n            )}\n\n            {/* é€ä¿¡ãƒœã‚¿ãƒ³ */}\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n            >\n              <Send className=\"w-5 h-5\" />\n              {loading ? 'é€ä¿¡ä¸­...' : 'é€šçŸ¥ã‚’é€ä¿¡'}\n            </button>\n          </form>\n        </div>\n\n        {/* é€ä¿¡æ¸ˆã¿é€šçŸ¥ä¸€è¦§ */}\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-6\">é€ä¿¡æ¸ˆã¿é€šçŸ¥</h2>\n          \n          <div className=\"space-y-4\">\n            {notifications.length === 0 ? (\n              <p className=\"text-gray-500 text-center py-8\">\n                ã¾ã é€šçŸ¥ãŒé€ä¿¡ã•ã‚Œã¦ã„ã¾ã›ã‚“\n              </p>\n            ) : (\n              notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className={`border rounded-lg p-4 ${getTypeColor(notification.type)}`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    {getTypeIcon(notification.type)}\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-bold text-gray-900\">{notification.title}</h3>\n                      <p className=\"text-gray-700 mt-1 whitespace-pre-wrap\">{notification.message}</p>\n                      <div className=\"flex items-center gap-4 mt-3 text-sm text-gray-600\">\n                        <span>å¯¾è±¡: {\n                          notification.targetType === 'ALL' ? 'å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼' :\n                          notification.targetType === 'SHIPPER' ? 'è·ä¸»ã®ã¿' :\n                          notification.targetType === 'CARRIER' ? 'é‹é€ä¼šç¤¾ã®ã¿' :\n                          'ç‰¹å®šãƒ¦ãƒ¼ã‚¶ãƒ¼'\n                        }</span>\n                        <span>{notification.sentByEmail ? 'ãƒ¡ãƒ¼ãƒ«é€ä¿¡æ¸ˆã¿' : 'ã‚¢ãƒ—ãƒªå†…ã®ã¿'}</span>\n                        <span>{new Date(notification.createdAt).toLocaleString('ja-JP')}</span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n","size_bytes":9863},"src/app/profile/[id]/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useParams, useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { Star, ThumbsUp, Award, Building2, Calendar, MessageSquare } from 'lucide-react'\n\ninterface Rating {\n  id: string\n  score: number\n  comment?: string\n  createdAt: string\n  rater: {\n    id: string\n    companyName: string\n    userType: string\n  }\n}\n\ninterface UserProfile {\n  id: string\n  companyName: string\n  email: string\n  userType: string\n  trustScore: number\n  verificationStatus: string\n  createdAt: string\n}\n\nexport default function ProfilePage() {\n  const params = useParams()\n  const router = useRouter()\n  const userId = params.id as string\n  \n  const [profile, setProfile] = useState<UserProfile | null>(null)\n  const [ratings, setRatings] = useState<Rating[]>([])\n  const [avgScore, setAvgScore] = useState(0)\n  const [totalRatings, setTotalRatings] = useState(0)\n  const [loading, setLoading] = useState(true)\n  const [currentUser, setCurrentUser] = useState<any>(null)\n  \n  // è©•ä¾¡ãƒ•ã‚©ãƒ¼ãƒ \n  const [showRatingForm, setShowRatingForm] = useState(false)\n  const [ratingScore, setRatingScore] = useState(5)\n  const [ratingComment, setRatingComment] = useState('')\n  const [submitting, setSubmitting] = useState(false)\n\n  useEffect(() => {\n    const user = localStorage.getItem('user')\n    if (user) {\n      setCurrentUser(JSON.parse(user))\n    }\n    fetchProfile()\n    fetchRatings()\n  }, [userId])\n\n  const fetchProfile = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch(`/api/users/${userId}`, {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n      \n      if (response.ok) {\n        const data = await response.json()\n        setProfile(data.user)\n      }\n    } catch (error) {\n      console.error('Failed to fetch profile:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const fetchRatings = async () => {\n    try {\n      const response = await fetch(`/api/ratings?userId=${userId}`)\n      \n      if (response.ok) {\n        const data = await response.json()\n        setRatings(data.ratings)\n        setAvgScore(data.avgScore)\n        setTotalRatings(data.totalRatings)\n      }\n    } catch (error) {\n      console.error('Failed to fetch ratings:', error)\n    }\n  }\n\n  const handleSubmitRating = async () => {\n    if (!ratingScore) {\n      alert('è©•ä¾¡ã‚’é¸æŠã—ã¦ãã ã•ã„')\n      return\n    }\n\n    setSubmitting(true)\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/ratings', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          ratedUserId: userId,\n          score: ratingScore,\n          comment: ratingComment\n        })\n      })\n\n      if (response.ok) {\n        alert('è©•ä¾¡ã‚’æŠ•ç¨¿ã—ã¾ã—ãŸ')\n        setShowRatingForm(false)\n        setRatingScore(5)\n        setRatingComment('')\n        fetchRatings()\n        fetchProfile()\n      } else {\n        const error = await response.json()\n        alert(error.error || 'è©•ä¾¡ã®æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n    } catch (error) {\n      console.error('Submit rating error:', error)\n      alert('è©•ä¾¡ã®æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  const renderStars = (score: number) => {\n    return Array.from({ length: 5 }, (_, i) => (\n      <Star \n        key={i} \n        className={`h-5 w-5 ${i < score ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300'}`}\n      />\n    ))\n  }\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex justify-center items-center h-64\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  if (!profile) {\n    return (\n      <DashboardLayout>\n        <div className=\"text-center py-12\">\n          <p className=\"text-gray-500\">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</p>\n          <button\n            onClick={() => router.push('/dashboard')}\n            className=\"mt-4 text-blue-600 hover:underline\"\n          >\n            ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚‹\n          </button>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  const canRate = currentUser && currentUser.id !== userId\n\n  return (\n    <DashboardLayout>\n      <div className=\"max-w-4xl mx-auto space-y-6\">\n        {/* ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ˜ãƒƒãƒ€ãƒ¼ */}\n        <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center\">\n                <Building2 className=\"h-8 w-8 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">{profile.companyName}</h1>\n                <p className=\"text-gray-600\">{profile.userType === 'SHIPPER' ? 'è·ä¸»' : 'é‹é€ä¼šç¤¾'}</p>\n                <p className=\"text-sm text-gray-500 flex items-center mt-1\">\n                  <Calendar className=\"h-3 w-3 mr-1\" />\n                  ç™»éŒ²æ—¥: {new Date(profile.createdAt).toLocaleDateString('ja-JP')}\n                </p>\n              </div>\n            </div>\n            \n            {profile.verificationStatus === 'APPROVED' && (\n              <div className=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm flex items-center space-x-1\">\n                <Award className=\"h-4 w-4\" />\n                <span>èªè¨¼æ¸ˆã¿</span>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* ä¿¡ç”¨ã‚¹ã‚³ã‚¢ */}\n        <div className=\"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 text-white\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h2 className=\"text-lg font-semibold mb-2\">ä¿¡ç”¨ã‚¹ã‚³ã‚¢</h2>\n              <div className=\"flex items-center space-x-3\">\n                <span className=\"text-5xl font-bold\">{avgScore.toFixed(1)}</span>\n                <div>\n                  <div className=\"flex items-center space-x-1\">\n                    {renderStars(Math.round(avgScore))}\n                  </div>\n                  <p className=\"text-sm text-blue-100 mt-1\">{totalRatings}ä»¶ã®è©•ä¾¡</p>\n                </div>\n              </div>\n            </div>\n            {canRate && (\n              <button\n                onClick={() => setShowRatingForm(true)}\n                className=\"bg-white text-blue-600 px-6 py-2 rounded-lg hover:bg-blue-50 transition-colors flex items-center space-x-2\"\n              >\n                <ThumbsUp className=\"h-4 w-4\" />\n                <span>è©•ä¾¡ã™ã‚‹</span>\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* è©•ä¾¡ä¸€è¦§ */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">è©•ä¾¡ãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>\n          </div>\n          <div className=\"p-6\">\n            {ratings.length === 0 ? (\n              <p className=\"text-gray-500 text-center py-8\">ã¾ã è©•ä¾¡ãŒã‚ã‚Šã¾ã›ã‚“</p>\n            ) : (\n              <div className=\"space-y-4\">\n                {ratings.map((rating) => (\n                  <div key={rating.id} className=\"border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{rating.rater.companyName}</p>\n                        <p className=\"text-xs text-gray-500\">\n                          {rating.rater.userType === 'SHIPPER' ? 'è·ä¸»' : 'é‹é€ä¼šç¤¾'}\n                        </p>\n                      </div>\n                      <div className=\"flex items-center space-x-1\">\n                        {renderStars(rating.score)}\n                      </div>\n                    </div>\n                    {rating.comment && (\n                      <div className=\"mt-2 flex items-start space-x-2\">\n                        <MessageSquare className=\"h-4 w-4 text-gray-400 mt-0.5\" />\n                        <p className=\"text-sm text-gray-700\">{rating.comment}</p>\n                      </div>\n                    )}\n                    <p className=\"text-xs text-gray-400 mt-2\">\n                      {new Date(rating.createdAt).toLocaleDateString('ja-JP')}\n                    </p>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* è©•ä¾¡æŠ•ç¨¿ãƒ¢ãƒ¼ãƒ€ãƒ« */}\n      {showRatingForm && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-bold mb-4\">è©•ä¾¡ã‚’æŠ•ç¨¿</h3>\n            \n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                è©•ä¾¡ã‚¹ã‚³ã‚¢\n              </label>\n              <div className=\"flex items-center space-x-2\">\n                {[1, 2, 3, 4, 5].map((score) => (\n                  <button\n                    key={score}\n                    type=\"button\"\n                    onClick={() => setRatingScore(score)}\n                    className=\"transition-transform hover:scale-110\"\n                  >\n                    <Star \n                      className={`h-8 w-8 ${\n                        score <= ratingScore \n                          ? 'text-yellow-400 fill-yellow-400' \n                          : 'text-gray-300'\n                      }`}\n                    />\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆä»»æ„ï¼‰\n              </label>\n              <textarea\n                value={ratingComment}\n                onChange={(e) => setRatingComment(e.target.value)}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                rows={3}\n                placeholder=\"å–å¼•ã®æ„Ÿæƒ³ãªã©ã‚’ã”è¨˜å…¥ãã ã•ã„\"\n              />\n            </div>\n\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={() => setShowRatingForm(false)}\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\n              >\n                ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n              </button>\n              <button\n                onClick={handleSubmitRating}\n                disabled={submitting}\n                className=\"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n              >\n                {submitting ? 'æŠ•ç¨¿ä¸­...' : 'æŠ•ç¨¿'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </DashboardLayout>\n  )\n}\n","size_bytes":11331},"src/app/api/verifications/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyToken } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = await verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    const verifications = await prisma.verification.findMany({\n      where: { userId: decoded.userId },\n      orderBy: { submittedAt: 'desc' }\n    })\n\n    return NextResponse.json({ verifications })\n  } catch (error) {\n    console.error('Get verifications error:', error)\n    return NextResponse.json({ error: 'è¨±å¯è¨¼ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = await verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { documentType, documentNumber, issueDate, expiryDate, documentUrl } = body\n\n    if (!documentType) {\n      return NextResponse.json({ error: 'æ›¸é¡ã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„' }, { status: 400 })\n    }\n\n    const verification = await prisma.verification.create({\n      data: {\n        userId: decoded.userId,\n        documentType,\n        documentNumber,\n        documentUrl,\n        issueDate: issueDate ? new Date(issueDate) : null,\n        expiryDate: expiryDate ? new Date(expiryDate) : null,\n        status: 'PENDING'\n      }\n    })\n\n    return NextResponse.json({ verification }, { status: 201 })\n  } catch (error) {\n    console.error('Create verification error:', error)\n    return NextResponse.json({ error: 'è¨±å¯è¨¼ã®æå‡ºã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":2215},"src/app/api/admin/stats/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyAdminToken } from '@/lib/adminAuth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { error, status, user } = await verifyAdminToken(request)\n    \n    if (error) {\n      return NextResponse.json({ error }, { status })\n    }\n\n    // å®Ÿãƒ‡ãƒ¼ã‚¿ã‹ã‚‰çµ±è¨ˆæƒ…å ±ã‚’é›†è¨ˆ\n    const [\n      totalUsers,\n      totalShippers,\n      totalCarriers,\n      totalShipments,\n      openShipments,\n      completedShipments,\n      totalVehicles,\n      availableVehicles,\n      totalPayments,\n      totalRevenue,\n      pendingVerifications,\n      approvedVerifications\n    ] = await Promise.all([\n      // ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ\n      prisma.user.count(),\n      prisma.user.count({ where: { userType: 'SHIPPER' } }),\n      prisma.user.count({ where: { userType: 'CARRIER' } }),\n      \n      // è·ç‰©çµ±è¨ˆ\n      prisma.shipment.count(),\n      prisma.shipment.count({ where: { status: 'OPEN' } }),\n      prisma.shipment.count({ where: { status: 'DELIVERED' } }),\n      \n      // è»Šä¸¡çµ±è¨ˆ\n      prisma.vehicle.count(),\n      prisma.vehicle.count({ where: { status: 'AVAILABLE' } }),\n      \n      // æ±ºæ¸ˆçµ±è¨ˆ\n      prisma.payment.count(),\n      prisma.payment.aggregate({\n        _sum: { amount: true },\n        where: { paymentStatus: 'COMPLETED' }\n      }),\n      \n      // èªè¨¼çµ±è¨ˆ\n      prisma.verification.count({ where: { status: 'PENDING' } }),\n      prisma.verification.count({ where: { status: 'APPROVED' } })\n    ])\n\n    // æœ€è¿‘ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£\n    const recentUsers = await prisma.user.findMany({\n      take: 5,\n      orderBy: { createdAt: 'desc' },\n      select: {\n        id: true,\n        email: true,\n        companyName: true,\n        userType: true,\n        createdAt: true\n      }\n    })\n\n    const recentShipments = await prisma.shipment.findMany({\n      take: 5,\n      orderBy: { createdAt: 'desc' },\n      select: {\n        id: true,\n        cargoName: true,\n        status: true,\n        budget: true,\n        createdAt: true,\n        shipper: {\n          select: {\n            companyName: true\n          }\n        }\n      }\n    })\n\n    const recentPayments = await prisma.payment.findMany({\n      take: 5,\n      orderBy: { createdAt: 'desc' },\n      select: {\n        id: true,\n        amount: true,\n        paymentMethod: true,\n        paymentStatus: true,\n        createdAt: true,\n        user: {\n          select: {\n            companyName: true\n          }\n        }\n      }\n    })\n\n    return NextResponse.json({\n      stats: {\n        users: {\n          total: totalUsers,\n          shippers: totalShippers,\n          carriers: totalCarriers\n        },\n        shipments: {\n          total: totalShipments,\n          open: openShipments,\n          completed: completedShipments\n        },\n        vehicles: {\n          total: totalVehicles,\n          available: availableVehicles\n        },\n        payments: {\n          total: totalPayments,\n          revenue: totalRevenue._sum.amount || 0\n        },\n        verifications: {\n          pending: pendingVerifications,\n          approved: approvedVerifications\n        }\n      },\n      recent: {\n        users: recentUsers,\n        shipments: recentShipments,\n        payments: recentPayments\n      }\n    })\n\n  } catch (error) {\n    console.error('Admin stats error:', error)\n    return NextResponse.json({ error: 'çµ±è¨ˆæƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":3538},"src/app/admin/users/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { Users, Shield, ShieldOff, Search, Truck, Package } from 'lucide-react'\n\ninterface User {\n  id: string\n  email: string\n  companyName: string\n  contactPerson: string\n  userType: 'SHIPPER' | 'CARRIER'\n  verificationStatus: 'PENDING' | 'APPROVED' | 'REJECTED'\n  trustScore: number\n  isAdmin: boolean\n  createdAt: string\n  _count: {\n    shipments: number\n    vehicles: number\n    payments: number\n    offers: number\n  }\n}\n\nexport default function AdminUsers() {\n  const router = useRouter()\n  const [users, setUsers] = useState<User[]>([])\n  const [filteredUsers, setFilteredUsers] = useState<User[]>([])\n  const [loading, setLoading] = useState(true)\n  const [searchQuery, setSearchQuery] = useState('')\n  const [filterType, setFilterType] = useState<'all' | 'SHIPPER' | 'CARRIER'>('all')\n\n  useEffect(() => {\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      const parsedUser = JSON.parse(userData)\n      if (!parsedUser.isAdmin) {\n        router.push('/dashboard')\n        return\n      }\n    }\n\n    fetchUsers()\n  }, [router])\n\n  useEffect(() => {\n    let filtered = users\n\n    if (filterType !== 'all') {\n      filtered = filtered.filter(u => u.userType === filterType)\n    }\n\n    if (searchQuery) {\n      filtered = filtered.filter(u => \n        u.companyName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        u.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        u.contactPerson.toLowerCase().includes(searchQuery.toLowerCase())\n      )\n    }\n\n    setFilteredUsers(filtered)\n  }, [users, filterType, searchQuery])\n\n  const fetchUsers = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/users', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n\n      if (!response.ok) throw new Error('Failed to fetch users')\n\n      const data = await response.json()\n      setUsers(data.users)\n      setFilteredUsers(data.users)\n    } catch (error) {\n      console.error('Error fetching users:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const toggleAdminRole = async (userId: string, currentIsAdmin: boolean) => {\n    if (!confirm(`ã“ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’${currentIsAdmin ? 'ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼' : 'ç®¡ç†è€…'}ã«å¤‰æ›´ã—ã¾ã™ã‹ï¼Ÿ`)) {\n      return\n    }\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/users', {\n        method: 'PATCH',\n        headers: { \n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ userId, isAdmin: !currentIsAdmin })\n      })\n\n      if (!response.ok) throw new Error('Failed to update user')\n\n      const data = await response.json()\n      alert(data.message)\n      fetchUsers()\n    } catch (error) {\n      console.error('Error updating user:', error)\n      alert('æ¨©é™ã®å¤‰æ›´ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex items-center justify-center h-96\">\n          <div className=\"text-gray-600\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</h1>\n            <p className=\"text-gray-600 mt-1\">å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç®¡ç†ã¨æ¨©é™è¨­å®š</p>\n          </div>\n          <div className=\"px-4 py-2 bg-blue-100 text-blue-800 rounded-lg font-medium\">\n            {users.length} äººã®ãƒ¦ãƒ¼ã‚¶ãƒ¼\n          </div>\n        </div>\n\n        {/* æ¤œç´¢ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}\n        <div className=\"bg-white rounded-lg shadow-md p-4\">\n          <div className=\"flex flex-col md:flex-row gap-4\">\n            <div className=\"flex-1\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-3 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"ä¼šç¤¾åã€ãƒ¡ãƒ¼ãƒ«ã€æ‹…å½“è€…åã§æ¤œç´¢...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n            <div className=\"flex gap-2\">\n              <button\n                onClick={() => setFilterType('all')}\n                className={`px-4 py-2 rounded-lg ${\n                  filterType === 'all' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700'\n                }`}\n              >\n                å…¨ã¦\n              </button>\n              <button\n                onClick={() => setFilterType('SHIPPER')}\n                className={`px-4 py-2 rounded-lg ${\n                  filterType === 'SHIPPER' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700'\n                }`}\n              >\n                è·ä¸»\n              </button>\n              <button\n                onClick={() => setFilterType('CARRIER')}\n                className={`px-4 py-2 rounded-lg ${\n                  filterType === 'CARRIER' ? 'bg-green-600 text-white' : 'bg-gray-100 text-gray-700'\n                }`}\n              >\n                é‹é€ä¼šç¤¾\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ« */}\n        <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ãƒ¦ãƒ¼ã‚¶ãƒ¼</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ã‚¿ã‚¤ãƒ—</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">èªè¨¼</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ä¿¡é ¼ã‚¹ã‚³ã‚¢</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ç™»éŒ²æ—¥</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {filteredUsers.map((user) => (\n                  <tr key={user.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{user.companyName}</p>\n                        <p className=\"text-sm text-gray-500\">{user.email}</p>\n                        <p className=\"text-xs text-gray-400\">{user.contactPerson}</p>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-3 py-1 text-xs rounded-full ${\n                        user.userType === 'SHIPPER' \n                          ? 'bg-blue-100 text-blue-800' \n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        {user.userType === 'SHIPPER' ? 'è·ä¸»' : 'é‹é€ä¼šç¤¾'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-3 py-1 text-xs rounded-full ${\n                        user.verificationStatus === 'APPROVED' \n                          ? 'bg-green-100 text-green-800' \n                          : user.verificationStatus === 'REJECTED'\n                          ? 'bg-red-100 text-red-800'\n                          : 'bg-yellow-100 text-yellow-800'\n                      }`}>\n                        {user.verificationStatus === 'APPROVED' ? 'æ‰¿èªæ¸ˆã¿' : \n                         user.verificationStatus === 'REJECTED' ? 'æ‹’å¦' : 'ä¿ç•™ä¸­'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center\">\n                        <div className=\"text-lg font-semibold text-gray-900\">{user.trustScore}</div>\n                        <div className=\"text-xs text-gray-500 ml-1\">/100</div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex gap-3 text-sm text-gray-600\">\n                        <div className=\"flex items-center\">\n                          <Package className=\"w-4 h-4 mr-1\" />\n                          {user._count.shipments}\n                        </div>\n                        <div className=\"flex items-center\">\n                          <Truck className=\"w-4 h-4 mr-1\" />\n                          {user._count.vehicles}\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 text-sm text-gray-500\">\n                      {new Date(user.createdAt).toLocaleDateString('ja-JP')}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <div className=\"flex items-center gap-2\">\n                        {user.isAdmin ? (\n                          <button\n                            onClick={() => toggleAdminRole(user.id, user.isAdmin)}\n                            className=\"flex items-center gap-1 px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm\"\n                          >\n                            <ShieldOff className=\"w-4 h-4\" />\n                            Adminè§£é™¤\n                          </button>\n                        ) : (\n                          <button\n                            onClick={() => toggleAdminRole(user.id, user.isAdmin)}\n                            className=\"flex items-center gap-1 px-3 py-1 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors text-sm\"\n                          >\n                            <Shield className=\"w-4 h-4\" />\n                            Adminä»˜ä¸\n                          </button>\n                        )}\n                      </div>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {filteredUsers.length === 0 && (\n            <div className=\"text-center py-12 text-gray-500\">\n              è©²å½“ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“\n            </div>\n          )}\n        </div>\n\n        {/* çµ±è¨ˆã‚µãƒãƒªãƒ¼ */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <p className=\"text-sm text-gray-600\">ç·ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</p>\n            <p className=\"text-2xl font-bold text-gray-900\">{users.length}</p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <p className=\"text-sm text-gray-600\">è·ä¸»</p>\n            <p className=\"text-2xl font-bold text-blue-600\">\n              {users.filter(u => u.userType === 'SHIPPER').length}\n            </p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <p className=\"text-sm text-gray-600\">é‹é€ä¼šç¤¾</p>\n            <p className=\"text-2xl font-bold text-green-600\">\n              {users.filter(u => u.userType === 'CARRIER').length}\n            </p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-4\">\n            <p className=\"text-sm text-gray-600\">ç®¡ç†è€…</p>\n            <p className=\"text-2xl font-bold text-red-600\">\n              {users.filter(u => u.isAdmin).length}\n            </p>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":12235},"src/app/api/ratings/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyToken } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { searchParams } = new URL(request.url)\n    const userId = searchParams.get('userId')\n\n    if (!userId) {\n      return NextResponse.json({ error: 'ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãŒå¿…è¦ã§ã™' }, { status: 400 })\n    }\n\n    const ratings = await prisma.rating.findMany({\n      where: { ratedUserId: userId },\n      include: {\n        rater: {\n          select: {\n            id: true,\n            companyName: true,\n            userType: true\n          }\n        }\n      },\n      orderBy: { createdAt: 'desc' }\n    })\n\n    const avgScore = ratings.length > 0\n      ? ratings.reduce((sum, r) => sum + r.score, 0) / ratings.length\n      : 5.0\n\n    return NextResponse.json({ ratings, avgScore, totalRatings: ratings.length })\n  } catch (error) {\n    console.error('Get ratings error:', error)\n    return NextResponse.json({ error: 'è©•ä¾¡ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n\nexport async function POST(request: NextRequest) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = await verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { ratedUserId, score, comment, shipmentId } = body\n\n    if (!ratedUserId || !score) {\n      return NextResponse.json({ error: 'å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„' }, { status: 400 })\n    }\n\n    if (score < 1 || score > 5) {\n      return NextResponse.json({ error: 'è©•ä¾¡ã¯1ï½5ã®ç¯„å›²ã§å…¥åŠ›ã—ã¦ãã ã•ã„' }, { status: 400 })\n    }\n\n    if (decoded.userId === ratedUserId) {\n      return NextResponse.json({ error: 'è‡ªåˆ†è‡ªèº«ã‚’è©•ä¾¡ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“' }, { status: 400 })\n    }\n\n    const existingRating = await prisma.rating.findFirst({\n      where: {\n        ratedUserId,\n        raterUserId: decoded.userId,\n        shipmentId: shipmentId || null\n      }\n    })\n\n    if (existingRating) {\n      return NextResponse.json({ error: 'ã“ã®å–å¼•ã«å¯¾ã—ã¦æ—¢ã«è©•ä¾¡æ¸ˆã¿ã§ã™' }, { status: 400 })\n    }\n\n    const rating = await prisma.rating.create({\n      data: {\n        ratedUserId,\n        raterUserId: decoded.userId,\n        score,\n        comment,\n        shipmentId\n      }\n    })\n\n    const allRatings = await prisma.rating.findMany({\n      where: { ratedUserId }\n    })\n\n    const avgScore = allRatings.reduce((sum, r) => sum + r.score, 0) / allRatings.length\n\n    await prisma.user.update({\n      where: { id: ratedUserId },\n      data: { trustScore: Math.round(avgScore * 10) / 10 }\n    })\n\n    return NextResponse.json({ rating }, { status: 201 })\n  } catch (error) {\n    console.error('Create rating error:', error)\n    return NextResponse.json({ error: 'è©•ä¾¡ã®æŠ•ç¨¿ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":3154},"src/app/api/payments/[id]/square/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const paymentId = params.id\n\n    // æ±ºæ¸ˆæƒ…å ±ã‚’å–å¾—\n    const payment = await prisma.payment.findUnique({\n      where: { id: paymentId },\n      include: {\n        user: {\n          select: {\n            email: true,\n            companyName: true,\n            contactPerson: true\n          }\n        }\n      }\n    })\n\n    if (!payment) {\n      return NextResponse.json({ error: 'æ±ºæ¸ˆæƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' }, { status: 404 })\n    }\n\n    // ç’°å¢ƒå¤‰æ•°ã‹ã‚‰Squareè¨­å®šã‚’å–å¾—\n    const isProduction = process.env.NODE_ENV === 'production'\n    const squareAppId = isProduction \n      ? process.env.SQUARE_APPLICATION_ID \n      : process.env.SQUARE_SANDBOX_APPLICATION_ID\n    const squareScriptUrl = isProduction\n      ? 'https://web.squarecdn.com/v1/square.js'\n      : 'https://sandbox.web.squarecdn.com/v1/square.js'\n\n    // Squareæ±ºæ¸ˆãƒšãƒ¼ã‚¸ã®HTMLã‚’è¿”ã™\n    const html = `\n      <!DOCTYPE html>\n      <html lang=\"ja\">\n      <head>\n        <meta charset=\"UTF-8\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n        <title>Squareæ±ºæ¸ˆ - SIN JAPAN LOGI MATCH</title>\n        <script src=\"${squareScriptUrl}\"></script>\n        <style>\n          body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n            max-width: 600px;\n            margin: 50px auto;\n            padding: 20px;\n            background: #f5f5f5;\n          }\n          .container {\n            background: white;\n            padding: 30px;\n            border-radius: 8px;\n            box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n          }\n          h1 {\n            color: #333;\n            margin-bottom: 10px;\n          }\n          .amount {\n            font-size: 32px;\n            color: #0070f3;\n            font-weight: bold;\n            margin: 20px 0;\n          }\n          .info {\n            background: #f8f9fa;\n            padding: 15px;\n            border-radius: 4px;\n            margin: 20px 0;\n          }\n          #card-container {\n            margin: 20px 0;\n          }\n          #payment-button {\n            background: #0070f3;\n            color: white;\n            border: none;\n            padding: 15px 30px;\n            border-radius: 4px;\n            font-size: 16px;\n            cursor: pointer;\n            width: 100%;\n          }\n          #payment-button:hover {\n            background: #0051cc;\n          }\n          #payment-button:disabled {\n            background: #ccc;\n            cursor: not-allowed;\n          }\n          .message {\n            margin-top: 20px;\n            padding: 15px;\n            border-radius: 4px;\n          }\n          .success {\n            background: #d4edda;\n            color: #155724;\n          }\n          .error {\n            background: #f8d7da;\n            color: #721c24;\n          }\n        </style>\n      </head>\n      <body>\n        <div class=\"container\">\n          <h1>Squareæ±ºæ¸ˆ</h1>\n          <div class=\"amount\">Â¥${payment.amount.toLocaleString()}</div>\n          \n          <div class=\"info\">\n            <p><strong>ä¼šç¤¾å:</strong> ${payment.user.companyName}</p>\n            <p><strong>æ‹…å½“è€…:</strong> ${payment.user.contactPerson}</p>\n            <p><strong>æ±ºæ¸ˆID:</strong> ${payment.id}</p>\n          </div>\n\n          <div id=\"card-container\"></div>\n          \n          <button id=\"payment-button\">æ±ºæ¸ˆã‚’å®Ÿè¡Œ</button>\n          \n          <div id=\"payment-status\"></div>\n\n          <p style=\"text-align: center; margin-top: 30px; font-size: 14px; color: #666;\">\n            ${isProduction ? 'â€» æœ¬ç•ªç’°å¢ƒã§ç¨¼åƒä¸­' : 'â€» Sandboxï¼ˆãƒ†ã‚¹ãƒˆï¼‰ãƒ¢ãƒ¼ãƒ‰ã§ç¨¼åƒä¸­'}\n          </p>\n        </div>\n\n        <script>\n          const SQUARE_APP_ID = '${squareAppId}';\n          const PAYMENT_ID = '${paymentId}';\n          \n          let card;\n\n          async function initializeSquare() {\n            try {\n              if (!SQUARE_APP_ID) {\n                document.getElementById('card-container').innerHTML = \\`\n                  <p style=\"padding: 20px; background: #f8d7da; border-radius: 4px; color: #721c24;\">\n                    Square APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚<br>\n                    ç®¡ç†è€…ã«ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚\n                  </p>\n                \\`;\n                document.getElementById('payment-button').disabled = true;\n                return;\n              }\n\n              // Square Web Payments SDKã®åˆæœŸåŒ–\n              const payments = Square.payments(SQUARE_APP_ID);\n              card = await payments.card();\n              await card.attach('#card-container');\n\n              document.getElementById('payment-button').addEventListener('click', handlePayment);\n\n            } catch (error) {\n              console.error('Square initialization error:', error);\n              document.getElementById('card-container').innerHTML = \\`\n                <p style=\"padding: 20px; background: #f8d7da; border-radius: 4px; color: #721c24;\">\n                  Square SDKã®åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: \\${error.message}\n                </p>\n              \\`;\n              document.getElementById('payment-button').disabled = true;\n            }\n          }\n\n          async function handlePayment() {\n            const button = document.getElementById('payment-button');\n            const statusDiv = document.getElementById('payment-status');\n            \n            button.disabled = true;\n            button.textContent = 'å‡¦ç†ä¸­...';\n            statusDiv.innerHTML = '';\n            \n            try {\n              // ã‚«ãƒ¼ãƒ‰æƒ…å ±ã‚’ãƒˆãƒ¼ã‚¯ãƒ³åŒ–\n              const result = await card.tokenize();\n              \n              if (result.status === 'OK') {\n                // ã‚µãƒ¼ãƒãƒ¼ã«æ±ºæ¸ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡\n                const response = await fetch(\\`/api/payments/\\${PAYMENT_ID}/complete\\`, {\n                  method: 'POST',\n                  headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + localStorage.getItem('token')\n                  },\n                  body: JSON.stringify({ \n                    sourceId: result.token,\n                    paymentMethod: 'card'\n                  })\n                });\n\n                const data = await response.json();\n\n                if (response.ok) {\n                  statusDiv.innerHTML = '<div class=\"message success\">æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸï¼3ç§’å¾Œã«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«æˆ»ã‚Šã¾ã™...</div>';\n                  setTimeout(() => {\n                    window.location.href = '/dashboard';\n                  }, 3000);\n                } else {\n                  throw new Error(data.error || 'æ±ºæ¸ˆã«å¤±æ•—ã—ã¾ã—ãŸ');\n                }\n              } else {\n                throw new Error(result.errors ? result.errors[0].message : 'æ±ºæ¸ˆã«å¤±æ•—ã—ã¾ã—ãŸ');\n              }\n\n            } catch (error) {\n              console.error('Payment error:', error);\n              statusDiv.innerHTML = \\`<div class=\"message error\">æ±ºæ¸ˆã«å¤±æ•—ã—ã¾ã—ãŸ: \\${error.message}</div>\\`;\n              button.disabled = false;\n              button.textContent = 'æ±ºæ¸ˆã‚’å®Ÿè¡Œ';\n            }\n          }\n\n          initializeSquare();\n        </script>\n      </body>\n      </html>\n    `\n\n    return new NextResponse(html, {\n      headers: {\n        'Content-Type': 'text/html',\n      },\n    })\n\n  } catch (error) {\n    console.error('Square payment page error:', error)\n    return NextResponse.json({ error: 'æ±ºæ¸ˆãƒšãƒ¼ã‚¸ã®è¡¨ç¤ºã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":7852},"src/app/api/admin/payments/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyAdminToken } from '@/lib/adminAuth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { error, status } = await verifyAdminToken(request)\n    \n    if (error) {\n      return NextResponse.json({ error }, { status })\n    }\n\n    const payments = await prisma.payment.findMany({\n      orderBy: { createdAt: 'desc' },\n      include: {\n        user: {\n          select: {\n            id: true,\n            companyName: true,\n            email: true,\n            userType: true\n          }\n        }\n      }\n    })\n\n    return NextResponse.json({ payments })\n\n  } catch (error) {\n    console.error('Admin payments error:', error)\n    return NextResponse.json({ error: 'æ±ºæ¸ˆä¸€è¦§ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n\nexport async function PATCH(request: NextRequest) {\n  try {\n    const { error, status } = await verifyAdminToken(request)\n    \n    if (error) {\n      return NextResponse.json({ error }, { status })\n    }\n\n    const { paymentId, paymentStatus } = await request.json()\n\n    if (!paymentId || !paymentStatus) {\n      return NextResponse.json({ error: 'æ±ºæ¸ˆIDã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒå¿…è¦ã§ã™' }, { status: 400 })\n    }\n\n    const updatedPayment = await prisma.payment.update({\n      where: { id: paymentId },\n      data: { paymentStatus }\n    })\n\n    return NextResponse.json({\n      message: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ã—ã¾ã—ãŸ',\n      payment: updatedPayment\n    })\n\n  } catch (error) {\n    console.error('Update payment error:', error)\n    return NextResponse.json({ error: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":1752},"src/app/api/settings/route.ts":{"content":"import { NextRequest } from 'next/server'\nexport const dynamic = 'force-dynamic'\nimport { getUserFromRequest } from '@/lib/auth'\nimport {\n  successResponse,\n  errorResponse,\n  unauthorizedResponse,\n} from '@/lib/api-response'\nimport prisma from '@/lib/prisma'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    const userProfile = await prisma.user.findUnique({\n      where: { id: user.userId },\n      select: {\n        id: true,\n        email: true,\n        userType: true,\n        companyName: true,\n        contactPerson: true,\n        phone: true,\n        postalCode: true,\n        address: true,\n        verificationStatus: true,\n        trustScore: true,\n        \n        industry: true,\n        establishedDate: true,\n        capital: true,\n        employeeCount: true,\n        businessDescription: true,\n        \n        subscriptionPlan: true,\n        contractStartDate: true,\n        contractEndDate: true,\n        \n        bankName: true,\n        branchName: true,\n        accountType: true,\n        accountNumber: true,\n        accountHolder: true,\n        \n        paymentMethod: true,\n        billingAddress: true,\n        \n        invoiceReceiptEmail: true,\n        invoiceReceiptMethod: true,\n        invoiceIssueMethod: true,\n        invoiceCompanyName: true,\n        \n        accountingPersonName: true,\n        accountingPersonEmail: true,\n        accountingPersonPhone: true,\n        \n        emailNotificationShipment: true,\n        emailNotificationOffer: true,\n        emailNotificationMatching: true,\n        emailNotificationMessage: true,\n        \n        createdAt: true,\n        updatedAt: true,\n      },\n    })\n    \n    if (!userProfile) {\n      return errorResponse('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“', 404)\n    }\n    \n    return successResponse(userProfile)\n  } catch (error) {\n    console.error('Get settings error:', error)\n    return errorResponse('è¨­å®šã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n\nexport async function PUT(request: NextRequest) {\n  try {\n    const user = getUserFromRequest(request)\n    \n    if (!user) {\n      return unauthorizedResponse()\n    }\n    \n    const body = await request.json()\n    \n    const updatedUser = await prisma.user.update({\n      where: { id: user.userId },\n      data: {\n        companyName: body.companyName,\n        contactPerson: body.contactPerson,\n        phone: body.phone,\n        postalCode: body.postalCode,\n        address: body.address,\n        \n        industry: body.industry,\n        establishedDate: body.establishedDate ? new Date(body.establishedDate) : null,\n        capital: body.capital ? parseFloat(body.capital) : null,\n        employeeCount: body.employeeCount ? parseInt(body.employeeCount) : null,\n        businessDescription: body.businessDescription,\n        \n        subscriptionPlan: body.subscriptionPlan,\n        contractStartDate: body.contractStartDate ? new Date(body.contractStartDate) : null,\n        contractEndDate: body.contractEndDate ? new Date(body.contractEndDate) : null,\n        \n        bankName: body.bankName,\n        branchName: body.branchName,\n        accountType: body.accountType,\n        accountNumber: body.accountNumber,\n        accountHolder: body.accountHolder,\n        \n        paymentMethod: body.paymentMethod,\n        billingAddress: body.billingAddress,\n        \n        invoiceReceiptEmail: body.invoiceReceiptEmail,\n        invoiceReceiptMethod: body.invoiceReceiptMethod,\n        invoiceIssueMethod: body.invoiceIssueMethod,\n        invoiceCompanyName: body.invoiceCompanyName,\n        \n        accountingPersonName: body.accountingPersonName,\n        accountingPersonEmail: body.accountingPersonEmail,\n        accountingPersonPhone: body.accountingPersonPhone,\n        \n        emailNotificationShipment: body.emailNotificationShipment ?? true,\n        emailNotificationOffer: body.emailNotificationOffer ?? true,\n        emailNotificationMatching: body.emailNotificationMatching ?? true,\n        emailNotificationMessage: body.emailNotificationMessage ?? true,\n      },\n      select: {\n        id: true,\n        email: true,\n        companyName: true,\n        contactPerson: true,\n        phone: true,\n        postalCode: true,\n        address: true,\n        updatedAt: true,\n      },\n    })\n    \n    return successResponse(updatedUser)\n  } catch (error: any) {\n    console.error('Update settings error:', error)\n    return errorResponse('è¨­å®šã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ', 500)\n  }\n}\n","size_bytes":4563},"src/app/api/payments/[id]/complete/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyToken } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function POST(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    \n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    const paymentId = params.id\n    const body = await request.json()\n    const { sourceId, paymentMethod } = body\n\n    // æ±ºæ¸ˆæƒ…å ±ã‚’å–å¾—\n    const payment = await prisma.payment.findUnique({\n      where: { id: paymentId },\n      include: {\n        user: true\n      }\n    })\n\n    if (!payment) {\n      return NextResponse.json({ error: 'æ±ºæ¸ˆæƒ…å ±ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“' }, { status: 404 })\n    }\n\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒã‚§ãƒƒã‚¯\n    if (payment.userId !== decoded.userId) {\n      return NextResponse.json({ error: 'æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“' }, { status: 403 })\n    }\n\n    // Squareæ±ºæ¸ˆå‡¦ç†\n    if (paymentMethod === 'card') {\n      const isProduction = process.env.NODE_ENV === 'production'\n      const squareAccessToken = isProduction\n        ? process.env.SQUARE_ACCESS_TOKEN\n        : process.env.SQUARE_SANDBOX_ACCESS_TOKEN\n\n      if (!squareAccessToken) {\n        return NextResponse.json({ error: 'Squareè¨­å®šãŒä¸å®Œå…¨ã§ã™' }, { status: 500 })\n      }\n\n      // Square Payments APIã‚’ä½¿ç”¨ã—ã¦æ±ºæ¸ˆå‡¦ç†\n      // TODO: Square SDKçµ±åˆï¼ˆç¾åœ¨ã¯ãƒ‡ãƒ¢ï¼‰\n      // const { Client, Environment } = require('square');\n      // const client = new Client({\n      //   accessToken: squareAccessToken,\n      //   environment: isProduction ? Environment.Production : Environment.Sandbox\n      // });\n      \n      // const response = await client.paymentsApi.createPayment({\n      //   sourceId: sourceId,\n      //   amountMoney: {\n      //     amount: Math.round(payment.amount),\n      //     currency: 'JPY'\n      //   },\n      //   idempotencyKey: paymentId\n      // });\n\n      // ãƒ‡ãƒ¢ç”¨ï¼šæ±ºæ¸ˆã‚’å®Œäº†ã¨ã—ã¦ãƒãƒ¼ã‚¯\n      const updatedPayment = await prisma.payment.update({\n        where: { id: paymentId },\n        data: {\n          paymentStatus: 'COMPLETED',\n          transactionId: `demo_${sourceId.substring(0, 16)}`,\n          paidAt: new Date(),\n          metadata: JSON.stringify({\n            sourceId,\n            environment: isProduction ? 'production' : 'sandbox'\n          })\n        }\n      })\n\n      return NextResponse.json({\n        message: 'æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸ',\n        data: {\n          paymentId: updatedPayment.id,\n          status: updatedPayment.paymentStatus,\n          amount: updatedPayment.amount\n        }\n      })\n    }\n\n    return NextResponse.json({ error: 'æœªå¯¾å¿œã®æ±ºæ¸ˆæ–¹æ³•ã§ã™' }, { status: 400 })\n\n  } catch (error) {\n    console.error('Payment completion error:', error)\n    return NextResponse.json({ \n      error: 'æ±ºæ¸ˆå‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ',\n      details: error instanceof Error ? error.message : 'Unknown error'\n    }, { status: 500 })\n  }\n}\n","size_bytes":3289},"src/app/dashboard/services/distance-calculator/page.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { MapPin, Navigation, Clock, TrendingUp, Route } from 'lucide-react'\n\nexport default function DistanceCalculatorPage() {\n  const [origin, setOrigin] = useState('')\n  const [destination, setDestination] = useState('')\n  const [calculatedDistance, setCalculatedDistance] = useState<number | null>(null)\n  const [estimatedTime, setEstimatedTime] = useState<number | null>(null)\n\n  const prefectures = [\n    'åŒ—æµ·é“', 'é’æ£®çœŒ', 'å²©æ‰‹çœŒ', 'å®®åŸçœŒ', 'ç§‹ç”°çœŒ', 'å±±å½¢çœŒ', 'ç¦å³¶çœŒ',\n    'èŒ¨åŸçœŒ', 'æ ƒæœ¨çœŒ', 'ç¾¤é¦¬çœŒ', 'åŸ¼ç‰çœŒ', 'åƒè‘‰çœŒ', 'æ±äº¬éƒ½', 'ç¥å¥ˆå·çœŒ',\n    'æ–°æ½ŸçœŒ', 'å¯Œå±±çœŒ', 'çŸ³å·çœŒ', 'ç¦äº•çœŒ', 'å±±æ¢¨çœŒ', 'é•·é‡çœŒ', 'å²é˜œçœŒ',\n    'é™å²¡çœŒ', 'æ„›çŸ¥çœŒ', 'ä¸‰é‡çœŒ', 'æ»‹è³€çœŒ', 'äº¬éƒ½åºœ', 'å¤§é˜ªåºœ', 'å…µåº«çœŒ',\n    'å¥ˆè‰¯çœŒ', 'å’Œæ­Œå±±çœŒ', 'é³¥å–çœŒ', 'å³¶æ ¹çœŒ', 'å²¡å±±çœŒ', 'åºƒå³¶çœŒ', 'å±±å£çœŒ',\n    'å¾³å³¶çœŒ', 'é¦™å·çœŒ', 'æ„›åª›çœŒ', 'é«˜çŸ¥çœŒ', 'ç¦å²¡çœŒ', 'ä½è³€çœŒ', 'é•·å´çœŒ',\n    'ç†Šæœ¬çœŒ', 'å¤§åˆ†çœŒ', 'å®®å´çœŒ', 'é¹¿å…å³¶çœŒ', 'æ²–ç¸„çœŒ'\n  ]\n\n  const calculateDistance = () => {\n    if (!origin || !destination) {\n      alert('å‡ºç™ºåœ°ã¨åˆ°ç€åœ°ã‚’é¸æŠã—ã¦ãã ã•ã„')\n      return\n    }\n\n    if (origin === destination) {\n      alert('å‡ºç™ºåœ°ã¨åˆ°ç€åœ°ãŒåŒã˜ã§ã™')\n      return\n    }\n\n    const prefectureCoordinates: { [key: string]: { lat: number; lng: number } } = {\n      'åŒ—æµ·é“': { lat: 43.06, lng: 141.35 }, 'é’æ£®çœŒ': { lat: 40.82, lng: 140.74 },\n      'å²©æ‰‹çœŒ': { lat: 39.70, lng: 141.15 }, 'å®®åŸçœŒ': { lat: 38.27, lng: 140.87 },\n      'ç§‹ç”°çœŒ': { lat: 39.72, lng: 140.10 }, 'å±±å½¢çœŒ': { lat: 38.24, lng: 140.36 },\n      'ç¦å³¶çœŒ': { lat: 37.75, lng: 140.47 }, 'èŒ¨åŸçœŒ': { lat: 36.34, lng: 140.45 },\n      'æ ƒæœ¨çœŒ': { lat: 36.57, lng: 139.88 }, 'ç¾¤é¦¬çœŒ': { lat: 36.39, lng: 139.06 },\n      'åŸ¼ç‰çœŒ': { lat: 35.86, lng: 139.65 }, 'åƒè‘‰çœŒ': { lat: 35.61, lng: 140.12 },\n      'æ±äº¬éƒ½': { lat: 35.69, lng: 139.69 }, 'ç¥å¥ˆå·çœŒ': { lat: 35.45, lng: 139.64 },\n      'æ–°æ½ŸçœŒ': { lat: 37.90, lng: 139.02 }, 'å¯Œå±±çœŒ': { lat: 36.70, lng: 137.21 },\n      'çŸ³å·çœŒ': { lat: 36.59, lng: 136.63 }, 'ç¦äº•çœŒ': { lat: 36.07, lng: 136.22 },\n      'å±±æ¢¨çœŒ': { lat: 35.66, lng: 138.57 }, 'é•·é‡çœŒ': { lat: 36.65, lng: 138.18 },\n      'å²é˜œçœŒ': { lat: 35.39, lng: 136.72 }, 'é™å²¡çœŒ': { lat: 34.98, lng: 138.38 },\n      'æ„›çŸ¥çœŒ': { lat: 35.18, lng: 136.91 }, 'ä¸‰é‡çœŒ': { lat: 34.73, lng: 136.51 },\n      'æ»‹è³€çœŒ': { lat: 35.00, lng: 135.87 }, 'äº¬éƒ½åºœ': { lat: 35.02, lng: 135.76 },\n      'å¤§é˜ªåºœ': { lat: 34.69, lng: 135.50 }, 'å…µåº«çœŒ': { lat: 34.69, lng: 135.18 },\n      'å¥ˆè‰¯çœŒ': { lat: 34.69, lng: 135.83 }, 'å’Œæ­Œå±±çœŒ': { lat: 34.23, lng: 135.17 },\n      'é³¥å–çœŒ': { lat: 35.50, lng: 134.24 }, 'å³¶æ ¹çœŒ': { lat: 35.47, lng: 133.05 },\n      'å²¡å±±çœŒ': { lat: 34.66, lng: 133.92 }, 'åºƒå³¶çœŒ': { lat: 34.40, lng: 132.46 },\n      'å±±å£çœŒ': { lat: 34.19, lng: 131.47 }, 'å¾³å³¶çœŒ': { lat: 34.07, lng: 134.56 },\n      'é¦™å·çœŒ': { lat: 34.34, lng: 134.04 }, 'æ„›åª›çœŒ': { lat: 33.84, lng: 132.77 },\n      'é«˜çŸ¥çœŒ': { lat: 33.56, lng: 133.53 }, 'ç¦å²¡çœŒ': { lat: 33.61, lng: 130.42 },\n      'ä½è³€çœŒ': { lat: 33.25, lng: 130.30 }, 'é•·å´çœŒ': { lat: 32.75, lng: 129.87 },\n      'ç†Šæœ¬çœŒ': { lat: 32.79, lng: 130.74 }, 'å¤§åˆ†çœŒ': { lat: 33.24, lng: 131.61 },\n      'å®®å´çœŒ': { lat: 31.91, lng: 131.42 }, 'é¹¿å…å³¶çœŒ': { lat: 31.56, lng: 130.56 },\n      'æ²–ç¸„çœŒ': { lat: 26.21, lng: 127.68 }\n    }\n\n    const originCoord = prefectureCoordinates[origin]\n    const destCoord = prefectureCoordinates[destination]\n\n    if (!originCoord || !destCoord) {\n      alert('åº§æ¨™ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ')\n      return\n    }\n\n    const R = 6371\n    const dLat = (destCoord.lat - originCoord.lat) * Math.PI / 180\n    const dLng = (destCoord.lng - originCoord.lng) * Math.PI / 180\n    const a = \n      Math.sin(dLat/2) * Math.sin(dLat/2) +\n      Math.cos(originCoord.lat * Math.PI / 180) * Math.cos(destCoord.lat * Math.PI / 180) *\n      Math.sin(dLng/2) * Math.sin(dLng/2)\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a))\n    const distance = Math.round(R * c * 1.3)\n\n    setCalculatedDistance(distance)\n    setEstimatedTime(Math.round(distance / 60 * 10) / 10)\n  }\n\n  const resetForm = () => {\n    setOrigin('')\n    setDestination('')\n    setCalculatedDistance(null)\n    setEstimatedTime(null)\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">è·é›¢è¨ˆç®—ãƒ„ãƒ¼ãƒ«</h1>\n        <p className=\"text-gray-600\">2åœ°ç‚¹é–“ã®æœ€é©ãƒ«ãƒ¼ãƒˆã¨è·é›¢ã‚’è¨ˆç®—ã—ã¾ã™</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div className=\"lg:col-span-2\">\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <MapPin className=\"h-4 w-4 inline mr-1 text-green-600\" />\n                    å‡ºç™ºåœ°\n                  </label>\n                  <select\n                    value={origin}\n                    onChange={(e) => setOrigin(e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"\">éƒ½é“åºœçœŒã‚’é¸æŠ</option>\n                    {prefectures.map(pref => (\n                      <option key={pref} value={pref}>{pref}</option>\n                    ))}\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <MapPin className=\"h-4 w-4 inline mr-1 text-red-600\" />\n                    åˆ°ç€åœ°\n                  </label>\n                  <select\n                    value={destination}\n                    onChange={(e) => setDestination(e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  >\n                    <option value=\"\">éƒ½é“åºœçœŒã‚’é¸æŠ</option>\n                    {prefectures.map(pref => (\n                      <option key={pref} value={pref}>{pref}</option>\n                    ))}\n                  </select>\n                </div>\n              </div>\n\n              <div className=\"flex space-x-4\">\n                <button\n                  onClick={calculateDistance}\n                  className=\"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2\"\n                >\n                  <Navigation className=\"h-5 w-5\" />\n                  <span>è·é›¢ã‚’è¨ˆç®—</span>\n                </button>\n                <button\n                  onClick={resetForm}\n                  className=\"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n                >\n                  ãƒªã‚»ãƒƒãƒˆ\n                </button>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"mt-6 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-6\">\n            <h3 className=\"font-semibold text-gray-900 mb-3 flex items-center\">\n              <Route className=\"h-5 w-5 mr-2 text-blue-600\" />\n              ä¸»è¦éƒ½å¸‚é–“è·é›¢ã®ç›®å®‰\n            </h3>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm\">\n              <div className=\"flex justify-between items-center bg-white rounded-lg p-3\">\n                <span className=\"text-gray-700\">æ±äº¬ â†” å¤§é˜ª</span>\n                <span className=\"font-semibold text-blue-600\">ç´„ 515km</span>\n              </div>\n              <div className=\"flex justify-between items-center bg-white rounded-lg p-3\">\n                <span className=\"text-gray-700\">æ±äº¬ â†” ç¦å²¡</span>\n                <span className=\"font-semibold text-blue-600\">ç´„ 1,090km</span>\n              </div>\n              <div className=\"flex justify-between items-center bg-white rounded-lg p-3\">\n                <span className=\"text-gray-700\">æ±äº¬ â†” æœ­å¹Œ</span>\n                <span className=\"font-semibold text-blue-600\">ç´„ 1,150km</span>\n              </div>\n              <div className=\"flex justify-between items-center bg-white rounded-lg p-3\">\n                <span className=\"text-gray-700\">å¤§é˜ª â†” ç¦å²¡</span>\n                <span className=\"font-semibold text-blue-600\">ç´„ 620km</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"lg:col-span-1\">\n          {calculatedDistance !== null ? (\n            <div className=\"space-y-6\">\n              <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow-lg p-6 text-white\">\n                <h3 className=\"text-lg font-semibold mb-4 flex items-center\">\n                  <Navigation className=\"h-5 w-5 mr-2\" />\n                  è¨ˆç®—çµæœ\n                </h3>\n                <div className=\"bg-white bg-opacity-20 rounded-lg p-4 mb-4\">\n                  <div className=\"text-sm text-green-100 mb-1\">ç·è·é›¢</div>\n                  <div className=\"text-4xl font-bold\">{calculatedDistance}km</div>\n                </div>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-green-100\">å‡ºç™ºåœ°</span>\n                    <span className=\"font-medium\">{origin}</span>\n                  </div>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-green-100\">åˆ°ç€åœ°</span>\n                    <span className=\"font-medium\">{destination}</span>\n                  </div>\n                  <div className=\"h-px bg-white bg-opacity-20 my-2\"></div>\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-green-100 flex items-center\">\n                      <Clock className=\"h-3 w-3 mr-1\" />\n                      æ¨å®šæ™‚é–“\n                    </span>\n                    <span className=\"font-medium\">{estimatedTime}æ™‚é–“</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n                <h4 className=\"font-semibold text-purple-900 mb-2 flex items-center text-sm\">\n                  <TrendingUp className=\"h-4 w-4 mr-2\" />\n                  æ´»ç”¨ã®ãƒ’ãƒ³ãƒˆ\n                </h4>\n                <ul className=\"text-xs text-purple-700 space-y-1\">\n                  <li>â€¢ å¹³å‡æ™‚é€Ÿ60kmã§è¨ˆç®—ã—ã¦ã„ã¾ã™</li>\n                  <li>â€¢ å®Ÿéš›ã®æ‰€è¦æ™‚é–“ã¯äº¤é€šçŠ¶æ³ã«ã‚ˆã‚Šå¤‰å‹•ã—ã¾ã™</li>\n                  <li>â€¢ é«˜é€Ÿé“è·¯åˆ©ç”¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã™</li>\n                  <li>â€¢ æ–™é‡‘è¨ˆç®—ãƒ„ãƒ¼ãƒ«ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã§ãã¾ã™</li>\n                </ul>\n              </div>\n            </div>\n          ) : (\n            <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-6\">\n              <div className=\"text-center text-gray-500\">\n                <Navigation className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                <p className=\"text-sm\">å‡ºç™ºåœ°ã¨åˆ°ç€åœ°ã‚’é¸æŠã—ã¦<br />ã€Œè·é›¢ã‚’è¨ˆç®—ã€ãƒœã‚¿ãƒ³ã‚’<br />ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":11888},"src/app/admin/verifications/page.tsx":{"content":"'use client'\n\nimport { useState, useEffect } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { Shield, CheckCircle, XCircle, Clock, FileText, User } from 'lucide-react'\n\ninterface Verification {\n  id: string\n  documentType: string\n  documentNumber?: string\n  status: string\n  submittedAt: string\n  user: {\n    id: string\n    companyName: string\n    email: string\n  }\n}\n\nexport default function AdminVerificationsPage() {\n  const [verifications, setVerifications] = useState<Verification[]>([])\n  const [loading, setLoading] = useState(true)\n  const [isAdmin, setIsAdmin] = useState(false)\n  const [selectedVerification, setSelectedVerification] = useState<Verification | null>(null)\n  const [reviewAction, setReviewAction] = useState<'APPROVED' | 'REJECTED' | null>(null)\n  const [rejectionReason, setRejectionReason] = useState('')\n  const router = useRouter()\n\n  useEffect(() => {\n    const user = localStorage.getItem('user')\n    if (user) {\n      const userData = JSON.parse(user)\n      if (userData.isAdmin) {\n        setIsAdmin(true)\n        fetchAllVerifications()\n      } else {\n        router.push('/dashboard')\n      }\n    } else {\n      router.push('/login')\n    }\n  }, [router])\n\n  const fetchAllVerifications = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/verifications', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n      \n      if (response.ok) {\n        const data = await response.json()\n        setVerifications(data.verifications)\n      }\n    } catch (error) {\n      console.error('Failed to fetch verifications:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleReview = async () => {\n    if (!selectedVerification || !reviewAction) return\n    if (reviewAction === 'REJECTED' && !rejectionReason) {\n      alert('å´ä¸‹ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')\n      return\n    }\n\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch(`/api/verifications/${selectedVerification.id}/review`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          status: reviewAction,\n          rejectionReason: reviewAction === 'REJECTED' ? rejectionReason : null\n        })\n      })\n\n      if (response.ok) {\n        alert(`è¨±å¯è¨¼ã‚’${reviewAction === 'APPROVED' ? 'æ‰¿èª' : 'å´ä¸‹'}ã—ã¾ã—ãŸ`)\n        setSelectedVerification(null)\n        setReviewAction(null)\n        setRejectionReason('')\n        fetchAllVerifications()\n      } else {\n        const error = await response.json()\n        alert(error.error || 'å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ')\n      }\n    } catch (error) {\n      console.error('Review error:', error)\n      alert('å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  const documentTypes: Record<string, string> = {\n    'BUSINESS_LICENSE': 'äº‹æ¥­è¨±å¯è¨¼',\n    'TRANSPORT_LICENSE': 'ä¸€èˆ¬è²¨ç‰©è‡ªå‹•è»Šé‹é€äº‹æ¥­è¨±å¯è¨¼',\n    'INSURANCE': 'ä¿é™ºè¨¼åˆ¸',\n    'OTHER': 'ãã®ä»–'\n  }\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'PENDING':\n        return <span className=\"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm flex items-center space-x-1\">\n          <Clock className=\"h-4 w-4\" />\n          <span>å¯©æŸ»å¾…ã¡</span>\n        </span>\n      case 'APPROVED':\n        return <span className=\"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm flex items-center space-x-1\">\n          <CheckCircle className=\"h-4 w-4\" />\n          <span>æ‰¿èªæ¸ˆã¿</span>\n        </span>\n      case 'REJECTED':\n        return <span className=\"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm flex items-center space-x-1\">\n          <XCircle className=\"h-4 w-4\" />\n          <span>å´ä¸‹</span>\n        </span>\n      default:\n        return null\n    }\n  }\n\n  if (!isAdmin) {\n    return null\n  }\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex justify-center items-center h-64\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  const pendingVerifications = verifications.filter(v => v.status === 'PENDING')\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <div className=\"flex justify-between items-center\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900 flex items-center space-x-2\">\n              <Shield className=\"h-7 w-7 text-blue-600\" />\n              <span>è¨±å¯è¨¼æ‰¿èªç®¡ç†</span>\n            </h1>\n            <p className=\"text-gray-600\">ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæå‡ºã—ãŸè¨±å¯è¨¼ã‚’å¯©æŸ»ãƒ»æ‰¿èªã—ã¾ã™</p>\n          </div>\n          <div className=\"text-sm\">\n            <span className=\"text-gray-600\">å¯©æŸ»å¾…ã¡: </span>\n            <span className=\"text-lg font-bold text-yellow-600\">{pendingVerifications.length}ä»¶</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"space-y-6\">\n        {/* å¯©æŸ»å¾…ã¡è¨±å¯è¨¼ */}\n        {pendingVerifications.length > 0 && (\n          <div className=\"bg-white rounded-lg shadow-sm border\">\n            <div className=\"px-6 py-4 border-b border-gray-200 bg-yellow-50\">\n              <h2 className=\"text-lg font-semibold text-gray-900\">å¯©æŸ»å¾…ã¡è¨±å¯è¨¼</h2>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"space-y-4\">\n                {pendingVerifications.map((verification) => (\n                  <div key={verification.id} className=\"border border-yellow-300 bg-yellow-50 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className=\"p-3 bg-yellow-100 rounded-lg\">\n                          <FileText className=\"h-6 w-6 text-yellow-600\" />\n                        </div>\n                        <div>\n                          <h3 className=\"text-sm font-semibold text-gray-900\">\n                            {documentTypes[verification.documentType] || verification.documentType}\n                          </h3>\n                          <p className=\"text-xs text-gray-600 flex items-center space-x-2 mt-1\">\n                            <User className=\"h-3 w-3\" />\n                            <span>{verification.user.companyName} ({verification.user.email})</span>\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            è¨±å¯è¨¼ç•ªå·: {verification.documentNumber || 'æœªå…¥åŠ›'}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            æå‡ºæ—¥: {new Date(verification.submittedAt).toLocaleDateString('ja-JP')}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <button\n                          onClick={() => {\n                            setSelectedVerification(verification)\n                            setReviewAction('APPROVED')\n                          }}\n                          className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center space-x-2\"\n                        >\n                          <CheckCircle className=\"h-4 w-4\" />\n                          <span>æ‰¿èª</span>\n                        </button>\n                        <button\n                          onClick={() => {\n                            setSelectedVerification(verification)\n                            setReviewAction('REJECTED')\n                          }}\n                          className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 flex items-center space-x-2\"\n                        >\n                          <XCircle className=\"h-4 w-4\" />\n                          <span>å´ä¸‹</span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* ã™ã¹ã¦ã®è¨±å¯è¨¼ */}\n        <div className=\"bg-white rounded-lg shadow-sm border\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h2 className=\"text-lg font-semibold text-gray-900\">ã™ã¹ã¦ã®è¨±å¯è¨¼</h2>\n          </div>\n          <div className=\"p-6\">\n            {verifications.length === 0 ? (\n              <p className=\"text-gray-500 text-center py-8\">è¨±å¯è¨¼ãŒæå‡ºã•ã‚Œã¦ã„ã¾ã›ã‚“</p>\n            ) : (\n              <div className=\"space-y-4\">\n                {verifications.map((verification) => (\n                  <div key={verification.id} className=\"border border-gray-200 rounded-lg p-4 hover:bg-gray-50\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center space-x-4\">\n                        <div className={`p-2 rounded-lg ${\n                          verification.status === 'APPROVED' ? 'bg-green-100' :\n                          verification.status === 'PENDING' ? 'bg-yellow-100' :\n                          'bg-red-100'\n                        }`}>\n                          <FileText className={`h-5 w-5 ${\n                            verification.status === 'APPROVED' ? 'text-green-600' :\n                            verification.status === 'PENDING' ? 'text-yellow-600' :\n                            'text-red-600'\n                          }`} />\n                        </div>\n                        <div>\n                          <h3 className=\"text-sm font-medium text-gray-900\">\n                            {documentTypes[verification.documentType] || verification.documentType}\n                          </h3>\n                          <p className=\"text-xs text-gray-600\">{verification.user.companyName}</p>\n                          <p className=\"text-xs text-gray-500\">\n                            æå‡ºæ—¥: {new Date(verification.submittedAt).toLocaleDateString('ja-JP')}\n                          </p>\n                        </div>\n                      </div>\n                      {getStatusBadge(verification.status)}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« */}\n      {selectedVerification && reviewAction && (\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\n            <h3 className=\"text-lg font-bold mb-4\">\n              {reviewAction === 'APPROVED' ? 'è¨±å¯è¨¼ã‚’æ‰¿èªã—ã¾ã™ã‹ï¼Ÿ' : 'è¨±å¯è¨¼ã‚’å´ä¸‹ã—ã¾ã™ã‹ï¼Ÿ'}\n            </h3>\n            <div className=\"mb-4\">\n              <p className=\"text-sm text-gray-600\">ä¼æ¥­å: {selectedVerification.user.companyName}</p>\n              <p className=\"text-sm text-gray-600\">\n                æ›¸é¡: {documentTypes[selectedVerification.documentType]}\n              </p>\n            </div>\n            \n            {reviewAction === 'REJECTED' && (\n              <div className=\"mb-4\">\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  å´ä¸‹ç†ç”±ï¼ˆå¿…é ˆï¼‰\n                </label>\n                <textarea\n                  value={rejectionReason}\n                  onChange={(e) => setRejectionReason(e.target.value)}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  rows={3}\n                  placeholder=\"å´ä¸‹ã®ç†ç”±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„\"\n                />\n              </div>\n            )}\n\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={() => {\n                  setSelectedVerification(null)\n                  setReviewAction(null)\n                  setRejectionReason('')\n                }}\n                className=\"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50\"\n              >\n                ã‚­ãƒ£ãƒ³ã‚»ãƒ«\n              </button>\n              <button\n                onClick={handleReview}\n                className={`flex-1 px-4 py-2 text-white rounded-lg ${\n                  reviewAction === 'APPROVED' \n                    ? 'bg-green-600 hover:bg-green-700' \n                    : 'bg-red-600 hover:bg-red-700'\n                }`}\n              >\n                {reviewAction === 'APPROVED' ? 'æ‰¿èª' : 'å´ä¸‹'}\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </DashboardLayout>\n  )\n}\n","size_bytes":12908},"scripts/create-admin.ts":{"content":"import { PrismaClient } from '@prisma/client'\nimport bcrypt from 'bcryptjs'\n\nconst prisma = new PrismaClient()\n\nasync function createAdmin() {\n  try {\n    const email = 'info@sinjapan.jp'\n    const password = 'Kazuya8008'\n    \n    // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ãƒãƒƒã‚·ãƒ¥åŒ–\n    const hashedPassword = await bcrypt.hash(password, 10)\n    \n    // æ—¢å­˜ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãƒã‚§ãƒƒã‚¯\n    const existingUser = await prisma.user.findUnique({\n      where: { email }\n    })\n    \n    if (existingUser) {\n      console.log('âœ… ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯æ—¢ã«å­˜åœ¨ã—ã¾ã™:', email)\n      // ç®¡ç†è€…æ¨©é™ã‚’ç¢ºèªãƒ»æ›´æ–°\n      if (!existingUser.isAdmin) {\n        await prisma.user.update({\n          where: { email },\n          data: { \n            isAdmin: true,\n            verificationStatus: 'APPROVED'\n          }\n        })\n        console.log('âœ… ç®¡ç†è€…æ¨©é™ã‚’ä»˜ä¸ã—ã¾ã—ãŸ')\n      }\n      return\n    }\n    \n    // ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ\n    const admin = await prisma.user.create({\n      data: {\n        email,\n        password: hashedPassword,\n        userType: 'SHIPPER',\n        companyName: 'SIN JAPAN',\n        contactPerson: 'Admin',\n        phone: '000-0000-0000',\n        isAdmin: true,\n        verificationStatus: 'APPROVED',\n        trustScore: 5.0\n      }\n    })\n    \n    console.log('âœ… ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã—ãŸ:')\n    console.log('   Email:', admin.email)\n    console.log('   Admin:', admin.isAdmin)\n    console.log('   ID:', admin.id)\n    \n  } catch (error) {\n    console.error('âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', error)\n    throw error\n  } finally {\n    await prisma.$disconnect()\n  }\n}\n\ncreateAdmin()\n","size_bytes":1674},"src/app/dashboard/services/price-calculator/page.tsx":{"content":"'use client'\n\nimport { useState } from 'react'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { Calculator, DollarSign, Truck, Package, MapPin, ArrowRight, TrendingUp } from 'lucide-react'\n\nexport default function PriceCalculatorPage() {\n  const [distance, setDistance] = useState('')\n  const [weight, setWeight] = useState('')\n  const [vehicleType, setVehicleType] = useState('SMALL_TRUCK')\n  const [isExpress, setIsExpress] = useState(false)\n  const [needsHelper, setNeedsHelper] = useState(false)\n  const [needsLiftGate, setNeedsLiftGate] = useState(false)\n  const [calculatedPrice, setCalculatedPrice] = useState<number | null>(null)\n\n  const vehicleTypes = [\n    { value: 'LIGHT_TRUCK', label: 'è»½ãƒˆãƒ©ãƒƒã‚¯', baseRate: 80 },\n    { value: 'SMALL_TRUCK', label: 'å°å‹ãƒˆãƒ©ãƒƒã‚¯ (2t)', baseRate: 120 },\n    { value: 'MEDIUM_TRUCK', label: 'ä¸­å‹ãƒˆãƒ©ãƒƒã‚¯ (4t)', baseRate: 180 },\n    { value: 'LARGE_TRUCK', label: 'å¤§å‹ãƒˆãƒ©ãƒƒã‚¯ (10t)', baseRate: 280 },\n    { value: 'TRAILER', label: 'ãƒˆãƒ¬ãƒ¼ãƒ©ãƒ¼', baseRate: 350 }\n  ]\n\n  const calculatePrice = () => {\n    const distanceNum = parseFloat(distance)\n    const weightNum = parseFloat(weight)\n\n    if (!distanceNum || !weightNum) {\n      alert('è·é›¢ã¨é‡é‡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„')\n      return\n    }\n\n    const selectedVehicle = vehicleTypes.find(v => v.value === vehicleType)\n    if (!selectedVehicle) return\n\n    let basePrice = distanceNum * selectedVehicle.baseRate\n    const weightSurcharge = weightNum > 500 ? (weightNum - 500) * 10 : 0\n    const expressFee = isExpress ? basePrice * 0.3 : 0\n    const helperFee = needsHelper ? 5000 : 0\n    const liftGateFee = needsLiftGate ? 3000 : 0\n\n    const totalPrice = Math.round(basePrice + weightSurcharge + expressFee + helperFee + liftGateFee)\n    setCalculatedPrice(totalPrice)\n  }\n\n  const resetForm = () => {\n    setDistance('')\n    setWeight('')\n    setVehicleType('SMALL_TRUCK')\n    setIsExpress(false)\n    setNeedsHelper(false)\n    setNeedsLiftGate(false)\n    setCalculatedPrice(null)\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">æ–™é‡‘è¦‹ç©ã‚‚ã‚Šè¨ˆç®—</h1>\n        <p className=\"text-gray-600\">è·é›¢ã€é‡é‡ã€è»Šä¸¡ã‚¿ã‚¤ãƒ—ã‹ã‚‰é‹è³ƒã‚’è‡ªå‹•è¨ˆç®—ã—ã¾ã™</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <div className=\"lg:col-span-2\">\n          <div className=\"bg-white rounded-lg shadow-sm border p-6\">\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <MapPin className=\"h-4 w-4 inline mr-1\" />\n                    é…é€è·é›¢ (km)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={distance}\n                    onChange={(e) => setDistance(e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ä¾‹: 50\"\n                    min=\"0\"\n                    step=\"0.1\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    <Package className=\"h-4 w-4 inline mr-1\" />\n                    è·ç‰©é‡é‡ (kg)\n                  </label>\n                  <input\n                    type=\"number\"\n                    value={weight}\n                    onChange={(e) => setWeight(e.target.value)}\n                    className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                    placeholder=\"ä¾‹: 300\"\n                    min=\"0\"\n                    step=\"1\"\n                  />\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  <Truck className=\"h-4 w-4 inline mr-1\" />\n                  è»Šä¸¡ã‚¿ã‚¤ãƒ—\n                </label>\n                <select\n                  value={vehicleType}\n                  onChange={(e) => setVehicleType(e.target.value)}\n                  className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                >\n                  {vehicleTypes.map(type => (\n                    <option key={type.value} value={type.value}>\n                      {type.label} (Â¥{type.baseRate}/km)\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"space-y-3\">\n                <h3 className=\"font-medium text-gray-900\">ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h3>\n                <label className=\"flex items-center space-x-3 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={isExpress}\n                    onChange={(e) => setIsExpress(e.target.checked)}\n                    className=\"w-5 h-5 text-blue-600 rounded focus:ring-blue-500\"\n                  />\n                  <span className=\"text-gray-700\">ç‰¹æ€¥ä¾¿ (+30%)</span>\n                </label>\n\n                <label className=\"flex items-center space-x-3 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={needsHelper}\n                    onChange={(e) => setNeedsHelper(e.target.checked)}\n                    className=\"w-5 h-5 text-blue-600 rounded focus:ring-blue-500\"\n                  />\n                  <span className=\"text-gray-700\">ä½œæ¥­å“¡ä»˜ã (+Â¥5,000)</span>\n                </label>\n\n                <label className=\"flex items-center space-x-3 cursor-pointer\">\n                  <input\n                    type=\"checkbox\"\n                    checked={needsLiftGate}\n                    onChange={(e) => setNeedsLiftGate(e.target.checked)}\n                    className=\"w-5 h-5 text-blue-600 rounded focus:ring-blue-500\"\n                  />\n                  <span className=\"text-gray-700\">ãƒªãƒ•ãƒˆã‚²ãƒ¼ãƒˆ (+Â¥3,000)</span>\n                </label>\n              </div>\n\n              <div className=\"flex space-x-4\">\n                <button\n                  onClick={calculatePrice}\n                  className=\"flex-1 bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2\"\n                >\n                  <Calculator className=\"h-5 w-5\" />\n                  <span>è¦‹ç©ã‚‚ã‚Šè¨ˆç®—</span>\n                </button>\n                <button\n                  onClick={resetForm}\n                  className=\"px-6 py-3 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors\"\n                >\n                  ãƒªã‚»ãƒƒãƒˆ\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"lg:col-span-1\">\n          {calculatedPrice !== null ? (\n            <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 text-white\">\n              <h3 className=\"text-lg font-semibold mb-4 flex items-center\">\n                <DollarSign className=\"h-5 w-5 mr-2\" />\n                è¦‹ç©ã‚‚ã‚Šçµæœ\n              </h3>\n              <div className=\"bg-white bg-opacity-20 rounded-lg p-4 mb-4\">\n                <div className=\"text-sm text-blue-100 mb-1\">åˆè¨ˆé‡‘é¡</div>\n                <div className=\"text-4xl font-bold\">Â¥{calculatedPrice.toLocaleString()}</div>\n              </div>\n              <div className=\"space-y-2 text-sm\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-blue-100\">è·é›¢</span>\n                  <span>{distance}km</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-blue-100\">é‡é‡</span>\n                  <span>{weight}kg</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-blue-100\">è»Šä¸¡</span>\n                  <span>{vehicleTypes.find(v => v.value === vehicleType)?.label}</span>\n                </div>\n                {isExpress && (\n                  <div className=\"flex justify-between text-yellow-200\">\n                    <span>ç‰¹æ€¥ä¾¿</span>\n                    <span>+30%</span>\n                  </div>\n                )}\n                {needsHelper && (\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-blue-100\">ä½œæ¥­å“¡</span>\n                    <span>+Â¥5,000</span>\n                  </div>\n                )}\n                {needsLiftGate && (\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-blue-100\">ãƒªãƒ•ãƒˆã‚²ãƒ¼ãƒˆ</span>\n                    <span>+Â¥3,000</span>\n                  </div>\n                )}\n              </div>\n            </div>\n          ) : (\n            <div className=\"bg-gray-50 border border-gray-200 rounded-lg p-6\">\n              <div className=\"text-center text-gray-500\">\n                <Calculator className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n                <p className=\"text-sm\">æ¡ä»¶ã‚’å…¥åŠ›ã—ã¦<br />ã€Œè¦‹ç©ã‚‚ã‚Šè¨ˆç®—ã€ãƒœã‚¿ãƒ³ã‚’<br />ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„</p>\n              </div>\n            </div>\n          )}\n\n          <div className=\"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <h4 className=\"font-semibold text-blue-900 mb-2 flex items-center text-sm\">\n              <TrendingUp className=\"h-4 w-4 mr-2\" />\n              æ–™é‡‘ä½“ç³»ã«ã¤ã„ã¦\n            </h4>\n            <ul className=\"text-xs text-blue-700 space-y-1\">\n              <li>â€¢ åŸºæœ¬æ–™é‡‘: è·é›¢ Ã— è»Šä¸¡ã‚¿ã‚¤ãƒ—åˆ¥å˜ä¾¡</li>\n              <li>â€¢ é‡é‡500kgè¶…éåˆ†: Â¥10/kg</li>\n              <li>â€¢ ç‰¹æ€¥ä¾¿: åŸºæœ¬æ–™é‡‘ã®30%åŠ ç®—</li>\n              <li>â€¢ ä½œæ¥­å“¡: Â¥5,000/å</li>\n              <li>â€¢ ãƒªãƒ•ãƒˆã‚²ãƒ¼ãƒˆ: Â¥3,000</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":10275},"src/app/admin/payments/page.tsx":{"content":"'use client'\n\nimport { useEffect, useState } from 'react'\nimport { useRouter } from 'next/navigation'\nimport DashboardLayout from '@/components/DashboardLayout'\nimport { CreditCard, TrendingUp, Clock, CheckCircle, XCircle } from 'lucide-react'\n\ninterface Payment {\n  id: string\n  amount: number\n  paymentMethod: string\n  paymentStatus: string\n  transactionId: string | null\n  paidAt: string | null\n  createdAt: string\n  user: {\n    id: string\n    companyName: string\n    email: string\n    userType: string\n  }\n}\n\nexport default function AdminPayments() {\n  const router = useRouter()\n  const [payments, setPayments] = useState<Payment[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const userData = localStorage.getItem('user')\n    if (userData) {\n      const parsedUser = JSON.parse(userData)\n      if (!parsedUser.isAdmin) {\n        router.push('/dashboard')\n        return\n      }\n    }\n\n    fetchPayments()\n  }, [router])\n\n  const fetchPayments = async () => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/payments', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      })\n\n      if (!response.ok) throw new Error('Failed to fetch payments')\n\n      const data = await response.json()\n      setPayments(data.payments)\n    } catch (error) {\n      console.error('Error fetching payments:', error)\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const updateStatus = async (paymentId: string, newStatus: string) => {\n    try {\n      const token = localStorage.getItem('token')\n      const response = await fetch('/api/admin/payments', {\n        method: 'PATCH',\n        headers: { \n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ paymentId, paymentStatus: newStatus })\n      })\n\n      if (!response.ok) throw new Error('Failed to update payment')\n\n      const data = await response.json()\n      alert(data.message)\n      fetchPayments()\n    } catch (error) {\n      console.error('Error updating payment:', error)\n      alert('ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ')\n    }\n  }\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex items-center justify-center h-96\">\n          <div className=\"text-gray-600\">èª­ã¿è¾¼ã¿ä¸­...</div>\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  const totalRevenue = payments\n    .filter(p => p.paymentStatus === 'COMPLETED')\n    .reduce((sum, p) => sum + p.amount, 0)\n\n  const statusCounts = {\n    pending: payments.filter(p => p.paymentStatus === 'PENDING').length,\n    completed: payments.filter(p => p.paymentStatus === 'COMPLETED').length,\n    failed: payments.filter(p => p.paymentStatus === 'FAILED').length\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">æ±ºæ¸ˆç®¡ç†</h1>\n            <p className=\"text-gray-600 mt-1\">å…¨æ±ºæ¸ˆã®ç®¡ç†ã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´</p>\n          </div>\n          <div className=\"px-4 py-2 bg-orange-100 text-orange-800 rounded-lg font-medium\">\n            {payments.length} ä»¶ã®æ±ºæ¸ˆ\n          </div>\n        </div>\n\n        {/* ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <p className=\"text-sm text-gray-600\">ç·å£²ä¸Š</p>\n              <TrendingUp className=\"w-5 h-5 text-green-600\" />\n            </div>\n            <p className=\"text-3xl font-bold text-gray-900\">Â¥{totalRevenue.toLocaleString()}</p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <p className=\"text-sm text-gray-600\">å‡¦ç†ä¸­</p>\n              <Clock className=\"w-5 h-5 text-yellow-600\" />\n            </div>\n            <p className=\"text-3xl font-bold text-yellow-600\">{statusCounts.pending}</p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <p className=\"text-sm text-gray-600\">å®Œäº†</p>\n              <CheckCircle className=\"w-5 h-5 text-green-600\" />\n            </div>\n            <p className=\"text-3xl font-bold text-green-600\">{statusCounts.completed}</p>\n          </div>\n          <div className=\"bg-white rounded-lg shadow-md p-6\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <p className=\"text-sm text-gray-600\">å¤±æ•—</p>\n              <XCircle className=\"w-5 h-5 text-red-600\" />\n            </div>\n            <p className=\"text-3xl font-bold text-red-600\">{statusCounts.failed}</p>\n          </div>\n        </div>\n\n        {/* æ±ºæ¸ˆä¸€è¦§ */}\n        <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ä¼šç¤¾å</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">é‡‘é¡</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">æ”¯æ‰•ã„æ–¹æ³•</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">å–å¼•ID</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ä½œæˆæ—¥</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase\">ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>\n                </tr>\n              </thead>\n              <tbody className=\"divide-y divide-gray-200\">\n                {payments.map((payment) => (\n                  <tr key={payment.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4\">\n                      <div>\n                        <p className=\"font-medium text-gray-900\">{payment.user.companyName}</p>\n                        <p className=\"text-xs text-gray-500\">{payment.user.email}</p>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-2 py-1 text-xs rounded-full ${\n                        payment.user.userType === 'SHIPPER' \n                          ? 'bg-blue-100 text-blue-800' \n                          : 'bg-green-100 text-green-800'\n                      }`}>\n                        {payment.user.userType === 'SHIPPER' ? 'è·ä¸»' : 'é‹é€ä¼šç¤¾'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"text-lg font-bold text-gray-900\">Â¥{payment.amount.toLocaleString()}</p>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"text-sm text-gray-600\">\n                        {payment.paymentMethod === 'bank_transfer' ? 'éŠ€è¡ŒæŒ¯è¾¼' :\n                         payment.paymentMethod === 'card' ? 'ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ' : 'å£åº§æŒ¯æ›¿'}\n                      </p>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"text-xs text-gray-500 font-mono\">\n                        {payment.transactionId || '-'}\n                      </p>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <span className={`px-3 py-1 text-xs rounded-full ${\n                        payment.paymentStatus === 'COMPLETED' ? 'bg-green-100 text-green-800' :\n                        payment.paymentStatus === 'PENDING' ? 'bg-yellow-100 text-yellow-800' :\n                        'bg-red-100 text-red-800'\n                      }`}>\n                        {payment.paymentStatus === 'COMPLETED' ? 'å®Œäº†' :\n                         payment.paymentStatus === 'PENDING' ? 'å‡¦ç†ä¸­' : 'å¤±æ•—'}\n                      </span>\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <p className=\"text-sm text-gray-600\">\n                        {new Date(payment.createdAt).toLocaleDateString('ja-JP')}\n                      </p>\n                      {payment.paidAt && (\n                        <p className=\"text-xs text-gray-400\">\n                          {new Date(payment.paidAt).toLocaleTimeString('ja-JP')}\n                        </p>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4\">\n                      <select\n                        value={payment.paymentStatus}\n                        onChange={(e) => updateStatus(payment.id, e.target.value)}\n                        className=\"text-sm border border-gray-300 rounded-lg px-2 py-1 focus:ring-2 focus:ring-blue-500\"\n                      >\n                        <option value=\"PENDING\">å‡¦ç†ä¸­</option>\n                        <option value=\"COMPLETED\">å®Œäº†</option>\n                        <option value=\"FAILED\">å¤±æ•—</option>\n                      </select>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {payments.length === 0 && (\n            <div className=\"text-center py-12 text-gray-500\">\n              æ±ºæ¸ˆå±¥æ­´ãŒã‚ã‚Šã¾ã›ã‚“\n            </div>\n          )}\n        </div>\n      </div>\n    </DashboardLayout>\n  )\n}\n","size_bytes":9913},"src/app/api/payments/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyToken } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function POST(request: NextRequest) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    \n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    const body = await request.json()\n    const { amount, paymentMethod } = body\n\n    if (!amount || amount <= 0) {\n      return NextResponse.json({ error: 'æœ‰åŠ¹ãªé‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„' }, { status: 400 })\n    }\n\n    if (!['bank_transfer', 'card', 'direct_debit'].includes(paymentMethod)) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªæ”¯æ‰•ã„æ–¹æ³•ã§ã™' }, { status: 400 })\n    }\n\n    // Paymentãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆ\n    const payment = await prisma.payment.create({\n      data: {\n        userId: decoded.userId,\n        amount: parseFloat(amount),\n        paymentMethod,\n        paymentStatus: paymentMethod === 'bank_transfer' ? 'PENDING' : 'PENDING',\n        description: `${paymentMethod === 'bank_transfer' ? 'éŠ€è¡ŒæŒ¯è¾¼' : paymentMethod === 'card' ? 'ã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆ' : 'å£åº§æŒ¯æ›¿'}ã«ã‚ˆã‚‹æ”¯æ‰•ã„`,\n      }\n    })\n\n    // æ”¯æ‰•ã„æ–¹æ³•ã«å¿œã˜ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™\n    let responseData: any = {\n      paymentId: payment.id,\n      amount: payment.amount,\n      paymentMethod: payment.paymentMethod,\n      status: payment.paymentStatus\n    }\n\n    if (paymentMethod === 'card') {\n      // Squareæ±ºæ¸ˆURLã‚’ç”Ÿæˆï¼ˆå®Ÿè£…æ™‚ã¯Square APIã‚’ä½¿ç”¨ï¼‰\n      // ç¾åœ¨ã¯ãƒ€ãƒŸãƒ¼URLã‚’è¿”ã™\n      responseData.paymentUrl = `/api/payments/${payment.id}/square`\n    } else if (paymentMethod === 'direct_debit') {\n      // ä¼šè²»ãƒšã‚¤URLã‚’ç”Ÿæˆï¼ˆå®Ÿè£…æ™‚ã¯ä¼šè²»ãƒšã‚¤APIã‚’ä½¿ç”¨ï¼‰\n      // ç¾åœ¨ã¯ãƒ€ãƒŸãƒ¼URLã‚’è¿”ã™\n      responseData.paymentUrl = `/api/payments/${payment.id}/kaihipay`\n    } else if (paymentMethod === 'bank_transfer') {\n      // éŠ€è¡ŒæŒ¯è¾¼ã®å ´åˆã¯ã€æŒ¯è¾¼å…ˆæƒ…å ±ã‚’è¿”ã™\n      responseData.bankInfo = {\n        bankName: 'ç›¸æ„›ä¿¡ç”¨çµ„åˆ',\n        branchName: 'æœ¬åº—å–¶æ¥­éƒ¨',\n        accountType: 'æ™®é€š',\n        accountNumber: '0170074',\n        accountHolder: 'ãƒ‰ï¼‰ã‚·ãƒ³ ã‚¸ãƒ£ãƒ‘ãƒ³'\n      }\n    }\n\n    return NextResponse.json({\n      message: 'æ±ºæ¸ˆã‚’é–‹å§‹ã—ã¾ã—ãŸ',\n      data: responseData\n    })\n\n  } catch (error) {\n    console.error('Payment creation error:', error)\n    return NextResponse.json({ error: 'æ±ºæ¸ˆã®é–‹å§‹ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n\nexport async function GET(request: NextRequest) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    \n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ±ºæ¸ˆå±¥æ­´ã‚’å–å¾—\n    const payments = await prisma.payment.findMany({\n      where: {\n        userId: decoded.userId\n      },\n      orderBy: {\n        createdAt: 'desc'\n      },\n      take: 20 // æœ€æ–°20ä»¶ã‚’å–å¾—\n    })\n\n    return NextResponse.json({\n      data: payments\n    })\n\n  } catch (error) {\n    console.error('Payment fetch error:', error)\n    return NextResponse.json({ error: 'æ±ºæ¸ˆå±¥æ­´ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":3665},"src/app/api/admin/shipments/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyAdminToken } from '@/lib/adminAuth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function GET(request: NextRequest) {\n  try {\n    const { error, status } = await verifyAdminToken(request)\n    \n    if (error) {\n      return NextResponse.json({ error }, { status })\n    }\n\n    const shipments = await prisma.shipment.findMany({\n      orderBy: { createdAt: 'desc' },\n      include: {\n        shipper: {\n          select: {\n            id: true,\n            companyName: true,\n            email: true\n          }\n        },\n        _count: {\n          select: {\n            offers: true\n          }\n        }\n      }\n    })\n\n    return NextResponse.json({ shipments })\n\n  } catch (error) {\n    console.error('Admin shipments error:', error)\n    return NextResponse.json({ error: 'è·ç‰©ä¸€è¦§ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n\nexport async function PATCH(request: NextRequest) {\n  try {\n    const { error, status } = await verifyAdminToken(request)\n    \n    if (error) {\n      return NextResponse.json({ error }, { status })\n    }\n\n    const { shipmentId, status: newStatus } = await request.json()\n\n    if (!shipmentId || !newStatus) {\n      return NextResponse.json({ error: 'è·ç‰©IDã¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒå¿…è¦ã§ã™' }, { status: 400 })\n    }\n\n    const updatedShipment = await prisma.shipment.update({\n      where: { id: shipmentId },\n      data: { status: newStatus }\n    })\n\n    return NextResponse.json({\n      message: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°ã—ã¾ã—ãŸ',\n      shipment: updatedShipment\n    })\n\n  } catch (error) {\n    console.error('Update shipment error:', error)\n    return NextResponse.json({ error: 'ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":1829},"src/app/api/verifications/[id]/review/route.ts":{"content":"import { NextRequest, NextResponse } from 'next/server'\nimport { prisma } from '@/lib/prisma'\nimport { verifyToken } from '@/lib/auth'\n\nexport const dynamic = 'force-dynamic'\n\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const token = request.headers.get('authorization')?.replace('Bearer ', '')\n    if (!token) {\n      return NextResponse.json({ error: 'èªè¨¼ãŒå¿…è¦ã§ã™' }, { status: 401 })\n    }\n\n    const decoded = await verifyToken(token)\n    if (!decoded) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªãƒˆãƒ¼ã‚¯ãƒ³ã§ã™' }, { status: 401 })\n    }\n\n    const admin = await prisma.user.findUnique({\n      where: { id: decoded.userId }\n    })\n\n    if (!admin?.isAdmin) {\n      return NextResponse.json({ error: 'ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™' }, { status: 403 })\n    }\n\n    const body = await request.json()\n    const { status, rejectionReason } = body\n\n    if (!['APPROVED', 'REJECTED'].includes(status)) {\n      return NextResponse.json({ error: 'ç„¡åŠ¹ãªã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã§ã™' }, { status: 400 })\n    }\n\n    const verification = await prisma.verification.update({\n      where: { id: params.id },\n      data: {\n        status,\n        rejectionReason: status === 'REJECTED' ? rejectionReason : null,\n        reviewedBy: decoded.userId,\n        reviewedAt: new Date()\n      }\n    })\n\n    if (status === 'APPROVED') {\n      const allUserVerifications = await prisma.verification.findMany({\n        where: { \n          userId: verification.userId,\n          documentType: { in: ['BUSINESS_LICENSE', 'TRANSPORT_LICENSE', 'INSURANCE'] }\n        }\n      })\n\n      const allApproved = allUserVerifications.every(v => v.status === 'APPROVED')\n\n      if (allApproved) {\n        await prisma.user.update({\n          where: { id: verification.userId },\n          data: { verificationStatus: 'APPROVED' }\n        })\n      }\n    }\n\n    return NextResponse.json({ verification })\n  } catch (error) {\n    console.error('Review verification error:', error)\n    return NextResponse.json({ error: 'å¯©æŸ»ã«å¤±æ•—ã—ã¾ã—ãŸ' }, { status: 500 })\n  }\n}\n","size_bytes":2118}},"version":2}